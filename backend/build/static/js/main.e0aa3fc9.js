/*! For license information please see main.e0aa3fc9.js.LICENSE.txt */
!function(){var t={2127:function(t,e,n){"use strict";var r=n(2538);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},7872:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},3663:function(t,e,n){var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var p=n||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?p.strict?o(t,e):t==e:function(t,e,n){var o,p;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=a(t),v=a(e);if(d!==v)return!1;if(d||v)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var y=f(t),g=f(e);if(y!==g)return!1;if(y||g){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var m=r(t),_=r(e)}catch(x){return!1}if(m.length!==_.length)return!1;for(m.sort(),_.sort(),o=m.length-1;o>=0;o--)if(m[o]!=_[o])return!1;for(o=m.length-1;o>=0;o--)if(!c(t[p=m[o]],e[p],n))return!1;return!0}(t,e,p))}function h(t){return null===t||void 0===t}function f(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},2538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7872);function i(t,e,n){if(null!==t)for(var r,o,a,s,l,u,c,h,f=0,p=0,d=t.type,v="FeatureCollection"===d,y="Feature"===d,g=v?t.features.length:1,m=0;m<g;m++){l=(h=!!(c=v?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<l;_++){var x=0,b=0;if(null!==(s=h?c.geometries[_]:c)){u=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,m,x,b))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,m,x,b))return!1;p++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-f;o++){if(!1===e(u[r][o],p,m,x,b))return!1;p++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,o=0;o<u[r].length;o++){for(a=0;a<u[r][o].length-f;a++){if(!1===e(u[r][o][a],p,m,x,b))return!1;p++}b++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function l(t,e){s(t,(function(t,n,i,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:s,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,u=0,c=0,h=0;return!1!==i(t,(function(i,s,f,p,d){if(void 0===l||n>u||p>c||d>h)return l=i,u=n,c=p,h=d,void(a=0);var v=r.lineString([l,i],t.properties);if(!1===e(v,n,o,d,a))return!1;a++,l=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,l,e);case"MultiPoint":return o<0&&(o=u.length+o),r.point(u[o],l,e);case"LineString":return s<0&&(s=u.length+s),r.point(u[s],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s),r.point(u[a][s],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),r.point(u[o][s],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s),r.point(u[o][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),r.lineString([u[s],u[s+1]],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s-1),r.lineString([u[a][s],u[a][s+1]],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),r.lineString([u[o][s],u[o][s+1]],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s-1),r.lineString([u[o][a][s],u[o][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}},4037:function(t,e,n){"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:function(t,e,n){"use strict";var r=n(3350),i=n(2506),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(f){u=null}t.exports=function(t){var e=s(r,a,arguments);l&&u&&(l(e,"length").configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))}));return e};var h=function(){return s(r,o,arguments)};u?u(t.exports,"apply",{value:h}):t.exports.apply=h},4161:function(t,e,n){"use strict";var r=n(2110),i=n(4613),o=n(5021),a=n(5465).orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],a=0;a<t.length;a++){var s=t[a];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var l=[e,n,r,i],u=l.slice();for(a=0;a<t.length;a++)o(t[a],l)||u.push(t[a]);return function(t){t.sort(_);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&p(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),a=new r(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(t);for(var s,u=[],c=0;c<i.length;c++){var h=i[c];a.remove(h),s=v(h,s),u.push(s)}var f=new r(16);for(c=0;c<u.length;c++)f.insert(d(u[c]));for(var g=e*e,m=n*n;u.length;){var x=u.shift(),b=x.p,w=x.next.p,k=y(b,w);if(!(k<m)){var E=k/g;(h=l(a,x.prev.p,b,w,x.next.next.p,E,f))&&Math.min(y(h,b),y(h,w))<=E&&(u.push(x),u.push(v(h,x)),a.remove(h),f.remove(x),f.insert(d(x)),f.insert(d(x.next)))}}x=s;var S=[];do{S.push(x.p),x=x.next}while(x!==s);return S.push(x.p),S}function l(t,e,n,r,o,a,s){for(var l=new i([],u),h=t.data;h;){for(var p=0;p<h.children.length;p++){var d=h.children[p],v=h.leaf?g(d,n,r):c(n,r,d);v>a||l.push({node:d,dist:v})}for(;l.length&&!l.peek().node.children;){var y=l.pop(),m=y.node,_=g(m,e,n),x=g(m,r,o);if(y.dist<_&&y.dist<x&&f(n,m,s)&&f(r,m,s))return m}(h=l.pop())&&(h=h.node)}return null}function u(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var r=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=m(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=m(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:u,maxY:c}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(a=e)&&i!==o&&p(r,i,o)>0!==p(r,i,a)>0&&p(o,a,r)>0!==p(o,a,i)>0)return!1;return!0}function p(t,e,n){return a(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function v(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function g(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function m(t,e,n,r,i,o,a,s){var l,u,c,h,f=n-t,p=r-e,d=a-i,v=s-o,y=t-i,g=e-o,m=f*f+p*p,_=f*d+p*v,x=d*d+v*v,b=f*y+p*g,w=d*y+v*g,k=m*x-_*_,E=k,S=k;0===k?(u=0,E=1,h=w,S=x):(h=m*w-_*b,(u=_*w-x*b)<0?(u=0,h=w,S=x):u>E&&(u=E,h=w+_,S=x)),h<0?(h=0,-b<0?u=0:-b>m?u=E:(u=-b,E=m)):h>S&&(h=S,-b+_<0?u=0:-b+_>m?u=E:(u=-b+_,E=m));var T=(1-(c=0===h?0:h/S))*i+c*a-((1-(l=0===u?0:u/E))*t+l*n),M=(1-c)*o+c*s-((1-l)*e+l*r);return T*T+M*M}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=s,t.exports.default=s},2110:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[r],p=i,d=o;for(e(n,i,r),a(n[o],f)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[i],f)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));v(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);v(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=n-e;d++){var v=a(t,0,d,this.toBBox),y=a(t,d,n,this.toBBox),g=(i=v,o=y,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),m=c(v)+c(y);g<f?(f=g,r=d,p=m<p?m:p):g===f&&m<p&&(p=m,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},5465:function(t,e){!function(t){"use strict";var e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){var o,a,s,l,u=e[0],c=r[0],h=0,f=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=r[++f]);var p=0;if(h<t&&f<n)for(c>u==c>-u?(s=o-((a=u+o)-u),u=e[++h]):(s=o-((a=c+o)-c),c=r[++f]),o=a,0!==s&&(i[p++]=s);h<t&&f<n;)c>u==c>-u?(s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h]):(s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++f]),o=a,0!==s&&(i[p++]=s);for(;h<t;)s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h],o=a,0!==s&&(i[p++]=s);for(;f<n;)s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++f],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function i(t){return new Float64Array(t)}var o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,l=i(4),u=i(8),c=i(12),h=i(16),f=i(4);t.orient2d=function(t,i,p,d,v,y){var g=(i-y)*(p-v),m=(t-v)*(d-y),_=g-m;if(0===g||0===m||g>0!=m>0)return _;var x=Math.abs(g+m);return Math.abs(_)>=o*x?_:-function(t,i,o,p,d,v,y){var g,m,_,x,b,w,k,E,S,T,M,I,C,P,A,L,D,R,O=t-d,z=o-d,N=i-v,F=p-v;b=(A=(E=O-(k=(w=e*O)-(w-O)))*(T=F-(S=(w=e*F)-(w-F)))-((P=O*F)-k*S-E*S-k*T))-(M=A-(D=(E=N-(k=(w=e*N)-(w-N)))*(T=z-(S=(w=e*z)-(w-z)))-((L=N*z)-k*S-E*S-k*T))),l[0]=A-(M+b)+(b-D),b=(C=P-((I=P+M)-(b=I-P))+(M-b))-(M=C-L),l[1]=C-(M+b)+(b-L),b=(R=I+M)-I,l[2]=I-(R-b)+(M-b),l[3]=R;var B=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,l),j=a*y;if(B>=j||-B>=j)return B;if(g=t-(O+(b=t-O))+(b-d),_=o-(z+(b=o-z))+(b-d),m=i-(N+(b=i-N))+(b-v),x=p-(F+(b=p-F))+(b-v),0===g&&0===m&&0===_&&0===x)return B;if(j=s*y+n*Math.abs(B),(B+=O*x+F*g-(N*_+z*m))>=j||-B>=j)return B;b=(A=(E=g-(k=(w=e*g)-(w-g)))*(T=F-(S=(w=e*F)-(w-F)))-((P=g*F)-k*S-E*S-k*T))-(M=A-(D=(E=m-(k=(w=e*m)-(w-m)))*(T=z-(S=(w=e*z)-(w-z)))-((L=m*z)-k*S-E*S-k*T))),f[0]=A-(M+b)+(b-D),b=(C=P-((I=P+M)-(b=I-P))+(M-b))-(M=C-L),f[1]=C-(M+b)+(b-L),b=(R=I+M)-I,f[2]=I-(R-b)+(M-b),f[3]=R;var U=r(4,l,4,f,u);b=(A=(E=O-(k=(w=e*O)-(w-O)))*(T=x-(S=(w=e*x)-(w-x)))-((P=O*x)-k*S-E*S-k*T))-(M=A-(D=(E=N-(k=(w=e*N)-(w-N)))*(T=_-(S=(w=e*_)-(w-_)))-((L=N*_)-k*S-E*S-k*T))),f[0]=A-(M+b)+(b-D),b=(C=P-((I=P+M)-(b=I-P))+(M-b))-(M=C-L),f[1]=C-(M+b)+(b-L),b=(R=I+M)-I,f[2]=I-(R-b)+(M-b),f[3]=R;var V=r(U,u,4,f,c);b=(A=(E=g-(k=(w=e*g)-(w-g)))*(T=x-(S=(w=e*x)-(w-x)))-((P=g*x)-k*S-E*S-k*T))-(M=A-(D=(E=m-(k=(w=e*m)-(w-m)))*(T=_-(S=(w=e*_)-(w-_)))-((L=m*_)-k*S-E*S-k*T))),f[0]=A-(M+b)+(b-D),b=(C=P-((I=P+M)-(b=I-P))+(M-b))-(M=C-L),f[1]=C-(M+b)+(b-L),b=(R=I+M)-I,f[2]=I-(R-b)+(M-b),f[3]=R;var G=r(V,c,4,f,h);return h[G-1]}(t,i,p,d,v,y,x)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},9396:function(t,e,n){"use strict";var r=n(4892),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=n(4510)(),u=s&&l,c=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!==typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;u?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)c(t,o[s],e[o[s]],n[o[s]])};h.supportsDescriptors=!!u,t.exports=h},7861:function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},2601:function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)"undefined"===typeof e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},3163:function(t,e,n){if(t.exports)var r=n(5047);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new r(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},5047:function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},5107:function(t,e,n){t.exports&&(t.exports={DBSCAN:n(7861),KMEANS:n(2601),OPTICS:n(3163),PriorityQueue:n(5047)})},7089:function(t){"use strict";function e(t,e,r){r=r||2;var o,a,s,l,h,f,d,v=e&&e.length,y=v?e[0]*r:t.length,g=n(t,0,y,r,!0),m=[];if(!g||g.next===g.prev)return m;if(v&&(g=function(t,e,r,i){var o,a,s,l=[];for(o=0,a=e.length;o<a;o++)(s=n(t,e[o]*i,o<a-1?e[o+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),l.push(p(s));for(l.sort(u),o=0;o<l.length;o++)r=c(l[o],r);return r}(t,e,g,r)),t.length>80*r){o=s=t[0],a=l=t[1];for(var _=r;_<y;_+=r)(h=t[_])<o&&(o=h),(f=t[_+1])<a&&(a=f),h>s&&(s=h),f>l&&(l=f);d=0!==(d=Math.max(s-o,l-a))?32767/d:0}return i(g,m,r,o,a,d,0),m}function n(t,e,n,r,i){var o,a;if(i===T(t,e,n,r)>0)for(o=e;o<n;o+=r)a=k(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=k(o,t[o],t[o+1],a);return a&&g(a,a.next)&&(E(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,u,c,h,p){if(t){!p&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,u,c,h);for(var d,v,y=t;t.prev!==t.next;)if(d=t.prev,v=t.next,h?a(t,u,c,h):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),E(t),t=v.next,y=v.next;else if((t=v)===y){p?1===p?i(t=s(r(t),e,n),e,n,u,c,h,2):2===p&&l(t,e,n,u,c,h):i(r(t),e,n,u,c,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,f=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,v=r.next;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=h&&v.y<=p&&d(i,s,o,l,a,u,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(y(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,p=a.y,v=s<l?s<u?s:u:l<u?l:u,g=c<h?c<p?c:p:h<p?h:p,m=s>l?s>u?s:u:l>u?l:u,_=c>h?c>p?c:p:h>p?h:p,x=f(v,g,e,n,r),b=f(m,_,e,n,r),w=t.prevZ,k=t.nextZ;w&&w.z>=x&&k&&k.z<=b;){if(w.x>=v&&w.x<=m&&w.y>=g&&w.y<=_&&w!==i&&w!==a&&d(s,c,l,h,u,p,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,k.x>=v&&k.x<=m&&k.y>=g&&k.y<=_&&k!==i&&k!==a&&d(s,c,l,h,u,p,k.x,k.y)&&y(k.prev,k,k.next)>=0)return!1;k=k.nextZ}for(;w&&w.z>=x;){if(w.x>=v&&w.x<=m&&w.y>=g&&w.y<=_&&w!==i&&w!==a&&d(s,c,l,h,u,p,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;k&&k.z<=b;){if(k.x>=v&&k.x<=m&&k.y>=g&&k.y<=_&&k!==i&&k!==a&&d(s,c,l,h,u,p,k.x,k.y)&&y(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,a=i.next.next;!g(o,a)&&m(o,i,i.next,a)&&b(o,a)&&b(a,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),E(i),E(i.next),i=t=a),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,a,s){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=w(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,e,n,o,a,s,0),void i(c,e,n,o,a,s,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&d(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),b(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,p=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var i=w(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&m(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||g(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,n,r){var i=x(y(t,e,n)),o=x(y(t,e,r)),a=x(y(n,r,t)),s=x(y(n,r,e));return i!==o&&a!==s||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==a||!_(n,t,r))||!(0!==s||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function w(t,e){var n=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function k(t,e,n,r){var i=new S(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(T(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(T(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},222:function(t){"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!==typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),a=Math.max(0,r.length-o.length),s=[],l=0;l<a;l++)s.push("$"+l);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))})),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}},3350:function(t,e,n){"use strict";var r=n(222);t.exports=Function.prototype.bind||r},4583:function(t){"use strict";var e=function(){return"string"===typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(i){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"===typeof r&&""!==function(){}.bind().name},t.exports=e},4042:function(t,e,n){var r=n(9951),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function a(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!a(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!a(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},9951:function(t,e,n){var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var p=n||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?p.strict?o(t,e):t==e:function(t,e,n){var o,p;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=a(t),v=a(e);if(d!==v)return!1;if(d||v)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var y=f(t),g=f(e);if(y!==g)return!1;if(y||g){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var m=r(t),_=r(e)}catch(x){return!1}if(m.length!==_.length)return!1;for(m.sort(),_.sort(),o=m.length-1;o>=0;o--)if(m[o]!=_[o])return!1;for(o=m.length-1;o>=0;o--)if(!c(t[p=m[o]],e[p],n))return!1;return!0}(t,e,p))}function h(t){return null===t||void 0===t}function f(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},9234:function(t,e,n){var r=n(2968),i=n(7872),o=n(2538),a=n(2127).Z,s=o.featureEach,l=(o.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},2968:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[r],p=i,d=o;for(e(n,i,r),a(n[o],f)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[i],f)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));v(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);v(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=n-e;d++){var v=a(t,0,d,this.toBBox),y=a(t,d,n,this.toBBox),g=(i=v,o=y,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),m=c(v)+c(y);g<f?(f=g,r=d,p=m<p?m:p):g===f&&m<p&&(p=m,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2506:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(P){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(t){try{return l(arguments,"callee").get}catch(e){return u}}}():u,h=n(697)(),f=n(2203)(),p=Object.getPrototypeOf||(f?function(t){return t.__proto__}:null),d={},v="undefined"!==typeof Uint8Array&&p?p(Uint8Array):r,y={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&p?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&p?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h&&p?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h&&p?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&p?p(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":v,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(p)try{null.error}catch(P){var g=p(p(P));y["%Error.prototype%"]=g}var m=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&p&&(n=p(i.prototype))}return y[e]=n,n},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(3350),b=n(8316),w=x.call(Function.call,Array.prototype.concat),k=x.call(Function.apply,Array.prototype.splice),E=x.call(Function.call,String.prototype.replace),S=x.call(Function.call,String.prototype.slice),T=x.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,C=function(t,e){var n,r=t;if(b(_,r)&&(r="%"+(n=_[r])[0]+"%"),b(y,r)){var o=y[r];if(o===d&&(o=m(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=S(t,0,1),n=S(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(t,M,(function(t,e,n,i){r[r.length]=n?E(i,I,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=C("%"+r+"%",e),s=o.name,u=o.value,c=!1,h=o.alias;h&&(r=h[0],k(n,w([0,1],h)));for(var f=1,p=!0;f<n.length;f+=1){var d=n[f],v=S(d,0,1),g=S(d,-1);if(('"'===v||"'"===v||"`"===v||'"'===g||"'"===g||"`"===g)&&v!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&p||(c=!0),b(y,s="%"+(r+="."+d)+"%"))u=y[s];else if(null!=u){if(!(d in u)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var m=l(u,d);u=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[d]}else p=b(u,d),u=u[d];p&&!c&&(y[s]=u)}}return u}},4510:function(t,e,n){"use strict";var r=n(2506)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},2203:function(t){"use strict";var e={foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof n)}},697:function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:function(t,e,n){"use strict";var r=n(3297);t.exports=function(){return r()&&!!Symbol.toStringTag}},8316:function(t,e,n){"use strict";var r=n(3350);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},5450:function(t,e,n){"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},a=function(t){return!!o(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},2833:function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(4707)();t.exports=function(t){return"object"===typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(e){return!1}}(t):"[object Date]"===i.call(t))}},1146:function(t,e,n){"use strict";var r,i,o,a,s=n(4037),l=n(4707)();if(l){r=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),o={};var u=function(){throw o};a={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=u)}var c=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!==typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,a)}catch(n){return n===o}}:function(t){return!(!t||"object"!==typeof t&&"function"!==typeof t)&&"[object RegExp]"===c(t)}},5483:function(t,e,n){var r=n(8416).default,i=n(6115).default,o=n(3515).default,a=n(1588).default,s=n(3808).default,l=n(4993).default,u=n(1589).default,c=n(861).default,h=n(7424).default,f=n(4704).default,p=n(6690).default,d=n(9728).default,v=n(1655).default,y=n(6389).default,g=n(3496).default;t.exports=function(){"use strict";var t,e,n;function m(r,i){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return m(["exports"],(function(t){var e,n,r,m="undefined"!=typeof self?self:{},_="2.15.0",x={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==e){var t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{e=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):t}catch(m){e=t}}return e},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!x.API_URL)return null;try{var e=new URL(x.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},b={supported:!1,testSupport:function(t){!w&&r&&(k?E(t):n=t)}},w=!1,k=!1;function E(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.isContextLost())return;b.supported=!0}catch(t){}t.deleteTexture(e),w=!0}m.document&&((r=m.document.createElement("img")).onload=function(){n&&E(n),n=null,k=!0},r.onerror=function(){w=!0,n=null},r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var S="01";function T(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M=I;function I(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}I.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var C=T(M),P=A;function A(t,e){this.x=t,this.y=e}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(t){return t instanceof A?t:Array.isArray(t)?new A(t[0],t[1]):t};var L=T(P),D=Math.PI/180,R=180/Math.PI;function O(t){return t*D}function z(t){return t*R}var N=[[0,0],[1,0],[1,1],[0,1]];function F(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function B(t,e,n,r){var i=new C(t,e,n,r);return function(t){return i.solve(t)}}var j=B(.25,.1,.25,1);function U(t,e,n){return Math.min(n,Math.max(e,t))}function V(t,e,n){return(n=U((n-t)/(e-t),0,1))*n*(3-2*n)}function G(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function q(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))}function Z(t){var e=[];for(var n in t)e.push(t[n]);return e}function W(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}var X=1;function H(){return X++}function Y(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function K(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function J(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Q(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function $(t,e){return-1!==t.indexOf(e,t.length-e.length)}function tt(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function et(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function nt(t){return Array.isArray(t)?t.map(nt):"object"==typeof t&&t?tt(t,nt):t}var rt={};function it(t){rt[t]||("undefined"!=typeof console&&console.warn(t),rt[t]=!0)}function ot(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function at(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function st(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function lt(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var ut=null;function ct(t){if(null==ut){var e=t.navigator?t.navigator.userAgent:null;ut=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return ut}function ht(t){try{var e=m[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function ft(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}var pt,dt,vt="mapbox-tiles",yt=500,gt=50;function mt(){try{return m.caches}catch(t){}}function _t(){mt()&&!pt&&(pt=m.caches.open(vt))}function xt(t){var e=t.indexOf("?");if(e<0)return t;var n=function(t){var e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),r=n.filter((function(t){var e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return r.length?"".concat(t.slice(0,e),"?").concat(r.join("&")):t.slice(0,e)}var bt=1/0,wt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(wt);var kt=function(t){v(n,t);var e=y(n);function n(t,r,i){var o;return p(this,n),401===r&&Rt(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),(o=e.call(this,t)).status=r,o.url=i,o}return d(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(g(Error)),Et=st()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===m.location.protocol?m.parent:m).location.href},St=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Et())&&!/^\w+:/.test(n))){if(m.fetch&&m.Request&&m.AbortController&&m.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new m.AbortController,i=new m.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Et(),referrerPolicy:t.referrerPolicy,signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&Rt(n);"json"===t.type&&i.headers.set("Accept","application/json");var l=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&it(n.toString()),r&&o)return u(r);var l=Date.now();m.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return u(n,r,l)}return e(new kt(n.statusText,n.status,t.url))})).catch((function(n){"AbortError"!==n.name&&e(new Error("".concat(n.message," ").concat(t.url)))}))}},u=function(n,r,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){a||(r&&s&&function(t,e,n){if(_t(),pt){var r={status:e.status,statusText:e.statusText,headers:new m.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var i=lt(e.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());var o=r.headers.get("Expires");o&&(new Date(o).getTime()-n<42e4||function(t,e){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(t){dt=!1}dt?e(t.body):t.blob().then(e)}(e,(function(e){var n=new m.Response(e,r);_t(),pt&&pt.then((function(e){return e.put(xt(t.url),n)})).catch((function(t){return it(t.message)}))})))}}}(i,r,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){a||e(new Error(t.message))}))};return s?function(t,e){if(_t(),!pt)return e(null);var n=xt(t.url);pt.then((function(t){t.match(n).then((function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=lt(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,l):l(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(st()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new m.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new kt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},Tt=function(t,e){return St(W(t,{type:"arrayBuffer"}),e)};function Mt(t){var e=m.document.createElement("a");return e.href=t,e.protocol===m.document.location.protocol&&e.host===m.document.location.host}var It,Ct,Pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";It=[],Ct=0;var At=function t(e,n){if(b.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ct>=x.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return It.push(r),r}Ct++;var i=!1,o=function(){if(!i)for(i=!0,Ct--;It.length&&Ct<x.MAX_PARALLEL_IMAGE_REQUESTS;){var e=It.shift(),n=e.requestParameters,r=e.callback;e.cancelled||(e.cancel=t(n,r).cancel)}},a=Tt(e,(function(t,e,r,i){o(),t?n(t):e&&(m.createImageBitmap?function(t,e){var n=new m.Blob([new Uint8Array(t)],{type:"image/png"});m.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(e,(function(t,e){return n(t,e,r,i)})):function(t,e){var n=new m.Image,r=m.URL;n.onload=function(){e(null,n),r.revokeObjectURL(n.src),n.onload=null,m.requestAnimationFrame((function(){n.src=Pt}))},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new m.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?r.createObjectURL(i):Pt}(e,(function(t,e){return n(t,e,r,i)})))}));return{cancel:function(){a.cancel(),o()}}},Lt="NO_ACCESS_TOKEN";function Dt(t){return 0===t.indexOf("mapbox:")}function Rt(t){return x.API_URL_REGEX.test(t)}function Ot(t){return x.API_CDN_URL_REGEX.test(t)}function zt(t){return x.API_STYLE_REGEX.test(t)&&!Nt(t)}function Nt(t){return x.API_SPRITE_REGEX.test(t)}var Ft=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Bt(t){var e=t.match(Ft);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function jt(t){var e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}var Ut="mapbox.eventData";function Vt(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(m.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Gt=function(){function t(e){p(this,t),this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return d(t,[{key:"getStorageKey",value:function(t){var e=Vt(x.ACCESS_TOKEN),n="";return n=e&&e.u?m.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):x.ACCESS_TOKEN||"",t?"".concat(Ut,".").concat(t,":").concat(n):"".concat(Ut,":").concat(n)}},{key:"fetchEventData",value:function(){var t=ht("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=m.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=m.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){it("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var t=ht("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{m.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&m.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){it("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(t){}},{key:"postEvent",value:function(t,e,n,r){var i=this;if(x.EVENTS_URL){var o=Bt(x.EVENTS_URL);o.params.push("access_token=".concat(r||x.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString()},s=e?W(a,e):a,l={url:jt(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(t,e){return St(W(t,{method:"POST"}),e)}(l,(function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(t,e){this.queue.push(t),this.processRequests(e)}}]),t}(),qt=new(function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,"appUserTurnstile"))._customAccessToken=t,r}return d(n,[{key:"postTurnstileEvent",value:function(t,e){x.EVENTS_URL&&x.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return Dt(t)||Rt(t)}))&&this.queueRequest(Date.now(),e)}},{key:"processRequests",value:function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Vt(x.ACCESS_TOKEN),r=n?n.u:x.ACCESS_TOKEN,i=r!==this.eventData.tokenU;J(this.anonId)||(this.anonId=Y(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||a.getDate()!==s.getDate()}else i=!0;i?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:S,"enabled.telemetry":!1,userId:this.anonId},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t):this.processRequests()}}}]),n}(Gt)),Zt=qt.postTurnstileEvent.bind(qt),Wt=new(function(t){v(n,t);var e=y(n);function n(){var t;return p(this,n),(t=e.call(this,"map.load")).success={},t.skuToken="",t}return d(n,[{key:"postMapLoadEvent",value:function(t,e,n,r){this.skuToken=e,this.errorCb=r,x.EVENTS_URL&&(n||x.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(Lt)))}},{key:"processRequests",value:function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),J(this.anonId)||(this.anonId=Y()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:S,skuToken:this.skuToken,userId:this.anonId},(function(t){t?e.errorCb(t):r&&(e.success[r]=!0)}),t))}}}]),n}(Gt)),Xt=Wt.postMapLoadEvent.bind(Wt),Ht=new(function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.call(this,"gljs.performance")}return d(n,[{key:"postPerformanceEvent",value:function(t,e){x.EVENTS_URL&&(t||x.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}},{key:"processRequests",value:function(t){if(!this.pendingRequest&&0!==this.queue.length){var e,n=this.queue.shift(),r=n.timestamp,i=function(t){var e=m.performance.getEntriesByType("resource"),n=m.performance.getEntriesByType("mark"),r=function(t){var e={};if(t)for(var n in t)if("other"!==n){var r,i=f(t[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value,a="".concat(n,"ResolveRangeMin"),s="".concat(n,"ResolveRangeMax"),l="".concat(n,"RequestCount"),u="".concat(n,"RequestCachedCount");e[a]=Math.min(e[a]||1/0,o.startTime),e[s]=Math.max(e[s]||-1/0,o.responseEnd);var c=function(t){void 0===e[t]&&(e[t]=0),++e[t]};void 0!==o.transferSize&&0===o.transferSize&&c(u),c(l)}}catch(h){i.e(h)}finally{i.f()}}return e}(function(t,e){var n={};if(t){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e(o);void 0===n[a]&&(n[a]=[]),n[a].push(o)}}catch(s){i.e(s)}finally{i.f()}}return n}(e,ee)),i=m.devicePixelRatio,o=m.navigator.connection||m.navigator.mozConnection||m.navigator.webkitConnection,a={counters:[],metadata:[],attributes:[]},s=function(t,e,n){null!=n&&t.push({name:e,value:n.toString()})};for(var l in r)s(a.counters,l,r[l]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(s(a.counters,"interactionRangeMin",t.interactionRange[0]),s(a.counters,"interactionRangeMax",t.interactionRange[1])),n)for(var u=function(){var t=h[c],e=$t[t],r=n.find((function(t){return t.name===e}));r&&s(a.counters,e,r.startTime)},c=0,h=Object.keys($t);c<h.length;c++)u();return s(a.counters,"visibilityHidden",t.visibilityHidden),s(a.attributes,"style",function(t){if(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value.name.split("?")[0];if(zt(r)){var i=r.split("/").slice(-2);if(2===i.length)return"mapbox://styles/".concat(i[0],"/").concat(i[1])}}}catch(o){n.e(o)}finally{n.f()}}}(e)),s(a.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),s(a.attributes,"fogEnabled",t.fogEnabled?"true":"false"),s(a.attributes,"projection",t.projection),s(a.attributes,"zoom",t.zoom),s(a.metadata,"devicePixelRatio",i),s(a.metadata,"connectionEffectiveType",o?o.effectiveType:void 0),s(a.metadata,"navigatorUserAgent",m.navigator.userAgent),s(a.metadata,"screenWidth",m.screen.width),s(a.metadata,"screenHeight",m.screen.height),s(a.metadata,"windowWidth",m.innerWidth),s(a.metadata,"windowHeight",m.innerHeight),s(a.metadata,"mapWidth",t.width/i),s(a.metadata,"mapHeight",t.height/i),s(a.metadata,"webglRenderer",t.renderer),s(a.metadata,"webglVendor",t.vendor),s(a.metadata,"sdkVersion",_),s(a.metadata,"sdkIdentifier","mapbox-gl-js"),a}(n.performanceData),o=f(i.metadata);try{for(o.s();!(e=o.n()).done;)e.value}catch(c){o.e(c)}finally{o.f()}var a,s=f(i.counters);try{for(s.s();!(a=s.n()).done;)a.value}catch(c){s.e(c)}finally{s.f()}var l,u=f(i.attributes);try{for(u.s();!(l=u.n()).done;)l.value}catch(c){u.e(c)}finally{u.f()}this.postEvent(r,i,(function(){}),t)}}}]),n}(Gt)),Yt=Ht.postPerformanceEvent.bind(Ht),Kt=new(function(t){v(n,t);var e=y(n);function n(){var t;return p(this,n),(t=e.call(this,"map.auth")).success={},t.skuToken="",t}return d(n,[{key:"getSession",value:function(t,e,n,r){var i=this;if(x.API_URL&&x.SESSION_PATH){var o=Bt(x.API_URL+x.SESSION_PATH);o.params.push("sku=".concat(e||"")),o.params.push("access_token=".concat(r||x.ACCESS_TOKEN||""));var a={url:jt(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return St(W(t,{method:"GET"}),e)}(a,(function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(t,e,n,r){this.skuToken=e,this.errorCb=r,x.SESSION_PATH&&x.API_URL&&(n||x.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(Lt)))}},{key:"processRequests",value:function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(t){t?e.errorCb(t):r&&(e.success[r]=!0)}),t)}}}]),n}(Gt)),Jt=Kt.getSessionAPI.bind(Kt),Qt=new Set,$t={create:"create",load:"load",fullLoad:"fullLoad"},te={mark:function(t){m.performance.mark(t)},measure:function(t,e,n){m.performance.measure(t,e,n)}};function ee(t){var e=t.name.split("?")[0];return Ot(e)&&e.includes("mapbox-gl.js")?"javascript":Ot(e)&&e.includes("mapbox-gl.css")?"css":function(t){return x.API_FONTS_REGEX.test(t)}(e)?"fontRange":Nt(e)?"sprite":zt(e)?"style":function(t){return x.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}var ne,re,ie,oe,ae=m.performance;function se(t){var e=t?t.url.toString():void 0;return ae.getEntriesByName(e)}var le={now:function(){return void 0!==ie?ie:m.performance.now()},setNow:function(t){ie=t},restoreNow:function(){ie=void 0},frame:function(t){var e=m.requestAnimationFrame(t);return{cancel:function(){return m.cancelAnimationFrame(e)}}},getImageData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.width,r=t.height;oe||(oe=m.document.createElement("canvas"));var i=oe.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return(n>oe.width||r>oe.height)&&(oe.width=n,oe.height=r),i.clearRect(-e,-e,n+2*e,r+2*e),i.drawImage(t,0,0,n,r),i.getImageData(-e,-e,n+2*e,r+2*e)},resolveURL:function(t){return ne||(ne=m.document.createElement("a")),ne.href=t,ne.href},get devicePixelRatio(){return m.devicePixelRatio},get prefersReducedMotion(){return!!m.matchMedia&&(null==re&&(re=m.matchMedia("(prefers-reduced-motion: reduce)")),re.matches)}};function ue(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function ce(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var he=d((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t),W(this,n),this.type=e})),fe=function(t){v(n,t);var e=y(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),e.call(this,"error",W({error:t},r))}return d(n)}(he),pe=function(){function t(){p(this,t)}return d(t,[{key:"on",value:function(t,e){return this._listeners=this._listeners||{},ue(t,e,this._listeners),this}},{key:"off",value:function(t,e){return ce(t,e,this._listeners),ce(t,e,this._oneTimeListeners),this}},{key:"once",value:function(t,e){var n=this;return e?(this._oneTimeListeners=this._oneTimeListeners||{},ue(t,e,this._oneTimeListeners),this):new Promise((function(e){return n.once(t,e)}))}},{key:"fire",value:function(t,e){"string"==typeof t&&(t=new he(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],o=f(i);try{for(o.s();!(r=o.n()).done;)r.value.call(this,t)}catch(h){o.e(h)}finally{o.f()}var a,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],l=f(s);try{for(l.s();!(a=l.n()).done;){var u=a.value;ce(n,u,this._oneTimeListeners),u.call(this,t)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(W(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(t))}else t instanceof fe&&console.error(t.error);return this}},{key:"listens",value:function(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}},{key:"setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}]),t}(),de=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}function ye(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ge(t){if(Array.isArray(t))return t.map(ge);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=ge(t[n]);return e}return ye(t)}var me=function(t){v(n,t);var e=y(n);function n(t,r){var i;return p(this,n),(i=e.call(this,r)).message=r,i.key=t,i}return d(n)}(g(Error)),_e=me,xe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(this,t),this.parent=e,this.bindings={};var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var o=h(r.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(l){i.e(l)}finally{i.f()}}return d(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),be=xe,we={kind:"null"},ke={kind:"number"},Ee={kind:"string"},Se={kind:"boolean"},Te={kind:"color"},Me={kind:"object"},Ie={kind:"value"},Ce={kind:"collator"},Pe={kind:"formatted"},Ae={kind:"resolvedImage"};function Le(t,e){return{kind:"array",itemType:t,N:e}}function De(t){if("array"===t.kind){var e=De(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var Re=[we,ke,Ee,Se,Te,Pe,Me,Le(Ie),Ae];function Oe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Oe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Re;n<r.length;n++)if(!Oe(r[n],e))return null}return"Expected ".concat(De(t)," but found ").concat(De(e)," instead.")}function ze(t,e){return e.some((function(e){return e.kind===t.kind}))}function Ne(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Fe,Be={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function je(t){return(t=Math.round(t))<0?0:t>255?255:t}function Ue(t){return je("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Ve(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Ge(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Fe={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Be)return Be[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Ve(a.pop());case"rgb":return 3!==a.length?null:[Ue(a[0]),Ue(a[1]),Ue(a[2]),s];case"hsla":if(4!==a.length)return null;s=Ve(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Ve(a[1]),c=Ve(a[2]),h=c<=.5?c*(u+1):c+u-c*u,f=2*c-h;return[je(255*Ge(f,h,l+1/3)),je(255*Ge(f,h,l)),je(255*Ge(f,h,l-1/3)),s];default:return null}}return null}}catch(t){}var qe=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;p(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return d(t,[{key:"toString",value:function(){var t=this.toArray(),e=h(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(o,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}},{key:"toArray01",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[t/r,e/r,n/r,r]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var n=Fe(e);return n?new t(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),t}();qe.black=new qe(0,0,0,1),qe.white=new qe(1,1,1,1),qe.transparent=new qe(0,0,0,0),qe.red=new qe(1,0,0,1),qe.blue=new qe(0,0,1,1);var Ze=qe,We=function(){function t(e,n,r){p(this,t),this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return d(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),Xe=d((function t(e,n,r,i,o){p(this,t),this.text=e.normalize?e.normalize():e,this.image=n,this.scale=r,this.fontStack=i,this.textColor=o})),He=function(){function t(e){p(this,t),this.sections=e}return d(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"fromString",value:function(e){return new t([new Xe(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),Ye=function(){function t(e){p(this,t),this.name=e.name,this.available=e.available}return d(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function Ke(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Je(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Ze)return!0;if(t instanceof We)return!0;if(t instanceof He)return!0;if(t instanceof Ye)return!0;if(Array.isArray(t)){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(!Je(e.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof t){for(var r in t)if(!Je(t[r]))return!1;return!0}return!1}function Qe(t){if(null===t)return we;if("string"==typeof t)return Ee;if("boolean"==typeof t)return Se;if("number"==typeof t)return ke;if(t instanceof Ze)return Te;if(t instanceof We)return Ce;if(t instanceof He)return Pe;if(t instanceof Ye)return Ae;if(Array.isArray(t)){var e,n,r=t.length,i=f(t);try{for(i.s();!(n=i.n()).done;){var o=Qe(n.value);if(e){if(e===o)continue;e=Ie;break}e=o}}catch(a){i.e(a)}finally{i.f()}return Le(e||Ie,r)}return Me}function $e(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ze||t instanceof He||t instanceof Ye?t.toString():JSON.stringify(t)}var tn=function(){function t(e,n){p(this,t),this.type=e,this.value=n}return d(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ze?["rgba"].concat(this.value.toArray()):this.value instanceof He?this.value.serialize():this.value}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Je(e[1]))return n.error("invalid value");var r=e[1],i=Qe(r),o=n.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new t(i,r)}}]),t}(),en=tn,nn=function(){function t(e){p(this,t),this.name="ExpressionEvaluationError",this.message=e}return d(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),rn={string:Ee,number:ke,boolean:Se,object:Me},on=function(){function t(e,n){p(this,t),this.type=e,this.args=n}return d(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Oe(this.type,Qe(n)))return n;if(e===this.args.length-1)throw new nn("Expected value to be of type ".concat(De(this.type),", but found ").concat(De(Qe(n))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r,i=1,o=e[0];if("array"===o){var a,s;if(e.length>2){var l=e[1];if("string"!=typeof l||!(l in rn)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=rn[l],i++}else a=Ie;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}r=Le(a,s)}else r=rn[o];for(var u=[];i<e.length;i++){var c=n.parse(e[i],i,Ie);if(!c)return null;u.push(c)}return new t(r,u)}}]),t}(),an=on,sn=function(){function t(e){p(this,t),this.type=Pe,this.sections=e}return d(t,[{key:"evaluate",value:function(t){return new He(this.sections.map((function(e){var n=e.content.evaluate(t);return Qe(n)===Ae?new Xe("",n,null,null,null):new Xe($e(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=e.length-1;++a){var s=e[a];if(o&&"object"==typeof s&&!Array.isArray(s)){o=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,ke)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,Le(Ee))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,Te)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var f=n.parse(e[a],1,Ie);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new t(i)}}]),t}(),ln=function(){function t(e){p(this,t),this.type=Ae,this.input=e}return d(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=Ye.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,Ee);return r?new t(r):n.error("No image name provided.")}}]),t}(),un={"to-boolean":Se,"to-color":Te,"to-number":ke,"to-string":Ee},cn=function(){function t(e,n){p(this,t),this.type=e,this.args=n}return d(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,n,r,i=f(this.args);try{for(i.s();!(r=i.n()).done;){if(e=r.value.evaluate(t),n=null,e instanceof Ze)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Ke(e[0],e[1],e[2],e[3])))return new Ze(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(c){i.e(c)}finally{i.f()}throw new nn(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,l=f(this.args);try{for(l.s();!(a=l.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new nn("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?He.fromString($e(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ye.fromString($e(this.args[0].evaluate(t))):$e(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new sn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ln(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return n.error("Expected one argument.");for(var i=un[r],o=[],a=1;a<e.length;a++){var s=n.parse(e[a],a,Ie);if(!s)return null;o.push(s)}return new t(i,o)}}]),t}(),hn=cn,fn=["Unknown","Point","LineString","Polygon"],pn=function(){function t(){p(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return d(t,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?fn[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,e=this.featureDistanceData.scale,n=this.featureTileCoord,r=n.x,i=n.y;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(i*e-t[1])}return 0}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ze.parse(t)),e}}]),t}(),dn=function(){function t(e,n,r,i){p(this,t),this.name=e,this.type=n,this._evaluate=r,this.args=i}return d(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){var r,i=e[0],o=t.definitions[i];if(!o)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var a,s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=l.filter((function(t){var n=h(t,1)[0];return!Array.isArray(n)||n.length===e.length-1})),p=null,d=f(u);try{for(d.s();!(a=d.n()).done;){var v=h(a.value,2),y=v[0],g=v[1];p=new Un(n.registry,n.path,null,n.scope);for(var m=[],_=!1,x=1;x<e.length;x++){var b=e[x],w=Array.isArray(y)?y[x-1]:y.type,k=p.parse(b,1+m.length,w);if(!k){_=!0;break}m.push(k)}if(!_)if(Array.isArray(y)&&y.length!==m.length)p.error("Expected ".concat(y.length," arguments, but found ").concat(m.length," instead."));else{for(var E=0;E<m.length;E++){var S=Array.isArray(y)?y[E]:y.type,T=m[E];p.concat(E+1).checkSubtype(S,T.type)}if(0===p.errors.length)return new t(i,s,g,m)}}}catch(A){d.e(A)}finally{d.f()}if(1===u.length)(r=n.errors).push.apply(r,c(p.errors));else{for(var M=(u.length?u:l).map((function(t){var e;return e=h(t,1)[0],Array.isArray(e)?"(".concat(e.map(De).join(", "),")"):"(".concat(De(e.type),"...)")})).join(" | "),I=[],C=1;C<e.length;C++){var P=n.parse(e[C],1+I.length);if(!P)return null;I.push(De(P.type))}n.error("Expected arguments of type ".concat(M,", but found (").concat(I.join(", "),") instead."))}return null}},{key:"register",value:function(e,n){for(var r in t.definitions=n,n)e[r]=t}}]),t}(),vn=dn,yn=function(){function t(e,n,r){p(this,t),this.type=Ce,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=n}return d(t,[{key:"evaluate",value:function(t){return new We(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Se);if(!i)return null;var o=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Se);if(!o)return null;var a=null;return r.locale&&!(a=n.parse(r.locale,1,Ee))?null:new t(i,o,a)}}]),t}(),gn=8192;function mn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function _n(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function xn(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*gn),Math.round(r*i*gn)]}function bn(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function wn(t,e){for(var n,r,i,o=!1,a=0,s=e.length;a<s;a++)for(var l=e[a],u=0,c=l.length;u<c-1;u++){if(bn(t,l[u],l[u+1]))return!1;(r=l[u])[1]>(n=t)[1]!=(i=l[u+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(o=!o)}return o}function kn(t,e){for(var n=0;n<e.length;n++)if(wn(t,e[n]))return!0;return!1}function En(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Sn(t,e,n){var r,i,o,a,s,l,u,c=f(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,p=0;p<h.length-1;++p)if(0!=(l=[(s=h[p+1])[0]-(a=h[p])[0],s[1]-a[1]])[0]*(u=[(o=e)[0]-(i=t)[0],o[1]-i[1]])[1]-l[1]*u[0]&&En(i,o,a,s)&&En(a,s,i,o))return!0}catch(d){c.e(d)}finally{c.f()}return!1}function Tn(t,e){for(var n=0;n<t.length;++n)if(!wn(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Sn(t[r],t[r+1],e))return!1;return!0}function Mn(t,e){for(var n=0;n<e.length;n++)if(Tn(t,e[n]))return!0;return!1}function In(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=xn(t[i][a],n);mn(e,s),o.push(s)}r.push(o)}return r}function Cn(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=In(t[i],e,n);r.push(o)}return r}function Pn(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}mn(e,t)}function An(t,e,n,r){var i=Math.pow(2,r.z)*gn,o=[r.x*gn,r.y*gn],a=[];if(!t)return a;var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u,c=s.value,h=f(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,d=[p.x+o[0],p.y+o[1]];Pn(d,e,n,i),a.push(d)}}catch(v){h.e(v)}finally{h.f()}}}catch(v){l.e(v)}finally{l.f()}return a}function Ln(t,e,n,r){var i=Math.pow(2,r.z)*gn,o=[r.x*gn,r.y*gn],a=[];if(!t)return a;var s,l,u=f(t);try{for(u.s();!(s=u.n()).done;){var c,h=s.value,p=[],d=f(h);try{for(d.s();!(c=d.n()).done;){var v=c.value,y=[v.x+o[0],v.y+o[1]];mn(e,y),p.push(y)}}catch(w){d.e(w)}finally{d.f()}a.push(p)}}catch(w){u.e(w)}finally{u.f()}if(e[2]-e[0]<=i/2){(l=e)[0]=l[1]=1/0,l[2]=l[3]=-1/0;var g,m=f(a);try{for(m.s();!(g=m.n()).done;){var _,x=g.value,b=f(x);try{for(b.s();!(_=b.n()).done;)Pn(_.value,e,n,i)}catch(w){b.e(w)}finally{b.f()}}}catch(w){m.e(w)}finally{m.f()}}return a}var Dn=function(){function t(e,n){p(this,t),this.type=Se,this.geojson=e,this.geometries=n}return d(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){var o=In(e.coordinates,r,i),a=An(t.geometry(),n,r,i);if(!_n(n,r))return!1;var s,l=f(a);try{for(l.s();!(s=l.n()).done;)if(!wn(s.value,o))return!1}catch(d){l.e(d)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Cn(e.coordinates,r,i),c=An(t.geometry(),n,r,i);if(!_n(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!kn(h.value,u))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){var o=In(e.coordinates,r,i),a=Ln(t.geometry(),n,r,i);if(!_n(n,r))return!1;var s,l=f(a);try{for(l.s();!(s=l.n()).done;)if(!Tn(s.value,o))return!1}catch(d){l.e(d)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Cn(e.coordinates,r,i),c=Ln(t.geometry(),n,r,i);if(!_n(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!Mn(h.value,u))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Je(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(r,r.features[i].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new t(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}(),Rn=Dn;function On(t){if(t instanceof vn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Rn)return!1;var e=!0;return t.eachChild((function(t){e&&!On(t)&&(e=!1)})),e}function zn(t){if(t instanceof vn&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!zn(t)&&(e=!1)})),e}function Nn(t,e){if(t instanceof vn&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Nn(t,e)&&(n=!1)})),n}var Fn=function(){function t(e,n){p(this,t),this.type=n.type,this.name=e,this.boundExpression=n}return d(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");var r=e[1];return n.scope.has(r)?new t(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),Bn=Fn,jn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new be,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];p(this,t),this.registry=e,this.path=n,this.key=n.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=r}return d(t,[{key:"parse",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function n(t,e,n){return"assert"===n?new an(e,[t]):"coerce"===n?new hn(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof en)&&"resolvedImage"!==o.type.kind&&Vn(o)){var l=new pn;try{o=new en(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}},{key:"concat",value:function(e,n,r){var i="number"==typeof e?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new t(this.registry,i,n||null,o,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new _e(i,t))}},{key:"checkSubtype",value:function(t,e){var n=Oe(t,e);return n&&this.error(n),n}}]),t}(),Un=jn;function Vn(t){if(t instanceof Bn)return Vn(t.boundExpression);if(t instanceof vn&&"error"===t.name)return!1;if(t instanceof yn)return!1;if(t instanceof Rn)return!1;var e=t instanceof hn||t instanceof an,n=!0;return t.eachChild((function(t){n=e?n&&Vn(t):n&&t instanceof en})),!!n&&On(t)&&Nn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Gn(t,e){for(var n,r,i=t.length-1,o=0,a=i,s=0;o<=a;)if(n=t[s=Math.floor((o+a)/2)],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new nn("Input is not a number.");a=s-1}return 0}var qn=function(){function t(e,n,r){p(this,t),this.type=e,this.input=n,this.labels=[],this.outputs=[];var i,o=f(r);try{for(o.s();!(i=o.n()).done;){var a=h(i.value,2),s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}}catch(u){o.e(u)}finally{o.f()}}return d(t,[{key:"evaluate",value:function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Gn(e,r)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,n=f(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,n){if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(e[1],1,ke);if(!r)return null;var i=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],l=e[a+1],u=a,c=a+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new t(o,r,i)}}]),t}(),Zn=qn;function Wn(t,e,n){return t*(1-n)+e*n}var Xn=Object.freeze({__proto__:null,array:function(t,e,n){return t.map((function(t,r){return Wn(t,e[r],n)}))},color:function(t,e,n){return new Ze(Wn(t.r,e.r,n),Wn(t.g,e.g,n),Wn(t.b,e.b,n),Wn(t.a,e.a,n))},number:Wn}),Hn=.95047,Yn=1.08883,Kn=4/29,Jn=6/29,Qn=3*Jn*Jn,$n=Jn*Jn*Jn,tr=Math.PI/180,er=180/Math.PI;function nr(t){return t>$n?Math.pow(t,1/3):t/Qn+Kn}function rr(t){return t>Jn?t*t*t:Qn*(t-Kn)}function ir(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function or(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ar(t){var e=or(t.r),n=or(t.g),r=or(t.b),i=nr((.4124564*e+.3575761*n+.1804375*r)/Hn),o=nr((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-nr((.0193339*e+.119192*n+.9503041*r)/Yn)),alpha:t.a}}function sr(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*rr(e),n=Hn*rr(n),r=Yn*rr(r),new Ze(ir(3.2404542*n-1.5371385*e-.4985314*r),ir(-.969266*n+1.8760108*e+.041556*r),ir(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function lr(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var ur={forward:ar,reverse:sr,interpolate:function(t,e,n){return{l:Wn(t.l,e.l,n),a:Wn(t.a,e.a,n),b:Wn(t.b,e.b,n),alpha:Wn(t.alpha,e.alpha,n)}}},cr={forward:function(t){var e=ar(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*er;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*tr,n=t.c;return sr({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:lr(t.h,e.h,n),c:Wn(t.c,e.c,n),l:Wn(t.l,e.l,n),alpha:Wn(t.alpha,e.alpha,n)}}},hr=Object.freeze({__proto__:null,hcl:cr,lab:ur}),fr=function(){function t(e,n,r,i,o){p(this,t),this.type=e,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var a,s=f(o);try{for(s.s();!(a=s.n()).done;){var l=h(a.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(d){s.e(d)}finally{s.f()}}return d(t,[{key:"evaluate",value:function(e){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(e);var i=this.input.evaluate(e);if(i<=n[0])return r[0].evaluate(e);var o=n.length;if(i>=n[o-1])return r[o-1].evaluate(e);var a=Gn(n,i),s=t.interpolationFactor(this.interpolation,i,n[a],n[a+1]),l=r[a].evaluate(e),u=r[a+1].evaluate(e);return"interpolate"===this.operator?Xn[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?cr.reverse(cr.interpolate(cr.forward(l),cr.forward(u),s)):ur.reverse(ur.interpolate(ur.forward(l),ur.forward(u),s))}},{key:"eachChild",value:function(t){t(this.input);var e,n=f(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}],[{key:"interpolationFactor",value:function(t,e,n,r){var i=0;if("exponential"===t.name)i=pr(e,t.base,n,r);else if("linear"===t.name)i=pr(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new C(o[0],o[1],o[2],o[3]).solve(pr(e,1,n,r))}return i}},{key:"parse",value:function(e,n){var r=u(e),i=r[0],o=r[1],a=r[2],s=r.slice(3);if(!Array.isArray(o)||0===o.length)return n.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){var l=o[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:l}}else{if("cubic-bezier"!==o[0])return n.error("Unknown interpolation type ".concat(String(o[0])),1,0);var c=o.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(a=n.parse(a,2,ke)))return null;var h=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=Te:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var p=0;p<s.length;p+=2){var d=s[p],v=s[p+1],y=p+3,g=p+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);var m=n.parse(v,g,f);if(!m)return null;f=f||m.type,h.push([d,m])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new t(f,i,o,a,h):n.error("Type ".concat(De(f)," is not interpolatable."))}}]),t}();function pr(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var dr=fr,vr=function(){function t(e,n){p(this,t),this.type=e,this.args=n}return d(t,[{key:"evaluate",value:function(t){var e,n,r=null,i=0,o=f(this.args);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i++,(r=a.evaluate(t))&&r instanceof Ye&&!r.available&&(e||(e=r),r=null,i===this.args.length))return e;if(null!==r)break}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var o,a=[],s=f(e.slice(1));try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n.parse(l,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=i&&a.some((function(t){return Oe(i,t.type)}));return new t(c?Ie:r,a)}}]),t}(),yr=vr,gr=function(){function t(e,n){p(this,t),this.type=n.type,this.bindings=[].concat(e),this.result=n}return d(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=f(this.bindings);try{for(n.s();!(e=n.n()).done;)t(e.value[1])}catch(r){n.e(r)}finally{n.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],n=f(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],o=r[1];e.push(i,o.serialize())}}catch(a){n.e(a)}finally{n.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var r=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return n.error("Expected string, but found ".concat(typeof o," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=n.parse(e[i+1],i+1);if(!a)return null;r.push([o,a])}var s=n.parse(e[e.length-1],e.length-1,n.expectedType,r);return s?new t(r,s):null}}]),t}(),mr=gr,_r=function(){function t(e,n,r){p(this,t),this.type=e,this.index=n,this.input=r}return d(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new nn("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new nn("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new nn("Array index must be an integer, but found ".concat(e," instead."));return n[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,ke),i=n.parse(e[2],2,Le(n.expectedType||Ie));return r&&i?new t(i.type.itemType,r,i):null}}]),t}(),xr=_r,br=function(){function t(e,n){p(this,t),this.type=Se,this.needle=e,this.haystack=n}return d(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!Ne(e,["boolean","string","number","null"]))throw new nn("Expected first argument to be of type boolean, string, number or null, but found ".concat(De(Qe(e))," instead."));if(!Ne(n,["string","array"]))throw new nn("Expected second argument to be of type array or string, but found ".concat(De(Qe(n))," instead."));return n.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Ie),i=n.parse(e[2],2,Ie);return r&&i?ze(r.type,[Se,Ee,ke,we,Ie])?new t(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(De(r.type)," instead")):null}}]),t}(),wr=br,kr=function(){function t(e,n,r){p(this,t),this.type=ke,this.needle=e,this.haystack=n,this.fromIndex=r}return d(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Ne(e,["boolean","string","number","null"]))throw new nn("Expected first argument to be of type boolean, string, number or null, but found ".concat(De(Qe(e))," instead."));if(!Ne(n,["string","array"]))throw new nn("Expected second argument to be of type array or string, but found ".concat(De(Qe(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Ie),i=n.parse(e[2],2,Ie);if(!r||!i)return null;if(!ze(r.type,[Se,Ee,ke,we,Ie]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(De(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,ke);return o?new t(r,i,o):null}return new t(r,i)}}]),t}(),Er=kr,Sr=function(){function t(e,n,r,i,o,a){p(this,t),this.inputType=e,this.type=n,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}return d(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(Qe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],o={},a=f(r);try{for(a.s();!(t=a.n()).done;){var s=t.value,l=o[this.cases[s]];void 0===l?(o[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[l][1].push(s)}}catch(g){a.e(g)}finally{a.f()}for(var u=function(t){return"number"===e.inputType.kind?Number(t):t},c=0,p=i;c<p.length;c++){var d=h(p[c],2),v=d[0],y=d[1];n.push(1===y.length?u(y[0]):y.map(u)),n.push(this.outputs[v].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(e,n){if(e.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var o={},a=[],s=2;s<e.length-1;s+=2){var l=e[s],u=e[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,p=f(l);try{for(p.s();!(h=p.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Qe(d)))return null}else r=Qe(d);if(void 0!==o[String(d)])return c.error("Branch labels must be unique.");o[String(d)]=a.length}}catch(m){p.e(m)}finally{p.f()}var v=n.parse(u,s,i);if(!v)return null;i=i||v.type,a.push(v)}var y=n.parse(e[1],1,Ie);if(!y)return null;var g=n.parse(e[e.length-1],e.length-1,i);return g?"value"!==y.type.kind&&n.concat(1).checkSubtype(r,y.type)?null:new t(r,i,y,o,a,g):null}}]),t}(),Tr=Sr,Mr=function(){function t(e,n,r){p(this,t),this.type=e,this.branches=n,this.otherwise=r}return d(t,[{key:"evaluate",value:function(t){var e,n=f(this.branches);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}}catch(a){n.e(a)}finally{n.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=f(this.branches);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];t(i),t(o)}}catch(a){n.e(a)}finally{n.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=h(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],o=1;o<e.length-1;o+=2){var a=n.parse(e[o],o,Se);if(!a)return null;var s=n.parse(e[o+1],o+1,r);if(!s)return null;i.push([a,s]),r=r||s.type}var l=n.parse(e[e.length-1],e.length-1,r);return l?new t(r,i,l):null}}]),t}(),Ir=Mr,Cr=function(){function t(e,n,r,i){p(this,t),this.type=e,this.input=n,this.beginIndex=r,this.endIndex=i}return d(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Ne(e,["string","array"]))throw new nn("Expected first argument to be of type array or string, but found ".concat(De(Qe(e))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Ie),i=n.parse(e[2],2,ke);if(!r||!i)return null;if(!ze(r.type,[Le(Ie),Ee,Ie]))return n.error("Expected first argument to be of type array or string, but found ".concat(De(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,ke);return o?new t(r.type,r,i,o):null}return new t(r.type,r,i)}}]),t}(),Pr=Cr;function Ar(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Lr(t,e,n,r){return 0===r.compare(e,n)}function Dr(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){p(this,i),this.type=Se,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return d(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Qe(o),l=Qe(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new nn('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=Qe(o),c=Qe(a);if("string"!==u.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Ie);if(!o)return null;if(!Ar(n,o.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(De(o.type),"'."));var a=e.parse(t[2],2,Ie);if(!a)return null;if(!Ar(n,a.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(De(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(De(o.type),"' and '").concat(De(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new an(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new an(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Ce)))return null}return new i(o,a,s)}}]),i}()}var Rr=Dr("==",(function(t,e,n){return e===n}),Lr),Or=Dr("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!Lr(0,e,n,r)})),zr=Dr("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),Nr=Dr(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Fr=Dr("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Br=Dr(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),jr=function(){function t(e,n,r,i,o,a){p(this,t),this.type=Ee,this.number=e,this.locale=n,this.currency=r,this.unit=i,this.minFractionDigits=o,this.maxFractionDigits=a}return d(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,ke);if(!r)return null;var i=e[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=n.parse(i.locale,1,Ee)))return null;var a=null;if(i.currency&&!(a=n.parse(i.currency,1,Ee)))return null;var s=null;if(i.unit&&!(s=n.parse(i.unit,1,Ee)))return null;var l=null;if(i["min-fraction-digits"]&&!(l=n.parse(i["min-fraction-digits"],1,ke)))return null;var u=null;return i["max-fraction-digits"]&&!(u=n.parse(i["max-fraction-digits"],1,ke))?null:new t(r,o,a,s,l,u)}}]),t}(),Ur=function(){function t(e){p(this,t),this.type=ke,this.input=e}return d(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new nn("Expected value to be of type string or array, but found ".concat(De(Qe(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(De(r.type)," instead.")):new t(r):null}}]),t}(),Vr={"==":Rr,"!=":Or,">":Nr,"<":zr,">=":Br,"<=":Fr,array:an,at:xr,boolean:an,case:Ir,coalesce:yr,collator:yn,format:sn,image:ln,in:wr,"index-of":Er,interpolate:dr,"interpolate-hcl":dr,"interpolate-lab":dr,length:Ur,let:mr,literal:en,match:Tr,number:an,"number-format":jr,object:an,slice:Pr,step:Zn,string:an,"to-boolean":hn,"to-color":hn,"to-number":hn,"to-string":hn,var:Bn,within:Rn};function Gr(t,e){var n=h(e,4),r=n[0],i=n[1],o=n[2],a=n[3];r=r.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var s=a?a.evaluate(t):1,l=Ke(r,i,o,s);if(l)throw new nn(l);return new Ze(r/255*s,i/255*s,o/255*s,s)}function qr(t,e){return t in e}function Zr(t,e){var n=e[t];return void 0===n?null:n}function Wr(t){return{type:t}}vn.register(Vr,{error:[{kind:"error"},[Ee],function(t,e){var n=h(e,1)[0];throw new nn(n.evaluate(t))}],typeof:[Ee,[Ie],function(t,e){return De(Qe(h(e,1)[0].evaluate(t)))}],"to-rgba":[Le(ke,4),[Te],function(t,e){return h(e,1)[0].evaluate(t).toArray()}],rgb:[Te,[ke,ke,ke],Gr],rgba:[Te,[ke,ke,ke,ke],Gr],has:{type:Se,overloads:[[[Ee],function(t,e){return qr(h(e,1)[0].evaluate(t),t.properties())}],[[Ee,Me],function(t,e){var n=h(e,2),r=n[0],i=n[1];return qr(r.evaluate(t),i.evaluate(t))}]]},get:{type:Ie,overloads:[[[Ee],function(t,e){return Zr(h(e,1)[0].evaluate(t),t.properties())}],[[Ee,Me],function(t,e){var n=h(e,2),r=n[0],i=n[1];return Zr(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[Ie,[Ee],function(t,e){return Zr(h(e,1)[0].evaluate(t),t.featureState||{})}],properties:[Me,[],function(t){return t.properties()}],"geometry-type":[Ee,[],function(t){return t.geometryType()}],id:[Ie,[],function(t){return t.id()}],zoom:[ke,[],function(t){return t.globals.zoom}],pitch:[ke,[],function(t){return t.globals.pitch||0}],"distance-from-center":[ke,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[ke,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[ke,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[ke,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[Ie,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[ke,Wr(ke),function(t,e){var n,r=0,i=f(e);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(t)}catch(o){i.e(o)}finally{i.f()}return r}],"*":[ke,Wr(ke),function(t,e){var n,r=1,i=f(e);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(t)}catch(o){i.e(o)}finally{i.f()}return r}],"-":{type:ke,overloads:[[[ke,ke],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[ke],function(t,e){return-h(e,1)[0].evaluate(t)}]]},"/":[ke,[ke,ke],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[ke,[ke,ke],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[ke,[],function(){return Math.LN2}],pi:[ke,[],function(){return Math.PI}],e:[ke,[],function(){return Math.E}],"^":[ke,[ke,ke],function(t,e){var n=h(e,2),r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.sqrt(n.evaluate(t))}],log10:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))}],log2:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.sin(n.evaluate(t))}],cos:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.cos(n.evaluate(t))}],tan:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.tan(n.evaluate(t))}],asin:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.asin(n.evaluate(t))}],acos:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.acos(n.evaluate(t))}],atan:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.atan(n.evaluate(t))}],min:[ke,Wr(ke),function(t,e){return Math.min.apply(Math,c(e.map((function(e){return e.evaluate(t)}))))}],max:[ke,Wr(ke),function(t,e){return Math.max.apply(Math,c(e.map((function(e){return e.evaluate(t)}))))}],abs:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.abs(n.evaluate(t))}],round:[ke,[ke],function(t,e){var n=h(e,1)[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.floor(n.evaluate(t))}],ceil:[ke,[ke],function(t,e){var n=h(e,1)[0];return Math.ceil(n.evaluate(t))}],"filter-==":[Se,[Ee,Ie],function(t,e){var n=h(e,2),r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[Se,[Ie],function(t,e){var n=h(e,1)[0];return t.id()===n.value}],"filter-type-==":[Se,[Ee],function(t,e){var n=h(e,1)[0];return t.geometryType()===n.value}],"filter-<":[Se,[Ee,Ie],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o<a}],"filter-id-<":[Se,[Ie],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Se,[Ee,Ie],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o>a}],"filter-id->":[Se,[Ie],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Se,[Ee,Ie],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o<=a}],"filter-id-<=":[Se,[Ie],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Se,[Ee,Ie],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o>=a}],"filter-id->=":[Se,[Ie],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Se,[Ie],function(t,e){return h(e,1)[0].value in t.properties()}],"filter-has-id":[Se,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Se,[Le(Ee)],function(t,e){return h(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Se,[Le(Ie)],function(t,e){return h(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[Se,[Ee,Le(Ie)],function(t,e){var n=h(e,2),r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Se,[Ee,Le(Ie)],function(t,e){var n=h(e,2),r=n[0],i=n[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Se,overloads:[[[Se,Se],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[Wr(Se),function(t,e){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:Se,overloads:[[[Se,Se],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[Wr(Se),function(t,e){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(t))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[Se,[Se],function(t,e){return!h(e,1)[0].evaluate(t)}],"is-supported-script":[Se,[Ee],function(t,e){var n=h(e,1)[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[Ee,[Ee],function(t,e){return h(e,1)[0].evaluate(t).toUpperCase()}],downcase:[Ee,[Ee],function(t,e){return h(e,1)[0].evaluate(t).toLowerCase()}],concat:[Ee,Wr(Ie),function(t,e){return e.map((function(e){return $e(e.evaluate(t))})).join("")}],"resolved-locale":[Ee,[Ce],function(t,e){return h(e,1)[0].evaluate(t).resolvedLocale()}]});var Xr=Vr;function Hr(t){return{result:"success",value:t}}function Yr(t){return{result:"error",value:t}}function Kr(t){return"data-driven"===t["property-type"]}function Jr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Qr(t){return!!t.expression&&t.expression.interpolated}function $r(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ti(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ei(t){return t}function ni(t,e){var n,r,i,o="color"===e.type,a=t.stops&&"object"==typeof t.stops[0][0],s=a||!(a||void 0!==t.property),l=t.type||(Qr(e)?"exponential":"interval");if(o&&((t=ve({},t)).stops&&(t.stops=t.stops.map((function(t){return[t[0],Ze.parse(t[1])]}))),t.default=Ze.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!hr[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));if("exponential"===l)n=ai;else if("interval"===l)n=oi;else if("categorical"===l){n=ii,r=Object.create(null);var u,c=f(t.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;r[h[0]]=h[1]}}catch(E){c.e(E)}finally{c.f()}i=typeof t.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));n=si}if(a){for(var p={},d=[],v=0;v<t.stops.length;v++){var y=t.stops[v],g=y[0].zoom;void 0===p[g]&&(p[g]={zoom:g,type:t.type,property:t.property,default:t.default,stops:[]},d.push(g)),p[g].stops.push([y[0].value,y[1]])}for(var m=[],_=0,x=d;_<x.length;_++){var b=x[_];m.push([p[b].zoom,ni(p[b],e)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:dr.interpolationFactor.bind(void 0,w),zoomStops:m.map((function(t){return t[0]})),evaluate:function(n,r){var i=n.zoom;return ai({stops:m,base:t.base},e,i).evaluate(i,r)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:dr.interpolationFactor.bind(void 0,k),zoomStops:t.stops.map((function(t){return t[0]})),evaluate:function(o){var a=o.zoom;return n(t,e,a,r,i)}}}return{kind:"source",evaluate:function(o,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?ri(t.default,e.default):n(t,e,s,r,i)}}}function ri(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function ii(t,e,n,r,i){return ri(typeof n===i?r[n]:void 0,t.default,e.default)}function oi(t,e,n){if("number"!==$r(n))return ri(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Gn(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]}function ai(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==$r(n))return ri(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Gn(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=Xn[e.type]||ei;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=hr[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==i)return u(r,i,a)}}:u(s,l,a)}function si(t,e,n){return"color"===e.type?n=Ze.parse(n):"formatted"===e.type?n=He.fromString(n.toString()):"resolvedImage"===e.type?n=Ye.fromString(n.toString()):$r(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),ri(n,t.default,e.default)}var li=function(){function t(e,n){p(this,t),this.expression=e,this._warningHistory={},this._evaluator=new pn,this._defaultValue=n?function(t){return"color"===t.type&&(ti(t.default)||Array.isArray(t.default))?new Ze(0,0,0,0):"color"===t.type?Ze.parse(t.default)||null:void 0===t.default?null:t.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return d(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,n,r,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new nn("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}]),t}();function ui(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Xr}function ci(t,e){var n=new Un(Xr,[],e?function(t){var e={color:Te,string:Ee,number:ke,enum:Ee,boolean:Se,formatted:Pe,resolvedImage:Ae};return"array"===t.type?Le(e[t.value]||Ie,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Hr(new li(r,e)):Yr(n.errors)}var hi=function(){function t(e,n){p(this,t),this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!zn(n.expression)}return d(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}]),t}(),fi=function(){function t(e,n,r,i){p(this,t),this.kind=e,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==e&&!zn(n.expression),this.interpolationType=i}return d(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}},{key:"interpolationFactor",value:function(t,e,n){return this.interpolationType?dr.interpolationFactor(this.interpolationType,t,e,n):0}}]),t}();function pi(t,e){if("error"===(t=ci(t,e)).result)return t;var n=t.value.expression,r=On(n);if(!r&&!Kr(e))return Yr([new _e("","data expressions not supported")]);var i=Nn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Jr(e))return Yr([new _e("","zoom expressions not supported")]);var o=vi(n);return o||i?o instanceof _e?Yr([o]):o instanceof dr&&!Qr(e)?Yr([new _e("",'"interpolate" expressions cannot be used with this property')]):Hr(o?new fi(r?"camera":"composite",t.value,o.labels,o instanceof dr?o.interpolation:void 0):new hi(r?"constant":"source",t.value)):Yr([new _e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var di=function(){function t(e,n){p(this,t),this._parameters=e,this._specification=n,ve(this,ni(this._parameters,this._specification))}return d(t,null,[{key:"deserialize",value:function(e){return new t(e._parameters,e._specification)}},{key:"serialize",value:function(t){return{_parameters:t._parameters,_specification:t._specification}}}]),t}();function vi(t){var e=null;if(t instanceof mr)e=vi(t.result);else if(t instanceof yr){var n,r=f(t.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=vi(i))break}}catch(o){r.e(o)}finally{r.f()}}else(t instanceof Zn||t instanceof dr)&&t.input instanceof vn&&"zoom"===t.input.name&&(e=t);return e instanceof _e||t.eachChild((function(t){var n=vi(t);n instanceof _e?e=n:!e&&n?e=new _e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new _e("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}var yi=d((function t(e,n,r,i){p(this,t),this.message=(e?"".concat(e,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function gi(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=$r(n);if("object"!==l)return[new yi(e,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=void 0;i[c]?h=i[c]:r[c]?h=Ji:i["*"]?h=i["*"]:r["*"]&&(h=Ji),h?s=s.concat(h({key:(e?"".concat(e,"."):e)+u,value:n[u],valueSpec:r[c]||r["*"],style:o,styleSpec:a,object:n,objectKey:u},n)):s.push(new yi(e,n[u],'unknown property "'.concat(u,'"')))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new yi(e,n,'missing required property "'.concat(f,'"')));return s}function mi(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Ji;if("array"!==$r(e))return[new yi(o,e,"array expected, ".concat($r(e)," found"))];if(n.length&&e.length!==n.length)return[new yi(o,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new yi(o,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===$r(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(u,"]")}));return l}function _i(t){var e=t.key,n=t.value,r=t.valueSpec,i=$r(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new yi(e,n,"number expected, ".concat(i," found"))];if("minimum"in r){var o=r.minimum;if("array"===$r(r.minimum)&&(o=r.minimum[t.arrayIndex]),n<o)return[new yi(e,n,"".concat(n," is less than the minimum value ").concat(o))]}if("maximum"in r){var a=r.maximum;if("array"===$r(r.maximum)&&(a=r.maximum[t.arrayIndex]),n>a)return[new yi(e,n,"".concat(n," is greater than the maximum value ").concat(a))]}return[]}function xi(t){var e,n,r,i=t.valueSpec,o=ye(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===$r(t.value.stops)&&"array"===$r(t.value.stops[0])&&"object"===$r(t.value.stops[0][0]),c=gi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new yi(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(mi({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===$r(n)&&0===n.length&&e.push(new yi(t.key,n,"array must have at least one stop")),e},default:function(t){return Ji({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new yi(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new yi(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Qr(t.valueSpec)&&c.push(new yi(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Kr(t.valueSpec)?c.push(new yi(t.key,t.value,"property functions not supported")):s&&!Jr(t.valueSpec)&&c.push(new yi(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new yi(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==$r(o))return[new yi(s,o,"array expected, ".concat($r(o)," found"))];if(2!==o.length)return[new yi(s,o,"array length 2 expected, length ".concat(o.length," found"))];if(u){if("object"!==$r(o[0]))return[new yi(s,o,"object expected, ".concat($r(o[0])," found"))];if(void 0===o[0].zoom)return[new yi(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new yi(s,o,"object stop key must have value")];var l=ye(o[0].zoom);if("number"!=typeof l)return[new yi(s,o[0].zoom,"stop zoom values must be numbers")];if(r&&r>l)return[new yi(s,o[0].zoom,"stop zoom values must appear in ascending order")];l!==r&&(r=l,n=void 0,a={}),e=e.concat(gi({key:"".concat(s,"[0]"),value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:_i,value:f}}))}else e=e.concat(f({key:"".concat(s,"[0]"),value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return ui(ge(o[1]))?e.concat([new yi("".concat(s,"[1]"),o[1],"expressions are not allowed in function stops.")]):e.concat(Ji({key:"".concat(s,"[1]"),value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function f(t,r){var s=$r(t.value),l=ye(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new yi(t.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(e))]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new yi(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, ".concat(s," found");return Kr(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yi(t.key,u,c)]}return"categorical"!==o||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&"number"==typeof l&&"number"==typeof n&&void 0!==n&&l<n?[new yi(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new yi(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new yi(t.key,u,"integer expected, found ".concat(String(l)))]}}function bi(t){var e=("property"===t.expressionContext?pi:ci)(ge(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new yi("".concat(t.key).concat(e.key),t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new yi(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!zn(n))return[new yi(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return wi(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Nn(n,["zoom","feature-state"]))return[new yi(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!On(n))return[new yi(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wi(t,e){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression){var r,i=f(e.valueSpec.expression.parameters);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.delete(o)}}catch(s){i.e(s)}finally{i.f()}}if(0===n.size)return[];var a=[];return t instanceof vn&&n.has(t.name)?[new yi(e.key,e.value,'["'.concat(t.name,'"] expression is not supported in a filter for a ').concat(e.object.type," layer with id: ").concat(e.object.id))]:(t.eachChild((function(t){a.push.apply(a,c(wi(t,e)))})),a)}function ki(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ye(n))&&i.push(new yi(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(ye(n))&&i.push(new yi(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function Ei(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,n=f(t.slice(1));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!Ei(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}function Si(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ei(t)||(t=Li(t));var n=t,r=!0;try{r=function(t){if(!Ii(t))return t;var e=ge(t);return Mi(e),e=Ti(e)}(n)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var i=de["filter_".concat(e)],o=ci(r,i),a=null;if("error"===o.result)throw new Error(o.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));a=function(t,e,n){return o.value.evaluate(t,e,{},n)};var s=null,l=null;if(r!==n){var u=ci(n,i);if("error"===u.result)throw new Error(u.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));s=function(t,e,n,r,i){return u.value.evaluate(t,e,{},n,void 0,void 0,r,i)},l=!On(u.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:Ai(r),needFeature:!!l}}function Ti(t){if(!Array.isArray(t))return t;var e=function(t){if(Ci.has(t[0]))for(var e=1;e<t.length;e++)if(Ii(t[e]))return!0;return t}(t);return!0===e?e:e.map((function(t){return Ti(t)}))}function Mi(t){var e=!1,n=[];if("case"===t[0]){for(var r=1;r<t.length-1;r+=2)e=e||Ii(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||Ii(t[1]);for(var i=2;i<t.length-1;i+=2)n.push(t[i+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||Ii(t[1]);for(var o=1;o<t.length-1;o+=2)n.push(t[o+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(n)));for(var a=1;a<t.length;a++)Mi(t[a])}function Ii(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;for(var e,n=1;n<t.length;n++)if(Ii(t[n]))return!0;return!1}var Ci=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Pi(t,e){return t<e?-1:t>e?1:0}function Ai(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(Ai(t[e]))return!0;return!1}function Li(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Di(t[1],t[2],"=="):"!="===n?zi(Di(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Di(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Li))):"all"===n?["all"].concat(t.slice(1).map(Li)):"none"===n?["all"].concat(t.slice(1).map(Li).map(zi)):"in"===n?Ri(t[1],t.slice(2)):"!in"===n?zi(Ri(t[1],t.slice(2))):"has"===n?Oi(t[1]):"!has"===n?zi(Oi(t[1])):"within"!==n||t}function Di(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function Ri(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(Pi)]]:["filter-in-small",t,["literal",e]]}}function Oi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function zi(t){return["!",t]}function Ni(t){return Ei(ge(t.value))?bi(ve({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_".concat(t.layerType||"fill")]})):Fi(t)}function Fi(t){var e=t.value,n=t.key;if("array"!==$r(e))return[new yi(n,e,"array expected, ".concat($r(e)," found"))];var r,i=t.styleSpec,o=[];if(e.length<1)return[new yi(n,e,"filter array must have at least 1 element")];switch(o=o.concat(ki({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),ye(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ye(e[1])&&o.push(new yi(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new yi(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&"string"!==(r=$r(e[1]))&&o.push(new yi("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));for(var a=2;a<e.length;a++)r=$r(e[a]),"$type"===ye(e[1])?o=o.concat(ki({key:"".concat(n,"[").concat(a,"]"),value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new yi("".concat(n,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(Fi({key:"".concat(n,"[").concat(s,"]"),value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=$r(e[1]),2!==e.length?o.push(new yi(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new yi("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=$r(e[1]),2!==e.length?o.push(new yi(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&o.push(new yi("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return o}function Bi(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i["".concat(e,"_").concat(t.layerType)];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Ji({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new yi(n,o,'unknown property "'.concat(a,'"'))];if("string"===$r(o)&&Kr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){var h='`{ "type": "identity", "property": '.concat(u?JSON.stringify(u[1]):'"_"'," }`");return[new yi(n,o,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(h,"."))]}var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new yi(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ti(ge(o))&&"identity"===ye(o.type)&&f.push(new yi(n,o,'"text-font" does not support identity functions'))),f.concat(Ji({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ji(t){return Bi(t,"paint")}function Ui(t){return Bi(t,"layout")}function Vi(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new yi(r,n,'either "type" or "ref" is required'));var a,s=ye(n.type),l=ye(n.ref);if(n.id)for(var u=ye(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];ye(h.id)===u&&e.push(new yi(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new yi(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((function(t){ye(t.id)===l&&(a=t)})),a?a.ref?e.push(new yi(r,n.ref,"ref cannot reference another ref layer")):s=ye(a.type):"string"==typeof l&&e.push(new yi(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],p=f&&ye(f.type);f?"vector"===p&&"raster"===s?e.push(new yi(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===p&&"raster"!==s?e.push(new yi(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new yi(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===p&&f.lineMetrics||e.push(new yi(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new yi(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new yi(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new yi(r,n,'missing required property "source"'));return e=e.concat(gi({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ji({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:function(t){return Ni(ve({layerType:s},t))},layout:function(t){return gi({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ui(ve({layerType:s},t))}}})},paint:function(t){return gi({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return ji(ve({layerType:s},t))}}})}}})),e}function Gi(t){var e=t.value,n=t.key,r=$r(e);return"string"!==r?[new yi(n,e,"string expected, ".concat(r," found"))]:[]}var qi={promoteId:function(t){var e=t.key,n=t.value;if("string"===$r(n))return Gi({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,c(Gi({key:"".concat(e,".").concat(i),value:n[i]})));return r}};function Zi(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new yi(n,e,'"type" is required')];var o,a=ye(e.type);switch(a){case"vector":case"raster":case"raster-dem":return o=gi({key:n,value:e,valueSpec:r["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:qi});case"geojson":if(o=gi({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:qi}),e.cluster)for(var s in e.clusterProperties){var l,u,f=h(e.clusterProperties[s],2),p=f[0],d=f[1],v="string"==typeof p?[p,["accumulated"],["get",s]]:p;(l=o).push.apply(l,c(bi({key:"".concat(n,".").concat(s,".map"),value:d,expressionContext:"cluster-map"}))),(u=o).push.apply(u,c(bi({key:"".concat(n,".").concat(s,".reduce"),value:v,expressionContext:"cluster-reduce"})))}return o;case"video":return gi({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return gi({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new yi(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ki({key:"".concat(n,".type"),value:e.type,valueSpec:{values:Wi(r)},style:i,styleSpec:r})}}function Wi(t){return t.source.reduce((function(e,n){var r=t[n];return"enum"===r.type.type&&(e=e.concat(Object.keys(r.type.values))),e}),[])}function Xi(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=$r(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new yi("light",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&r[l[1]]&&r[l[1]].transition?Ji({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Ji({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new yi(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function Hi(t){var e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain,a=[],s=$r(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new yi("terrain",e,"object expected, ".concat(s," found"))]);for(var l in e){var u=l.match(/^(.*)-transition$/);a=a.concat(u&&o[u[1]]&&o[u[1]].transition?Ji({key:l,value:e[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?Ji({key:l,value:e[l],valueSpec:o[l],style:r,styleSpec:i}):[new yi(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){var c=r.sources&&r.sources[e.source],h=c&&ye(c.type);c?"raster-dem"!==h&&a.push(new yi(n,e.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):a.push(new yi(n,e.source,'source "'.concat(e.source,'" not found')))}else a.push(new yi(n,e,'terrain is missing required property "source"'));return a}function Yi(t){var e=t.value,n=t.style,r=t.styleSpec,i=r.fog,o=[],a=$r(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new yi("fog",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&i[l[1]]&&i[l[1]].transition?Ji({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Ji({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r}):[new yi(s,e[s],'unknown property "'.concat(s,'"'))])}return o}var Ki={"*":function(){return[]},array:mi,boolean:function(t){var e=t.value,n=t.key,r=$r(e);return"boolean"!==r?[new yi(n,e,"boolean expected, ".concat(r," found"))]:[]},number:_i,color:function(t){var e=t.key,n=t.value,r=$r(n);return"string"!==r?[new yi(e,n,"color expected, ".concat(r," found"))]:null===Fe(n)?[new yi(e,n,'color expected, "'.concat(n,'" found'))]:[]},enum:ki,filter:Ni,function:xi,layer:Vi,object:gi,source:Zi,light:Xi,terrain:Hi,fog:Yi,string:Gi,formatted:function(t){return 0===Gi(t).length?[]:bi(t)},resolvedImage:function(t){return 0===Gi(t).length?[]:bi(t)},projection:function(t){var e=t.value,n=t.styleSpec,r=n.projection,i=t.style,o=[],a=$r(e);if("object"===a)for(var s in e)o=o.concat(Ji({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new yi("projection",e,"object or string expected, ".concat(a," found"))]));return o}};function Ji(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&ti(ye(e))?xi(t):n.expression&&ui(ge(e))?bi(t):n.type&&Ki[n.type]?Ki[n.type](t):gi(ve({},t,{valueSpec:n.type?r[n.type]:n}))}function Qi(t){var e=t.value,n=t.key,r=Gi(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new yi(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new yi(n,e,'"glyphs" url must include a "{range}" token'))),r}function $i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:de;return no(Ji({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Qi,"*":function(){return[]}}}))}var to=function(t){return no(ji(t))},eo=function(t){return no(Ui(t))};function no(t){return t.slice().sort((function(t,e){return t.line&&e.line?t.line-e.line:0}))}function ro(t,e){var n=!1;if(e&&e.length){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.fire(new fe(new Error(o.message))),n=!0}}catch(a){i.e(a)}finally{i.f()}}return n}var io=ao,oo=3;function ao(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[oo+o],s=i[oo+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[oo+r.length+1];this.keys=i.subarray(i[oo+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}ao.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ao.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ao.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},ao.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},ao.prototype._queryCell=function(t,e,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var f=l[h];if(void 0===a[f]){var p=4*f;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&r>=c[p+1])?(a[f]=!0,o.push(u[f])):a[f]=!1}}},ao.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=l;f<=c;f++)for(var p=u;p<=h;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},ao.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},ao.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},ao.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=oo+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[oo+a]=o,i.set(s,o),o+=s.length}return i[oo+t.length]=o,i.set(this.keys,o),i[oo+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var so=T(io),lo={};function uo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),lo[e]={klass:t,omit:n.omit||[]}}for(var co in uo(Object,"Object"),so.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},so.deserialize=function(t){return new so(t.buffer)},Object.defineProperty(so,"name",{value:"Grid"}),uo(so,"Grid"),uo(Ze,"Color"),uo(Error,"Error"),uo(kt,"AJAXError"),uo(Ye,"ResolvedImage"),uo(di,"StylePropertyFunction"),uo(li,"StyleExpression",{omit:["_evaluator"]}),uo(fi,"ZoomDependentExpression"),uo(hi,"ZoomConstantExpression"),uo(vn,"CompoundExpression",{omit:["_evaluate"]}),Xr)lo[Xr[co]._classRegistryKey]||uo(Xr[co],"Expression".concat(co));function ho(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function fo(t){return m.ImageBitmap&&t instanceof m.ImageBitmap}function po(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ho(t)||fo(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof m.ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){var r,i=[],o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(po(a,e))}}catch(h){o.e(h)}finally{o.f()}return i}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class ".concat(l));var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)t.hasOwnProperty(c)&&(lo[l].omit.indexOf(c)>=0||(u[c]=po(t[c],e)));t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof t)}function vo(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ho(t)||fo(t)||ArrayBuffer.isView(t)||t instanceof m.ImageData)return t;if(Array.isArray(t))return t.map(vo);if("object"==typeof t){var e=t.$name||"Object",n=lo[e].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];"$name"!==a&&(r[a]=vo(t[a]))}return r}throw new Error("can't deserialize object of type "+typeof t)}var yo={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function go(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(xo(e.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function mo(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(!_o(e.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function _o(t){return!(yo.Arabic(t)||yo["Arabic Supplement"](t)||yo["Arabic Extended-A"](t)||yo["Arabic Presentation Forms-A"](t)||yo["Arabic Presentation Forms-B"](t))}function xo(t){return!(746!==t&&747!==t&&(t<4352||!(yo["Bopomofo Extended"](t)||yo.Bopomofo(t)||yo["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||yo["CJK Compatibility Ideographs"](t)||yo["CJK Compatibility"](t)||yo["CJK Radicals Supplement"](t)||yo["CJK Strokes"](t)||!(!yo["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||yo["CJK Unified Ideographs Extension A"](t)||yo["CJK Unified Ideographs"](t)||yo["Enclosed CJK Letters and Months"](t)||yo["Hangul Compatibility Jamo"](t)||yo["Hangul Jamo Extended-A"](t)||yo["Hangul Jamo Extended-B"](t)||yo["Hangul Jamo"](t)||yo["Hangul Syllables"](t)||yo.Hiragana(t)||yo["Ideographic Description Characters"](t)||yo.Kanbun(t)||yo["Kangxi Radicals"](t)||yo["Katakana Phonetic Extensions"](t)||yo.Katakana(t)&&12540!==t||!(!yo["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!yo["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||yo["Unified Canadian Aboriginal Syllabics"](t)||yo["Unified Canadian Aboriginal Syllabics Extended"](t)||yo["Vertical Forms"](t)||yo["Yijing Hexagram Symbols"](t)||yo["Yi Syllables"](t)||yo["Yi Radicals"](t))))}function bo(t){return!(xo(t)||function(t){return!!(yo["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||yo["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||yo["Letterlike Symbols"](t)||yo["Number Forms"](t)||yo["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||yo["Control Pictures"](t)&&9251!==t||yo["Optical Character Recognition"](t)||yo["Enclosed Alphanumerics"](t)||yo["Geometric Shapes"](t)||yo["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||yo["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||yo["CJK Symbols and Punctuation"](t)||yo.Katakana(t)||yo["Private Use Area"](t)||yo["CJK Compatibility Forms"](t)||yo["Small Form Variants"](t)||yo["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function wo(t){return t>=1424&&t<=2303||yo["Arabic Presentation Forms-A"](t)||yo["Arabic Presentation Forms-B"](t)}function ko(t,e){return!(!e&&wo(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||yo.Khmer(t))}function Eo(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(wo(e.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var So="deferred",To="loading",Mo="loaded",Io=null,Co="unavailable",Po=null,Ao=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Co="error"),Io&&Io(t)};function Lo(){Do.fire(new he("pluginStateChange",{pluginStatus:Co,pluginURL:Po}))}var Do=new pe,Ro=function(){return Co},Oo=function(){if(Co!==So||!Po)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Co=To,Lo(),Po&&Tt({url:Po},(function(t){t?Ao(t):(Co=Mo,Lo())}))},zo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Co===Mo||null!=zo.applyArabicShaping},isLoading:function(){return Co===To},setState:function(t){Co=t.pluginStatus,Po=t.pluginURL},isParsed:function(){return null!=zo.applyArabicShaping&&null!=zo.processBidirectionalText&&null!=zo.processStyledBidirectionalText},getPluginURL:function(){return Po}},No=function(){function t(e,n){p(this,t),this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}return d(t,[{key:"isSupportedScript",value:function(t){return function(t,e){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(!ko(n.value.charCodeAt(0),e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(t,zo.isLoaded())}}]),t}(),Fo=function(){function t(e,n){p(this,t),this.property=e,this.value=n,this.expression=function(t,e){if(ti(t))return new di(t,e);if(ui(t)){var n=pi(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Ze.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?e.specification.default:n,e.specification)}return d(t,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}]),t}(),Bo=function(){function t(e){p(this,t),this.property=e,this.value=new Fo(e,void 0)}return d(t,[{key:"transitioned",value:function(t,e){return new Uo(this.property,this.value,e,W({},t.transition,this.transition),t.now)}},{key:"untransitioned",value:function(){return new Uo(this.property,this.value,null,{},0)}}]),t}(),jo=function(){function t(e){p(this,t),this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}return d(t,[{key:"getValue",value:function(t){return nt(this._values[t].value.value)}},{key:"setValue",value:function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Bo(this._values[t].property)),this._values[t].value=new Fo(this._values[t].property,null===e?void 0:nt(e))}},{key:"getTransition",value:function(t){return nt(this._values[t].transition)}},{key:"setTransition",value:function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Bo(this._values[t].property)),this._values[t].transition=nt(e)||void 0}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t["".concat(r,"-transition")]=o)}return t}},{key:"transitioned",value:function(t,e){for(var n=new Vo(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n}},{key:"untransitioned",value:function(){for(var t=new Vo(this._properties),e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t}}]),t}(),Uo=function(){function t(e,n,r,i,o){p(this,t);var a=i.delay||0,s=i.duration||0;o=o||0,this.property=e,this.value=n,this.begin=o+a,this.end=this.begin+s,e.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return d(t,[{key:"possiblyEvaluate",value:function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,F(a))}return i}}]),t}(),Vo=function(){function t(e){p(this,t),this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}return d(t,[{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new Zo(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r}},{key:"hasTransition",value:function(){for(var t=0,e=Object.keys(this._values);t<e.length;t++){var n=e[t];if(this._values[n].prior)return!0}return!1}}]),t}(),Go=function(){function t(e){p(this,t),this._properties=e,this._values=Object.create(e.defaultPropertyValues)}return d(t,[{key:"getValue",value:function(t){return nt(this._values[t].value)}},{key:"setValue",value:function(t,e){this._values[t]=new Fo(this._values[t].property,null===e?void 0:nt(e))}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t}},{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new Zo(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r}}]),t}(),qo=function(){function t(e,n,r){p(this,t),this.property=e,this.value=n,this.parameters=r}return d(t,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(t){return"constant"===this.value.kind?this.value.value:t}},{key:"evaluate",value:function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}]),t}(),Zo=function(){function t(e){p(this,t),this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}return d(t,[{key:"get",value:function(t){return this._values[t]}}]),t}(),Wo=function(){function t(e){p(this,t),this.specification=e}return d(t,[{key:"possiblyEvaluate",value:function(t,e){return t.expression.evaluate(e)}},{key:"interpolate",value:function(t,e,n){var r=Xn[this.specification.type];return r?r(t,e,n):t}}]),t}(),Xo=function(){function t(e,n){p(this,t),this.specification=e,this.overrides=n}return d(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return new qo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}},{key:"interpolate",value:function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new qo(this,{kind:"constant",value:void 0},t.parameters);var r=Xn[this.specification.type];return r?new qo(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}},{key:"evaluate",value:function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}]),t}(),Ho=function(){function t(e){p(this,t),this.specification=e}return d(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),t}(),Yo=d((function t(e){p(this,t),this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var n=new No(0,{});for(var r in e){var i=e[r];i.specification.overridable&&this.overridableProperties.push(r);var o=this.defaultPropertyValues[r]=new Fo(i,void 0),a=this.defaultTransitionablePropertyValues[r]=new Bo(i);this.defaultTransitioningPropertyValues[r]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=o.possiblyEvaluate(n)}}));function Ko(t,e){return 256*(t=U(Math.floor(t),0,255))+U(Math.floor(e),0,255)}uo(Xo,"DataDrivenProperty"),uo(Wo,"DataConstantProperty"),uo(Ho,"ColorRampProperty");var Jo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Qo=d((function t(e,n){p(this,t),this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),$o=function(){function t(){p(this,t),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return d(t,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(t){this.reserve(t),this.length=t}},{key:"reserve",value:function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}},{key:"deserialize",value:function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}}]),t}();function ta(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((function(t){var i=Jo[t.type].BYTES_PER_ELEMENT,o=n=ea(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ea(n,Math.max(r,e)),alignment:e}}function ea(t,e){return Math.ceil(t/e)*e}var na=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}]),n}($o);na.prototype.bytesPerElement=4,uo(na,"StructArrayLayout2i4");var ra=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}]),n}($o);ra.prototype.bytesPerElement=6,uo(ra,"StructArrayLayout3i6");var ia=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}]),n}($o);ia.prototype.bytesPerElement=8,uo(ia,"StructArrayLayout4i8");var oa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s){var l=6*t,u=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,this.float32[c+2]=s,t}}]),n}($o);oa.prototype.bytesPerElement=12,uo(oa,"StructArrayLayout2i4ub1f12");var aa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}]),n}($o);aa.prototype.bytesPerElement=16,uo(aa,"StructArrayLayout4f16");var sa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}},{key:"emplace",value:function(t,e,n,r,i,o){var a=6*t,s=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,t}}]),n}($o);sa.prototype.bytesPerElement=12,uo(sa,"StructArrayLayout4ui1f12");var la=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=4*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,t}}]),n}($o);la.prototype.bytesPerElement=8,uo(la,"StructArrayLayout4ui8");var ua=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}},{key:"emplace",value:function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}]),n}($o);ua.prototype.bytesPerElement=12,uo(ua,"StructArrayLayout6i12");var ca=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,s,l,u,c,h)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=u,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=f,t}}]),n}($o);ca.prototype.bytesPerElement=24,uo(ca,"StructArrayLayout4i4ui4i24");var ha=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}},{key:"emplace",value:function(t,e,n,r,i,o,a){var s=10*t,l=5*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,t}}]),n}($o);ha.prototype.bytesPerElement=20,uo(ha,"StructArrayLayout3i3f20");var fa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint32[1*t+0]=e,t}}]),n}($o);fa.prototype.bytesPerElement=4,uo(fa,"StructArrayLayout1ul4");var pa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,l,u,c,h,f)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p){var d=20*t,v=10*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.int16[d+4]=o,this.float32[v+3]=a,this.float32[v+4]=s,this.float32[v+5]=l,this.float32[v+6]=u,this.int16[d+14]=c,this.uint32[v+8]=h,this.uint16[d+18]=f,this.uint16[d+19]=p,t}}]),n}($o);pa.prototype.bytesPerElement=40,uo(pa,"StructArrayLayout5i4f1i1ul2ui40");var da=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,t}}]),n}($o);da.prototype.bytesPerElement=16,uo(da,"StructArrayLayout3i2i2i16");var va=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}},{key:"emplace",value:function(t,e,n,r,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}]),n}($o);va.prototype.bytesPerElement=16,uo(va,"StructArrayLayout2f1f2i16");var ya=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}]),n}($o);ya.prototype.bytesPerElement=12,uo(ya,"StructArrayLayout2ub2f12");var ga=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}]),n}($o);ga.prototype.bytesPerElement=12,uo(ga,"StructArrayLayout3f12");var ma=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}]),n}($o);ma.prototype.bytesPerElement=6,uo(ma,"StructArrayLayout3ui6");var _a=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x){var b=this.length;return this.resize(b+1),this.emplace(b,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x,b){var w=30*t,k=15*t,E=60*t;return this.int16[w+0]=e,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[k+2]=i,this.float32[k+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=u,this.uint32[k+7]=c,this.uint16[w+16]=h,this.uint16[w+17]=f,this.uint16[w+18]=p,this.float32[k+10]=d,this.float32[k+11]=v,this.uint8[E+48]=y,this.uint8[E+49]=g,this.uint8[E+50]=m,this.uint32[k+13]=_,this.int16[w+28]=x,this.uint8[E+58]=b,t}}]),n}($o);_a.prototype.bytesPerElement=60,uo(_a,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var xa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x,b,w,k,E,S,T,M,I,C){var P=this.length;return this.resize(P+1),this.emplace(P,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x,b,w,k,E,S,T,M,I,C)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m,_,x,b,w,k,E,S,T,M,I,C,P){var A=38*t,L=19*t;return this.int16[A+0]=e,this.int16[A+1]=n,this.int16[A+2]=r,this.float32[L+2]=i,this.float32[L+3]=o,this.int16[A+8]=a,this.int16[A+9]=s,this.int16[A+10]=l,this.int16[A+11]=u,this.int16[A+12]=c,this.int16[A+13]=h,this.uint16[A+14]=f,this.uint16[A+15]=p,this.uint16[A+16]=d,this.uint16[A+17]=v,this.uint16[A+18]=y,this.uint16[A+19]=g,this.uint16[A+20]=m,this.uint16[A+21]=_,this.uint16[A+22]=x,this.uint16[A+23]=b,this.uint16[A+24]=w,this.uint16[A+25]=k,this.uint16[A+26]=E,this.uint16[A+27]=S,this.uint16[A+28]=T,this.uint32[L+15]=M,this.float32[L+16]=I,this.float32[L+17]=C,this.float32[L+18]=P,t}}]),n}($o);xa.prototype.bytesPerElement=76,uo(xa,"StructArrayLayout3i2f6i15ui1ul3f76");var ba=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.float32[1*t+0]=e,t}}]),n}($o);ba.prototype.bytesPerElement=4,uo(ba,"StructArrayLayout1f4");var wa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}},{key:"emplace",value:function(t,e,n,r,i,o){var a=5*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,t}}]),n}($o);wa.prototype.bytesPerElement=20,uo(wa,"StructArrayLayout5f20");var ka=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,t}}]),n}($o);ka.prototype.bytesPerElement=12,uo(ka,"StructArrayLayout1ul3ui12");var Ea=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}]),n}($o);Ea.prototype.bytesPerElement=4,uo(Ea,"StructArrayLayout2ui4");var Sa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint16[1*t+0]=e,t}}]),n}($o);Sa.prototype.bytesPerElement=2,uo(Sa,"StructArrayLayout1ui2");var Ta=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}]),n}($o);Ta.prototype.bytesPerElement=8,uo(Ta,"StructArrayLayout2f8");var Ma=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(Qo);Ma.prototype.size=40;var Ia=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"get",value:function(t){return new Ma(this,t)}}]),n}(pa);uo(Ia,"CollisionBoxArray");var Ca=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(t){this._structArray.uint8[this._pos1+49]=t}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(t){this._structArray.uint8[this._pos1+50]=t}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(t){this._structArray.uint32[this._pos4+13]=t}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(t){this._structArray.uint8[this._pos1+58]=t}}]),n}(Qo);Ca.prototype.size=60;var Pa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"get",value:function(t){return new Ca(this,t)}}]),n}(_a);uo(Pa,"PlacedSymbolArray");var Aa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(t){this._structArray.uint32[this._pos4+15]=t}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(Qo);Aa.prototype.size=76;var La=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"get",value:function(t){return new Aa(this,t)}}]),n}(xa);uo(La,"SymbolInstanceArray");var Da=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getoffsetX",value:function(t){return this.float32[1*t+0]}}]),n}(ba);uo(Da,"GlyphOffsetArray");var Ra=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getx",value:function(t){return this.int16[2*t+0]}},{key:"gety",value:function(t){return this.int16[2*t+1]}}]),n}(na);uo(Ra,"SymbolLineVertexArray");var Oa=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(Qo);Oa.prototype.size=12;var za=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"get",value:function(t){return new Oa(this,t)}}]),n}(ka);uo(za,"FeatureIndexArray");var Na=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"geta_centroid_pos0",value:function(t){return this.uint16[2*t+0]}},{key:"geta_centroid_pos1",value:function(t){return this.uint16[2*t+1]}}]),n}(Ea);uo(Na,"FillExtrusionCentroidArray");var Fa=ta([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ba=ta([{name:"a_dash",components:4,type:"Uint16"}]),ja={exports:{}},Ua={exports:{}};Ua.exports=function(t,e){var n,r,i,o,a,s,l,u;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Va=Ua.exports,Ga={exports:{}};Ga.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var qa=Va,Za=Ga.exports;ja.exports=qa,ja.exports.murmur3=qa,ja.exports.murmur2=Za;var Wa=T(ja.exports),Xa=function(){function t(){p(this,t),this.ids=[],this.positions=[],this.indexed=!1}return d(t,[{key:"add",value:function(t,e,n,r){this.ids.push(Ha(t)),this.positions.push(e,n,r)}},{key:"getPositions",value:function(t){for(var e=Ha(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o}}],[{key:"serialize",value:function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return Ya(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(e){var n=new t;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}]),t}();function Ha(t){var e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Wa(String(t))}function Ya(t,e,n,r){for(;n<r;){for(var i=t[n+r>>1],o=n-1,a=r+1;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;Ka(t,o,a),Ka(e,3*o,3*a),Ka(e,3*o+1,3*a+1),Ka(e,3*o+2,3*a+2)}a-n<r-a?(Ya(t,e,n,a),n=a+1):(Ya(t,e,a+1,r),r=a)}}function Ka(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}uo(Xa,"FeaturePositionMap");var Ja=function(){function t(e){p(this,t),this.gl=e.gl,this.initialized=!1}return d(t,[{key:"fetchUniformLocation",value:function(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}]),t}(),Qa=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=0,r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}]),n}(Ja),$a=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=[0,0,0,0],r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}]),n}(Ja),ts=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=Ze.transparent,r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}]),n}(Ja),es=new Float32Array(16),ns=new Float32Array(9),rs=new Float32Array(4);function is(t){return[Ko(255*t.r,255*t.g),Ko(255*t.b,255*t.a)]}var os=function(){function t(e,n,r){p(this,t),this.value=e,this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.type=r}return d(t,[{key:"setUniform",value:function(t,e,n,r,i){e.set(t,i,r.constantOr(this.value))}},{key:"getBinding",value:function(t,e){return"color"===this.type?new ts(t):new Qa(t)}}]),t}(),as=function(){function t(e,n){p(this,t),this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.pattern=null,this.pixelRatio=1}return d(t,[{key:"setConstantPatternPositions",value:function(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}},{key:"setUniform",value:function(t,e,n,r,i){var o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&e.set(t,i,o)}},{key:"getBinding",value:function(t,e){return"u_pattern"===e||"u_dash"===e?new $a(t):new Qa(t)}}]),t}(),ss=function(){function t(e,n,r,i){p(this,t),this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return d(t,[{key:"populatePaintArray",value:function(t,e,n,r,i,o){var a=this.paintVertexArray.length,s=this.expression.evaluate(new No(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}},{key:"updatePaintArray",value:function(t,e,n,r,i){var o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}},{key:"_setPaintValue",value:function(t,e,n){if("color"===this.type)for(var r=is(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),t}(),ls=function(){function t(e,n,r,i,o,a){p(this,t),this.expression=e,this.uniformNames=n.map((function(t){return"u_".concat(t,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new a}return d(t,[{key:"populatePaintArray",value:function(t,e,n,r,i,o){var a=this.expression.evaluate(new No(this.zoom),e,{},i,r,o),s=this.expression.evaluate(new No(this.zoom+1),e,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,s)}},{key:"updatePaintArray",value:function(t,e,n,r,i){var o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,a)}},{key:"_setPaintValue",value:function(t,e,n,r){if("color"===this.type)for(var i=is(n),o=is(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(t,e,n,r,i){var o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=U(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,a)}},{key:"getBinding",value:function(t,e){return new Qa(t)}}]),t}(),us=function(){function t(e,n,r,i,o){p(this,t),this.expression=e,this.layerId=o,this.paintVertexAttributes=("array"===r?Ba:Fa).members;for(var a=0;a<n.length;++a);this.paintVertexArray=new i}return d(t,[{key:"populatePaintArray",value:function(t,e,n){var r=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}},{key:"_setPaintValues",value:function(t,e,n,r){if(r&&n){var i=r[n];if(i)for(var o=i.tl,a=i.br,s=i.pixelRatio,l=t;l<e;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),t}(),cs=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,t),this.binders={},this._buffers=[];var i=[];for(var o in e.paint._values)if(r(o)){var a=e.paint.get(o);if(a instanceof qo&&Kr(a.property.specification)){var s=ps(o,e.type),l=a.value,u=a.property.specification.type,c=!!a.property.useIntegerZoom,h="line-dasharray"===o||o.endsWith("pattern"),f="line-dasharray"===o&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==l.kind||f)if("source"===l.kind||f||h){var d=ys(o,u,"source");this.binders[o]=h?new us(l,s,u,d,e.id):new ss(l,s,u,d),i.push("/a_".concat(o))}else{var v=ys(o,u,"composite");this.binders[o]=new ls(l,s,u,c,n,v),i.push("/z_".concat(o))}else this.binders[o]=h?new as(l.value,s):new os(l.value,s,u),i.push("/u_".concat(o))}}this.cacheKey=i.sort().join("")}return d(t,[{key:"getMaxValue",value:function(t){var e=this.binders[t];return e instanceof ss||e instanceof ls?e.maxValue:0}},{key:"populatePaintArrays",value:function(t,e,n,r,i,o){for(var a in this.binders){var s=this.binders[a];(s instanceof ss||s instanceof ls||s instanceof us)&&s.populatePaintArray(t,e,n,r,i,o)}}},{key:"setConstantPatternPositions",value:function(t){for(var e in this.binders){var n=this.binders[e];n instanceof as&&n.setConstantPatternPositions(t)}}},{key:"updatePaintArrays",value:function(t,e,n,r,i,o){var a=!1;for(var s in t){var l,u=e.getPositions(s),c=f(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,p=n.feature(h.index);for(var d in this.binders){var v=this.binders[d];if((v instanceof ss||v instanceof ls||v instanceof us)&&!0===v.expression.isStateDependent){var y=r.paint.get(d);v.expression=y.value,v.updatePaintArray(h.start,h.end,p,t[s],i,o),a=!0}}}}catch(g){c.e(g)}finally{c.f()}}return a}},{key:"defines",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof os||n instanceof as)&&t.push.apply(t,c(n.uniformNames.map((function(t){return"#define HAS_UNIFORM_".concat(t)}))))}return t}},{key:"getBinderAttributes",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof ss||n instanceof ls||n instanceof us)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name)}return t}},{key:"getBinderUniforms",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof os||n instanceof as||n instanceof ls){var r,i=f(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o)}}catch(a){i.e(a)}finally{i.f()}}}return t}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(t){var e=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof os||r instanceof as||r instanceof ls){var i,o=f(r.uniformNames);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.push({name:a,property:n,binding:r.getBinding(t,a)})}}catch(s){o.e(s)}finally{o.f()}}}return e}},{key:"setUniforms",value:function(t,e,n,r,i){var o,a=f(n);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=s.name,u=s.property,c=s.binding;this.binders[u].setUniform(t,c,i,r.get(u),l)}}catch(h){a.e(h)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(){for(var t in this._buffers=[],this.binders){var e=this.binders[t];(e instanceof ss||e instanceof ls||e instanceof us)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}},{key:"upload",value:function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof ss||n instanceof ls||n instanceof us)&&n.upload(t)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var t in this.binders){var e=this.binders[t];(e instanceof ss||e instanceof ls||e instanceof us)&&e.destroy()}}}]),t}(),hs=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,t),this.programConfigurations={};var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.programConfigurations[a.id]=new cs(a,n,r)}}catch(s){o.e(s)}finally{o.f()}this.needsUpload=!1,this._featureMap=new Xa,this._bufferOffset=0}return d(t,[{key:"populatePaintArrays",value:function(t,e,n,r,i,o,a){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(t,e,r,i,o,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(t,e,n,r,i){var o,a=f(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,r,i)||this.needsUpload}}catch(l){a.e(l)}finally{a.f()}}},{key:"get",value:function(t){return this.programConfigurations[t]}},{key:"upload",value:function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()}}]),t}(),fs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ps(t,e){return fs[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}var ds={"line-pattern":{source:sa,composite:sa},"fill-pattern":{source:sa,composite:sa},"fill-extrusion-pattern":{source:sa,composite:sa},"line-dasharray":{source:la,composite:la}},vs={color:{source:Ta,composite:aa},number:{source:ba,composite:Ta}};function ys(t,e,n){var r=ds[t];return r&&r[n]||vs[e][n]}uo(os,"ConstantBinder"),uo(as,"PatternConstantBinder"),uo(ss,"SourceExpressionBinder"),uo(us,"PatternCompositeBinder"),uo(ls,"CompositeExpressionBinder"),uo(cs,"ProgramConfiguration",{omit:["_buffers"]}),uo(hs,"ProgramConfigurationSet");var gs="-transition",ms=function(t){v(n,t);var e=y(n);function n(t,r){var i;if(p(this,n),(i=e.call(this)).id=t.id,i.type=t.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==t.type&&(i.metadata=t.metadata,i.minzoom=t.minzoom,i.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(i.source=t.source,i.sourceLayer=t["source-layer"],i.filter=t.filter),r.layout&&(i._unevaluatedLayout=new Go(r.layout)),r.paint)){for(var o in i._transitionablePaint=new jo(r.paint),t.paint)i.setPaintProperty(o,t.paint[o],{validate:!1});for(var a in t.layout)i.setLayoutProperty(a,t.layout[a],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new Zo(r.paint)}return l(i)}return d(n,[{key:"getLayoutProperty",value:function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}},{key:"setLayoutProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(eo,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}},{key:"getPaintProperty",value:function(t){return $(t,gs)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}},{key:"setPaintProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(to,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if($(t,gs))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;var r=this._transitionablePaint._values[t],i=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var a=this._transitionablePaint._values[t].value,s=a.isDataDriven(),l=$(t,"pattern")||"line-dasharray"===t;return s||i||l||this._handleOverridablePaintPropertyUpdate(t,o,a)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(t){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,e,n){return!1}},{key:"isHidden",value:function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}},{key:"serialize",value:function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),et(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))}},{key:"_validate",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&ro(this,t.call($i,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:de,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof qo&&Kr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=Si(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(pe),_s=ta([{name:"a_pos",components:2,type:"Int16"}],4),xs=ta([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),bs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,t),this.segments=e}return d(t,[{key:"prepareSegment",value:function(e,n,r,i){var o=this.segments[this.segments.length-1];return e>t.MAX_VERTEX_ARRAY_LENGTH&&it("Max vertices per segment is ".concat(t.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!o||o.vertexLength+e>t.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i)&&(o={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(o.sortKey=i),this.segments.push(o)),o}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var t,e=f(this.segments);try{for(e.s();!(t=e.n()).done;){var n=t.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){e.e(i)}finally{e.f()}}}],[{key:"simpleSegment",value:function(e,n,r,i){return new t([{vertexOffset:e,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),t}();bs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,uo(bs,"SegmentVector");var ws=8192,ks=function(){function t(e,n){p(this,t),e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}return d(t,[{key:"setNorthEast",value:function(t){return this._ne=t instanceof nu?new nu(t.lng,t.lat):nu.convert(t),this}},{key:"setSouthWest",value:function(t){return this._sw=t instanceof nu?new nu(t.lng,t.lat):nu.convert(t),this}},{key:"extend",value:function(e){var n,r,i=this._sw,o=this._ne;if(e instanceof nu)n=e,r=e;else{if(!(e instanceof t))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(t.convert(e)):this.extend(nu.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(nu.convert(e)):this;if(n=e._sw,r=e._ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this._sw=new nu(n.lng,n.lat),this._ne=new nu(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new nu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new nu(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new nu(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(t){var e=nu.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(e){return!e||e instanceof t?e:new t(e)}}]),t}(),Es=1e-6,Ss="undefined"!=typeof Float32Array?Float32Array:Array;function Ts(){var t=new Ss(9);return Ss!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Ms(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=n[0],p=n[1],d=n[2],v=n[3],y=n[4],g=n[5],m=n[6],_=n[7],x=n[8];return t[0]=f*r+p*a+d*u,t[1]=f*i+p*s+d*c,t[2]=f*o+p*l+d*h,t[3]=v*r+y*a+g*u,t[4]=v*i+y*s+g*c,t[5]=v*o+y*l+g*h,t[6]=m*r+_*a+x*u,t[7]=m*i+_*s+x*c,t[8]=m*o+_*l+x*h,t}function Is(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Cs(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15],m=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,k=i*u-o*l,E=c*v-h*d,S=c*y-f*d,T=c*g-p*d,M=h*y-f*v,I=h*g-p*v,C=f*g-p*y,P=m*C-_*I+x*M+b*T-w*S+k*E;return P?(t[0]=(s*C-l*I+u*M)*(P=1/P),t[1]=(i*I-r*C-o*M)*P,t[2]=(v*k-y*w+g*b)*P,t[3]=(f*w-h*k-p*b)*P,t[4]=(l*T-a*C-u*S)*P,t[5]=(n*C-i*T+o*S)*P,t[6]=(y*x-d*k-g*_)*P,t[7]=(c*k-f*x+p*_)*P,t[8]=(a*I-s*T+u*E)*P,t[9]=(r*T-n*I-o*E)*P,t[10]=(d*w-v*x+g*m)*P,t[11]=(h*x-c*w-p*m)*P,t[12]=(s*S-a*M-l*E)*P,t[13]=(n*M-r*S+i*E)*P,t[14]=(v*_-d*b-y*m)*P,t[15]=(c*b-h*_+f*m)*P,t):null}function Ps(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],v=e[12],y=e[13],g=e[14],m=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*v,t[1]=_*i+x*l+b*f+w*y,t[2]=_*o+x*u+b*p+w*g,t[3]=_*a+x*c+b*d+w*m,t[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*v,t[5]=_*i+x*l+b*f+w*y,t[6]=_*o+x*u+b*p+w*g,t[7]=_*a+x*c+b*d+w*m,t[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*v,t[9]=_*i+x*l+b*f+w*y,t[10]=_*o+x*u+b*p+w*g,t[11]=_*a+x*c+b*d+w*m,t[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*v,t[13]=_*i+x*l+b*f+w*y,t[14]=_*o+x*u+b*p+w*g,t[15]=_*a+x*c+b*d+w*m,t}function As(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,v=n[0],y=n[1],g=n[2];return e===t?(t[12]=e[0]*v+e[4]*y+e[8]*g+e[12],t[13]=e[1]*v+e[5]*y+e[9]*g+e[13],t[14]=e[2]*v+e[6]*y+e[10]*g+e[14],t[15]=e[3]*v+e[7]*y+e[11]*g+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*y+h*g+e[12],t[13]=i*v+l*y+f*g+e[13],t[14]=o*v+u*y+p*g+e[14],t[15]=a*v+c*y+d*g+e[15]),t}function Ls(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ds(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+f*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-l*r,t}function Rs(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=l*i-f*r,t[8]=o*r+u*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=l*r+f*i,t}function Os(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zs(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],u=Math.hypot(a,s,l);return u<Es?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(e),i=Math.cos(e),t[0]=a*a*(o=1-i)+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ns=Ps;function Fs(){var t=new Ss(3);return Ss!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Bs(t){var e=new Ss(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function js(t){return Math.hypot(t[0],t[1],t[2])}function Us(t,e,n){var r=new Ss(3);return r[0]=t,r[1]=e,r[2]=n,r}function Vs(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Gs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function qs(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Zs(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Ws(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Xs(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Hs(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Ys(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Ks(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Js(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function Qs(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function $s(t,e,n){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],l=e[2],u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=i*h-o*c,p=o*u-r*h,d=r*c-i*u,v=2*n[3];return c*=v,h*=v,p*=2,d*=2,t[0]=a+(u*=v)+(f*=2),t[1]=s+c+p,t[2]=l+h+d,t}var tl,el=Gs,nl=qs,rl=js;function il(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function ol(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function al(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function sl(){var t=new Ss(4);return Ss!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ll(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function ul(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s,t}function cl(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s,t}Fs(),tl=new Ss(4),Ss!=Float32Array&&(tl[0]=0,tl[1]=0,tl[2]=0,tl[3]=0);var hl=ol;Fs(),Us(1,0,0),Us(0,1,0),sl(),sl(),Ts();var fl=ta([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,pl=ta([{name:"a_pos_3",components:3,type:"Int16"}]),dl=ta([{name:"a_pos",type:"Int16",components:2}]),vl=function(){function t(e,n){p(this,t),this.pos=e,this.dir=n}return d(t,[{key:"intersectsPlane",value:function(t,e,n){var r=Ks(e,this.dir);if(Math.abs(r)<1e-6)return!1;var i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(t,e,n){if(function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=Es*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Es*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Es*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;var r=h(this.dir,3),i=r[0],o=r[1],a=r[2],s=this.pos[0]-t[0],l=this.pos[1]-t[1],u=this.pos[2]-t[2],c=i*i+o*o+a*a,f=2*(s*i+l*o+u*a),p=f*f-4*c*(s*s+l*l+u*u-e*e);if(p<0){var d=Math.max(-f/2,0),v=s+i*d,y=l+o*d,g=u+a*d,m=Math.hypot(v,y,g);return n[0]=v*e/m,n[1]=y*e/m,n[2]=g*e/m,!1}var _=(-f-Math.sqrt(p))/(2*c);if(_<0){var x=Math.hypot(s,l,u);return n[0]=s*e/x,n[1]=l*e/x,n[2]=u*e/x,!1}return n[0]=s+i*_,n[1]=l+o*_,n[2]=u+a*_,!0}}]),t}(),yl=function(){function t(e,n,r,i,o){p(this,t),this.TL=e,this.TR=n,this.BR=r,this.BL=i,this.horizon=o}return d(t,null,[{key:"fromInvProjectionMatrix",value:function(e,n,r){var i=[-1,1,1],o=[1,1,1],a=[1,-1,1],s=[-1,-1,1];return new t(Qs(i,i,e),Qs(o,o,e),Qs(a,a,e),Qs(s,s,e),n/r)}}]),t}(),gl=function(){function t(e,n){p(this,t),this.points=e,this.planes=n}return d(t,null,[{key:"fromInvProjectionMatrix",value:function(e,n,r,i){var o=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(t){var r=al([],t,e),a=1/r[3]/n*o;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(r,r,[a,a,i?1/r[3]:a,a])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e=Ys([],Js([],el([],a[t[0]],a[t[1]]),el([],a[t[2]],a[t[1]]))),n=-Ks(e,a[t[1]]);return e.concat(n)}));return new t(a,s)}}]),t}(),ml=function(){function t(e,n){p(this,t),this.min=e,this.max=n,this.center=Xs([],Vs([],this.min,this.max),.5)}return d(t,[{key:"quadrant",value:function(e){for(var n=[e%2==0,e<2],r=Bs(this.min),i=Bs(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new t(r,i)}},{key:"distanceX",value:function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}},{key:"distanceY",value:function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}},{key:"distanceZ",value:function(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}},{key:"getCorners",value:function(){var t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}},{key:"intersects",value:function(t){for(var e=this.getCorners(),n=!0,r=0;r<t.planes.length;r++){for(var i=t.planes[r],o=0,a=0;a<e.length;a++)o+=Ks(i,e[a])+i[3]>=0;if(0===o)return 0;o!==e.length&&(n=!1)}if(n)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<t.points.length;c++){var h=t.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1}}],[{key:"fromPoints",value:function(e){var n,r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],o=f(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;Zs(r,r,a),Ws(i,i,a)}}catch(s){o.e(s)}finally{o.f()}return new t(r,i)}},{key:"applyTransform",value:function(e,n){for(var r=e.getCorners(),i=0;i<r.length;++i)Qs(r[i],r[i],n);return t.fromPoints(r)}}]),t}(),_l=5,xl=6,bl=ws/Math.PI/2,wl=16383,kl=64,El=[kl,32,16],Sl=-bl,Tl=bl,Ml=[new ml([Sl,Sl,Sl],[Tl,Tl,Tl]),new ml([Sl,Sl,Sl],[0,0,Tl]),new ml([0,Sl,Sl],[Tl,0,Tl]),new ml([Sl,0,Sl],[0,Tl,Tl]),new ml([0,0,Sl],[Tl,Tl,Tl])];function Il(t){return t*bl/$l}function Cl(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Xs([],t._camera.position,t.worldSize),o=[e,n,1,1];al(o,o,t.pixelMatrixInverse),il(o,o,1/o[3]);var a=Ys([],el([],o,i)),s=t.globeMatrix,l=[s[12],s[13],s[14]],u=el([],l,i),c=js(u),h=Ys([],u),f=t.worldSize/(2*Math.PI),p=Ks(h,a),d=Math.asin(f/c);if(d<Math.acos(p)){if(!r)return null;var v=[],y=[];Xs(v,a,c/p),Ys(y,el(y,v,u)),Ys(a,Vs(a,u,Xs(a,y,Math.tan(d)*c)))}var g=[];new vl(i,a).closestPointOnSphere(l,f,g);var m=Ys([],ft(s,0)),_=Ys([],ft(s,1)),x=Ys([],ft(s,2)),b=Ks(m,g),w=Ks(_,g),k=Ks(x,g),E=z(Math.asin(-w/f)),S=z(Math.atan2(b,k));S=t.center.lng+function(t,e){var n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,S);var T=iu(S),M=U(ou(E),0,1);return new fu(T,M)}var Pl=d((function t(e,n,r){p(this,t),this.a=el([],e,r),this.b=el([],n,r),this.center=r;var i=Ys([],this.a),o=Ys([],this.b);this.angle=Math.acos(Ks(i,o))}));function Al(t,e){return 0===t.angle||(n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)))<0||n>1?null:function(t,e,n,r){var i=Math.sin(n);return t*(Math.sin((1-r)*n)/i)+e*(Math.sin(r*n)/i)}(t.a[e],t.b[e],t.angle,U(n,0,1))+t.center[e];var n}function Ll(t){if(t.z<=1)return Ml[t.z+2*t.y+t.x];var e=Fl(Nl(t));return ml.fromPoints(e)}function Dl(t,e,n){return Xs(t,t,1-n),Hs(t,t,e,n)}function Rl(t,e){var n=Xl(e.zoom);if(0===n)return Ll(t);var r=Nl(t),i=Fl(r),o=iu(r.getWest())*e.worldSize,a=iu(r.getEast())*e.worldSize,s=ou(r.getNorth())*e.worldSize,l=ou(r.getSouth())*e.worldSize,u=[o,s,0],c=[a,s,0],h=[o,l,0],f=[a,l,0],p=Cs([],e.globeMatrix);return Qs(u,u,p),Qs(c,c,p),Qs(h,h,p),Qs(f,f,p),i[0]=Dl(i[0],h,n),i[1]=Dl(i[1],f,n),i[2]=Dl(i[2],c,n),i[3]=Dl(i[3],u,n),ml.fromPoints(i)}function Ol(t,e,n){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;Qs(o,o,e),Xs(o,o,n)}}catch(a){i.e(a)}finally{i.f()}}function zl(t,e,n){var r=e/t.worldSize,i=t.globeMatrix;if(n.z<=1){var o=Ll(n).getCorners();return Ol(o,i,r),ml.fromPoints(o)}var a=Nl(n),s=Fl(a);Ol(s,i,r);var l=Number.MAX_VALUE,u=[-l,-l,-l],c=[l,l,l];if(a.contains(t.center)){var h,p=f(s);try{for(p.s();!(h=p.n()).done;){var d=h.value;Zs(c,c,d),Ws(u,u,d)}}catch(F){p.e(F)}finally{p.f()}u[2]=0;var v=t.point,y=[v.x*r,v.y*r,0];return Zs(c,c,y),Ws(u,u,y),new ml(c,u)}var g=[i[12]*r,i[13]*r,i[14]*r],m=a.getCenter(),_=U(t.center.lat,-cu,cu),x=U(m.lat,-cu,cu),b=iu(t.center.lng),w=ou(_),k=b-iu(m.lng),E=w-ou(x);k>.5?k-=1:k<-.5&&(k+=1);var S=0;Math.abs(k)>Math.abs(E)?S=k>=0?1:3:(S=E>=0?0:2,Hs(g,g,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(O(E>=0?a.getSouth():a.getNorth()))*bl));var T=s[S],M=s[(S+1)%4],I=new Pl(T,M,g),C=[Al(I,0)||T[0],Al(I,1)||T[1],Al(I,2)||T[2]],P=Xl(t.zoom);if(P>0){for(var A=function(t,e,n,r,i){var o=t.x,a=t.y,s=1/(1<<t.z),l=o*s,u=l+s,c=a*s,h=c+s,f=0,p=(l+u)/2-r;return p>.5?f=-1:p<-.5&&(f=1),c=(c*e-(i*=e))*n+i,[[l=((l+f)*e-(r*=e))*n+r,h=(h*e-i)*n+i,0],[u=((u+f)*e-r)*n+r,h,0],[u,c,0],[l,c,0]]}(n,e,t._pixelsPerMercatorPixel,b,w),L=0;L<s.length;L++)Dl(s[L],A[L],P);var D=Vs([],A[S],A[(S+1)%4]);Xs(D,D,.5),Dl(C,D,P)}var R,z=f(s);try{for(z.s();!(R=z.n()).done;){var N=R.value;Zs(c,c,N),Ws(u,u,N)}}catch(F){z.e(F)}finally{z.f()}return c[2]=Math.min(T[2],M[2]),Zs(c,c,C),Ws(u,u,C),new ml(c,u)}function Nl(t){var e=t.x,n=t.y,r=1/(1<<t.z),i=new nu(su(e*r),lu((n+1)*r)),o=new nu(su((e+1)*r),lu(n*r));return new ks(i,o)}function Fl(t){var e=O(t.getNorth()),n=O(t.getSouth()),r=Math.cos(e),i=Math.cos(n),o=Math.sin(e),a=Math.sin(n),s=t.getWest(),l=t.getEast();return[Bl(i,a,s),Bl(i,a,l),Bl(r,o,l),Bl(r,o,s)]}function Bl(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bl;return n=O(n),[t*Math.sin(n)*r,-e*r,t*Math.cos(n)*r]}function jl(t,e,n){return Bl(Math.cos(O(t)),Math.sin(O(t)),e,n)}function Ul(t,e,n,r){var i=1<<n.z,o=(t/ws+n.x)/i;return jl(lu((e/ws+n.y)/i),su(o),r)}function Vl(t){var e=t.min,n=t.max;return wl/Math.max(n[0]-e[0],n[1]-e[1],n[2]-e[2])}var Gl=new Float64Array(16);function ql(t){var e,n,r=Vl(t),i=Os(Gl,[r,r,r]);return As(i,i,((e=[])[0]=-(n=t.min)[0],e[1]=-n[1],e[2]=-n[2],e))}function Zl(t){var e,n,r=(n=t.min,(e=Gl)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e),i=1/Vl(t);return Ls(r,r,[i,i,i])}function Wl(t,e,n,r,i){var o=function(t){var e=ws/(2*Math.PI);return t/(2*Math.PI)/e}(n),a=[t,e,-n/(2*Math.PI)],s=Is(new Float64Array(16));return As(s,s,a),Ls(s,s,[o,o,o]),Ds(s,s,O(-i)),Rs(s,s,O(-r)),s}function Xl(t){return V(_l,xl,t)}function Hl(t,e){var n,r,i,o,a,s,l,u,c,h,f=jl(e.lat,e.lng),p=function(t){var e=jl(t._center.lat,t._center.lng),n=Js([],Us(0,1,0),e),r=zs([],-t.angle,e);n=Qs(n,n,r),zs(r,-t._pitch,n);var i=Ys([],e);return Xs(i,i,Il(t.cameraToCenterDistance/t.pixelsPerMeter)),Qs(i,i,r),Vs([],e,i)}(t);return i=(n=Gs([],p,f))[0],o=n[1],a=n[2],s=(r=f)[0],l=r[1],u=r[2],h=(c=Math.sqrt(i*i+o*o+a*a)*Math.sqrt(s*s+l*l+u*u))&&Ks(n,r)/c,Math.acos(Math.min(Math.max(h,-1),1))}function Yl(t,e){return Hl(t,e)>Math.PI/2*1.01}var Kl=O(85),Jl=Math.cos(Kl),Ql=Math.sin(Kl),$l=6371008.8,tu=2*Math.PI*$l,eu=function(){function t(e,n){if(p(this,t),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return d(t,[{key:"wrap",value:function(){return new t(G(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return $l*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var e=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new ks(new t(this.lng-n,this.lat-e),new t(this.lng+n,this.lat+e))}},{key:"toEcef",value:function(t){var e=Il(t);return jl(this.lat,this.lng,bl+e)}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new t(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}(),nu=eu;function ru(t){return tu*Math.cos(t*Math.PI/180)}function iu(t){return(180+t)/360}function ou(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function au(t,e){return t/ru(e)}function su(t){return 360*t-180}function lu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function uu(t,e){return t*ru(lu(e))}var cu=85.051129;function hu(t){return 1/Math.cos(t*Math.PI/180)}var fu=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;p(this,t),this.x=+e,this.y=+n,this.z=+r}return d(t,[{key:"toLngLat",value:function(){return new nu(su(this.x),lu(this.y))}},{key:"toAltitude",value:function(){return uu(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/tu*hu(lu(this.y))}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=nu.convert(e);return new t(iu(r.lng),ou(r.lat),au(n,r.lat))}}]),t}();function pu(t,e,n,r,i,o,a,s,l){var u=(e+r)/2,c=(n+i)/2,h=new L(u,c);s(h),function(t,e,n,r,i,o){var a=n-i,s=r-o;return Math.abs((r-e)*a-(n-t)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(pu(t,e,n,u,c,o,h,s,l),pu(t,u,c,r,i,h,a,s,l)):t.push(a)}function du(t,e,n){var r=t[0],i=r.x,o=r.y;e(r);for(var a=[r],s=1;s<t.length;s++){var l=t[s],u=l.x,c=l.y;e(l),pu(a,i,o,u,c,r,l,e,n),i=u,o=c,r=l}return a}function vu(t,e,n,r){if(r(e,n)){var i=e.add(n)._mult(.5);vu(t,e,i,r),vu(t,i,n,r)}else t.push(n)}function yu(t,e){for(var n=t[0],r=[n],i=1;i<t.length;i++){var o=t[i];vu(r,n,o,e),n=o}return r}var gu=Math.pow(2,14)-1,mu=-gu-1;function _u(t,e){var n=Math.round(t.x*e),r=Math.round(t.y*e);return t.x=U(n,mu,gu),t.y=U(r,mu,gu),(n<t.x||n>t.x+1||r<t.y||r>t.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function xu(t,e,n){var r=t.loadGeometry(),i=t.extent,o=ws/i;if(e&&n&&n.projection.isReprojectedInTileSpace)for(var a=1<<e.z,s=n.scale,l=n.x,u=n.y,c=n.projection,h=function(t){var n=su((e.x+t.x/i)/a),r=lu((e.y+t.y/i)/a),o=c.project(n,r);t.x=(o.x*s-l)*i,t.y=(o.y*s-u)*i},p=0;p<r.length;p++)if(1!==t.type)r[p]=du(r[p],h,1);else{var d,v=[],y=f(r[p]);try{for(y.s();!(d=y.n()).done;){var g=d.value;g.x<0||g.x>=i||g.y<0||g.y>=i||(h(g),v.push(g))}}catch(k){y.e(k)}finally{y.f()}r[p]=v}var m,_=f(r);try{for(_.s();!(m=_.n()).done;){var x,b=m.value,w=f(b);try{for(w.s();!(x=w.n()).done;)_u(x.value,o)}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}return r}function bu(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?xu(t):[]}}function wu(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function ku(t,e,n){var r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}var Eu=function(){function t(e){p(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new na,this.indexArray=new ma,this.segments=new bs,this.programConfigurations=new hs(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return d(t,[{key:"populate",value:function(t,e,n,r){var i=this.layers[0],o=[],a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,p=u.index,d=u.sourceLayerIndex,v=this.layers[0]._featureFilter.needGeometry,y=bu(c,v);if(this.layers[0]._featureFilter.filter(new No(this.zoom),y,n)){var g=a?a.evaluate(y,{},n):void 0,m={id:h,properties:c.properties,type:c.type,sourceLayerIndex:d,index:p,geometry:v?y.geometry:xu(c,n,r),patterns:{},sortKey:g};o.push(m)}}}catch(M){l.e(M)}finally{l.f()}a&&o.sort((function(t,e){return t.sortKey-e.sortKey}));var _=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new ua,_=r.projection);for(var x=0,b=o;x<b.length;x++){var w=b[x],k=w.geometry,E=w.index,S=w.sourceLayerIndex,T=t[E].feature;this.addFeature(w,k,E,e.availableImages,n,_),e.featureIndex.insert(T,k,E,S,this.index)}}},{key:"update",value:function(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_s.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,xs.members))),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(t,e,n,r,i,o){var a,s=f(e);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=f(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,p=h.x,d=h.y;if(!(p<0||p>=ws||d<0||d>=ws)){if(o){var v=o.projectTilePoint(p,d,i),y=o.upVector(i,p,d),g=this.globeExtVertexArray;ku(g,v,y),ku(g,v,y),ku(g,v,y),ku(g,v,y)}var m=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),_=m.vertexLength;wu(this.layoutVertexArray,p,d,-1,-1),wu(this.layoutVertexArray,p,d,1,-1),wu(this.layoutVertexArray,p,d,1,1),wu(this.layoutVertexArray,p,d,-1,1),this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_,_+2,_+3),m.vertexLength+=4,m.primitiveLength+=2}}}catch(x){c.e(x)}finally{c.f()}}}catch(x){s.e(x)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}}]),t}();function Su(t,e){for(var n=0;n<t.length;n++)if(Ru(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Ru(t,e[r]))return!0;return!!Cu(t,e)}function Tu(t,e,n){return!!Ru(t,e)||!!Au(e,t,n)}function Mu(t,e){if(1===t.length)return Du(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Ru(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(Du(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Cu(t,e[a]))return!0;return!1}function Iu(t,e,n){if(t.length>1){if(Cu(t,e))return!0;for(var r=0;r<e.length;r++)if(Au(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Au(t[i],e,n))return!0;return!1}function Cu(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Pu(r,i,e[o],e[o+1]))return!0;return!1}function Pu(t,e,n,r){return ot(t,n,r)!==ot(e,n,r)&&ot(t,e,n)!==ot(t,e,r)}function Au(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Lu(t,e[i-1],e[i])<r)return!0;return!1}function Lu(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Du(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Ru(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ou(t,e,n,r,i){var o,a=f(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(e<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(p){a.e(p)}finally{a.f()}var l=[new L(e,n),new L(e,i),new L(r,i),new L(r,n)];if(t.length>2){var u,c=f(l);try{for(c.s();!(u=c.n()).done;)if(Ru(t,u.value))return!0}catch(p){c.e(p)}finally{c.f()}}for(var h=0;h<t.length-1;h++)if(zu(t[h],t[h+1],l))return!0;return!1}function zu(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=ot(t,e,n[0]);return o!==ot(t,e,n[1])||o!==ot(t,e,n[2])||o!==ot(t,e,n[3])}function Nu(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Fu(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Bu(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=L.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}function ju(t,e,n,r){var i=L.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}uo(Eu,"CircleBucket",{omit:["layers"]});var Uu=new Yo({"circle-sort-key":new Xo(de.layout_circle["circle-sort-key"])}),Vu={paint:new Yo({"circle-radius":new Xo(de.paint_circle["circle-radius"]),"circle-color":new Xo(de.paint_circle["circle-color"]),"circle-blur":new Xo(de.paint_circle["circle-blur"]),"circle-opacity":new Xo(de.paint_circle["circle-opacity"]),"circle-translate":new Wo(de.paint_circle["circle-translate"]),"circle-translate-anchor":new Wo(de.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wo(de.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wo(de.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xo(de.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xo(de.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xo(de.paint_circle["circle-stroke-opacity"])}),layout:Uu};function Gu(t,e,n,r,i,o,a,s,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);var u,c=t.tileID.canonical,h=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile,p=f(e);try{for(p.s();!(u=p.n()).done;){var d,v=u.value,y=f(v);try{var g=function(){var e=d.value,u=e.add(s),f=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(u.x,u.y,!0):0,p=n.projection.projectTilePoint(u.x,u.y,c);if(f>0){var v=n.projection.upVector(c,u.x,u.y);p.x+=v[0]*h*f,p.y+=v[1]*h*f,p.z+=v[2]*h*f}var y=o?u:qu(p.x,p.y,p.z,r),g=o?t.tilespaceRays.map((function(t){return Xu(t,f)})):t.queryGeometry.screenGeometry,m=al([],[p.x,p.y,p.z,1],r);if(!a&&o?l*=m[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/m[3]),o){var _=lu((e.y/ws+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(_,1)/au(1,_)}if(Tu(g,y,l))return{v:!0}};for(y.s();!(d=y.n()).done;){var m=g();if("object"===typeof m)return m.v}}catch(_){y.e(_)}finally{y.f()}}}catch(_){p.e(_)}finally{p.f()}return!1}function qu(t,e,n,r){var i=al([],[t,e,n,1],r);return new L(i[0]/i[3],i[1]/i[3])}var Zu=Us(0,0,0),Wu=Us(0,0,1);function Xu(t,e){var n=Fs();return Zu[2]=e,t.intersectsPlane(Zu,Wu,n),new L(n[0],n[1])}var Hu=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n)}(Eu);function Yu(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Ku(t,e,n){var r=e.width,i=e.height;r===t.width&&i===t.height||(Ju(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=e.data)}function Ju(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<i.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[u+h];return e}uo(Hu,"HeatmapBucket",{omit:["layers"]});var Qu=function(){function t(e,n){p(this,t),Yu(this,e,1,n)}return d(t,[{key:"resize",value:function(e){Ku(this,new t(e),1)}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){Ju(t,e,n,r,i,1)}}]),t}(),$u=function(){function t(e,n){p(this,t),Yu(this,e,4,n)}return d(t,[{key:"resize",value:function(e){Ku(this,new t(e),4)}},{key:"replace",value:function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){Ju(t,e,n,r,i,4)}}]),t}();uo(Qu,"AlphaImage"),uo($u,"RGBAImage");var tc={paint:new Yo({"heatmap-radius":new Xo(de.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xo(de.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wo(de.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ho(de.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wo(de.paint_heatmap["heatmap-opacity"])})};function ec(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new $u({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=t.clips[a];o(s,u,h.start*(1-c)+h.end*c)}else for(var f=0,p=0;f<n;f++,p+=4)o(0,p,f/(n-1));return i}var nc={paint:new Yo({"hillshade-illumination-direction":new Wo(de.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wo(de.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wo(de.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wo(de.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wo(de.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wo(de.paint_hillshade["hillshade-accent-color"])})},rc=ta([{name:"a_pos",components:2,type:"Int16"}],4).members,ic={exports:{}};function oc(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=ac(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=ac(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(gc(a));for(s.sort(pc),i=0;i<s.length;i++)n=dc(s[i],n);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?32767/u:0}return lc(f,p,n,r,i,u,0),p}function ac(t,e,n,r,i){var o,a;if(i===Pc(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Mc(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Mc(o,t[o],t[o+1],a);return a&&bc(a,a.next)&&(Ic(a),a=a.next),a}function sc(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!bc(r,r.next)&&0!==xc(r.prev,r,r.next))r=r.next;else{if(Ic(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function lc(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=yc(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?cc(t,r,i,o):uc(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Ic(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?lc(t=hc(sc(t),e,n),e,n,r,i,o,2):2===a&&fc(t,e,n,r,i,o):lc(sc(t),e,n,r,i,o,1);break}}}function uc(t){var e=t.prev,n=t,r=t.next;if(xc(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,f=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,d=r.next;d!==e;){if(d.x>=c&&d.x<=f&&d.y>=h&&d.y<=p&&mc(i,s,o,l,a,u,d.x,d.y)&&xc(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function cc(t,e,n,r){var i=t.prev,o=t,a=t.next;if(xc(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,f=a.y,p=s<l?s<u?s:u:l<u?l:u,d=c<h?c<f?c:f:h<f?h:f,v=s>l?s>u?s:u:l>u?l:u,y=c>h?c>f?c:f:h>f?h:f,g=yc(p,d,e,n,r),m=yc(v,y,e,n,r),_=t.prevZ,x=t.nextZ;_&&_.z>=g&&x&&x.z<=m;){if(_.x>=p&&_.x<=v&&_.y>=d&&_.y<=y&&_!==i&&_!==a&&mc(s,c,l,h,u,f,_.x,_.y)&&xc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=p&&x.x<=v&&x.y>=d&&x.y<=y&&x!==i&&x!==a&&mc(s,c,l,h,u,f,x.x,x.y)&&xc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=g;){if(_.x>=p&&_.x<=v&&_.y>=d&&_.y<=y&&_!==i&&_!==a&&mc(s,c,l,h,u,f,_.x,_.y)&&xc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=m;){if(x.x>=p&&x.x<=v&&x.y>=d&&x.y<=y&&x!==i&&x!==a&&mc(s,c,l,h,u,f,x.x,x.y)&&xc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function hc(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!bc(i,o)&&wc(i,r,r.next,o)&&Sc(i,o)&&Sc(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Ic(r),Ic(r.next),r=t=o),r=r.next}while(r!==t);return sc(r)}function fc(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&_c(a,s)){var l=Tc(a,s);return a=sc(a,a.next),l=sc(l,l.next),lc(a,e,n,r,i,o,0),void lc(l,e,n,r,i,o,0)}s=s.next}a=a.next}while(a!==t)}function pc(t,e){return t.x-e.x}function dc(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&mc(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Sc(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&vc(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=Tc(n,t);return sc(r,r.next),sc(n,n.next)}function vc(t,e){return xc(t.prev,t,e.prev)<0&&xc(e.next,t,t.next)<0}function yc(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function gc(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function mc(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function _c(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&wc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Sc(t,e)&&Sc(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(xc(t.prev,t,e.prev)||xc(t,e.prev,e))||bc(t,e)&&xc(t.prev,t,t.next)>0&&xc(e.prev,e,e.next)>0)}function xc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function bc(t,e){return t.x===e.x&&t.y===e.y}function wc(t,e,n,r){var i=Ec(xc(t,e,n)),o=Ec(xc(t,e,r)),a=Ec(xc(n,r,t)),s=Ec(xc(n,r,e));return i!==o&&a!==s||!(0!==i||!kc(t,n,e))||!(0!==o||!kc(t,r,e))||!(0!==a||!kc(n,t,r))||!(0!==s||!kc(n,e,r))}function kc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ec(t){return t>0?1:t<0?-1:0}function Sc(t,e){return xc(t.prev,t,t.next)<0?xc(t,e,t.next)>=0&&xc(t,t.prev,e)>=0:xc(t,e,t.prev)<0||xc(t,t.next,e)<0}function Tc(t,e){var n=new Cc(t.i,t.x,t.y),r=new Cc(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Mc(t,e,n,r){var i=new Cc(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ic(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Cc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pc(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}ic.exports=oc,ic.exports.default=oc,oc.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Pc(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Pc(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var u=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},oc.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var Ac=T(ic.exports);function Lc(t,e,n,r,i){Dc(t,e,n||0,r||t.length-1,i||Oc)}function Dc(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Dc(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,f=r;for(Rc(t,n,e),i(t[r],c)>0&&Rc(t,n,r);h<f;){for(Rc(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[n],c)?Rc(t,n,f):Rc(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Rc(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Oc(t,e){return t<e?-1:t>e?1:0}function zc(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=at(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(Lc(o[l],e,1,o[l].length-1,Nc),o[l]=o[l].slice(0,e));return o}function Nc(t,e){return e.area-t.area}function Fc(t,e,n){var r,i=n.patternDependencies,o=!1,a=f(e);try{for(a.s();!(r=a.n()).done;){var s=r.value.paint.get("".concat(t,"-pattern"));s.isConstant()||(o=!0);var l=s.constantOr(null);l&&(o=!0,i[l]=!0)}}catch(u){a.e(u)}finally{a.f()}return o}function Bc(t,e,n,r,i){var o,a=i.patternDependencies,s=f(e);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.paint.get("".concat(t,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:r},n,{},i.availableImages);a[c=c&&c.name?c.name:c]=!0,n.patterns[l.id]=c}}}catch(h){s.e(h)}finally{s.f()}return n}var jc=function(){function t(e){p(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new na,this.indexArray=new ma,this.indexArray2=new Ea,this.programConfigurations=new hs(e.layers,e.zoom),this.segments=new bs,this.segments2=new bs,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.projection=e.projection}return d(t,[{key:"populate",value:function(t,e,n,r){this.hasPattern=Fc("fill",this.layers,e);var i,o=this.layers[0].layout.get("fill-sort-key"),a=[],s=f(t);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,v=bu(u,d);if(this.layers[0]._featureFilter.filter(new No(this.zoom),v,n)){var y=o?o.evaluate(v,{},n,e.availableImages):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?v.geometry:xu(u,n,r),patterns:{},sortKey:y};a.push(g)}}}catch(S){s.e(S)}finally{s.f()}o&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,_=a;m<_.length;m++){var x=_[m],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var E=Bc("fill",this.layers,x,this.zoom,e);this.patternFeatures.push(E)}else this.addFeature(x,b,w,n,{},e.availableImages);e.featureIndex.insert(t[w].feature,b,w,k,this.index)}}},{key:"update",value:function(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(t,e,n,r,i){var o,a=f(this.patternFeatures);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.addFeature(s,s.geometry,s.index,e,n,r)}}catch(l){a.e(l)}finally{a.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(t,e,n,r,i){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=f(zc(e,500));try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=0,h=f(u);try{for(h.s();!(l=h.n()).done;)c+=l.value.length}catch(S){h.e(S)}finally{h.f()}var p,d=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),v=d.vertexLength,y=[],g=[],m=f(u);try{for(m.s();!(p=m.n()).done;){var _=p.value;if(0!==_.length){_!==u[0]&&g.push(y.length/2);var x=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),b=x.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(b+_.length-1,b),y.push(_[0].x),y.push(_[0].y);for(var w=1;w<_.length;w++)this.layoutVertexArray.emplaceBack(_[w].x,_[w].y),this.indexArray2.emplaceBack(b+w-1,b+w),y.push(_[w].x),y.push(_[w].y);x.vertexLength+=_.length,x.primitiveLength+=_.length}}}catch(S){m.e(S)}finally{m.f()}for(var k=Ac(y,g),E=0;E<k.length;E+=3)this.indexArray.emplaceBack(v+k[E],v+k[E+1],v+k[E+2]);d.vertexLength+=c,d.primitiveLength+=k.length/3}}catch(S){s.e(S)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,a,r)}}]),t}();uo(jc,"FillBucket",{omit:["layers","patternFeatures"]});var Uc=new Yo({"fill-sort-key":new Xo(de.layout_fill["fill-sort-key"])}),Vc={paint:new Yo({"fill-antialias":new Wo(de.paint_fill["fill-antialias"]),"fill-opacity":new Xo(de.paint_fill["fill-opacity"]),"fill-color":new Xo(de.paint_fill["fill-color"]),"fill-outline-color":new Xo(de.paint_fill["fill-outline-color"]),"fill-translate":new Wo(de.paint_fill["fill-translate"]),"fill-translate-anchor":new Wo(de.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xo(de.paint_fill["fill-pattern"])}),layout:Uc},Gc=ta([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),qc=ta([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Zc=ta([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Wc=Gc.members,Xc={},Hc=P,Yc=Kc;function Kc(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Jc,this,e)}function Jc(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Qc(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Kc.types=["Unknown","Point","LineString","Polygon"],Kc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Hc(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Kc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},Kc.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Kc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Qc(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var $c=Yc,th=eh;function eh(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(nh,this,e),this.length=this._features.length}function nh(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}eh.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $c(this._pbf,e,this.extent,this._keys,this._values)};var rh=th;function ih(t,e,n){if(3===t){var r=new rh(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var oh=Xc.VectorTile=function(t,e){this.layers=t.readFields(ih,{},e)},ah=Xc.VectorTileFeature=Yc;function sh(t,e,n,r){var i,o=[],a=0===r?function(t,e,n,r,i,o){t.push(new L(o,n+(o-e)/(r-e)*(i-n)))}:function(t,e,n,r,i,o){t.push(new L(e+(o-n)/(i-n)*(r-e),o))},s=f(t);try{for(s.s();!(i=s.n()).done;){var l,u=i.value,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(!(p.length<=2)){for(var d=[],v=0;v<p.length-1;v++){var y=p[v].x,g=p[v].y,m=p[v+1].x,_=p[v+1].y,x=0===r?y:g,b=0===r?m:_;x<e?b>e&&a(d,y,g,m,_,e):x>n?b<n&&a(d,y,g,m,_,n):d.push(p[v]),b<e&&x>=e&&a(d,y,g,m,_,e),b>n&&x<=n&&a(d,y,g,m,_,n)}var w=p[p.length-1],k=0===r?w.x:w.y;k>=e&&k<=n&&d.push(w),d.length&&(w=d[d.length-1],d[0].x===w.x&&d[0].y===w.y||d.push(d[0]),c.push(d))}}}catch(E){h.e(E)}finally{h.f()}c.length&&o.push(c)}}catch(E){s.e(E)}finally{s.f()}return o}Xc.VectorTileLayer=th;var lh=ah.types,uh=Math.pow(2,13);function ch(t,e,n,r,i,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(r*uh)<<1)+i,Math.round(s))}function hh(t,e,n){var r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}var fh=function(){function t(){p(this,t),this.acc=new L(0,0),this.polyCount=[]}return d(t,[{key:"startRing",value:function(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new L(t.x,t.y),this.max=new L(t.x,t.y))}},{key:"append",value:function(t,e){this.currentPolyCount.edges++,this.acc._add(t);var n=this.min,r=this.max;t.x<n.x?n.x=t.x:t.x>r.x&&(r.x=t.x),t.y<n.y?n.y=t.y:t.y>r.y&&(r.y=t.y),((0===t.x||t.x===ws)&&t.x===e.x)!=((0===t.y||t.y===ws)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Wn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ws!=t.x>ws&&this.addBorderIntersection(1,Wn(e.y,t.y,(ws-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Wn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ws!=t.y>ws&&this.addBorderIntersection(3,Wn(e.x,t.x,(ws-e.y)/(t.y-e.y)))}},{key:"addBorderIntersection",value:function(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}},{key:"processBorderOverlap",value:function(t,e){if(t.x===e.x){if(t.y===e.y)return;var n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{var r=0===t.y?2:3;this.addBorderIntersection(r,e.x),this.addBorderIntersection(r,t.x)}}},{key:"centroid",value:function(){var t=this.polyCount.reduce((function(t,e){return t+e.edges}),0);return 0!==t?this.acc.div(t)._round():new L(0,0)}},{key:"span",value:function(){return new L(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(t,e){return t+ +(e[0]!==Number.MAX_VALUE)}),0)}}]),t}(),ph=function(){function t(e){p(this,t),this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new ia,this.centroidVertexArray=new Na,this.indexArray=new ma,this.programConfigurations=new hs(e.layers,e.zoom),this.segments=new bs,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.enableTerrain=e.enableTerrain}return d(t,[{key:"populate",value:function(t,e,n,r){this.features=[],this.hasPattern=Fc("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){var e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ws/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,o=f(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.feature,l=a.id,u=a.index,c=a.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=bu(s,h);if(this.layers[0]._featureFilter.filter(new No(this.zoom),p,n)){var d={id:l,sourceLayerIndex:c,index:u,geometry:h?p.geometry:xu(s,n,r),properties:s.properties,type:s.type,patterns:{}},v=this.layoutVertexArray.length;this.hasPattern?this.features.push(Bc("fill-extrusion",this.layers,d,this.zoom,e)):this.addFeature(d,d.geometry,u,n,{},e.availableImages,r),e.featureIndex.insert(s,d.geometry,u,c,this.index,v)}}}catch(y){o.e(y)}finally{o.f()}this.sortBorders()}},{key:"addFeatures",value:function(t,e,n,r,i){var o,a=f(this.features);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=s.geometry;this.addFeature(s,l,s.index,e,n,r,i)}}catch(u){a.e(u)}finally{a.f()}this.sortBorders()}},{key:"update",value:function(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Zc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"uploadCentroid",value:function(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,qc.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(t,e,n,r,i,o,a){var s=[new L(0,0),new L(ws,ws)],l=a.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new fh:null,h="Polygon"===lh[t.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ua);for(var p,d,v=zc(e,500),y=v.length-1;y>=0;y--){var g=v[y];(0===g.length||(p=g[0]).every((function(t){return t.x<=0}))||p.every((function(t){return t.x>=ws}))||p.every((function(t){return t.y<=0}))||p.every((function(t){return t.y>=ws})))&&v.splice(y,1)}if(u)d=bh(v,s,r);else{d=[];var m,_=f(v);try{for(_.s();!(m=_.n()).done;){var x=m.value;d.push({polygon:x,bounds:s})}}catch(Pt){_.e(Pt)}finally{_.f()}}var b,w=h?this.edgeRadius:0,k=f(d);try{for(k.s();!(b=k.n()).done;){var E,S=b.value,T=S.polygon,M=S.bounds,I=0,C=0,P=f(T);try{for(P.s();!(E=P.n()).done;){var A=E.value;h&&!A[0].equals(A[A.length-1])&&A.push(A[0]),C+=h?A.length-1:A.length}}catch(Pt){P.e(Pt)}finally{P.f()}var D=this.segments.prepareSegment((h?5:4)*C,this.layoutVertexArray,this.indexArray);if(h){var R=[],O=[];I=D.vertexLength;var z,N=f(T);try{for(N.s();!(z=N.n()).done;){var F=z.value,B=void 0,j=void 0;F.length&&F!==T[0]&&O.push(R.length/2),B=F[1].sub(F[0])._perp()._unit();for(var U=1;U<F.length;U++){var V=F[U],G=F[U===F.length-1?1:U+1],q=V.x,Z=V.y;if(w){j=G.sub(V)._perp()._unit();var W=B.add(j)._unit(),X=w*Math.min(4,1/(B.x*W.x+B.y*W.y));q+=X*W.x,Z+=X*W.y,B=j}ch(this.layoutVertexArray,q,Z,0,0,1,1,0),D.vertexLength++,R.push(V.x,V.y),u&&hh(this.layoutVertexExtArray,l.projectTilePoint(q,Z,r),l.upVector(r,q,Z))}}}catch(Pt){N.e(Pt)}finally{N.f()}for(var H=Ac(R,O),Y=0;Y<H.length;Y+=3)this.indexArray.emplaceBack(I+H[Y],I+H[Y+2],I+H[Y+1]),D.primitiveLength++}var K,J=f(T);try{for(J.s();!(K=J.n()).done;){var Q=K.value;c&&Q.length&&c.startRing(Q[0]);var $=void 0,tt=void 0,et=void 0,nt=Q.length>4&&mh(Q[Q.length-2],Q[0],Q[1]),rt=w?vh(Q[Q.length-2],Q[0],Q[1],w):0;tt=Q[1].sub(Q[0])._perp()._unit();for(var it=!0,ot=1,at=0;ot<Q.length;ot++){var st=Q[ot-1],lt=Q[ot],ut=Q[ot===Q.length-1?1:ot+1];if(c&&h&&c.currentPolyCount.top++,gh(lt,st,M))w&&(tt=ut.sub(lt)._perp()._unit(),it=!it);else{c&&c.append(lt,st);var ct=lt.sub(st)._perp(),ht=ct.x/(Math.abs(ct.x)+Math.abs(ct.y)),ft=ct.y>0?1:0,pt=st.dist(lt);if(at+pt>32768&&(at=0),w){et=ut.sub(lt)._perp()._unit();var dt=yh(st,lt,ut,dh(tt,et),w);isNaN(dt)&&(dt=0);var vt=lt.sub(st)._unit();st=st.add(vt.mult(rt))._round(),lt=lt.add(vt.mult(-dt))._round(),rt=dt,tt=et}var yt=D.vertexLength,gt=Q.length>4&&mh(st,lt,ut),mt=_h(at,nt,it);if(ch(this.layoutVertexArray,st.x,st.y,ht,ft,0,0,mt),ch(this.layoutVertexArray,st.x,st.y,ht,ft,0,1,mt),mt=_h(at+=pt,gt,!it),nt=gt,ch(this.layoutVertexArray,lt.x,lt.y,ht,ft,0,0,mt),ch(this.layoutVertexArray,lt.x,lt.y,ht,ft,0,1,mt),D.vertexLength+=4,this.indexArray.emplaceBack(yt+0,yt+1,yt+2),this.indexArray.emplaceBack(yt+1,yt+3,yt+2),D.primitiveLength+=2,w){var _t=I+(1===ot?Q.length-2:ot-2),xt=1===ot?I:_t+1;if(this.indexArray.emplaceBack(yt+1,_t,yt+3),this.indexArray.emplaceBack(_t,xt,yt+3),D.primitiveLength+=2,void 0===$&&($=yt),!gh(ut,Q[ot],M)){var bt=ot===Q.length-1?$:D.vertexLength;this.indexArray.emplaceBack(yt+2,yt+3,bt),this.indexArray.emplaceBack(yt+3,bt+1,bt),this.indexArray.emplaceBack(yt+3,xt,bt+1),D.primitiveLength+=3}it=!it}if(u){var wt=this.layoutVertexExtArray,kt=l.projectTilePoint(st.x,st.y,r),Et=l.projectTilePoint(lt.x,lt.y,r),St=l.upVector(r,st.x,st.y),Tt=l.upVector(r,lt.x,lt.y);hh(wt,kt,St),hh(wt,kt,St),hh(wt,Et,Tt),hh(wt,Et,Tt)}}}h&&(I+=Q.length-1)}}catch(Pt){J.e(Pt)}finally{J.f()}}}catch(Pt){k.e(Pt)}finally{k.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var Mt=c.borders,It=this.featuresOnBorder.push(c)-1,Ct=0;Ct<4;Ct++)Mt[Ct][0]!==Number.MAX_VALUE&&this.borders[Ct].push(It)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}},{key:"sortBorders",value:function(){for(var t=this,e=function(e){t.borders[e].sort((function(n,r){return t.featuresOnBorder[n].borders[e][0]-t.featuresOnBorder[r].borders[e][0]}))},n=0;n<4;n++)e(n)}},{key:"encodeCentroid",value:function(t,e){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(0!==t.y){var o=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(o.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(o.y/10))}else n=Math.ceil(7*(t.x+450)),r=0;else n=0,r=+i;var a,s=i?this.centroidVertexArray.length:e.vertexArrayOffset,l=f(e.polyCount);try{for(l.s();!(a=l.n()).done;){var u=a.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*u.edges+u.top);for(var c=0;c<u.top;c++)this.centroidVertexArray.emplace(s++,n,r);for(var h=0;h<2*u.edges;h++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r)}}catch(p){l.e(p)}finally{l.f()}}}]),t}();function dh(t,e){var n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function vh(t,e,n,r){var i=e.sub(t)._perp()._unit(),o=n.sub(e)._perp()._unit();return yh(t,e,n,dh(i,o),r)}function yh(t,e,n,r,i){var o=Math.sqrt(1-r*r);return Math.min(t.dist(e)/3,e.dist(n)/3,i*o/r)}function gh(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function mh(t,e,n){if(t.x<0||t.x>=ws||e.x<0||e.x>=ws||n.x<0||n.x>=ws)return!1;var r=n.sub(e),i=r.perp(),o=t.sub(e);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function _h(t,e,n){var r=e?2|t:-3&t;return n?1|r:-2&r}function xh(){var t=Math.PI/32,e=Math.tan(t),n=$l;return n*Math.sqrt(1+2*e*e)-n}function bh(t,e,n){var r=1<<n.z,i=su(n.x/r),o=su((n.x+1)/r),a=lu(n.y/r),s=lu((n.y+1)/r);return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=[];if(!t.length||!n||!r)return a;for(var s=function(t,e){var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.push({polygon:i,bounds:e})}}catch(o){r.e(o)}finally{r.f()}},l=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(r)),c=l-u,h=[],p=0;p<Math.abs(c);p++)h.push(c>0?0:1);for(var d=0;d<Math.min(l,u);d++)h.push(0),h.push(1);var v=t;if(v=sh(v,e[0].y-i,e[1].y+i,1),!(v=sh(v,e[0].x-i,e[1].x+i,0)).length)return a;var y=[];for(h.length?y.push({polygons:v,bounds:e,depth:0}):s(v,e);y.length;){var g=y.pop(),m=g.depth,_=h[m],x=g.bounds[0],b=g.bounds[1],w=0===_?x.x:x.y,k=0===_?b.x:b.y,E=o?o(_,w,k):.5*(w+k),S=sh(g.polygons,w-i,E+i,_),T=sh(g.polygons,E-i,k+i,_);if(S.length){var M=[x,new L(0===_?E:b.x,1===_?E:b.y)];h.length>m+1?y.push({polygons:S,bounds:M,depth:m+1}):s(S,M)}if(T.length){var I=[new L(0===_?E:x.x,1===_?E:x.y),b];h.length>m+1?y.push({polygons:T,bounds:I,depth:m+1}):s(T,I)}}return a}(t,e,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,(function(t,e,i){if(0===t)return.5*(e+i);var o=lu((n.y+e/ws)/r);return(ou(.5*(lu((n.y+i/ws)/r)+o))*r-n.y)*ws}))}uo(ph,"FillExtrusionBucket",{omit:["layers","features"]}),uo(fh,"PartMetadata");var wh=new Yo({"fill-extrusion-edge-radius":new Wo(de["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),kh={paint:new Yo({"fill-extrusion-opacity":new Wo(de["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xo(de["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wo(de["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wo(de["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xo(de["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xo(de["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xo(de["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wo(de["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Wo(de["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Wo(de["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Wo(de["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:wh};function Eh(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}var Sh=function(){function t(e,n,r){p(this,t),this.z=e,this.x=n,this.y=r,this.key=Ih(0,e,e,n,r)}return d(t,[{key:"equals",value:function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}},{key:"url",value:function(t,e){var n=function(t,e,n){var r=Eh(256*t,256*(e=Math.pow(2,n)-e-1),n),i=Eh(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),t}(),Th=d((function t(e,n){p(this,t),this.wrap=e,this.canonical=n,this.key=Ih(e,n.z,n.z,n.x,n.y)})),Mh=function(){function t(e,n,r,i,o){p(this,t),this.overscaledZ=e,this.wrap=n,this.canonical=new Sh(r,+i,+o),this.key=0===n&&e===r?this.canonical.key:Ih(n,e,r,i,o)}return d(t,[{key:"equals",value:function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}},{key:"scaledTo",value:function(e){var n=this.canonical.z-e;return e>this.canonical.z?new t(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new t(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Ih(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-t;return Ih(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}},{key:"children",value:function(e){if(this.overscaledZ>=e)return[new t(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new t(n,this.wrap,n,r,i),new t(n,this.wrap,n,r+1,i),new t(n,this.wrap,n,r,i+1),new t(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}},{key:"wrapped",value:function(){return new t(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(e){return new t(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Th(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),t}();function Ih(t,e,n,r,i){var o=1<<Math.min(n,22),a=o*(i%o)+r%o;return t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*a+n)+(e-n)}uo(Sh,"CanonicalTileID"),uo(Mh,"OverscaledTileID",{omit:["projMatrix"]});var Ch=function(t){v(n,t);var e=y(n);function n(t,r,i){var o;return p(this,n),(o=e.call(this,t,r)).z=i,o}return d(n)}(L);function Ph(t,e){return t.x*e.x+t.y*e.y}function Ah(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=n.sub(i),l=o.sub(i),u=a.sub(i),c=Ph(s,s),h=Ph(s,l),p=Ph(l,l),d=Ph(u,s),v=Ph(u,l),y=c*p-h*h,g=(p*d-h*v)/y,m=(c*v-h*d)/y,_=i.z*(1-g-m)+n.z*g+o.z*m;if(isFinite(_))return _}return 1/0}var x,b=1/0,w=f(e);try{for(w.s();!(x=w.n()).done;){var k=x.value;b=Math.min(b,k.z)}}catch(E){w.e(E)}finally{w.f()}return b}function Lh(t,e,n,r,i,o,a,s){var l=a*i.getElevationAt(t,e,!0,!0),u=0!==o[0],c=u?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){var r=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*r),a=10*(e[1]-8*i),s=t.getElevationAt(r,i,!0,!0),l=t.getMeterToDEM(n),u=Math.floor(.5*(o*l-1)),c=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(r,i),f=2*u+1,p=2*c+1,d=function(t,e,n,r,i){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+i,n,!0),t.getElevationAtPixel(e,n+i,!0),t.getElevationAtPixel(e+r,n+i,!0)]}(t,h.x-u,h.y-c,f,p),v=Math.abs(d[0]-d[1]),y=Math.abs(d[2]-d[3]),g=Math.abs(d[0]-d[2])+Math.abs(d[1]-d[3]),m=Math.min(.25,.5*l*(v+y)/f),_=Math.min(.25,.5*l*g/p);return s+Math.max(m*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+r,l+n+2):l+r}}var Dh=ta([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,Rh=ta([{name:"a_packed",components:4,type:"Float32"}]).members,Oh=ah.types,zh=Math.cos(Math.PI/180*37.5),Nh=function(){function t(e){var n=this;p(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){n.gradients[t.id]={}})),this.layoutVertexArray=new oa,this.layoutVertexArray2=new aa,this.indexArray=new ma,this.programConfigurations=new hs(e.layers,e.zoom),this.segments=new bs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return d(t,[{key:"populate",value:function(t,e,n,r){this.hasPattern=Fc("line",this.layers,e);var i,o=this.layers[0].layout.get("line-sort-key"),a=[],s=f(t);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,v=bu(u,d);if(this.layers[0]._featureFilter.filter(new No(this.zoom),v,n)){var y=o?o.evaluate(v,{},n):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?v.geometry:xu(u,n,r),patterns:{},sortKey:y};a.push(g)}}}catch(I){s.e(I)}finally{s.f()}o&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=e.lineAtlas,_=e.featureIndex,x=this.addConstantDashes(m),b=0,w=a;b<w.length;b++){var k=w[b],E=k.geometry,S=k.index,T=k.sourceLayerIndex;if(x&&this.addFeatureDashes(k,m),this.hasPattern){var M=Bc("line",this.layers,k,this.zoom,e);this.patternFeatures.push(M)}else this.addFeature(k,E,S,n,m.positions,e.availableImages);_.insert(t[S].feature,E,S,T,this.index)}}},{key:"addConstantDashes",value:function(t){var e,n=!1,r=f(this.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.paint.get("line-dasharray").value,a=i.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==a.kind)n=!0;else{var s=a.value,l=o.value;if(!l)continue;t.addDash(l,s)}}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"addFeatureDashes",value:function(t,e){var n,r=this.zoom,i=f(this.layers);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.paint.get("line-dasharray").value,s=o.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==s.kind){var l=void 0,u=void 0;if("constant"===a.kind){if(!(l=a.value))continue}else l=a.evaluate({zoom:r},t);u="constant"===s.kind?s.value:s.evaluate({zoom:r},t),e.addDash(l,u),t.patterns[o.id]=e.getKey(l,u)}}}catch(c){i.e(c)}finally{i.f()}}},{key:"update",value:function(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(t,e,n,r,i){var o,a=f(this.patternFeatures);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.addFeature(s,s.geometry,s.index,e,n,r)}}catch(l){a.e(l)}finally{a.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Rh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}},{key:"addFeature",value:function(t,e,n,r,i,o){var a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),l=a.get("line-cap").evaluate(t,{}),u=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);var h,p=f(e);try{for(p.s();!(h=p.n()).done;){var d=h.value;this.addLine(d,t,s,l,u,c)}}catch(v){p.e(v)}finally{p.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}},{key:"addLine",value:function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Oh[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c,h,f,p,d,v=this.overscaling<=16?15*ws/(512*this.overscaling):0,y=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=t[l-2],d=t[u].sub(c)._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?s?t[u+1]:void 0:t[g+1])||!t[g].equals(f)){d&&(p=d),c&&(h=c),c=t[g],d=f?f.sub(c)._unit()._perp():p;var m=(p=p||d).add(d);0===m.x&&0===m.y||m._unit();var _=p.x*d.x+p.y*d.y,x=m.x*d.x+m.y*d.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),k=x<zh&&h&&f,E=p.x*d.y-p.y*d.x>0;if(k&&g>u){var S=c.dist(h);if(S>2*v){var T=c.sub(c.sub(h)._mult(v/S)._round());this.updateDistance(h,T),this.addCurrentVertex(T,p,0,0,y),h=T}}var M=h&&f,I=M?n:s?"butt":r;if(M&&"round"===I&&(b<o?I="miter":b<=2&&(I="fakeround")),"miter"===I&&b>i&&(I="bevel"),"bevel"===I&&(b>2&&(I="flipbevel"),b<i&&(I="miter")),h&&this.updateDistance(h,c),"miter"===I)m._mult(b),this.addCurrentVertex(c,m,0,0,y);else if("flipbevel"===I){if(b>100)m=d.mult(-1);else{var C=b*p.add(d).mag()/p.sub(d).mag();m._perp()._mult(C*(E?-1:1))}this.addCurrentVertex(c,m,0,0,y),this.addCurrentVertex(c,m.mult(-1),0,0,y)}else if("bevel"===I||"fakeround"===I){var P=-Math.sqrt(b*b-1),A=E?P:0,L=E?0:P;if(h&&this.addCurrentVertex(c,p,A,L,y),"fakeround"===I)for(var D=Math.round(180*w/Math.PI/20),R=1;R<D;R++){var O=R/D;if(.5!==O){var z=O-.5;O+=O*z*(O-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*z*z+(.848013+_*(.215638*_-1.06021)))}var N=d.sub(p)._mult(O)._add(p)._unit()._mult(E?-1:1);this.addHalfVertex(c,N.x,N.y,!1,E,0,y)}f&&this.addCurrentVertex(c,d,-A,-L,y)}else if("butt"===I)this.addCurrentVertex(c,m,0,0,y);else if("square"===I){var F=h?1:-1;h||this.addCurrentVertex(c,m,F,F,y),this.addCurrentVertex(c,m,0,0,y),h&&this.addCurrentVertex(c,m,F,F,y)}else"round"===I&&(h&&(this.addCurrentVertex(c,p,0,0,y),this.addCurrentVertex(c,p,1,1,y,!0)),f&&(this.addCurrentVertex(c,d,-1,-1,y,!0),this.addCurrentVertex(c,d,0,0,y)));if(k&&g<l-1){var B=c.dist(f);if(B>2*v){var j=c.add(f.sub(c)._mult(v/B)._round());this.updateDistance(c,j),this.addCurrentVertex(j,d,0,0,y),c=j}}}}}},{key:"addCurrentVertex",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i)}},{key:"addHalfVertex",value:function(t,e,n,r,i,o,a){var s=t.x,l=t.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}]),t}();uo(Nh,"LineBucket",{omit:["layers","patternFeatures"]});var Fh=new Yo({"line-cap":new Xo(de.layout_line["line-cap"]),"line-join":new Xo(de.layout_line["line-join"]),"line-miter-limit":new Wo(de.layout_line["line-miter-limit"]),"line-round-limit":new Wo(de.layout_line["line-round-limit"]),"line-sort-key":new Xo(de.layout_line["line-sort-key"])}),Bh={paint:new Yo({"line-opacity":new Xo(de.paint_line["line-opacity"]),"line-color":new Xo(de.paint_line["line-color"]),"line-translate":new Wo(de.paint_line["line-translate"]),"line-translate-anchor":new Wo(de.paint_line["line-translate-anchor"]),"line-width":new Xo(de.paint_line["line-width"]),"line-gap-width":new Xo(de.paint_line["line-gap-width"]),"line-offset":new Xo(de.paint_line["line-offset"]),"line-blur":new Xo(de.paint_line["line-blur"]),"line-dasharray":new Xo(de.paint_line["line-dasharray"]),"line-pattern":new Xo(de.paint_line["line-pattern"]),"line-gradient":new Ho(de.paint_line["line-gradient"]),"line-trim-offset":new Wo(de.paint_line["line-trim-offset"])}),layout:Fh},jh=new(function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"possiblyEvaluate",value:function(t,e){return e=new No(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),a(s(n.prototype),"possiblyEvaluate",this).call(this,t,e)}},{key:"evaluate",value:function(t,e,r,i){return e=W({},e,{zoom:Math.floor(e.zoom)}),a(s(n.prototype),"evaluate",this).call(this,t,e,r,i)}}]),n}(Xo))(Bh.paint.properties["line-width"].specification);function Uh(t,e){return e>0?e+2*t:t}jh.useIntegerZoom=!0;var Vh=ta([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gh=ta([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),qh=ta([{name:"a_projected_pos",components:4,type:"Float32"}],4);ta([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Zh=ta([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Wh=ta([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ta([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Xh=ta([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hh=ta([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ta([{name:"triangle",components:3,type:"Uint16"}]),ta([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ta([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ta([{type:"Float32",name:"offsetX"}]),ta([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Yh=24,Kh=128;function Jh(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new No(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],l=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new No(s)),maxSize:n.evaluate(new No(l)),interpolationType:i}}function Qh(t,e,n){var r=e.uSize,i=e.uSizeT,o=n.lowerSize,a=n.upperSize;return"source"===t.kind?o/Kh:"composite"===t.kind?Wn(o/Kh,a/Kh,i):r}function $h(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=t.minZoom,a=t.maxZoom,s=i?U(dr.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?r=Wn(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var tf=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Kh,evaluateSizeForFeature:Qh,evaluateSizeForZoom:$h,getSizeData:Jh});function ef(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),zo.applyArabicShaping&&(t=zo.applyArabicShaping(t)),t}(t.text,e,n)})),t}var nf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function rf(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function of(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var af=uf,sf=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},lf=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*v};function uf(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}uf.Varint=0,uf.Fixed64=1,uf.Bytes=2,uf.Fixed32=5;var cf=4294967296,hf=1/cf,ff="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function pf(t){return t.type===uf.Bytes?t.readVarint()+t.pos:t.pos+1}function df(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function vf(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function yf(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function gf(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function mf(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function _f(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function xf(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function bf(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function wf(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function kf(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Ef(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Sf(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Tf(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Mf(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}uf.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Sf(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Mf(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Sf(this.buf,this.pos)+Sf(this.buf,this.pos+4)*cf;return this.pos+=8,t},readSFixed64:function(){var t=Sf(this.buf,this.pos)+Mf(this.buf,this.pos+4)*cf;return this.pos+=8,t},readFloat:function(){var t=sf(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=sf(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return df(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return df(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return df(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return df(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return df(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return df(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ff?function(t,e,n){return ff.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==uf.Bytes)return t.push(this.readVarint(e));var n=pf(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==uf.Bytes)return t.push(this.readSVarint());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==uf.Bytes)return t.push(this.readBoolean());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==uf.Bytes)return t.push(this.readFloat());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==uf.Bytes)return t.push(this.readDouble());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==uf.Bytes)return t.push(this.readFixed32());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==uf.Bytes)return t.push(this.readSFixed32());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==uf.Bytes)return t.push(this.readFixed64());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==uf.Bytes)return t.push(this.readSFixed64());var e=pf(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===uf.Varint)for(;this.buf[this.pos++]>127;);else if(e===uf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===uf.Fixed32)this.pos+=4;else{if(e!==uf.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Tf(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Tf(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Tf(this.buf,-1&t,this.pos),Tf(this.buf,Math.floor(t*hf),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Tf(this.buf,-1&t,this.pos),Tf(this.buf,Math.floor(t*hf),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&vf(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),lf(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),lf(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&vf(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,uf.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,yf,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,gf,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,xf,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,mf,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,_f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,bf,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,wf,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,kf,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Ef,e)},writeBytesField:function(t,e){this.writeTag(t,uf.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,uf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,uf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,uf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,uf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,uf.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,uf.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,uf.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,uf.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,uf.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var If=T(af),Cf=3;function Pf(t,e,n){e.glyphs=[],1===t&&n.readMessage(Af,e)}function Af(t,e,n){if(3===t){var r=n.readMessage(Lf,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;e.glyphs.push({id:i,bitmap:new Qu({width:a+2*Cf,height:s+2*Cf},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function Lf(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var Df=Cf;function Rf(t){var e,n=0,r=0,i=f(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n+=o.w*o.h,r=Math.max(r,o.w)}}catch(y){i.e(y)}finally{i.f()}t.sort((function(t,e){return e.h-t.h}));var a,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],l=0,u=0,c=f(t);try{for(c.s();!(a=c.n()).done;)for(var h=a.value,p=s.length-1;p>=0;p--){var d=s[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===d.w&&h.h===d.h){var v=s.pop();p<s.length&&(s[p]=v)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(y){c.e(y)}finally{c.f()}return{w:l,h:u,fill:n/(l*u)||0}}var Of=1,zf=function(){function t(e,n){var r=n.pixelRatio,i=n.version,o=n.stretchX,a=n.stretchY,s=n.content;p(this,t),this.paddedRect=e,this.pixelRatio=r,this.stretchX=o,this.stretchY=a,this.content=s,this.version=i}return d(t,[{key:"tl",get:function(){return[this.paddedRect.x+Of,this.paddedRect.y+Of]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-Of,this.paddedRect.y+this.paddedRect.h-Of]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2*Of)/this.pixelRatio,(this.paddedRect.h-2*Of)/this.pixelRatio]}}]),t}(),Nf=function(){function t(e,n){p(this,t);var r={},i={};this.haveRenderCallbacks=[];var o=[];this.addImages(e,r,o),this.addImages(n,i,o);var a=Rf(o),s=a.w,l=a.h,u=new $u({width:s||1,height:l||1});for(var c in e){var h=e[c],f=r[c].paddedRect;$u.copy(h.data,u,{x:0,y:0},{x:f.x+Of,y:f.y+Of},h.data)}for(var d in n){var v=n[d],y=i[d].paddedRect,g=y.x+Of,m=y.y+Of,_=v.data.width,x=v.data.height;$u.copy(v.data,u,{x:0,y:0},{x:g,y:m},v.data),$u.copy(v.data,u,{x:0,y:x-1},{x:g,y:m-1},{width:_,height:1}),$u.copy(v.data,u,{x:0,y:0},{x:g,y:m+x},{width:_,height:1}),$u.copy(v.data,u,{x:_-1,y:0},{x:g-1,y:m},{width:1,height:x}),$u.copy(v.data,u,{x:0,y:0},{x:g+_,y:m},{width:1,height:x})}this.image=u,this.iconPositions=r,this.patternPositions=i}return d(t,[{key:"addImages",value:function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2*Of,h:i.data.height+2*Of};n.push(o),e[r]=new zf(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(t,e){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(e){return t.hasImage(e)})),t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}},{key:"patchUpdatedImage",value:function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=h(t.tl,2),i=r[0],o=r[1];n.update(e.data,void 0,{x:i,y:o})}}}]),t}();uo(zf,"ImagePosition"),uo(Nf,"ImageAtlas");var Ff={horizontal:1,vertical:2,horizontalOnly:3},Bf=-17,jf=function(){function t(){p(this,t),this.scale=1,this.fontStack="",this.imageName=null}return d(t,null,[{key:"forText",value:function(e,n){var r=new t;return r.scale=e||1,r.fontStack=n,r}},{key:"forImage",value:function(e){var n=new t;return n.imageName=e,n}}]),t}(),Uf=function(){function t(){p(this,t),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return d(t,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(t){return this.sections[this.sectionIndex[t]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(t){return this.sectionIndex[t]}},{key:"getCharCode",value:function(t){return this.text.charCodeAt(t)}},{key:"verticalizePunctuation",value:function(t){this.text=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t.charCodeAt(r+1)||null,o=t.charCodeAt(r-1)||null;n+=!e&&(i&&bo(i)&&!nf[t[r+1]]||o&&bo(o)&&!nf[t[r-1]])||!nf[t[r]]?t[r]:nf[t[r]]}return n}(this.text,t)}},{key:"trim",value:function(){for(var t=0,e=0;e<this.text.length&&Gf[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Gf[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}},{key:"substring",value:function(e,n){var r=new t;return r.text=this.text.substring(e,n),r.sectionIndex=this.sectionIndex.slice(e,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)}},{key:"addTextSection",value:function(t,e){this.text+=t.text,this.sections.push(jf.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(jf.forImage(e)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}else it("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(e,n){for(var r=new t,i=0;i<e.sections.length;i++){var o=e.sections[i];o.image?r.addImageSection(o):r.addTextSection(o,n)}return r}}]),t}();function Vf(t,e,n,r,i,o,a,s,l,u,c,h,p,d,v){var y=Uf.fromFeature(t,i);h===Ff.vertical&&y.verticalizePunctuation(p);var g=[],m=function(t,e,n,r,i,o){if(!t)return[];for(var a,s=[],l=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=Zf(t.getCharCode(s),l,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,o),u=t.text.indexOf("\u200b")>=0,c=0,h=0;h<t.length();h++){var f=t.getSection(h),p=t.getCharCode(h);if(Gf[p]||(c+=Zf(p,f,r,i,e,o)),h<t.length()-1){var d=!((a=p)<11904||!(yo["Bopomofo Extended"](a)||yo.Bopomofo(a)||yo["CJK Compatibility Forms"](a)||yo["CJK Compatibility Ideographs"](a)||yo["CJK Compatibility"](a)||yo["CJK Radicals Supplement"](a)||yo["CJK Strokes"](a)||yo["CJK Symbols and Punctuation"](a)||yo["CJK Unified Ideographs Extension A"](a)||yo["CJK Unified Ideographs"](a)||yo["Enclosed CJK Letters and Months"](a)||yo["Halfwidth and Fullwidth Forms"](a)||yo.Hiragana(a)||yo["Ideographic Description Characters"](a)||yo["Kangxi Radicals"](a)||yo["Katakana Phonetic Extensions"](a)||yo.Katakana(a)||yo["Vertical Forms"](a)||yo["Yi Radicals"](a)||yo["Yi Syllables"](a)));(qf[p]||d||f.imageName)&&s.push(Hf(h+1,c,l,s,Xf(p,t.getCharCode(h+1),d&&u),!1))}}return Yf(Hf(t.length(),c,l,s,0,!0))}(y,u,o,e,r,d),_=zo.processBidirectionalText,x=zo.processStyledBidirectionalText;if(_&&1===y.sections.length){var b,w=_(y.toString(),m),k=f(w);try{for(k.s();!(b=k.n()).done;){var E=b.value,S=new Uf;S.text=E,S.sections=y.sections;for(var T=0;T<E.length;T++)S.sectionIndex.push(0);g.push(S)}}catch(R){k.e(R)}finally{k.f()}}else if(x){var M,I=x(y.text,y.sectionIndex,m),C=f(I);try{for(C.s();!(M=C.n()).done;){var P=M.value,A=new Uf;A.text=P[0],A.sectionIndex=P[1],A.sections=y.sections,g.push(A)}}catch(R){C.e(R)}finally{C.f()}}else g=function(t,e){var n,r=[],i=t.text,o=0,a=f(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.push(t.substring(o,s)),o=s}}catch(R){a.e(R)}finally{a.f()}return o<i.length&&r.push(t.substring(o,i.length)),r}(y,m);var L=[],D={positionedLines:L,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,a,s,l,u,c,h){var p,d=0,v=0,y=0,g="right"===s?1:"left"===s?0:.5,m=!1,_=f(i);try{for(_.s();!(p=_.n()).done;){var x,b=p.value.getSections(),w=f(b);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!k.imageName){var E=e[k.fontStack];if(E&&!(m=void 0!==E.ascender&&void 0!==E.descender))break}}}catch(R){w.e(R)}finally{w.f()}if(!m)break}}catch(R){_.e(R)}finally{_.f()}var S,T,M=0,I=f(i);try{for(I.s();!(S=I.n()).done;){var C=S.value;C.trim();var P=C.getMaxScale(),A=(P-1)*Yh,L={positionedGlyphs:[],lineOffset:0};t.positionedLines[M]=L;var D=L.positionedGlyphs,O=0;if(C.length()){for(var z=0,N=0,F=0;F<C.length();F++){var B=C.getSection(F),j=C.getSectionIndex(F),U=C.getCharCode(F),V=B.scale,G=null,q=null,Z=null,W=Yh,X=0,H=!(l===Ff.horizontal||!c&&!xo(U)||c&&(Gf[U]||(T=U,yo.Arabic(T)||yo["Arabic Supplement"](T)||yo["Arabic Extended-A"](T)||yo["Arabic Presentation Forms-A"](T)||yo["Arabic Presentation Forms-B"](T))));if(B.imageName){var Y=r[B.imageName];if(!Y)continue;Z=B.imageName,t.iconsInText=t.iconsInText||!0,q=Y.paddedRect;var K=Y.displaySize;V=V*Yh/h,G={width:K[0],height:K[1],left:Of,top:-Df,advance:H?K[1]:K[0],localGlyph:!1},X=m?-G.height*V:Bf+P*Yh-K[1]*V,W=G.advance;var J=(H?K[0]:K[1])*V-Yh*P;J>0&&J>O&&(O=J)}else{var Q=n[B.fontStack];if(!Q)continue;Q[U]&&(q=Q[U]);var $=e[B.fontStack];if(!$)continue;var tt=$.glyphs[U];if(!tt)continue;if(G=tt.metrics,W=8203!==U?Yh:0,m){var et=void 0!==$.ascender?Math.abs($.ascender):0,nt=void 0!==$.descender?Math.abs($.descender):0,rt=(et+nt)*V;z<rt&&(z=rt,N=(et-nt)/2*V),X=-et*V}else X=Bf+(P-V)*Yh}H?(t.verticalizable=!0,D.push({glyph:U,imageName:Z,x:d,y:v+X,vertical:H,scale:V,localGlyph:G.localGlyph,fontStack:B.fontStack,sectionIndex:j,metrics:G,rect:q}),d+=W*V+u):(D.push({glyph:U,imageName:Z,x:d,y:v+X,vertical:H,scale:V,localGlyph:G.localGlyph,fontStack:B.fontStack,sectionIndex:j,metrics:G,rect:q}),d+=G.advance*V+u)}0!==D.length&&(y=Math.max(d-u,y),m?Jf(D,g,O,N,o*P/2):Jf(D,g,O,0,o/2)),d=0;var it=o*P+O;L.lineOffset=Math.max(O,A),v+=it,++M}else v+=o,++M}}catch(R){I.e(R)}finally{I.f()}var ot=v,at=Kf(a),st=at.horizontalAlign,lt=at.verticalAlign;(function(t,e,n,r,i,o){var a,s=(e-n)*i,l=-o*r,u=f(t);try{for(u.s();!(a=u.n()).done;){var c,h=a.value,p=f(h.positionedGlyphs);try{for(p.s();!(c=p.n()).done;){var d=c.value;d.x+=s,d.y+=l}}catch(R){p.e(R)}finally{p.f()}}}catch(R){u.e(R)}finally{u.f()}})(t.positionedLines,g,st,lt,y,ot),t.top+=-lt*ot,t.bottom=t.top+ot,t.left+=-st*y,t.right=t.left+y,t.hasBaseline=m}(D,e,n,r,g,a,s,l,h,u,p,v),!function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(0!==e.value.positionedGlyphs.length)return!1}catch(R){n.e(R)}finally{n.f()}return!0}(L)&&D}var Gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},qf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Zf(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*Yh/o+i:0}var s=n[e.fontStack],l=s&&s.glyphs[t];return l?l.metrics.advance*e.scale+i:0}function Wf(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Xf(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Hf(t,e,n,r,i,o){var a,s=null,l=Wf(e,n,i,o),u=f(r);try{for(u.s();!(a=u.n()).done;){var c=a.value,h=Wf(e-c.x,n,i,o)+c.badness;h<=l&&(s=c,l=h)}}catch(p){u.e(p)}finally{u.f()}return{index:t,x:e,priorBreak:s,badness:l}}function Yf(t){return t?Yf(t.priorBreak).concat(t.index):[]}function Kf(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Jf(t,e,n,r,i){if(e||n||r||i)for(var o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e,l=0;l<=o;l++)t[l].x-=s,t[l].y+=n+r+i}function Qf(t,e,n){var r=Kf(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0]-t.displaySize[0]*i,s=e[1]-t.displaySize[1]*o;return{image:t,top:s,bottom:s+t.displaySize[1],left:a,right:a+t.displaySize[0]}}function $f(t,e,n,r,i,o){var a,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;a=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,f,p,d=e.left*o,v=e.right*o;"width"===n||"both"===n?(p=i[0]+d-r[3],h=i[0]+v+r[1]):h=(p=i[0]+(d+v-s.displaySize[0])/2)+s.displaySize[0];var y=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+y-r[0],f=i[1]+g+r[2]):f=(c=i[1]+(y+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:p,collisionPadding:a}}var tp=function(t){v(n,t);var e=y(n);function n(t,r,i,o,a){var s;return p(this,n),(s=e.call(this,t,r)).angle=o,s.z=i,void 0!==a&&(s.segment=a),s}return d(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(L);function ep(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=t[a],h=t[a+1];if(!h)return!1;var f=t[a-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=c.dist(h)}return!0}function np(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function rp(t,e,n){return t?.6*e*n:0}function ip(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function op(t,e,n,r,i,o){for(var a=rp(n,i,o),s=ip(n,r)*o,l=0,u=np(t)/2,c=0;c<t.length-1;c++){var h=t[c],f=t[c+1],p=h.dist(f);if(l+p>u){var d=(u-l)/p,v=Wn(h.x,f.x,d),y=Wn(h.y,f.y,d),g=new tp(v,y,0,f.angleTo(h),c);return!a||ep(t,g,s,a,e)?g:void 0}l+=p}}function ap(t,e,n,r,i,o,a,s,l){var u=rp(r,o,a),c=ip(r,i),h=c*a,f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),sp(t,f?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,f,!1,l)}function sp(t,e,n,r,i,o,a,s,l){for(var u=o/2,c=np(t),h=0,f=e-n,p=[],d=0;d<t.length-1;d++){for(var v=t[d],y=t[d+1],g=v.dist(y),m=y.angleTo(v);f+n<h+g;){var _=((f+=n)-h)/g,x=Wn(v.x,y.x,_),b=Wn(v.y,y.y,_);if(x>=0&&x<l&&b>=0&&b<l&&f-u>=0&&f+u<=c){var w=new tp(x,b,0,m,d);w._round(),r&&!ep(t,w,o,r,i)||p.push(w)}}h+=g}return s||p.length||a||(p=sp(t,h/2,n,r,i,o,a,!0,l)),p}function lp(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<e&&h.x<e||(c.x<e?c=new L(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<e&&(h=new L(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new L(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new L(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new L(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new L(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new L(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new L(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(h)))))}return o}uo(tp,"Anchor");var up=1e20;function cp(t,e,n,r,i,o,a,s,l){for(var u=e;u<e+r;u++)hp(t,n*o+u,o,i,a,s,l);for(var c=n;c<n+i;c++)hp(t,c*o+e,1,r,a,s,l)}function hp(t,e,n,r,i,o,a){o[0]=0,a[0]=-up,a[1]=up,i[0]=t[e];for(var s=1,l=0,u=0;s<r;s++){i[s]=t[e+s*n];var c=s*s;do{var h=o[l];u=(i[s]-i[h]+c-h*h)/(s-h)/2}while(u<=a[l]&&--l>-1);o[++l]=s,a[l]=u,a[l+1]=up}for(var f=0,p=0;f<r;f++){for(;a[p+1]<f;)p++;var d=o[p],v=f-d;t[e+f*n]=i[d]+v*v}}var fp=2,pp={none:0,ideographs:1,all:2},dp=function(){function t(e,n,r){p(this,t),this.requestManager=e,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return d(t,[{key:"setURL",value:function(t){this.url=t}},{key:"getGlyphs",value:function(e,n){var r=this,i=[];for(var o in e){var a,s=f(e[o]);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.push({stack:o,id:l})}}catch(u){s.e(u)}finally{s.f()}}q(i,(function(e,n){var i=e.stack,o=e.id,a=r.entries[i];a||(a=r.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=a.glyphs[o];if(void 0===s){if(s=r._tinySDF(a,i,o))return a.glyphs[o]=s,void n(null,{stack:i,id:o,glyph:s});var l=Math.floor(o/256);if(256*l>65535)n(new Error("glyphs > 65535 not supported"));else if(a.ranges[l])n(null,{stack:i,id:o,glyph:s});else{var c=a.requests[l];c||(c=a.requests[l]=[],t.loadGlyphRange(i,l,r.url,r.requestManager,(function(t,e){if(e){for(var n in a.ascender=e.ascender,a.descender=e.descender,e.glyphs)r._doesCharSupportLocalGlyph(+n)||(a.glyphs[+n]=e.glyphs[+n]);a.ranges[l]=!0}var i,o=f(c);try{for(o.s();!(i=o.n()).done;)(0,i.value)(t,e)}catch(u){o.e(u)}finally{o.f()}delete a.requests[l]}))),c.push((function(t,e){t?n(t):e&&n(null,{stack:i,id:o,glyph:e.glyphs[o]||null})}))}}else n(null,{stack:i,id:o,glyph:s})}),(function(t,e){if(t)n(t);else if(e){var i,o={},a=f(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=s.stack,c=s.id,h=s.glyph;void 0===o[l]&&(o[l]={}),void 0===o[l].glyphs&&(o[l].glyphs={}),o[l].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},o[l].ascender=r.entries[l].ascender,o[l].descender=r.entries[l].descender}}catch(u){a.e(u)}finally{a.f()}n(null,o)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(t){return this.localGlyphMode!==pp.none&&(this.localGlyphMode===pp.all?!!this.localFontFamily:!!this.localFontFamily&&(yo["CJK Unified Ideographs"](t)||yo["Hangul Syllables"](t)||yo.Hiragana(t)||yo.Katakana(t)||yo["CJK Symbols and Punctuation"](t)))}},{key:"_tinySDF",value:function(e,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),(o=e.tinySDF=new t.TinySDF({fontFamily:i,fontWeight:a,fontSize:24*fp,buffer:3*fp,radius:8*fp})).fontWeight=a}if(this.localGlyphs[o.fontWeight][r])return this.localGlyphs[o.fontWeight][r];var s=String.fromCharCode(r),l=o.draw(s),u=l.data,c=l.width,h=l.height,f=l.glyphWidth,p=l.glyphHeight,d=l.glyphLeft,v=l.glyphTop,y=l.glyphAdvance;return this.localGlyphs[o.fontWeight][r]={id:r,bitmap:new Qu({width:c,height:h},u),metrics:{width:f/fp,height:p/fp,left:d/fp,top:v/fp-27,advance:y/fp,localGlyph:!0}}}}}]),t}();dp.loadGlyphRange=function(t,e,n,r,i){var o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}","".concat(o,"-").concat(a)),wt.Glyphs);Tt(s,(function(t,e){if(t)i(t);else if(e){var n,r={},o=function(t){return new If(t).readFields(Pf,{})}(e),a=f(o.glyphs);try{for(a.s();!(n=a.n()).done;){var s=n.value;r[s.id]=s}}catch(l){a.e(l)}finally{a.f()}i(null,{glyphs:r,ascender:o.ascender,descender:o.descender})}}))},dp.TinySDF=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fontSize,r=void 0===n?24:n,i=e.buffer,o=void 0===i?3:i,a=e.radius,s=void 0===a?8:a,l=e.cutoff,u=void 0===l?.25:l,c=e.fontFamily,h=void 0===c?"sans-serif":c,f=e.fontWeight,d=void 0===f?"normal":f,v=e.fontStyle,y=void 0===v?"normal":v;p(this,t),this.buffer=o,this.cutoff=u,this.radius=s;var g=this.size=r+4*o,m=this._createCanvas(g),_=this.ctx=m.getContext("2d",{willReadFrequently:!0});_.font="".concat(y," ").concat(d," ").concat(r,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}return d(t,[{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return e.width=e.height=t,e}},{key:"draw",value:function(t){var e=this.ctx.measureText(t),n=e.width,r=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent,o=e.actualBoundingBoxLeft,a=e.actualBoundingBoxRight,s=Math.ceil(r),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-o))),u=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=l+2*this.buffer,h=u+2*this.buffer,f=Math.max(c*h,0),p=new Uint8ClampedArray(f),d={data:p,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===l||0===u)return d;var v=this.ctx,y=this.buffer,g=this.gridInner,m=this.gridOuter;v.clearRect(y,y,l,u),v.fillText(t,y,y+s);var _=v.getImageData(y,y,l,u);m.fill(up,0,f),g.fill(0,0,f);for(var x=0;x<u;x++)for(var b=0;b<l;b++){var w=_.data[4*(x*l+b)+3]/255;if(0!==w){var k=(x+y)*c+b+y;if(1===w)m[k]=0,g[k]=up;else{var E=.5-w;m[k]=E>0?E*E:0,g[k]=E<0?E*E:0}}}cp(m,0,0,c,h,c,this.f,this.v,this.z),cp(g,y,y,l,u,c,this.f,this.v,this.z);for(var S=0;S<f;S++){var T=Math.sqrt(m[S])-Math.sqrt(g[S]);p[S]=Math.round(255-255*(T/this.radius+this.cutoff))}return d}}]),t}();var vp=Of;function yp(t,e,n,r){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*vp,l=o.paddedRect.h-2*vp,u=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,l]],p=function(t,e){return t+e[1]-e[0]},d=h.reduce(p,0),v=f.reduce(p,0),y=s-d,g=l-v,m=0,_=d,x=0,b=v,w=0,k=y,E=0,S=g;if(o.content&&r){var T=o.content;m=gp(h,0,T[0]),x=gp(f,0,T[1]),_=gp(h,T[0],T[2]),b=gp(f,T[1],T[3]),w=T[0]-m,E=T[1]-x,k=T[2]-T[0]-_,S=T[3]-T[1]-b}var M=function(r,i,s,l){var h=_p(r.stretch-m,_,u,t.left),f=xp(r.fixed-w,k,r.stretch,d),p=_p(i.stretch-x,b,c,t.top),y=xp(i.fixed-E,S,i.stretch,v),g=_p(s.stretch-m,_,u,t.left),T=xp(s.fixed-w,k,s.stretch,d),M=_p(l.stretch-x,b,c,t.top),I=xp(l.fixed-E,S,l.stretch,v),C=new L(h,p),P=new L(g,p),A=new L(g,M),D=new L(h,M),R=new L(f/a,y/a),O=new L(T/a,I/a),z=e*Math.PI/180;if(z){var N=Math.sin(z),F=Math.cos(z),B=[F,-N,N,F];C._matMult(B),P._matMult(B),D._matMult(B),A._matMult(B)}var j=r.stretch+r.fixed,U=i.stretch+i.fixed;return{tl:C,tr:P,bl:D,br:A,tex:{x:o.paddedRect.x+vp+j,y:o.paddedRect.y+vp+U,w:s.stretch+s.fixed-j,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:O,minFontScaleX:k/a/u,minFontScaleY:S/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var I=mp(h,y,d),C=mp(f,g,v),P=0;P<I.length-1;P++)for(var A=I[P],D=I[P+1],R=0;R<C.length-1;R++)i.push(M(A,C[R],D,C[R+1]));else i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function gp(t,e,n){var r,i=0,o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}}catch(s){o.e(s)}finally{o.f()}return i}function mp(t,e,n){var r,i=[{fixed:-vp,stretch:0}],o=f(t);try{for(o.s();!(r=o.n()).done;){var a=h(r.value,2),s=a[0],l=a[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){o.e(c)}finally{o.f()}return i.push({fixed:e+vp,stretch:n}),i}function _p(t,e,n,r){return t/e*n+r}function xp(t,e,n,r){return t-e*n/r}function bp(t,e,n,r){var i=e+t.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(e+t.positionedLines[r-1].lineOffset))/2}var wp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kp;if(p(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return d(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}}]),t}();function kp(t,e){return t<e?-1:t>e?1:0}function Ep(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=Math.min(o-r,a-i),h=c/2,f=new wp([],Sp);if(0===c)return new L(r,i);for(var p=r;p<o;p+=c)for(var d=i;d<a;d+=c)f.push(new Tp(p+h,d+h,h,t));for(var v=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new Tp(n/e,r/e,0,t)}(t),y=f.length;f.length;){var g=f.pop();(g.d>v.d||!v.d)&&(v=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,y)),g.max-v.d<=e||(h=g.h/2,f.push(new Tp(g.p.x-h,g.p.y-h,h,t)),f.push(new Tp(g.p.x+h,g.p.y-h,h,t)),f.push(new Tp(g.p.x-h,g.p.y+h,h,t)),f.push(new Tp(g.p.x+h,g.p.y+h,h,t)),y+=4)}return n&&(console.log("num probes: ".concat(y)),console.log("best distance: ".concat(v.d))),v.p}function Sp(t,e){return e.max-t.max}var Tp=d((function t(e,n,r,i){p(this,t),this.p=new L(e,n),this.h=r,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,Lu(t,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,i),this.max=this.d+this.h*Math.SQRT2})),Mp=7,Ip=Number.POSITIVE_INFINITY,Cp=Math.sqrt(2);function Pp(t,e){var n=h(e,2),r=n[0],i=n[1],o=0,a=0;if(i===Ip){r<0&&(r=0);var s=r/Cp;switch(t){case"top-right":case"top-left":a=s-Mp;break;case"bottom-right":case"bottom-left":a=-s+Mp;break;case"bottom":a=-r+Mp;break;case"top":a=r-Mp}switch(t){case"top-right":case"bottom-right":o=-s;break;case"top-left":case"bottom-left":o=s;break;case"left":o=r;break;case"right":o=-r}}else{switch(r=Math.abs(r),i=Math.abs(i),t){case"top-right":case"top-left":case"top":a=i-Mp;break;case"bottom-right":case"bottom-left":case"bottom":a=-i+Mp}switch(t){case"top-right":case"bottom-right":case"right":o=-r;break;case"top-left":case"bottom-left":case"left":o=r}}return[o,a]}function Ap(t,e,n,r,i,o,a,s,l,u){t.createArrays(),t.tilePixelRatio=ws/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var c=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){var d=t.textSizeData,v=d.minZoom,y=d.maxZoom;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new No(v),s),h["text-size"].possiblyEvaluate(new No(y),s)]}if("composite"===t.iconSizeData.kind){var g=t.iconSizeData,m=g.minZoom,_=g.maxZoom;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new No(m),s),h["icon-size"].possiblyEvaluate(new No(_),s)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new No(l+1),s),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new No(l+1),s),p.textMaxSize=h["text-size"].possiblyEvaluate(new No(18),s);var x,b="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-size"),k=f(t.features);try{var E=function(){var o,l=x.value,h=c.get("text-font").evaluate(l,{},s).join(","),f=w.evaluate(l,{},s),d=p.layoutTextSize.evaluate(l,{},s),v=(p.layoutIconSize.evaluate(l,{},s),{horizontal:{},vertical:void 0}),y=l.text,g=[0,0];if(y){var m=y.toString(),_=c.get("text-letter-spacing").evaluate(l,{},s)*Yh,k=c.get("text-line-height").evaluate(l,{},s)*Yh,E=mo(m)?_:0,S=c.get("text-anchor").evaluate(l,{},s),T=c.get("text-variable-anchor");if(!T){var M=c.get("text-radial-offset").evaluate(l,{},s);g=M?Pp(S,[M*Yh,Ip]):c.get("text-offset").evaluate(l,{},s).map((function(t){return t*Yh}))}var I=b?"center":c.get("text-justify").evaluate(l,{},s),C="point"===c.get("symbol-placement"),P=C?c.get("text-max-width").evaluate(l,{},s)*Yh:1/0,A=function(r){t.allowVerticalPlacement&&go(m)&&(v.vertical=Vf(y,e,n,i,h,P,k,S,r,E,g,Ff.vertical,!0,d,f))};if(!b&&T){for(var L="auto"===I?T.map((function(t){return Lp(t)})):[I],D=!1,R=0;R<L.length;R++){var O=L[R];if(!v.horizontal[O])if(D)v.horizontal[O]=v.horizontal[0];else{var z=Vf(y,e,n,i,h,P,k,"center",O,E,g,Ff.horizontal,!1,d,f);z&&(v.horizontal[O]=z,D=1===z.positionedLines.length)}}A("left")}else{if("auto"===I&&(I=Lp(S)),C||c.get("text-writing-mode").indexOf("horizontal")>=0||!go(m)){var N=Vf(y,e,n,i,h,P,k,S,I,E,g,Ff.horizontal,!1,d,f);N&&(v.horizontal[I]=N)}A(C?"left":I)}}var F=!1;if(l.icon&&l.icon.name){var B=r[l.icon.name];B&&(o=Qf(i[l.icon.name],c.get("icon-offset").evaluate(l,{},s),c.get("icon-anchor").evaluate(l,{},s)),F=B.sdf,void 0===t.sdfIcons?t.sdfIcons=B.sdf:t.sdfIcons!==B.sdf&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var j=Np(v.horizontal)||v.vertical;t.iconsInText||(t.iconsInText=!!j&&j.iconsInText),(j||o)&&Dp(t,l,v,o,r,p,d,0,g,F,a,s,u)};for(k.s();!(x=k.n()).done;)E()}catch(S){k.e(S)}finally{k.f()}o&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function Lp(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dp(t,e,n,r,i,o,a,s,l,u,c,p,d){var v=o.textMaxSize.evaluate(e,{},p);void 0===v&&(v=a);var y,g,m=t.layers[0].layout,_=m.get("icon-offset").evaluate(e,{},p),x=Np(n.horizontal)||n.vertical,b="globe"===d.name,w=Yh,k=a/w,E=t.tilePixelRatio*v/w,S=(y=t.overscaling,t.zoom>18&&y>2&&(y>>=1),Math.max(ws/(512*y),1)*m.get("symbol-spacing")),T=m.get("text-padding")*t.tilePixelRatio,M=m.get("icon-padding")*t.tilePixelRatio,I=O(m.get("text-max-angle")),C="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),P="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),A=m.get("symbol-placement"),L=S/2,D=m.get("icon-text-fit");r&&"none"!==D&&(t.allowVerticalPlacement&&n.vertical&&(g=$f(r,n.vertical,D,m.get("icon-text-fit-padding"),_,k)),x&&(r=$f(r,x,D,m.get("icon-text-fit-padding"),_,k)));var R=function(a,s,f){if(!(s.x<0||s.x>=ws||s.y<0||s.y>=ws)){var v=null;if(b){var y=d.projectTilePoint(s.x,s.y,f),m=y.x,x=y.y,w=y.z;v={anchor:new tp(m,x,w,0,void 0),up:d.upVector(f,s.x,s.y)}}!function(t,e,n,r,i,o,a,s,l,u,c,f,p,d,v,y,g,m,_,x,b,w,k,E,S){var T,M,I,C,P,A,L,D,R,O=t.addToLineVertexArray(e,r),z=0,N=0,F=0,B=0,j=-1,U=-1,V={},G=Wa(""),q=n?n.anchor:e,Z=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(T=l.layout.get("text-offset").evaluate(b,{},S).map((function(t){return t*Yh})),Z=(M=h(T,2))[0],W=M[1]):(Z=l.layout.get("text-radial-offset").evaluate(b,{},S)*Yh,W=Ip),t.allowVerticalPlacement&&i.vertical){var X=i.vertical;if(v)D=Bp(X),s&&(R=Bp(s));else{var H=l.layout.get("text-rotate").evaluate(b,{},S)+90;P=Fp(u,q,e,c,f,p,X,d,H,y),s&&(A=Fp(u,q,e,c,f,p,s,m,H))}}if(o){var Y=l.layout.get("icon-rotate").evaluate(b,{},S),K="none"!==l.layout.get("icon-text-fit"),J=yp(o,Y,k,K),Q=s?yp(s,Y,k,K):void 0;C=Fp(u,q,e,c,f,p,o,m,Y),z=4*J.length;var $=t.iconSizeData,tt=null;"source"===$.kind?(tt=[Kh*l.layout.get("icon-size").evaluate(b,{},S)])[0]>Op&&it("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(Rp,'. Reduce your "icon-size".')):"composite"===$.kind&&((tt=[Kh*w.compositeIconSizes[0].evaluate(b,{},S),Kh*w.compositeIconSizes[1].evaluate(b,{},S)])[0]>Op||tt[1]>Op)&&it("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(Rp,'. Reduce your "icon-size".')),t.addSymbols(t.icon,J,tt,x,_,b,!1,n,e,O.lineStartIndex,O.lineLength,-1,E,S),j=t.icon.placedSymbolArray.length-1,Q&&(N=4*Q.length,t.addSymbols(t.icon,Q,tt,x,_,b,Ff.vertical,n,e,O.lineStartIndex,O.lineLength,-1,E,S),U=t.icon.placedSymbolArray.length-1)}for(var et in i.horizontal){var nt=i.horizontal[et];I||(G=Wa(nt.text),v?L=Bp(nt):I=Fp(u,q,e,c,f,p,nt,d,l.layout.get("text-rotate").evaluate(b,{},S),y));var rt=1===nt.positionedLines.length;if(F+=zp(t,n,e,nt,a,l,v,b,y,O,i.vertical?Ff.horizontal:Ff.horizontalOnly,rt?Object.keys(i.horizontal):[et],V,j,w,E,S),rt)break}i.vertical&&(B+=zp(t,n,e,i.vertical,a,l,v,b,y,O,Ff.vertical,["vertical"],V,U,w,E,S));var ot=-1,at=function(t,e){return t?Math.max(t,e):e};ot=at(L,ot),ot=at(D,ot);var st=(ot=at(R,ot))>-1?1:0;t.glyphOffsetArray.length>=md.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(q.x,q.y,q.z,e.x,e.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical>=0?V.vertical:-1,j,U,G,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==P?P:t.collisionBoxArray.length,void 0!==P?P+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,A||t.collisionBoxArray.length,A?A+1:t.collisionBoxArray.length,c,F,B,z,N,st,0,Z,W,ot)}(t,s,v,a,n,r,i,g,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,T,C,l,0,M,P,_,e,o,u,c,p)}};if("line"===A){var z,N=f(lp(e.geometry,0,0,ws,ws));try{for(N.s();!(z=N.n()).done;){var F,B=z.value,j=ap(B,S,I,n.vertical||x,r,w,E,t.overscaling,ws),U=f(j);try{for(U.s();!(F=U.n()).done;){var V=F.value;x&&jp(t,x.text,L,V)||R(B,V,p)}}catch(st){U.e(st)}finally{U.f()}}}catch(st){N.e(st)}finally{N.f()}}else if("line-center"===A){var G,q=f(e.geometry);try{for(q.s();!(G=q.n()).done;){var Z=G.value;if(Z.length>1){var W=op(Z,I,n.vertical||x,r,w,E);W&&R(Z,W,p)}}}catch(st){q.e(st)}finally{q.f()}}else if("Polygon"===e.type){var X,H=f(zc(e.geometry,0));try{for(H.s();!(X=H.n()).done;){var Y=X.value,K=Ep(Y,16);R(Y[0],new tp(K.x,K.y,0,0,void 0),p)}}catch(st){H.e(st)}finally{H.f()}}else if("LineString"===e.type){var J,Q=f(e.geometry);try{for(Q.s();!(J=Q.n()).done;){var $=J.value;R($,new tp($[0].x,$[0].y,0,0,void 0),p)}}catch(st){Q.e(st)}finally{Q.f()}}else if("Point"===e.type){var tt,et=f(e.geometry);try{for(et.s();!(tt=et.n()).done;){var nt,rt=tt.value,ot=f(rt);try{for(ot.s();!(nt=ot.n()).done;){var at=nt.value;R([at],new tp(at.x,at.y,0,0,void 0),p)}}catch(st){ot.e(st)}finally{ot.f()}}}catch(st){et.e(st)}finally{et.f()}}}var Rp=255,Op=Rp*Kh;function zp(t,e,n,r,i,a,s,l,u,h,p,d,v,y,g,m,_){var x=function(t,e,n,r,i,a,s,l){var u=[];if(0===e.positionedLines.length)return u;var h,p=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,d=function(t){var e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n),v=Math.abs(e.top-e.bottom),y=f(e.positionedLines);try{for(y.s();!(h=y.n()).done;)v-=h.value.lineOffset}catch(at){y.e(at)}finally{y.f()}for(var g=e.positionedLines.length,m=v/g,_=e.top-n[1],x=0;x<g;++x){var b=e.positionedLines[x];_=bp(e,m,_,x);var w,k=f(b.positionedGlyphs);try{for(k.s();!(w=k.n()).done;){var E=w.value;if(E.rect){var S=E.rect||{},T=Df+1,M=!0,I=1,C=0;if(E.imageName){var P=s[E.imageName];if(!P)continue;if(P.sdf){it("SDF images are not supported in formatted text and will be ignored.");continue}M=!1,I=P.pixelRatio,T=Of/I}var A=(i||l)&&E.vertical,D=E.metrics.advance*E.scale/2,R=E.metrics,O=E.rect;if(null!==O){l&&e.verticalizable&&(C=E.imageName?D-E.metrics.width*E.scale/2:0);var z=i?[E.x+D,E.y]:[0,0],N=[0,0],F=[0,0],B=!1;i||(A?(F=[E.x+D+d[0],E.y+d[1]-C],B=!0):N=[E.x+D+n[0],E.y+n[1]-C]);var j=O.w*E.scale/(I*(E.localGlyph?fp:1)),U=O.h*E.scale/(I*(E.localGlyph?fp:1)),V=void 0,G=void 0,q=void 0,Z=void 0;if(A){var W=E.y-_,X=new L(-D,D-W),H=-Math.PI/2,Y=o(L,c(F));(V=new L(-D+N[0],N[1]))._rotateAround(H,X)._add(Y),V.x+=-W+D,V.y-=(R.left-T)*E.scale;var K=E.imageName?R.advance*E.scale:Yh*E.scale,J=String.fromCharCode(E.glyph);rf(J)?V.x+=(1-T)*E.scale:of(J)?V.x+=K-R.height*E.scale+(-T-1)*E.scale:V.x+=E.imageName||R.width+2*T===O.w&&R.height+2*T===O.h?(K-U)/2:(K-(R.height+2*T)*E.scale)/2,G=new L(V.x,V.y-j),q=new L(V.x+U,V.y),Z=new L(V.x+U,V.y-j)}else{var Q=(R.left-T)*E.scale-D+N[0],$=(-R.top-T)*E.scale+N[1],tt=Q+j,et=$+U;V=new L(Q,$),G=new L(tt,$),q=new L(Q,et),Z=new L(tt,et)}if(p){var nt=void 0;nt=i?new L(0,0):B?new L(d[0],d[1]):new L(n[0],n[1]),V._rotateAround(p,nt),G._rotateAround(p,nt),q._rotateAround(p,nt),Z._rotateAround(p,nt)}var rt=new L(0,0),ot=new L(0,0);u.push({tl:V,tr:G,bl:q,br:Z,tex:S,writingMode:e.writingMode,glyphOffset:z,sectionIndex:E.sectionIndex,isSDF:M,pixelOffsetTL:rt,pixelOffsetBR:ot,minFontScaleX:0,minFontScaleY:0})}}}}catch(at){k.e(at)}finally{k.f()}}return u}(0,r,u,a,s,l,i,t.allowVerticalPlacement),b=t.textSizeData,w=null;"source"===b.kind?(w=[Kh*a.layout.get("text-size").evaluate(l,{},_)])[0]>Op&&it("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(Rp,'. Reduce your "text-size".')):"composite"===b.kind&&((w=[Kh*g.compositeTextSizes[0].evaluate(l,{},_),Kh*g.compositeTextSizes[1].evaluate(l,{},_)])[0]>Op||w[1]>Op)&&it("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(Rp,'. Reduce your "text-size".')),t.addSymbols(t.text,x,w,u,s,l,p,e,n,h.lineStartIndex,h.lineLength,y,m,_);var k,E=f(d);try{for(E.s();!(k=E.n()).done;)v[k.value]=t.text.placedSymbolArray.length-1}catch(S){E.e(S)}finally{E.f()}return 4*x.length}function Np(t){for(var e in t)return t[e];return null}function Fp(t,e,n,r,i,o,a,s,l,u){var c=a.top,h=a.bottom,f=a.left,p=a.right,d=a.collisionPadding;if(d&&(f-=d[0],c-=d[1],p+=d[2],h+=d[3]),l){var v=new L(f,c),y=new L(p,c),g=new L(f,h),m=new L(p,h),_=O(l),x=new L(0,0);u&&(x=new L(u[0],u[1])),v._rotateAround(_,x),y._rotateAround(_,x),g._rotateAround(_,x),m._rotateAround(_,x),f=Math.min(v.x,y.x,g.x,m.x),p=Math.max(v.x,y.x,g.x,m.x),c=Math.min(v.y,y.y,g.y,m.y),h=Math.max(v.y,y.y,g.y,m.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,f,c,p,h,s,r,i,o),t.length-1}function Bp(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);var e=t.bottom-t.top;return e>0?Math.max(10,e):null}function jp(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function Up(t,e){var n=t.fovAboveCenter,r=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-r)/Math.cos(t._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),a=Math.sin(t._pitch)*o+i;return Math.min(1.01*a,i*(1/t._horizonShift))}function Vp(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};var n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,a=(t.y+1)*n,s=su(r),l=su(i),u=lu(o),c=lu(a),h=e.project(s,u),f=e.project(l,u),p=e.project(l,c),d=e.project(s,c),v=Math.min(h.x,f.x,p.x,d.x),y=Math.min(h.y,f.y,p.y,d.y),g=Math.max(h.x,f.x,p.x,d.x),m=Math.max(h.y,f.y,p.y,d.y),_=n/16;function x(t,n,r,i,o,a){var s=(r+o)/2,l=(i+a)/2,u=e.project(su(s),lu(l)),c=Math.max(0,v-u.x,y-u.y,u.x-g,u.y-m);v=Math.min(v,u.x),g=Math.max(g,u.x),y=Math.min(y,u.y),m=Math.max(m,u.y),c>_&&(x(t,u,r,i,s,l),x(u,n,s,l,o,a))}x(h,f,r,o,i,o),x(f,p,i,o,i,a),x(p,d,i,a,r,a),x(d,h,r,a,r,o),v-=_,y-=_,g+=_,m+=_;var b=1/Math.max(g-v,m-y);return{scale:b,x:v*b,y:y*b,x2:g*b,y2:m*b,projection:e}}var Gp=Is(new Float32Array(16)),qp=function(){function t(e){p(this,t),this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return d(t,[{key:"project",value:function(t,e){return{x:0,y:0,z:0}}},{key:"unproject",value:function(t,e){return new nu(0,0)}},{key:"projectTilePoint",value:function(t,e,n){return{x:t,y:e,z:0}}},{key:"locationPoint",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t._coordinatePoint(t.locationCoordinate(e),n)}},{key:"pixelsPerMeter",value:function(t,e){return au(1,t)*e}},{key:"pixelSpaceConversion",value:function(t,e,n){return 1}},{key:"farthestPixelDistance",value:function(t){return Up(t,t.pixelsPerMeter)}},{key:"pointCoordinate",value:function(t,e,n,r){var i=t.horizonLineFromTop(!1),o=new L(e,Math.max(i,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(o,r))}},{key:"pointCoordinate3D",value:function(t,e,n){var r=new L(e,n);if(t.elevation)return t.elevation.pointCoordinate(r);var i=this.pointCoordinate(t,r.x,r.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);var n=t.horizonLineFromTop();return e.y<n}},{key:"createInversionMatrix",value:function(t,e){return Gp}},{key:"createTileMatrix",value:function(t,e,n){var r,i,o,a=n.canonical,s=Is(new Float64Array(16));if(this.isReprojectedInTileSpace){var l=Vp(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,Ls(s,s,[r/l.scale,r/l.scale,t.pixelsPerMeter/e])}else r=e/t.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return As(s,s,[i,o,0]),Ls(s,s,[r/ws,r/ws,1]),s}},{key:"upVector",value:function(t,e,n){return[0,0,1]}},{key:"upVectorScale",value:function(t,e,n){return{metersToTile:1}}}]),t}(),Zp=function(t){v(n,t);var e=y(n);function n(t){var r;p(this,n),(r=e.call(this,t)).range=[4,7],r.center=t.center||[-96,37.5];var i=r.parallels=t.parallels||[29.5,45.5],o=h(i,2),a=o[0],s=o[1],l=Math.sin(O(a));return r.n=(l+Math.sin(O(s)))/2,r.c=1+l*(2*r.n-l),r.r0=Math.sqrt(r.c)/r.n,r}return d(n,[{key:"project",value:function(t,e){var n=this.n,r=this.c,i=this.r0,o=O(t-this.center[0]),a=O(e),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}},{key:"unproject",value:function(t,e){var n=this.n,r=this.c,i=this.r0+e,o=Math.atan2(t,Math.abs(i))*Math.sign(i);i*n<0&&(o-=Math.PI*Math.sign(t)*Math.sign(i));var a=O(this.center[0])*n,s=U(z((o=G(o,-Math.PI-a,Math.PI-a))/n)+this.center[0],-180,180),l=Math.asin(U((r-(t*t+i*i)*n*n)/(2*n),-1,1)),u=U(z(l),-cu,cu);return new nu(s,u)}}]),n}(qp),Wp=1.340264,Xp=-.081106,Hp=893e-6,Yp=.003796,Kp=Math.sqrt(3)/2,Jp=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"project",value:function(t,e){e=e/180*Math.PI,t=t/180*Math.PI;var n=Math.asin(Kp*Math.sin(e)),r=n*n,i=r*r*r;return{x:.5*(t*Math.cos(n)/(Kp*(Wp+3*Xp*r+i*(7*Hp+9*Yp*r)))/Math.PI+.5),y:1-.5*(n*(Wp+Xp*r+i*(Hp+Yp*r))/Math.PI+1),z:0}}},{key:"unproject",value:function(t,e){t=(2*t-.5)*Math.PI;for(var n,r=e=(2*(1-e)-1)*Math.PI,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r=U(r-(n=(r*(Wp+Xp*i+o*(Hp+Yp*i))-e)/(Wp+3*Xp*i+o*(7*Hp+9*Yp*i))),-Math.PI/3,Math.PI/3))*r)*i*i,!(Math.abs(n)<1e-12));++a);var s=Kp*t*(Wp+3*Xp*i+o*(7*Hp+9*Yp*i))/Math.cos(r),l=Math.asin(Math.sin(r)/Kp),u=U(180*s/Math.PI,-180,180),c=U(180*l/Math.PI,-cu,cu);return new nu(u,c)}}]),n}(qp),Qp=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).wrap=!0,r.supportsWorldCopies=!0,r}return d(n,[{key:"project",value:function(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}},{key:"unproject",value:function(t,e){var n=360*(t-.5),r=U(360*(.5-e),-cu,cu);return new nu(n,r)}}]),n}(qp),$p=Math.PI/2;function td(t){return Math.tan(($p+t)/2)}var ed=function(t){v(n,t);var e=y(n);function n(t){var r;p(this,n),(r=e.call(this,t)).center=t.center||[0,30];var i=r.parallels=t.parallels||[30,30],o=h(i,2),a=o[0],s=o[1],l=O(a),u=O(s);r.southernCenter=l+u<0,r.southernCenter&&(l=-l,u=-u);var c=Math.cos(l),f=td(l);return r.n=l===u?Math.sin(l):Math.log(c/Math.cos(u))/Math.log(td(u)/f),r.f=c*Math.pow(td(l),r.n)/r.n,r}return d(n,[{key:"project",value:function(t,e){e=O(e),this.southernCenter&&(e=-e),t=O(t-this.center[0]);var n=1e-6,r=this.n,i=this.f;i>0?e<-$p+n&&(e=-$p+n):e>$p-n&&(e=$p-n);var o=i/Math.pow(td(e),r),a=o*Math.sin(r*t),s=i-o*Math.cos(r*t);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}},{key:"unproject",value:function(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;var n=this.n,r=this.f,i=r-e,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(t*t+i*i),s=Math.atan2(t,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(t)*o);var l=U(z(s/n)+this.center[0],-180,180),u=U(z(2*Math.atan(Math.pow(r/a,1/n))-$p),-cu,cu);return new nu(l,this.southernCenter?-u:u)}}]),n}(qp),nd=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).wrap=!0,r.supportsWorldCopies=!0,r.supportsTerrain=!0,r.supportsFog=!0,r.supportsFreeCamera=!0,r.isReprojectedInTileSpace=!1,r.unsupportedLayers=[],r.range=null,r}return d(n,[{key:"project",value:function(t,e){return{x:iu(t),y:ou(e),z:0}}},{key:"unproject",value:function(t,e){var n=su(t),r=lu(e);return new nu(n,r)}}]),n}(qp),rd=O(cu),id=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"project",value:function(t,e){var n=(e=O(e))*e,r=n*n;return{x:.5*((t=O(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}},{key:"unproject",value:function(t,e){t=(2*t-.5)*Math.PI;var n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{var a=(o=n*n)*o;n=U(n-(i=(n*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))),-rd,rd)}while(Math.abs(i)>1e-6&&--r>0);var s=U(z(t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),l=z(n);return new nu(s,l)}}]),n}(qp),od=O(cu),ad=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"project",value:function(t,e){e=O(e),t=O(t);var n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,a=.5*(t*r+2*n*Math.sin(t/2)/o)||0,s=.5*(e+Math.sin(e)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(t,e){var n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25,o=1e-6,a=0,s=0;do{var l=Math.cos(r),u=Math.sin(r),c=2*u*l,h=u*u,f=l*l,p=Math.cos(n/2),d=Math.sin(n/2),v=2*p*d,y=d*d,g=1-f*p*p,m=g?1/g:0,_=g?Math.acos(l*p)*Math.sqrt(1/g):0,x=.5*(2*_*l*d+2*n/Math.PI)-t,b=.5*(_*u+r)-e,w=.5*m*(f*y+_*l*p*h)+1/Math.PI,k=m*(v*c/4-_*u*d),E=.125*m*(c*d-_*u*f*v),S=.5*m*(h*p+_*y*l)+.5,T=k*E-S*w;s=(x*E-b*w)/T,n=U(n-(a=(b*k-x*S)/T),-Math.PI,Math.PI),r=U(r-s,-od,od)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new nu(z(n),z(r))}}]),n}(qp),sd=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).center=t.center||[0,0],r.parallels=t.parallels||[0,0],r.cosPhi=Math.max(.01,Math.cos(O(r.parallels[0]))),r.scale=1/(2*Math.max(Math.PI*r.cosPhi,1/r.cosPhi)),r.wrap=!0,r.supportsWorldCopies=!0,r}return d(n,[{key:"project",value:function(t,e){var n=this.scale,r=this.cosPhi;return{x:O(t)*r*n+.5,y:-Math.sin(O(e))/r*n+.5,z:0}}},{key:"unproject",value:function(t,e){var n=this.scale,r=this.cosPhi,i=-(e-.5)/n,o=U(z((t-.5)/n)/r,-180,180),a=Math.asin(U(i*r,-1,1)),s=U(z(a),-cu,cu);return new nu(o,s)}}]),n}(qp),ld=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).requiresDraping=!0,r.supportsWorldCopies=!1,r.supportsFog=!0,r.zAxisUnit="pixels",r.unsupportedLayers=["debug"],r.range=[3,5],r}return d(n,[{key:"projectTilePoint",value:function(t,e,n){var r=Ul(t,e,n);return Qs(r,r,ql(Ll(n))),{x:r[0],y:r[1],z:r[2]}}},{key:"locationPoint",value:function(t,e){var n=jl(e.lat,e.lng),r=Ys([],n),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Hs(n,n,r,au(1,0)*ws*i);var o=Is(new Float64Array(16));return Ps(o,t.pixelMatrix,t.globeMatrix),Qs(n,n,o),new L(n[0],n[1])}},{key:"pixelsPerMeter",value:function(t,e){return au(1,0)*e}},{key:"pixelSpaceConversion",value:function(t,e,n){var r=au(1,t)*e,i=Wn(au(1,45)*e,r,n);return this.pixelsPerMeter(t,e)/i}},{key:"createTileMatrix",value:function(t,e,n){var r=Zl(Ll(n.canonical));return Ps(new Float64Array(16),t.globeMatrix,r)}},{key:"createInversionMatrix",value:function(t,e){var n=t.center,r=ql(Ll(e));return Rs(r,r,O(n.lng)),Ds(r,r,O(n.lat)),Ls(r,r,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(r)}},{key:"pointCoordinate",value:function(t,e,n,r){return Cl(t,e,n,!0)||new fu(0,0)}},{key:"pointCoordinate3D",value:function(t,e,n){var r=this.pointCoordinate(t,e,n,0);return[r.x,r.y,r.z]}},{key:"isPointAboveHorizon",value:function(t,e){return!Cl(t,e.x,e.y,!1)}},{key:"farthestPixelDistance",value:function(t){var e=function(t,e){var n,r=t.cameraToCenterDistance,i=t._centerAltitude*e,o=t._camera,a=t._camera.forward(),s=Vs([],Xs([],a,-r),[0,0,i]),l=t.worldSize/(2*Math.PI),u=[0,0,-l],c=t.width/t.height,h=Math.tan(t.fovAboveCenter),f=Xs([],o.up(),h),p=Xs([],o.right(),h*c),d=Ys([],Vs([],Vs([],a,f),p)),v=[];if(new vl(s,d).closestPointOnSphere(u,l,v)){var y=Vs([],v,u),g=el([],y,s);n=Math.cos(t.fovAboveCenter)*js(g)}else{var m=el([],s,u),_=el([],u,s);Ys(_,_);var x=js(m)-l;n=Math.sqrt(x*(x+2*l));var b=Math.acos(n/(l+x))-Math.acos(Ks(a,_));n*=Math.cos(b)}return 1.01*n}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Xl(t.zoom);if(n>0){var r=Up(t,au(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),o=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Wn(e,r+i*(1-Math.cos(o)),Math.pow(n,10))}return e}},{key:"upVector",value:function(t,e,n){return Ul(e,n,t,1)}},{key:"upVectorScale",value:function(t){return{metersToTile:Il(Vl(Ll(t)))}}}]),n}(nd);function ud(t){var e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new nd(t);case"equirectangular":return new Qp(t);case"naturalEarth":return new id(t);case"equalEarth":return new Jp(t);case"winkelTripel":return new ad(t);case"albers":return n?new sd(t):new Zp(t);case"lambertConformalConic":return n?new sd(t):new ed(t);case"globe":return new ld(t)}throw new Error("Invalid projection name: ".concat(t.name))}var cd=ah.types,hd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fd(t,e,n,r,i,o,a,s,l,u,c,h,f){var p=s?Math.min(Op,Math.round(s[0])):0,d=s?Math.min(Op,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),d,16*u,16*c,256*h,256*f)}function pd(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,a)}function dd(t,e,n,r,i){t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i)}function vd(t){var e,n=f(t.sections);try{for(n.s();!(e=n.n()).done;)if(Eo(e.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var yd=function(){function t(e){p(this,t),this.layoutVertexArray=new ca,this.indexArray=new ma,this.programConfigurations=e,this.segments=new bs,this.dynamicLayoutVertexArray=new aa,this.opacityVertexArray=new fa,this.placedSymbolArray=new Pa,this.globeExtVertexArray=new ha}return d(t,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Vh.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,qh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Gh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),t}();uo(yd,"SymbolBuffers");var gd=function(){function t(e,n,r){p(this,t),this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new r,this.segments=new bs,this.collisionVertexArray=new ya,this.collisionVertexArrayExt=new ga}return d(t,[{key:"upload",value:function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Zh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Wh.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),t}();uo(gd,"CollisionBuffers");var md=function(){function t(e){p(this,t),this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Is([]),this.placementViewportMatrix=Is([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jh(this.zoom,n["text-size"]),this.iconSizeData=Jh(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((function(t){return Ff[t]})),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=e.sourceID,this.projection=e.projection}return d(t,[{key:"createArrays",value:function(){this.text=new yd(new hs(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new yd(new hs(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new Da,this.lineVertexArray=new Ra,this.symbolInstances=new La}},{key:"calculateGlyphDependencies",value:function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,r&&i){var a=nf[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}}},{key:"populate",value:function(t,e,n,r){var i=this,o=this.layers[0],a=o.layout,s="globe"===this.projection.name,l=a.get("text-font"),u=a.get("text-field"),c=a.get("icon-image"),h=("constant"!==u.value.kind||u.value.value instanceof He&&!u.value.value.isEmpty()||u.value.value.toString().length>0)&&("constant"!==l.value.kind||l.value.value.length>0),p="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=a.get("symbol-sort-key");if(this.features=[],h||p){var v,y=e.iconDependencies,g=e.glyphDependencies,m=e.availableImages,_=new No(this.zoom),x=f(t);try{var b=function(){var t,e,u=v.value,c=u.feature,x=u.id,b=u.index,w=u.sourceLayerIndex,k=o._featureFilter.needGeometry,E=bu(c,k);if(!o._featureFilter.filter(_,E,n))return"continue";if(k||(E.geometry=xu(c,n,r)),s&&1!==c.type&&n.z<=5)for(var S=E.geometry,T=.98078528056,M=function(t,e){return Ks(Ul(t.x,t.y,n,1),Ul(e.x,e.y,n,1))<T},I=0;I<S.length;I++)S[I]=yu(S[I],M);if(h){var C=o.getValueAndResolveTokens("text-field",E,n,m),P=He.factory(C);vd(P)&&(i.hasRTLText=!0),(!i.hasRTLText||"unavailable"===Ro()||i.hasRTLText&&zo.isParsed())&&(t=ef(P,o,E))}if(p){var A=o.getValueAndResolveTokens("icon-image",E,n,m);e=A instanceof Ye?A:Ye.fromString(A)}if(!t&&!e)return"continue";var L=i.sortFeaturesByKey?d.evaluate(E,{},n):void 0;if(i.features.push({id:x,text:t,icon:e,index:b,sourceLayerIndex:w,geometry:E.geometry,properties:c.properties,type:cd[c.type],sortKey:L}),e&&(y[e.name]=!0),t){var D=l.evaluate(E,{},n).join(","),R="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");i.allowVerticalPlacement=i.writingModes&&i.writingModes.indexOf(Ff.vertical)>=0;var O,z=f(t.sections);try{for(z.s();!(O=z.n()).done;){var N=O.value;if(N.image)y[N.image.name]=!0;else{var F=go(t.toString()),B=N.fontStack||D,j=g[B]=g[B]||{};i.calculateGlyphDependencies(N.text,j,R,i.allowVerticalPlacement,F)}}}catch(U){z.e(U)}finally{z.f()}}};for(x.s();!(v=x.n()).done;)b()}catch(w){x.e(w)}finally{x.f()}"line"===a.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(r.x,":").concat(r.y)}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.text?c.text.toString():null;if(f){var p=l(f,h),d=l(f,h,!0);if(p in n&&d in e&&n[p]!==e[d]){var v=s(p,d,h),y=a(p,d,r[v].geometry);delete e[p],delete n[d],n[l(f,r[y].geometry,!0)]=y,r[v].geometry=null}else p in n?a(p,d,h):d in e?s(p,d,h):(o(u),e[p]=i-1,n[d]=i-1)}else o(u)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}}},{key:"update",value:function(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=ud(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.x,s=o.y;this.lineVertexArray.emplaceBack(a,s)}}catch(l){i.e(l)}finally{i.f()}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(t,e,n,r,i,o,a,s,l,u,c,f,p,d){for(var v=t.indexArray,y=t.layoutVertexArray,g=t.globeExtVertexArray,m=t.segments.prepareSegment(4*e.length,y,v,this.canOverlap?o.sortKey:void 0),_=this.glyphOffsetArray.length,x=m.vertexLength,b=this.allowVerticalPlacement&&a===Ff.vertical?Math.PI/2:0,w=o.text&&o.text.sections,k=0;k<e.length;k++){var E=e[k],S=E.tl,T=E.tr,M=E.bl,I=E.br,C=E.tex,P=E.pixelOffsetTL,A=E.pixelOffsetBR,L=E.minFontScaleX,D=E.minFontScaleY,R=E.glyphOffset,O=E.isSDF,z=E.sectionIndex,N=m.vertexLength,F=R[1];if(fd(y,l.x,l.y,S.x,F+S.y,C.x,C.y,n,O,P.x,P.y,L,D),fd(y,l.x,l.y,T.x,F+T.y,C.x+C.w,C.y,n,O,A.x,P.y,L,D),fd(y,l.x,l.y,M.x,F+M.y,C.x,C.y+C.h,n,O,P.x,A.y,L,D),fd(y,l.x,l.y,I.x,F+I.y,C.x+C.w,C.y+C.h,n,O,A.x,A.y,L,D),s){var B=s.anchor,j=B.x,U=B.y,V=B.z,G=h(s.up,3),q=G[0],Z=G[1],W=G[2];pd(g,j,U,V,q,Z,W),pd(g,j,U,V,q,Z,W),pd(g,j,U,V,q,Z,W),pd(g,j,U,V,q,Z,W),dd(t.dynamicLayoutVertexArray,j,U,V,b)}else dd(t.dynamicLayoutVertexArray,l.x,l.y,l.z,b);v.emplaceBack(N,N+1,N+2),v.emplaceBack(N+1,N+2,N+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(R[0]),k!==e.length-1&&z===e[k+1].sectionIndex||t.programConfigurations.populatePaintArrays(y.length,o,o.index,{},p,d,w&&w[z])}var X=s?s.anchor:l;t.placedSymbolArray.emplaceBack(X.x,X.y,X.z,l.x,l.y,_,this.glyphOffsetArray.length-_,x,u,c,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,f,0)}},{key:"_commitLayoutVertex",value:function(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,Math.round(a.x),Math.round(a.y))}},{key:"_addCollisionDebugVertices",value:function(t,e,n,r,i,o,a){for(var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,u=a.tileAnchorX,c=a.tileAnchorY,h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new L(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new L(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new L(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new L(t.x1,t.y2)),s.vertexLength+=4;var f=n.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(t,e,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),l=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,o)}}},{key:"_addIconDebugCollisionBoxes",value:function(t,e,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),l=this.getSymbolInstanceIconSize(t,e,o.placedIconSymbolIndex);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,o)}}},{key:"generateCollisionDebugBuffers",value:function(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gd(da,Xh.members,Ea),this.iconCollisionBox=new gd(da,Xh.members,Ea);for(var n=$h(this.iconSizeData,t),r=$h(this.textSizeData,t),i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}},{key:"getSymbolInstanceTextSize",value:function(t,e,n,r){var i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),o=Qh(this.textSizeData,t,i)/Yh;return this.tilePixelRatio*o}},{key:"getSymbolInstanceIconSize",value:function(t,e,n){var r=this.icon.placedSymbolArray.get(n),i=Qh(this.iconSizeData,t,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(t,e,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),l=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(t,e,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),l=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"updateCollisionDebugBuffers",value:function(t,e){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=$h(this.iconSizeData,t),r=$h(this.textSizeData,t),i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(t,e,n,r,i,o,a,s,l){var u={};if(e<n){var c=t.get(e),h=c.x1,f=c.y1,p=c.x2,d=c.y2,v=c.padding,y=c.projectedAnchorX,g=c.projectedAnchorY,m=c.projectedAnchorZ,_=c.tileAnchorX,x=c.tileAnchorY,b=c.featureIndex;u.textBox={x1:h,y1:f,x2:p,y2:d,padding:v,projectedAnchorX:y,projectedAnchorY:g,projectedAnchorZ:m,tileAnchorX:_,tileAnchorY:x},u.textFeatureIndex=b}if(r<i){var w=t.get(r),k=w.x1,E=w.y1,S=w.x2,T=w.y2,M=w.padding,I=w.projectedAnchorX,C=w.projectedAnchorY,P=w.projectedAnchorZ,A=w.tileAnchorX,L=w.tileAnchorY,D=w.featureIndex;u.verticalTextBox={x1:k,y1:E,x2:S,y2:T,padding:M,projectedAnchorX:I,projectedAnchorY:C,projectedAnchorZ:P,tileAnchorX:A,tileAnchorY:L},u.verticalTextFeatureIndex=D}if(o<a){var R=t.get(o),O=R.x1,z=R.y1,N=R.x2,F=R.y2,B=R.padding,j=R.projectedAnchorX,U=R.projectedAnchorY,V=R.projectedAnchorZ,G=R.tileAnchorX,q=R.tileAnchorY,Z=R.featureIndex;u.iconBox={x1:O,y1:z,x2:N,y2:F,padding:B,projectedAnchorX:j,projectedAnchorY:U,projectedAnchorZ:V,tileAnchorX:G,tileAnchorY:q},u.iconFeatureIndex=Z}if(s<l){var W=t.get(s),X=W.x1,H=W.y1,Y=W.x2,K=W.y2,J=W.padding,Q=W.projectedAnchorX,$=W.projectedAnchorY,tt=W.projectedAnchorZ,et=W.tileAnchorX,nt=W.tileAnchorY,rt=W.featureIndex;u.verticalIconBox={x1:X,y1:H,x2:Y,y2:K,padding:J,projectedAnchorX:Q,projectedAnchorY:$,projectedAnchorZ:tt,tileAnchorX:et,tileAnchorY:nt},u.verticalIconFeatureIndex=rt}return u}},{key:"deserializeCollisionBoxes",value:function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),o}},{key:"addToSortKeyRanges",value:function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}},{key:"sortFeatures",value:function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var e,n=f(this.symbolInstanceIndexes);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);var o=i.rightJustifiedTextSymbolIndex,a=i.centerJustifiedTextSymbolIndex,s=i.leftJustifiedTextSymbolIndex,l=i.verticalPlacedTextSymbolIndex,u=i.placedIconSymbolIndex,c=i.verticalPlacedIconSymbolIndex;o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&a!==o&&this.addIndicesForPlacedSymbol(this.text,a),s>=0&&s!==a&&s!==o&&this.addIndicesForPlacedSymbol(this.text,s),l>=0&&this.addIndicesForPlacedSymbol(this.text,l),u>=0&&this.addIndicesForPlacedSymbol(this.icon,u),c>=0&&this.addIndicesForPlacedSymbol(this.icon,c)}}catch(h){n.e(h)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),t}();uo(md,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),md.MAX_GLYPHS=65535,md.addDynamicAttributes=dd;var _d=new Yo({"symbol-placement":new Wo(de.layout_symbol["symbol-placement"]),"symbol-spacing":new Wo(de.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wo(de.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xo(de.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wo(de.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wo(de.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wo(de.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wo(de.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wo(de.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xo(de.layout_symbol["icon-size"]),"icon-text-fit":new Wo(de.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wo(de.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xo(de.layout_symbol["icon-image"]),"icon-rotate":new Xo(de.layout_symbol["icon-rotate"]),"icon-padding":new Wo(de.layout_symbol["icon-padding"]),"icon-keep-upright":new Wo(de.layout_symbol["icon-keep-upright"]),"icon-offset":new Xo(de.layout_symbol["icon-offset"]),"icon-anchor":new Xo(de.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wo(de.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wo(de.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wo(de.layout_symbol["text-rotation-alignment"]),"text-field":new Xo(de.layout_symbol["text-field"]),"text-font":new Xo(de.layout_symbol["text-font"]),"text-size":new Xo(de.layout_symbol["text-size"]),"text-max-width":new Xo(de.layout_symbol["text-max-width"]),"text-line-height":new Xo(de.layout_symbol["text-line-height"]),"text-letter-spacing":new Xo(de.layout_symbol["text-letter-spacing"]),"text-justify":new Xo(de.layout_symbol["text-justify"]),"text-radial-offset":new Xo(de.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wo(de.layout_symbol["text-variable-anchor"]),"text-anchor":new Xo(de.layout_symbol["text-anchor"]),"text-max-angle":new Wo(de.layout_symbol["text-max-angle"]),"text-writing-mode":new Wo(de.layout_symbol["text-writing-mode"]),"text-rotate":new Xo(de.layout_symbol["text-rotate"]),"text-padding":new Wo(de.layout_symbol["text-padding"]),"text-keep-upright":new Wo(de.layout_symbol["text-keep-upright"]),"text-transform":new Xo(de.layout_symbol["text-transform"]),"text-offset":new Xo(de.layout_symbol["text-offset"]),"text-allow-overlap":new Wo(de.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wo(de.layout_symbol["text-ignore-placement"]),"text-optional":new Wo(de.layout_symbol["text-optional"])}),xd={paint:new Yo({"icon-opacity":new Xo(de.paint_symbol["icon-opacity"]),"icon-color":new Xo(de.paint_symbol["icon-color"]),"icon-halo-color":new Xo(de.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xo(de.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xo(de.paint_symbol["icon-halo-blur"]),"icon-translate":new Wo(de.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wo(de.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xo(de.paint_symbol["text-opacity"]),"text-color":new Xo(de.paint_symbol["text-color"],{runtimeType:Te,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Xo(de.paint_symbol["text-halo-color"]),"text-halo-width":new Xo(de.paint_symbol["text-halo-width"]),"text-halo-blur":new Xo(de.paint_symbol["text-halo-blur"]),"text-translate":new Wo(de.paint_symbol["text-translate"]),"text-translate-anchor":new Wo(de.paint_symbol["text-translate-anchor"])}),layout:_d},bd=function(){function t(e){p(this,t),this.type=e.property.overrides?e.property.overrides.runtimeType:we,this.defaultValue=e}return d(t,[{key:"evaluate",value:function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),t}();uo(bd,"FormatSectionOverride",{omit:["defaultValue"]});var wd=function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,xd)}return d(n,[{key:"recalculate",value:function(t,e){a(s(n.prototype),"recalculate",this).call(this,t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var r=this.layout.get("text-writing-mode");if(r){var i,o=[],l=f(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;o.indexOf(u)<0&&o.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||ui(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)}},{key:"createBucket",value:function(t){return new md(t)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var t,e=f(xd.paint.overridableProperties);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),o=new bd(i),a=new li(o,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new hi("source",a):new fi("composite",a,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new qo(i.property,s,i.parameters)}}}catch(l){e.e(l)}finally{e.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,e,r){return!(!this.layout||e.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,t)}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}}],[{key:"hasPaintOverride",value:function(t,e){var n=t.get("text-field"),r=xd.paint.properties[e],i=!1,o=function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r.overrides&&r.overrides.hasOverride(o))return void(i=!0)}}catch(a){n.e(a)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof He)o(n.value.value.sections);else if("source"===n.value.kind){var a=function t(e){i||(e instanceof en&&Qe(e.value)===Pe?o(e.value.sections):e instanceof sn?o(e.sections):e.eachChild(t))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i}}]),n}(ms),kd={paint:new Yo({"background-color":new Wo(de.paint_background["background-color"]),"background-pattern":new Wo(de.paint_background["background-pattern"]),"background-opacity":new Wo(de.paint_background["background-opacity"])})},Ed={paint:new Yo({"raster-opacity":new Wo(de.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wo(de.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wo(de.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wo(de.paint_raster["raster-brightness-max"]),"raster-saturation":new Wo(de.paint_raster["raster-saturation"]),"raster-contrast":new Wo(de.paint_raster["raster-contrast"]),"raster-resampling":new Wo(de.paint_raster["raster-resampling"]),"raster-fade-duration":new Wo(de.paint_raster["raster-fade-duration"])})},Sd=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t,{})).implementation=t,r}return d(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"isLayerDraped",value:function(){return void 0!==this.implementation.renderToTile}},{key:"shouldRedrape",value:function(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}},{key:"onRemove",value:function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}]),n}(ms),Td={paint:new Yo({"sky-type":new Wo(de.paint_sky["sky-type"]),"sky-atmosphere-sun":new Wo(de.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Wo(de.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Wo(de.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Wo(de.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ho(de.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Wo(de.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Wo(de.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Wo(de.paint_sky["sky-opacity"])})};function Md(t,e,n){var r=[0,0,1],i=ll([]);return cl(i,i,n?-O(t)+Math.PI:O(t)),ul(i,i,-O(e)),$s(r,r,i),Ys(r,r)}for(var Id={circle:function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,Vu)}return d(n,[{key:"createBucket",value:function(t){return new Eu(t)}},{key:"queryRadius",value:function(t){var e=t;return Nu("circle-radius",this,e)+Nu("circle-stroke-width",this,e)+Fu(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a,s){var l=ju(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Gu(t,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}}]),n}(ms),heatmap:function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t,tc))._updateColorRamp(),r}return d(n,[{key:"createBucket",value:function(t){return new Hu(t)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){"heatmap-color"===t&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=ec({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(t){return Nu("heatmap-radius",this,t)}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a,s){var l=this.paint.get("heatmap-radius").evaluate(e,n);return Gu(t,r,o,a,s,!0,!0,new L(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}}]),n}(ms),hillshade:function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,nc)}return d(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(ms),fill:function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,Vc)}return d(n,[{key:"getProgramIds",value:function(){var t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}},{key:"recalculate",value:function(t,e){a(s(n.prototype),"recalculate",this).call(this,t,e);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(t){return new jc(t)}},{key:"queryRadius",value:function(){return Fu(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o){return!t.queryGeometry.isAboveHorizon&&Mu(Bu(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ms),"fill-extrusion":function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,kh)}return d(n,[{key:"createBucket",value:function(t){return new ph(t)}},{key:"queryRadius",value:function(){return Fu(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a,s,l){var u=ju(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(e,n),p=this.paint.get("fill-extrusion-base").evaluate(e,n),d=[0,0],v=s&&o.elevation,y=o.elevation?o.elevation.exaggeration():1,g=t.tile.getBucket(this);if(v&&g instanceof ph){var m=g.centroidVertexArray,_=l+1;_<m.length&&(d[0]=m.geta_centroid_pos0(_),d[1]=m.geta_centroid_pos1(_))}if(0===d[0]&&1===d[1])return!1;"globe"===o.projection.name&&(r=bh([r],[new L(0,0),new L(ws,ws)],t.tileID.canonical).map((function(t){return t.polygon})).flat());var x=function(t,e,n,r,i,o,a,s,l,u,c){return"globe"===t.projection.name?function(t,e,n,r,i,o,a,s,l,u,c){var h=[],p=[],d=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,v=[0,0,0,1],y=[0,0,0,1],g=function(t,e,n,r){t[0]=e,t[1]=n,t[2]=r,t[3]=1},m=xh();n>0&&(n+=m),r+=m;var _,x=f(e);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=[],E=[],S=f(w);try{for(S.s();!(b=S.n()).done;){var T=b.value,M=T.x+i.x,I=T.y+i.y,C=t.projection.projectTilePoint(M,I,c),P=t.projection.upVector(c,T.x,T.y),A=n,L=r;if(a){var D=Lh(M,I,n,r,a,s,l,u);A+=D.base,L+=D.top}0!==n?g(v,C.x+P[0]*d*A,C.y+P[1]*d*A,C.z+P[2]*d*A):g(v,C.x,C.y,C.z),g(y,C.x+P[0]*d*L,C.y+P[1]*d*L,C.z+P[2]*d*L),Qs(v,v,o),Qs(y,y,o),k.push(new Ch(v[0],v[1],v[2])),E.push(new Ch(y[0],y[1],y[2]))}}catch(R){S.e(R)}finally{S.f()}h.push(k),p.push(E)}}catch(R){x.e(R)}finally{x.f()}return[h,p]}(t,e,n,r,i,o,a,s,l,u,c):a?function(t,e,n,r,i,o,a,s,l){var u,c=[],h=[],p=[0,0,0,1],d=f(t);try{for(d.s();!(u=d.n()).done;){var v,y=u.value,g=[],m=[],_=f(y);try{for(_.s();!(v=_.n()).done;){var x=v.value,b=x.x+r.x,w=x.y+r.y,k=Lh(b,w,e,n,o,a,s,l);p[0]=b,p[1]=w,p[2]=k.base,p[3]=1,al(p,p,i),p[3]=Math.max(p[3],1e-5);var E=new Ch(p[0]/p[3],p[1]/p[3],p[2]/p[3]);p[0]=b,p[1]=w,p[2]=k.top,p[3]=1,al(p,p,i),p[3]=Math.max(p[3],1e-5);var S=new Ch(p[0]/p[3],p[1]/p[3],p[2]/p[3]);g.push(E),m.push(S)}}catch(T){_.e(T)}finally{_.f()}c.push(g),h.push(m)}}catch(T){d.e(T)}finally{d.f()}return[c,h]}(e,n,r,i,o,a,s,l,u):function(t,e,n,r,i){var o,a=[],s=[],l=i[8]*e,u=i[9]*e,c=i[10]*e,h=i[11]*e,p=i[8]*n,d=i[9]*n,v=i[10]*n,y=i[11]*n,g=f(t);try{for(g.s();!(o=g.n()).done;){var m,_=o.value,x=[],b=[],w=f(_);try{for(w.s();!(m=w.n()).done;){var k=m.value,E=k.x+r.x,S=k.y+r.y,T=i[0]*E+i[4]*S+i[12],M=i[1]*E+i[5]*S+i[13],I=i[2]*E+i[6]*S+i[14],C=i[3]*E+i[7]*S+i[15],P=T+l,A=M+u,L=I+c,D=Math.max(C+h,1e-5),R=T+p,O=M+d,z=I+v,N=Math.max(C+y,1e-5);x.push(new Ch(P/D,A/D,L/D)),b.push(new Ch(R/N,O/N,z/N))}}catch(F){w.e(F)}finally{w.f()}a.push(x),s.push(b)}}catch(F){g.e(F)}finally{g.f()}return[a,s]}(e,n,r,i,o)}(o,r,p,c,u,a,v?s:null,d,y,o.center.lat,t.tileID.canonical),b=h(x,2),w=b[0],k=b[1],E=t.queryGeometry;return function(t,e,n){var r=1/0;Mu(n,e)&&(r=Ah(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var l=o[s],u=[l,o[s+1],a[s+1],a[s],l];Su(n,u)&&(r=Math.min(r,Ah(n,u)))}return r!==1/0&&r}(w,k,E.isPointQuery()?E.screenBounds:E.screenGeometry)}}]),n}(ms),line:function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t,Bh)).gradientVersion=0,r}return d(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(t){if("line-gradient"===t){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Zn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"widthExpression",value:function(){return this._transitionablePaint._values["line-width"].value.expression}},{key:"recalculate",value:function(t,e){a(s(n.prototype),"recalculate",this).call(this,t,e),this.paint._values["line-floorwidth"]=jh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}},{key:"createBucket",value:function(t){return new Nh(t)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(t){return new cs(this,t)}},{key:"queryRadius",value:function(t){var e=t,n=Uh(Nu("line-width",this,e),Nu("line-gap-width",this,e)),r=Nu("line-offset",this,e);return n/2+Math.abs(r)+Fu(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;var a=Bu(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),s=t.pixelToTileUnitsFactor/2*Uh(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new L(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var l=o[s],u=o[s+1],c=0===s?r:l.sub(o[s-1])._unit()._perp(),h=s===o.length-1?r:u.sub(l)._unit()._perp(),f=c._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),a.push(f._mult(e)._add(l))}n.push(a)}return n}(r,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(Ru(t,i[o]))return!0;if(Iu(t,i,n))return!0}return!1}(a,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ms),symbol:wd,background:function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,kd)}return d(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(ms),raster:function(t){v(n,t);var e=y(n);function n(t){return p(this,n),e.call(this,t,Ed)}return d(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(ms),sky:function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t,Td))._updateColorRamp(),r}return d(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=ec({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}},{key:"getCenter",value:function(t,e){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),r=!n,i=t.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&it("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Md(o.azimuthal,90-o.polar,e):Md(n[0],90-n[1],e)}var a=this.paint.get("sky-gradient-center");return Md(a[0],90-a[1],e)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}]),n}(ms)},Cd=function(){function t(e,n,r,i){p(this,t),this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(n,i)}return d(t,[{key:"update",value:function(t,e,n){var r=t.width,i=t.height,o=this.context,a=o.gl,s=m.HTMLImageElement,l=m.HTMLCanvasElement,u=m.HTMLVideoElement,c=m.ImageData,h=m.ImageBitmap;if(a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){var f=n||{x:0,y:0},p=f.x,d=f.y;t instanceof s||t instanceof l||t instanceof u||t instanceof c||h&&t instanceof h?a.texSubImage2D(a.TEXTURE_2D,0,p,d,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,p,d,r,i,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[r,i],t instanceof s||t instanceof l||t instanceof u||t instanceof c||h&&t instanceof h?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,i,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(e&&e.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}},{key:"bind",value:function(t,e){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?t===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),t}(),Pd=function(){function t(e){var n=this;p(this,t),this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return d(t,[{key:"trigger",value:function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),t}(),Ad=function(){function t(){p(this,t),this.tasks={},this.taskQueue=[],Q(["process"],this),this.invoker=new Pd(this.process),this.nextId=0}return d(t,[{key:"add",value:function(t,e){var n=this,r=this.nextId++,i=function(t){var e=t.type,n=t.isSymbolTile,r=t.zoom;return r=r||0,"message"===e?0:"maybePrepare"!==e||n?"parseTile"!==e||n?"parseTile"===e&&n?300-r:"maybePrepare"===e&&n?400-r:500:200-r:100-r}(e);if(0===i){st();try{t()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:t,metadata:e,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var t=this;st();try{if(this.taskQueue=this.taskQueue.filter((function(e){return!!t.tasks[e]})),!this.taskQueue.length)return;var e=this.pick();if(null===e)return;var n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var t=null,e=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;var i=this.taskQueue[t];return this.taskQueue.splice(t,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),t}(),Ld=function(){function t(e){p(this,t),this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return d(t,[{key:"encode",value:function(t){return this._stringToNumber[t]}},{key:"decode",value:function(t){return this._numberToString[t]}}]),t}(),Dd=["tile","layer","source","sourceLayer","state"],Rd=function(){function t(e,n,r,i,o){p(this,t),this.type="Feature",this._vectorTileFeature=e,this._z=n,this._x=r,this._y=i,this.properties=e.properties,this.id=o}return d(t,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(t){this._geometry=t}},{key:"toJSON",value:function(){var t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(var e=0,n=Dd;e<n.length;e++){var r=n[e];void 0!==this[r]&&(t[r]=this[r])}return t}}]),t}(),Od=32,zd=33,Nd=new Uint16Array(8184),Fd=0;Fd<2046;Fd++){var Bd=Fd+2,jd=0,Ud=0,Vd=0,Gd=0,qd=0,Zd=0;for(1&Bd?Vd=Gd=qd=Od:jd=Ud=Zd=Od;(Bd>>=1)>1;){var Wd=jd+Vd>>1,Xd=Ud+Gd>>1;1&Bd?(Vd=jd,Gd=Ud,jd=qd,Ud=Zd):(jd=Vd,Ud=Gd,Vd=qd,Gd=Zd),qd=Wd,Zd=Xd}var Hd=4*Fd;Nd[Hd+0]=jd,Nd[Hd+1]=Ud,Nd[Hd+2]=Vd,Nd[Hd+3]=Gd}var Yd=new Uint16Array(2178),Kd=new Uint8Array(1089),Jd=new Uint16Array(1089);function Qd(t){return 0===t?-.03125:32===t?.03125:0}var $d=ta([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),tv={type:2,extent:ws,loadGeometry:function(){return[[new L(0,0),new L(ws+1,0),new L(ws+1,ws+1),new L(0,ws+1),new L(0,0)]]}},ev=function(){function t(e,n,r,i,o){p(this,t),this.tileID=e,this.uid=H(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=o,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return d(t,[{key:"registerFadeDuration",value:function(t){var e=t+this.timeAdded;e<le.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Vp(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;var r,i=f(t);try{var o=function(){var t=r.value,i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n[s.id]=t}}catch(l){a.e(l)}finally{a.f()}}};for(i.s();!(r=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof md){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof md&&a.hasRTLText){this.hasRTLText=!0,zo.isLoading()||zo.isLoaded()||"deferred"!==Ro()||Oo();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Ia}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(t){return this.buckets[t.id]}},{key:"upload",value:function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cd(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cd(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Cd(t,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},t,e,n):{}}},{key:"querySourceFeatures",value:function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=Si(e&&e.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},f=0;f<o.length;f++){var p=o.feature(f);if(a.needGeometry){var d=bu(p,!0);if(!a.filter(new No(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new No(this.tileID.overscaledZ),p))continue;var v=n.getId(p,i),y=new Rd(p,l,u,c,v);y.tile=h,t.push(y)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(t){var e=this.expirationTime;if(t.cacheControl){var n=lt(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length&&e){var n=this.latestFeatureIndex.loadVTLayers(),r=e.style.listImages();for(var i in this.buckets)if(e.style.hasLayer(i)){var o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=t[a];if(s&&l&&0!==Object.keys(l).length){if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Nh||o instanceof jc){var u=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&u&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(u.id,this.tileID)}var c=e&&e.style&&e.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<le.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(t){this.symbolFadeHoldUntil=le.now()+t}},{key:"setTexture",value:function(t,e){var n=e.context,r=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new Cd(n,t,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}},{key:"setDependencies",value:function(t,e){var n,r={},i=f(e);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(o){i.e(o)}finally{i.f()}this.dependencies[t]=r}},{key:"hasDependency",value:function(t,e){var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.dependencies[i];if(o){var a,s=f(e);try{for(s.s();!(a=s.n()).done;)if(o[a.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(t,e){if(e&&"mercator"!==e.name&&!this._tileDebugBuffer){for(var n=xu(tv,this.tileID.canonical,this.tileTransform)[0],r=new na,i=new Sa,o=0;o<n.length;o++){var a=n[o],s=a.x,l=a.y;r.emplaceBack(s,l),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(r,dl.members),this._tileDebugSegments=bs.simpleSegment(0,0,r.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(t,e){if(!this._tileBoundsBuffer&&e&&"mercator"!==e.name){var n,r,i=xu(tv,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var o=function(t,e){for(var n=Vp(t,e),r=Math.pow(2,t.z),i=0;i<zd;i++)for(var o=0;o<zd;o++){var a=su((t.x+(o+Qd(o))/Od)/r),s=lu((t.y+(i+Qd(i))/Od)/r),l=e.project(a,s),u=i*zd+o;Yd[2*u+0]=Math.round((l.x*n.scale-n.x)*ws),Yd[2*u+1]=Math.round((l.y*n.scale-n.y)*ws)}Kd.fill(0),Jd.fill(0);for(var c=2045;c>=0;c--){var h=4*c,f=Nd[h+0],p=Nd[h+1],d=Nd[h+2],v=Nd[h+3],y=f+d>>1,g=p+v>>1,m=y+g-p,_=g+f-y,x=p*zd+f,b=v*zd+d,w=g*zd+y,k=Math.hypot((Yd[2*x+0]+Yd[2*b+0])/2-Yd[2*w+0],(Yd[2*x+1]+Yd[2*b+1])/2-Yd[2*w+1])>=16;Kd[w]=Kd[w]||(k?1:0),c<1022&&(Kd[w]=Kd[w]||Kd[(p+_>>1)*zd+(f+m>>1)]||Kd[(v+_>>1)*zd+(d+m>>1)])}var E=new ia,S=new ma,T=0;function M(t,e){var n=e*zd+t;return 0===Jd[n]&&(E.emplaceBack(Yd[2*n+0],Yd[2*n+1],t*ws/Od,e*ws/Od),Jd[n]=++T),Jd[n]-1}function I(t,e,n,r,i,o){var a=t+n>>1,s=e+r>>1;if(Math.abs(t-i)+Math.abs(e-o)>1&&Kd[s*zd+a])I(i,o,t,e,a,s),I(n,r,i,o,a,s);else{var l=M(t,e),u=M(n,r),c=M(i,o);S.emplaceBack(l,u,c)}}return I(0,0,Od,Od,Od,0),I(Od,Od,0,0,0,Od),{vertices:E,indices:S}}(this.tileID.canonical,e);n=o.vertices,r=o.indices}else{n=new ia,r=new ma;var a,s=f(i);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.x,c=l.y;n.emplaceBack(u,c,0,0)}}catch(d){s.e(d)}finally{s.f()}for(var h=Ac(n.int16,void 0,4),p=0;p<h.length;p+=3)r.emplaceBack(h[p],h[p+1],h[p+2])}this._tileBoundsBuffer=t.createVertexBuffer(n,$d.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(r),this._tileBoundsSegments=bs.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(t,e){var n=e.projection;if(n&&"globe"===n.name&&!e.freezeTileCoverage){var r,i=this.tileID.canonical,o=ql(Rl(i,e)),a=Xl(e.zoom);a>0&&(r=Cs(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,i,e,o,r,a),this._makeGlobeTileDebugTextBuffer(t,i,e,o,r,a)}}},{key:"_globePoint",value:function(t,e,n,r,i,o,a){var s=Ul(t,e,n);if(o){var l=1<<n.z,u=iu(r.center.lng),c=ou(r.center.lat),h=(n.x+.5)/l-u,f=0;h>.5?f=-1:h<-.5&&(f=1);var p=(t/ws+n.x)/l+f,d=(e/ws+n.y)/l;p=(p-u)*r._pixelsPerMercatorPixel+u,d=(d-c)*r._pixelsPerMercatorPixel+c;var v=[p*r.worldSize,d*r.worldSize,0];Qs(v,v,o),s=Dl(s,v,a)}return Qs(s,s,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(t,e,n,r,i,o){var a=this,s=new na,l=new Sa,u=new ra,c=function(t,c,h,f,p){for(var d=(h-t)/(p-1),v=(f-c)/(p-1),y=s.length,g=0;g<p;g++){var m=t+g*d,_=c+g*v;s.emplaceBack(m,_);var x=a._globePoint(m,_,e,n,r,i,o);u.emplaceBack(x[0],x[1],x[2]),l.emplaceBack(y+g)}},h=ws;c(0,0,h,0,16),c(h,0,h,h,16),c(h,h,0,h,16),c(0,h,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(l),this._tileDebugBuffer=t.createVertexBuffer(s,dl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(u,pl.members),this._tileDebugSegments=bs.simpleSegment(0,0,s.length,l.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(t,e,n,r,i,o){var a=ws/4,s=new na,l=new ma,u=new ra,c=25;l.reserve(32),s.reserve(c),u.reserve(c);for(var h=function(t,e){return c*t+e},f=0;f<c;f++)for(var p=f*a,d=0;d<c;d++){var v=d*a;s.emplaceBack(v,p);var y=this._globePoint(v,p,e,n,r,i,o);u.emplaceBack(y[0],y[1],y[2])}for(var g=0;g<4;g++)for(var m=0;m<4;m++){var _=h(g,m),x=h(g,m+1),b=h(g+1,m),w=h(g+1,m+1);l.emplaceBack(_,x,b),l.emplaceBack(b,x,w)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(s,dl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(u,pl.members),this._tileDebugTextSegments=bs.simpleSegment(0,0,c,32)}}]),t}(),nv=function(){function t(){p(this,t),this.state={},this.stateChanges={},this.deletedStates={}}return d(t,[{key:"updateState",value:function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},W(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]}},{key:"removeFeatureState",value:function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}}},{key:"getState",value:function(t,e){var n=String(e),r=W({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r}},{key:"initializeTileState",value:function(t,e){t.setFeatureState(this.state,e)}},{key:"coalesceChanges",value:function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),W(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else if(this.state[a][u])for(var c=0,h=Object.keys(this.deletedStates[a][u]);c<h.length;c++){var f=h[c];delete this.state[a][u][f]}s[u]=this.state[a][u]}n[a]=n[a]||{},W(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)}}]),t}(),rv=function(){function t(e){p(this,t),this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}return d(t,[{key:"getElevation",value:function(t,e){var n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(t,e){return this.leaves[this.toIdx(t,e)]}},{key:"toIdx",value:function(t,e){return e*this.size+t}}]),t}();function iv(t,e,n,r){for(var i=0,o=Number.MAX_VALUE,a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{var s=1/r[a],l=(t[a]-n[a])*s,u=(e[a]-n[a])*s;if(l>u){var c=l;l=u,u=c}if(l>i&&(i=l),u<o&&(o=u),i>o)return null}return i}function ov(t,e,n,r,i,o,a,s,l,u,c){var h=r-t,f=i-e,p=o-n,d=a-t,v=s-e,y=l-n,g=c[1]*y-c[2]*v,m=c[2]*d-c[0]*y,_=c[0]*v-c[1]*d,x=h*g+f*m+p*_;if(Math.abs(x)<1e-15)return null;var b=1/x,w=u[0]-t,k=u[1]-e,E=u[2]-n,S=(w*g+k*m+E*_)*b;if(S<0||S>1)return null;var T=k*p-E*f,M=E*h-w*p,I=w*f-k*h,C=(c[0]*T+c[1]*M+c[2]*I)*b;return C<0||S+C>1?null:(d*T+v*M+y*I)*b}function av(t,e,n){return(t-e)/(n-e)}function sv(t,e,n,r,i,o,a,s,l){var u=1<<n,c=o-r,h=a-i,f=(t+1)/u*c+r,p=(e+0)/u*h+i,d=(e+1)/u*h+i;s[0]=(t+0)/u*c+r,s[1]=p,l[0]=f,l[1]=d}var lv=function(){function t(e){if(p(this,t),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(t){for(var e=Math.ceil(Math.log2(t.dim/8)),n=[],r=Math.ceil(Math.pow(2,e)),i=1/r,o=function(t,e,n,r,i){var o=r?1:0,a=(t+1)*n-o,s=e*n,l=(e+1)*n-o;i[0]=t*n,i[1]=s,i[2]=a,i[3]=l},a=new rv(r),s=[],l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);var u=cv(s[0],s[1],t),c=cv(s[2],s[1],t),h=cv(s[2],s[3],t),f=cv(s[0],s[3],t);a.minimums.push(Math.min(u,c,h,f)),a.maximums.push(Math.max(u,c,h,f)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){var p=n[n.length-1];a=new rv(r);for(var d=0;d<r*r;d++){o(d%r,Math.floor(d/r),2,!0,s);var v=p.getElevation(s[0],s[1]),y=p.getElevation(s[2],s[1]),g=p.getElevation(s[2],s[3]),m=p.getElevation(s[0],s[3]),_=p.isLeaf(s[0],s[1]),x=p.isLeaf(s[2],s[1]),b=p.isLeaf(s[2],s[3]),w=p.isLeaf(s[0],s[3]),k=Math.min(v.min,y.min,g.min,m.min),E=Math.max(v.max,y.max,g.max,m.max),S=_&&x&&b&&w;a.maximums.push(E),a.minimums.push(k),a.leaves.push(E-k<=5&&S?1:0)}n.push(a)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return d(t,[{key:"raycastRoot",value:function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return iv([t,e,-100],[n,r,this.maximums[0]*a],i,o)}},{key:"raycast",value:function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(t,e,n,r,i,o,a);if(null==s)return null;for(var l=[],u=[],c=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var p=f.pop(),d=p.idx,v=p.t,y=p.nodex,g=p.nodey,m=p.depth;if(this.leaves[d]){sv(y,g,m,t,e,n,r,c,h);var _=1<<m,x=(y+0)/_,b=(y+1)/_,w=(g+0)/_,k=(g+1)/_,E=cv(x,w,this.dem)*a,S=cv(b,w,this.dem)*a,T=cv(b,k,this.dem)*a,M=cv(x,k,this.dem)*a,I=ov(c[0],c[1],E,h[0],c[1],S,h[0],h[1],T,i,o),C=ov(h[0],h[1],T,c[0],h[1],M,c[0],c[1],E,i,o),P=Math.min(null!==I?I:Number.MAX_VALUE,null!==C?C:Number.MAX_VALUE);if(P!==Number.MAX_VALUE)return P;var A=Hs([],i,o,v);if(uv(E,S,M,T,av(A[0],c[0],h[0]),av(A[1],c[1],h[1]))>=A[2])return v}else{for(var L=0,D=0;D<this._siblingOffset.length;D++){sv((y<<1)+this._siblingOffset[D][0],(g<<1)+this._siblingOffset[D][1],m+1,t,e,n,r,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[d]+D]*a;var R=iv(c,h,i,o);if(null!=R){var O=R;l[D]=O;for(var z=!1,N=0;N<L&&!z;N++)O>=l[u[N]]&&(u.splice(N,0,D),z=!0);z||(u[L]=D),L++}}for(var F=0;F<L;F++){var B=u[F];f.push({idx:this.childOffsets[d]+B,t:l[B],nodex:(y<<1)+this._siblingOffset[B][0],nodey:(g<<1)+this._siblingOffset[B][1],depth:m+1})}}}return null}},{key:"_addNode",value:function(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(t,e,n,r,i){if(1!==t[r].isLeaf(e,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var o=r-1,a=t[o],s=0,l=0,u=0;u<this._siblingOffset.length;u++){var c=2*e+this._siblingOffset[u][0],h=2*n+this._siblingOffset[u][1],f=a.getElevation(c,h),p=a.isLeaf(c,h),d=this._addNode(f.min,f.max,p);p&&(s|=1<<u),l||(l=d)}for(var v=0;v<this._siblingOffset.length;v++)s&1<<v||this._construct(t,2*e+this._siblingOffset[v][0],2*n+this._siblingOffset[v][1],o,l+v)}}}]),t}();function uv(t,e,n,r,i,o){return Wn(Wn(t,n,o),Wn(e,r,o),i)}function cv(t,e,n){var r=n.dim,i=U(t*r-.5,0,r-1),o=U(e*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),u=Math.min(s+1,r-1);return uv(n.get(a,s),n.get(l,s),n.get(a,u),n.get(l,u),i-a,o-s)}var hv={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function fv(t,e,n){return(256*t*256+256*e+n)/10-1e4}function pv(t,e,n){return 256*t+e+n/256-32768}var dv=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p(this,t),this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return it('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var a=this.dim=n.height-2,s=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var l=0;l<a;l++)s[this._idx(-1,l)]=s[this._idx(0,l)],s[this._idx(a,l)]=s[this._idx(a-1,l)],s[this._idx(l,-1)]=s[this._idx(l,0)],s[this._idx(l,a)]=s[this._idx(l,a-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(a,-1)]=s[this._idx(a-1,0)],s[this._idx(-1,a)]=s[this._idx(0,a-1)],s[this._idx(a,a)]=s[this._idx(a-1,a-1)],o&&this._buildQuadTree()}}return d(t,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new lv(this)}},{key:"get",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=U(t,-1,this.dim),e=U(e,-1,this.dim));var n=4*this._idx(t,e);return("terrarium"===this.encoding?pv:fv)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return hv[this.encoding]}},{key:"_idx",value:function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}},{key:"getPixels",value:function(){return new $u({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-n*this.dim,u=o;u<a;u++)for(var c=r;c<i;c++){var h=4*this._idx(c,u),f=4*this._idx(c+s,u+l);this.pixels[h+0]=t.pixels[f+0],this.pixels[h+1]=t.pixels[f+1],this.pixels[h+2]=t.pixels[f+2],this.pixels[h+3]=t.pixels[f+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(t){return hv[t]}},{key:"pack",value:function(e,n){var r=[0,0,0,0],i=t.getUnpackVector(n),o=Math.floor((e+i[3])/i[2]);return r[2]=o%256,o=Math.floor(o/256),r[1]=o%256,o=Math.floor(o/256),r[0]=o,r}}]),t}();uo(dv,"DEMData"),uo(lv,"DemMinMaxQuadTree",{omit:["dem"]});var vv=function(){function t(e,n){p(this,t),this.max=e,this.onRemove=n,this.reset()}return d(t,[{key:"reset",value:function(){for(var t in this.data){var e,n=f(this.data[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(t,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}},{key:"has",value:function(t){return t.wrapped().key in this.data}},{key:"getAndRemove",value:function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}},{key:"getByKey",value:function(t){var e=this.data[t];return e?e[0].value:null}},{key:"get",value:function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}},{key:"remove",value:function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}},{key:"filter",value:function(t){var e=[];for(var n in this.data){var r,i=f(this.data[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;t(o.value)||e.push(o)}}catch(u){i.e(u)}finally{i.f()}}for(var a=0,s=e;a<s.length;a++){var l=s[a];this.remove(l.value.tileID,l)}}}]),t}(),yv=d((function t(e,n,r){p(this,t),this.func=e,this.mask=n,this.range=r}));yv.ReadOnly=!1,yv.ReadWrite=!0,yv.disabled=new yv(519,yv.ReadOnly,[0,1]);var gv=7680,mv=d((function t(e,n,r,i,o,a){p(this,t),this.test=e,this.ref=n,this.mask=r,this.fail=i,this.depthFail=o,this.pass=a}));mv.disabled=new mv({func:519,mask:0},0,0,gv,gv,gv);var _v=d((function t(e,n,r){p(this,t),this.blendFunction=e,this.blendColor=n,this.mask=r}));_v.Replace=[1,0],_v.disabled=new _v(_v.Replace,Ze.transparent,[!1,!1,!1,!1]),_v.unblended=new _v(_v.Replace,Ze.transparent,[!0,!0,!0,!0]),_v.alphaBlended=new _v([1,771],Ze.transparent,[!0,!0,!0,!0]);var xv=1029,bv=2305,wv=d((function t(e,n,r){p(this,t),this.enable=e,this.mode=n,this.frontFace=r}));wv.disabled=new wv(!1,xv,bv),wv.backCCW=new wv(!0,xv,bv),wv.backCW=new wv(!0,xv,2304),wv.frontCW=new wv(!0,1028,2304),wv.frontCCW=new wv(!0,1028,bv);var kv=function(t){v(n,t);var e=y(n);function n(t,r,o){var a;return p(this,n),(a=e.call(this)).id=t,a._onlySymbols=o,r.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),r.on("error",(function(){a._sourceErrored=!0})),a._source=r,a._tiles={},a._cache=new vv(0,a._unloadTile.bind(i(a))),a._timers={},a._cacheTimers={},a._minTileCacheSize=r.minTileCacheSize,a._maxTileCacheSize=r.maxTileCacheSize,a._loadedParentTiles={},a._coveredTiles={},a._state=new nv,a._isRaster="raster"===a._source.type||"raster-dem"===a._source.type||"custom"===a._source.type&&"raster"===a._source._dataType,a}return d(n,[{key:"onAdd",value:function(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}},{key:"_unloadTile",value:function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))}},{key:"_abortTile",value:function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return Z(this._tiles).map((function(t){return t.tileID})).sort(Ev).map((function(t){return t.key}))}},{key:"getRenderableIds",value:function(t){var e=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,t)&&n.push(this._tiles[r]);return t?n.sort((function(t,n){var r=t.tileID,i=n.tileID,o=new L(r.canonical.x,r.canonical.y)._rotate(e.transform.angle),a=new L(i.canonical.x,i.canonical.y)._rotate(e.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((function(t){return t.tileID.key})):n.map((function(t){return t.tileID})).sort(Ev).map((function(t){return t.key}))}},{key:"hasRenderableParent",value:function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}},{key:"_isIdRenderable",value:function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}},{key:"_reloadTile",value:function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}},{key:"_tileLoaded",value:function(t,e,n,r){if(r)if(t.state="errored",404!==r.status)this._source.fire(new fe(r,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=le.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new he("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){if(t.dem&&!t.dem.borderReady){t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}}},{key:"getTile",value:function(t){return this.getTileByID(t.key)}},{key:"getTileByID",value:function(t){return this._tiles[t]}},{key:"_retainLoadedChildren",value:function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){r[a.key]=a;break}}}}},{key:"findLoadedParent",value:function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}}},{key:"_getLoadedTile",value:function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}},{key:"updateCacheSize",value:function(t,e){e=e||this._source.tileSize;var n=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}},{key:"handleWrapJump",value:function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(+a,this._tiles[a])}}},{key:"update",value:function(t,e,r){var i=this;if(this.transform=t,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var o;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new Mh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(o=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(o=o.filter((function(t){return i._source.hasTile(t)})))):o=[];var a=this._updateRetainedTiles(o);if(Sv(this._source.type)&&0!==o.length){for(var s={},l={},u=0,c=Object.keys(a);u<c.length;u++){var h=c[u],p=a[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=le.now())){var v=this.findLoadedParent(p,Math.max(p.overscaledZ-n.maxOverzooming,this._source.minzoom));v&&(this._addTile(v.tileID),s[v.tileID.key]=v.tileID),l[h]=p}}var y=o[o.length-1].overscaledZ;for(var g in this._tiles){var m=this._tiles[g];if(!a[g]&&m.hasData())for(var _=m.tileID;_.overscaledZ>y;){_=_.scaledTo(_.overscaledZ-1);var x=this._tiles[_.key];if(x&&x.hasData()&&l[_.key]){a[g]=m.tileID;break}}}for(var b in s)a[b]||(this._coveredTiles[b]=!0,a[b]=s[b])}for(var w in a)this._tiles[w].clearFadeHold();var k,E=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n}(this._tiles,a),S=f(E);try{for(S.s();!(k=S.n()).done;){var T=k.value,M=this._tiles[T];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(+T)}}catch(I){S.e(I)}finally{S.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}},{key:"_updateRetainedTiles",value:function(t){var e={};if(0===t.length)return e;var r,i={},o=t.reduce((function(t,e){return Math.min(t,e.overscaledZ)}),1/0),a=t[0].overscaledZ,s=Math.max(a-n.maxOverzooming,this._source.minzoom),l=Math.max(a+n.maxUnderzooming,this._source.minzoom),u={},c=f(t);try{for(c.s();!(r=c.n()).done;){var h=r.value,p=this._addTile(h);e[h.key]=h,p.hasData()||o<this._source.maxzoom&&(u[h.key]=h)}}catch(E){c.e(E)}finally{c.f()}this._retainLoadedChildren(u,o,l,e);var d,v=f(t);try{for(v.s();!(d=v.n()).done;){var y=d.value,g=this._tiles[y.key];if(!g.hasData()){if(y.canonical.z>=this._source.maxzoom){var m=y.children(this._source.maxzoom)[0],_=this.getTile(m);if(_&&_.hasData()){e[m.key]=m;continue}}else{var x=y.children(this._source.maxzoom);if(e[x[0].key]&&e[x[1].key]&&e[x[2].key]&&e[x[3].key])continue}for(var b=g.wasRequested(),w=y.overscaledZ-1;w>=s;--w){var k=y.scaledTo(w);if(i[k.key])break;if(i[k.key]=!0,!(g=this.getTile(k))&&b&&(g=this._addTile(k)),g&&(e[k.key]=k,b=g.wasRequested(),g.hasData()))break}}}}catch(E){v.e(E)}finally{v.f()}return e}},{key:"_updateLoadedParentTileCache",value:function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o++){var s=a[o];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var n=Boolean(e);if(!n){var r=this.map?this.map.painter:null;e=new ev(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new he("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}},{key:"_setTileReloadTimer",value:function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))}},{key:"_removeTile",value:function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}},{key:"clearTiles",value:function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(t,e,n){var r=[],i=this.transform;if(!i)return r;var o="globe"===i.projection.name,a=iu(i.center.lng);for(var s in this._tiles){var l=this._tiles[s];if(n&&l.clearQueryDebugViz(),!l.holdingForFade()){var u=void 0;if(o){var h=l.tileID.canonical;if(0===h.z){var p=[Math.abs(U.apply(void 0,[a].concat(c(Tv(h,-1))))-a),Math.abs(U.apply(void 0,[a].concat(c(Tv(h,1))))-a)];u=[0,2*p.indexOf(Math.min.apply(Math,p))-1]}else{var d=[Math.abs(U.apply(void 0,[a].concat(c(Tv(h,-1))))-a),Math.abs(U.apply(void 0,[a].concat(c(Tv(h,0))))-a),Math.abs(U.apply(void 0,[a].concat(c(Tv(h,1))))-a)];u=[d.indexOf(Math.min.apply(Math,d))-1]}}else u=[0];var v,y=f(u);try{for(y.s();!(v=y.n()).done;){var g=v.value,m=t.containsTile(l,i,e,g);m&&r.push(m)}}catch(_){y.e(_)}finally{y.f()}}}return r}},{key:"getVisibleCoordinates",value:function(t){var e,n=this,r=this.getRenderableIds(t).map((function(t){return n._tiles[t].tileID})),i=f(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.projMatrix=this.transform.calculateProjMatrix(o.toUnwrapped())}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Sv(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=le.now())return!0}return!1}},{key:"setFeatureState",value:function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}},{key:"removeFeatureState",value:function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}},{key:"getFeatureState",value:function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}},{key:"setDependencies",value:function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)}},{key:"reloadTilesForDependencies",value:function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))}},{key:"_preloadTiles",value:function(t,e){var n=this;if(this._sourceLoaded){var r,i=new Map,o=Array.isArray(t)?t:[t],a=this.map.painter.terrain,s=this.usedForTerrain&&a?a.getScaledDemTileSize():this._source.tileSize,l=f(o);try{for(l.s();!(r=l.n()).done;){var u,c=r.value,h=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),p=f(h);try{for(p.s();!(u=p.n()).done;){var d=u.value;i.set(d.key,d)}}catch(y){p.e(y)}finally{p.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(y){l.e(y)}finally{l.f()}q(Array.from(i.values()),(function(t,e){var r=new ev(t,n._source.tileSize*t.overscaleFactor(),n.transform.tileZoom,n.map.painter,n._isRaster);n._loadTile(r,(function(t){"raster-dem"===n._source.type&&r.dem&&n._backfillDEM(r),e(t,r)}))}),e)}else{var v=function r(){n._sourceLoaded&&(n._source.off("data",r),n._preloadTiles(t,e))};this._source.on("data",v)}}}]),n}(pe);function Ev(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Sv(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function Tv(t,e){var n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}kv.maxOverzooming=10,kv.maxUnderzooming=3;var Mv=function(){function t(e,n,r){p(this,t),this._demTile=e,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return d(t,[{key:"tileCoordToPixel",value:function(t,e){var n=e*this._scale+this._offset[1],r=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(n);return new L(r,i)}},{key:"getElevationAt",value:function(t,e,n,r){var i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?Wn(Wn(l.get(a,s,r),l.get(a,s+1,r),o-s),Wn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}},{key:"getElevationAtPixel",value:function(t,e,n){return this._dem.get(t,e,!!n)}},{key:"getMeterToDEM",value:function(t){return(1<<this._demTile.tileID.canonical.z)*au(1,t)*this._dem.stride}}],[{key:"create",value:function(e,n,r){var i=r||e.findDEMTileFor(n);if(i&&i.dem){var o=i.dem,a=i.tileID,s=1<<n.canonical.z-a.canonical.z;return new t(i,i.tileSize/ws/s,[(n.canonical.x/s-a.canonical.x)*o.dim,(n.canonical.y/s-a.canonical.y)*o.dim])}}}]),t}(),Iv=function(){function t(e,n){p(this,t),this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new so(ws,16,0),this.featureIndexArray=new za,this.promoteId=n}return d(t,[{key:"insert",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);for(var s=this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var f=u[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<ws&&c[1]<ws&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var t in this.vtLayers=new oh(new If(this.rawTileData)).layers,this.sourceLayerCoder=new Ld(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[t]=[];return this.vtLayers}},{key:"query",value:function(t,e,n,r){var i=this;this.loadVTLayers();var o=t.params||{},a=Si(o.filter),s=t.tileResult,l=t.transform,u=s.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,(function(t,e,n,r){return Ou(s.bufferedTilespaceGeometry,t,e,n,r)}));c.sort(Pv);var h=null;l.elevation&&c.length>0&&(h=Mv.create(l.elevation,this.tileID));for(var f,p={},d=function(){var l=c[v];if(l===f)return"continue";f=l;var u=i.featureIndexArray.get(l),d=null;i.loadMatchingFeature(p,u,a,o.layers,o.availableImages,e,n,r,(function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return d||(d=xu(e,i.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(s,e,r,d,i.z,t.transform,t.pixelPosMatrix,h,o)}))},v=0;v<c.length;v++)d();return p}},{key:"loadMatchingFeature",value:function(t,e,n,r,i,o,a,s,l){var u=e.featureIndex,c=e.bucketIndex,h=e.sourceLayerIndex,f=e.layoutVertexArrayOffset,p=this.bucketLayerIDs[c];if(!r||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,p)){var d=this.sourceLayerCoder.decode(h),v=this.vtLayers[d].feature(u);if(n.needGeometry){var y=bu(v,!0);if(!n.filter(new No(this.tileID.overscaledZ),y,this.tileID.canonical))return}else if(!n.filter(new No(this.tileID.overscaledZ),v))return;for(var g=this.getId(v,d),m=0;m<p.length;m++){var _=p[m];if(!(r&&r.indexOf(_)<0)){var x=o[_];if(x){var b={};void 0!==g&&s&&(b=s.getState(x.sourceLayer||"_geojsonTileLayer",g));var w=W({},a[_]);w.paint=Cv(w.paint,x.paint,v,b,i),w.layout=Cv(w.layout,x.layout,v,b,i);var k=!l||l(v,x,b,f);if(k){var E=new Rd(v,this.z,this.x,this.y,g);E.layer=w;var S=t[_];void 0===S&&(S=t[_]=[]),S.push({featureIndex:u,feature:E,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(t,e,n,r,i,o,a,s){var l={};this.loadVTLayers();var u,c=Si(i),h=f(t);try{for(h.s();!(u=h.n()).done;){var p=u.value;this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:p,layoutVertexArrayOffset:0},c,o,a,s,e)}}catch(d){h.e(d)}finally{h.f()}return l}},{key:"loadFeature",value:function(t){var e=t.featureIndex,n=t.sourceLayerIndex;this.loadVTLayers();var r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];var o=this.vtLayers[r].feature(e);return i[e]=o,o}},{key:"hasLayer",value:function(t){var e,n=f(this.bucketLayerIDs);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=f(i);try{for(o.s();!(r=o.n()).done;)if(t===r.value)return!0}catch(a){o.e(a)}finally{o.f()}}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getId",value:function(t,e){var n=t.id;if(this.promoteId){var r="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=r&&(n=t.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}]),t}();function Cv(t,e,n,r,i){return tt(t,(function(t,o){var a=e instanceof Zo?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function Pv(t,e){return e-t}uo(Iv,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var Av=function(){function t(e,n){p(this,t),this.width=e,this.height=n,this.nextRow=0,this.image=new Qu({width:e,height:n}),this.positions={},this.uploaded=!1}return d(t,[{key:"getDash",value:function(t,e){var n=this.getKey(t,e);return this.positions[n]}},{key:"trim",value:function(){var t=this.width,e=this.height=K(this.nextRow);this.image.resize({width:t,height:e})}},{key:"getKey",value:function(t,e){return t.join(",")+e}},{key:"getDashRanges",value:function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){a=!a;var u=t[l];i=s*n,o=(s+=u)*n,r.push({left:i,right:o,isDash:a,zeroLength:0===u})}return r}},{key:"addRoundDash",value:function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),f=void 0,p=i/n*(r+1);if(s.isDash){var d=r-Math.abs(p);f=Math.sqrt(h*h+d*d)}else f=r-Math.sqrt(h*h+p*p);this.image.data[o+l]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=t[n+1];r.zeroLength?t.splice(n,1):i&&i.isDash===r.isDash&&(i.left=r.left,t.splice(n,1))}var o=t[0],a=t[t.length-1];o.isDash===a.isDash&&(o.left=a.left-this.width,a.right=o.right+this.width);for(var s=this.width*this.nextRow,l=0,u=t[l],c=0;c<this.width;c++){c/u.right>1&&(u=t[++l]);var h=Math.abs(c-u.left),f=Math.abs(c-u.right),p=Math.min(h,f);this.image.data[s+c]=Math.max(0,Math.min(255,(u.isDash?p:-p)+e+128))}}},{key:"addDash",value:function(t,e){var n=this.getKey(t,e);if(this.positions[n])return this.positions[n];var r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return it("LineAtlas out of space"),null;0===t.length&&t.push(1);for(var a=0,s=0;s<t.length;s++)t[s]<0&&(it("Negative value is found in line dasharray, replacing values with 0"),t[s]=0),a+=t[s];if(0!==a){var l=this.width/a,u=this.getDashRanges(t,this.width,l);r?this.addRoundDash(u,l,i):this.addRegularDash(u,"square"===e?.5*l:0)}var c=this.nextRow+i;this.nextRow+=o;var h={tl:[c,i],br:[a,0]};return this.positions[n]=h,h}}]),t}();uo(Av,"LineAtlas");var Lv=1*fp,Dv=d((function t(e){p(this,t);var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o.glyphs){var l=o.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=l.metrics.localGlyph?Lv:1,c={x:0,y:0,w:l.bitmap.width+2*u,h:l.bitmap.height+2*u};r.push(c),a[s]=c}}}var h=Rf(r),f=h.w,d=h.h,v=new Qu({width:f||1,height:d||1});for(var y in e){var g=e[y];for(var m in g.glyphs){var _=g.glyphs[+m];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var x=n[y][m],b=_.metrics.localGlyph?Lv:1;Qu.copy(_.bitmap,v,{x:0,y:0},{x:x.x+b,y:x.y+b},_.bitmap)}}}this.image=v,this.positions=n}));uo(Dv,"GlyphAtlas");var Rv=function(){function t(e){p(this,t),this.tileID=new Mh(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Vp(e.tileID.canonical,e.projection),this.projection=e.projection}return d(t,[{key:"parse",value:function(t,e,n,r,i){var o=this;this.status="parsing",this.data=t,this.collisionBoxArray=new Ia;var a=new Ld(Object.keys(t.layers).sort()),s=new Iv(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,p={},d=new Av(256,256),v={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:d,availableImages:n},y=e.familiesBySource[this.source];for(var g in y){var m=t.layers[g];if(m){var _,x=!1,b=!1,w=f(y[g]);try{for(w.s();!(_=w.n()).done;)"symbol"===_.value[0].type?x=!0:b=!0}catch(N){w.e(N)}finally{w.f()}if((!0!==this.isSymbolTile||x)&&(!1!==this.isSymbolTile||b)){1===m.version&&it('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=a.encode(g),E=[],S=0;S<m.length;S++){var T=m.feature(S),M=s.getId(T,g);E.push({feature:T,id:M,index:S,sourceLayerIndex:k})}var I,C=f(y[g]);try{for(C.s();!(I=C.n()).done;){var P=I.value,A=P[0];void 0!==this.isSymbolTile&&"symbol"===A.type!==this.isSymbolTile||A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(Ov(P,this.zoom,n),(p[A.id]=A.createBucket({index:s.bucketLayerIDs.length,layers:P,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(E,v,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(P.map((function(t){return t.id}))))}}catch(N){C.e(N)}finally{C.f()}}}}d.trim();var L={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},D=function(){if(l)return i(l);if(u&&c&&h){var t=new Dv(u),e=new Nf(c,h);for(var r in p){var a=p[r];a instanceof md?(Ov(a.layers,o.zoom,n),Ap(a,u,t.positions,c,e.iconPositions,o.showCollisionBoxes,n,o.tileID.canonical,o.tileZoom,o.projection)):a.hasPattern&&(a instanceof Nh||a instanceof jc||a instanceof ph)&&(Ov(a.layers,o.zoom,n),a.addFeatures(v,o.tileID.canonical,e.patternPositions,n,o.tileTransform))}o.status="done",i(null,{buckets:Z(p).filter((function(t){return!t.isEmpty()})),featureIndex:s,collisionBoxArray:o.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:d,imageAtlas:e,glyphMap:o.returnDependencies?u:null,iconMap:o.returnDependencies?c:null,glyphPositions:o.returnDependencies?t.positions:null})}},R=tt(v.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(R).length?r.send("getGlyphs",{uid:this.uid,stacks:R},(function(t,e){l||(l=t,u=e,D())}),void 0,!1,L):u={};var O=Object.keys(v.iconDependencies);O.length?r.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){l||(l=t,c=e,D())}),void 0,!1,L):c={};var z=Object.keys(v.patternDependencies);z.length?r.send("getImages",{icons:z,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){l||(l=t,h=e,D())}),void 0,!1,L):h={},D()}}]),t}();function Ov(t,e,n){var r,i=new No(e),o=f(t);try{for(o.s();!(r=o.n()).done;)r.value.recalculate(i,n)}catch(a){o.e(a)}finally{o.f()}}var zv=function(){function t(e){p(this,t),this.entries={},this.scheduler=e}return d(t,[{key:"request",value:function(t,e,n,r){var i=this,o=this.entries[t]=this.entries[t]||{callbacks:[]};if(o.result){var a=h(o.result,2),s=a[0],l=a[1];return this.scheduler?this.scheduler.add((function(){r(s,l)}),e):r(s,l),function(){}}return o.callbacks.push(r),o.cancel||(o.cancel=n((function(n,r){o.result=[n,r];var a,s=f(o.callbacks);try{var l=function(){var t=a.value;i.scheduler?i.scheduler.add((function(){t(n,r)}),e):t(n,r)};for(s.s();!(a=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}setTimeout((function(){return delete i.entries[t]}),3e3)}))),function(){o.result||(o.callbacks=o.callbacks.filter((function(t){return t!==r})),o.callbacks.length||(o.cancel(),delete i.entries[t]))}}}]),t}();function Nv(t,e,n){var r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(function(e){var r=Tt(t.request,(function(t,r,i,o){t?e(t):r&&e(null,{vectorTile:n?void 0:new oh(new If(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),e()}}),e)}var Fv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Bv=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(p(this,t),isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var o=Fv.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+l),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}return d(t,[{key:"add",value:function(t,e){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}},{key:"finish",value:function(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return jv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,o=this.coords,a=this.nodeSize,s=[0,i.length-1,0],l=[];s.length;){var u=s.pop()||0,c=s.pop()||0,h=s.pop()||0;if(c-h<=a)for(var f=h;f<=c;f++){var p=o[2*f],d=o[2*f+1];p>=t&&p<=n&&d>=e&&d<=r&&l.push(i[f])}else{var v=h+c>>1,y=o[2*v],g=o[2*v+1];y>=t&&y<=n&&g>=e&&g<=r&&l.push(i[v]),(0===u?t<=y:e<=g)&&(s.push(h),s.push(v-1),s.push(1-u)),(0===u?n>=y:r>=g)&&(s.push(v+1),s.push(c),s.push(1-u))}}return l}},{key:"within",value:function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,i=this.coords,o=this.nodeSize,a=[0,r.length-1,0],s=[],l=n*n;a.length;){var u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o)for(var f=h;f<=c;f++)qv(i[2*f],i[2*f+1],t,e)<=l&&s.push(r[f]);else{var p=h+c>>1,d=i[2*p],v=i[2*p+1];qv(d,v,t,e)<=l&&s.push(r[p]),(0===u?t-n<=d:e-n<=v)&&(a.push(h),a.push(p-1),a.push(1-u)),(0===u?t+n>=d:e+n>=v)&&(a.push(p+1),a.push(c),a.push(1-u))}}return s}}],[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=new Uint8Array(e,0,2),r=h(n,2),i=r[0],o=r[1];if(219!==i)throw new Error("Data does not appear to be in a KDBush format.");var a=o>>4;if(1!==a)throw new Error("Got v".concat(a," data when expected v1."));var s=Fv[15&o];if(!s)throw new Error("Unrecognized array type.");var l=new Uint16Array(e,2,1),u=h(l,1)[0],c=new Uint32Array(e,4,1);return new t(h(c,1)[0],u,s,e)}}]),t}();function jv(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;Uv(t,e,a,r,i,o),jv(t,e,n,r,a-1,1-o),jv(t,e,n,a+1,i,1-o)}}function Uv(t,e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);Uv(t,e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[2*n+o],f=r,p=i;for(Vv(t,e,r,n),e[2*i+o]>h&&Vv(t,e,r,i);f<p;){for(Vv(t,e,f,p),f++,p--;e[2*f+o]<h;)f++;for(;e[2*p+o]>h;)p--}e[2*r+o]===h?Vv(t,e,r,p):Vv(t,e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}function Vv(t,e,n,r){Gv(t,n,r),Gv(e,2*n,2*r),Gv(e,2*n+1,2*r+1)}function Gv(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function qv(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}t.ARRAY_TYPE=Ss,t.AUTH_ERR_MSG=Lt,t.Aabb=ml,t.Actor=function(){function t(e,n,r){p(this,t),this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},Q(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=st()?e:m,this.scheduler=new Ad}return d(t,[{key:"send",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=a,this.callbacks[s]=n);var l=ct(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:t,hasCallback:!!n,targetMapId:r,mustQueue:o,sourceMapId:this.mapId,data:po(e,l)},l),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(t){var e=this,n=t.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||st()){var o=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return e.processTask(r,n)}),o&&o.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(vo(e.error)):r(null,vo(e.data)))}else{var i=ct(this.globalScope)?void 0:[],o=e.hasCallback?function(e,r){delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?po(e):null,data:po(r,i)},i)}:function(t){},a=vo(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,a,o);else if(this.parent.getWorkerSource){var s=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,s[0],a.source)[s[1]](a,o)}else o(new Error("Could not find function ".concat(e.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),t}(),t.CanonicalTileID=Sh,t.Color=Ze,t.ColorMode=_v,t.CullFaceMode=wv,t.DEMData=dv,t.DataConstantProperty=Wo,t.DedupedRequest=zv,t.DepthMode=yv,t.EXTENT=ws,t.Elevation=function(){function t(){p(this,t)}return d(t,[{key:"isDataAvailableAtPoint",value:function(t){var e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;var n=e.getSource().maxzoom,r=1<<n,i=Math.floor(t.x),o=Math.floor((t.x-i)*r),a=Math.floor(t.y*r),s=this.findDEMTileFor(new Mh(n,i,n,o,a));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(t,e)||0}},{key:"getAtPoint",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==e&&(e=null);var r=this._source();if(!r)return e;if(t.y<0||t.y>1)return e;var i=r.getSource().maxzoom,o=1<<i,a=Math.floor(t.x),s=t.x-a,l=new Mh(i,a,i,Math.floor(s*o),Math.floor(t.y*o)),u=this.findDEMTileFor(l);if(!u||!u.dem)return e;var c=u.dem,h=1<<u.tileID.canonical.z,f=(s*h-u.tileID.canonical.x)*c.dim,p=(t.y*h-u.tileID.canonical.y)*c.dim,d=Math.floor(f),v=Math.floor(p);return(n?this.exaggeration():1)*Wn(Wn(c.get(d,v),c.get(d,v+1),p-v),Wn(c.get(d+1,v),c.get(d+1,v+1),p-v),f-d)}},{key:"getAtTileOffset",value:function(t,e,n){var r=1<<t.canonical.z;return this.getAtPointOrZero(new fu(t.wrap+(t.canonical.x+e/ws)/r,(t.canonical.y+n/ws)/r))}},{key:"getAtTileOffsetFunc",value:function(t,e,n,r){var i=this;return function(o){var a=i.getAtTileOffset(t,o.x,o.y),s=r.upVector(t.canonical,o.x,o.y);return Xs(s,s,a*r.upVectorScale(t.canonical,e,n).metersToTile),s}}},{key:"getForTilePoints",value:function(t,e,n,r){var i=this;if(this.isUsingMockSource())return!1;var o=Mv.create(this,t,r);return!!o&&(e.forEach((function(t){t[2]=i.exaggeration()*o.getElevationAt(t[0],t[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(t){if(this.isUsingMockSource())return null;var e=this.findDEMTileFor(t);if(!e||!e.dem)return null;for(var n=e.dem.tree,r=e.tileID,i=1<<t.canonical.z-r.canonical.z,o=t.canonical.x/i-r.canonical.x,a=t.canonical.y/i-r.canonical.y,s=0,l=0;l<t.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;var u=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+u,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(t,e,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(t){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"isUsingMockSource",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(t){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),t}(),t.ErrorEvent=fe,t.EvaluationParameters=No,t.Event=he,t.Evented=pe,t.FillExtrusionBucket=ph,t.Frustum=gl,t.FrustumCorners=yl,t.GLOBE_RADIUS=bl,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=xl,t.GLOBE_ZOOM_THRESHOLD_MIN=_l,t.GlobeSharedBuffers=function(){function t(e){p(this,t),this._createGrid(e),this._createPoles(e)}return d(t,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var t,e=f(this._poleSegments);try{for(e.s();!(t=e.n()).done;)t.value.destroy()}catch(s){e.e(s)}finally{e.f()}var n,r=f(this._gridSegments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.withSkirts.destroy(),i.withoutSkirts.destroy()}}catch(s){r.e(s)}finally{r.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var o,a=f(this._wireframeSegments);try{for(a.s();!(o=a.n()).done;)o.value.destroy()}catch(s){a.e(s)}finally{a.f()}}}},{key:"_fillGridMeshWithLods",value:function(t,e){for(var n=new na,r=new ma,i=[],o=t+1+2,a=e[0]+1,s=e[0]+1+(1+e.length),l=function(t,e,n){var r=t===o-1?t-2:0===t?t:t-1;return[r+=n?24575:0,e]},u=0;u<o;++u)n.emplaceBack.apply(n,c(l(u,0,!0)));for(var h=0;h<a;++h)for(var f=0;f<o;++f)n.emplaceBack.apply(n,c(l(f,h,(0===f||f===o-1)&&!0)));for(var p=0;p<e.length;++p)for(var d=e[p],v=0;v<o;++v)n.emplaceBack.apply(n,c(l(v,d,!0)));for(var y=0;y<e.length;++y){for(var g=r.length,m=e[y]+1+2,_=new ma,x=0;x<m-1;x++)for(var b=x===m-2,w=b?o*(s-e.length+y-x):o,k=0;k<o-1;k++){var E=x*o+k;0===x||b||0===k||k===o-2?(_.emplaceBack(E+1,E,E+w),_.emplaceBack(E+w,E+w+1,E+1)):(r.emplaceBack(E+1,E,E+w),r.emplaceBack(E+w,E+w+1,E+1))}for(var S=bs.simpleSegment(0,g,n.length,r.length-g),T=0;T<_.uint16.length;T+=3)r.emplaceBack(_.uint16[T],_.uint16[T+1],_.uint16[T+2]);var M=bs.simpleSegment(0,g,n.length,r.length-g);i.push({withoutSkirts:S,withSkirts:M})}return{vertices:n,indices:r,segments:i}}},{key:"_createGrid",value:function(t){var e=this._fillGridMeshWithLods(kl,El);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,dl.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}},{key:"_createPoles",value:function(t){for(var e=new ma,n=0;n<=kl;n++)e.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);var r=new wa,i=new wa;this._poleSegments=[];for(var o=0,a=0;o<_l;o++){var s=360/(1<<o);r.emplaceBack(0,-bl,0,.5,0),i.emplaceBack(0,-bl,0,.5,1);for(var l=0;l<=kl;l++){var u=l/kl,c=Wn(0,s,u),f=Bl(Jl,Ql,c,bl),p=h(f,3),d=p[0],v=p[1],y=p[2];r.emplaceBack(d,v,y,u,0),i.emplaceBack(d,v,y,u,1)}this._poleSegments.push(bs.simpleSegment(a,0,66,64)),a+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(r,fl,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(i,fl,!1)}},{key:"getGridBuffers",value:function(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}},{key:"getPoleBuffers",value:function(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}},{key:"getWirefameBuffers",value:function(t,e){if(!this._wireframeSegments){var n=new Ea,r=kl,i=r+1+2,o=1;this._wireframeSegments=[];for(var a=0,s=0;a<El.length;a++){for(var l=El[a],u=o;u<l+o;u++)for(var c=o;c<r+o;c++){var h=u*i+c;n.emplaceBack(h,h+1),n.emplaceBack(h,h+i),n.emplaceBack(h,h+i+1)}var f=l*r*3;this._wireframeSegments.push(bs.simpleSegment(0,s,(l+1)*i,f)),s+=f}this._wireframeIndexBuffer=t.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}}]),t}(),t.GlyphManager=dp,t.ImagePosition=zf,t.KDBush=Bv,t.LivePerformanceUtils=te,t.LngLat=nu,t.LngLatBounds=ks,t.LocalGlyphMode=pp,t.MAX_MERCATOR_LATITUDE=cu,t.MercatorCoordinate=fu,t.ONE_EM=Yh,t.OverscaledTileID=Mh,t.PerformanceMarkers=$t,t.Point=L,t.Properties=Yo,t.RGBAImage=$u,t.Ray=vl,t.RequestManager=function(){function t(e,n,r){p(this,t),this._transformRequestFn=e,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return d(t,[{key:"_createSkuToken",value:function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",S,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}},{key:"normalizeStyleURL",value:function(t,e){if(!Dt(t))return t;var n=Bt(t);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}},{key:"normalizeGlyphsURL",value:function(t,e){if(!Dt(t))return t;var n=Bt(t);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}},{key:"normalizeSourceURL",value:function(t,e,n,r){if(!Dt(t))return t;var i=Bt(t);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||e)}},{key:"normalizeSpriteURL",value:function(t,e,n,r){var i=Bt(t);return Dt(t)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(e).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(e).concat(n),jt(i))}},{key:"normalizeTileURL",value:function(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Dt(t))return t;var r=Bt(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(e||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(b.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(x.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(x.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||x.ACCESS_TOKEN;return x.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(t,e){var n=Bt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(x.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(x.TILE_URL_VERSION,"/"),""));var i=n.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(t,e){var n,r=!!e&&Dt(e),i=[],o=f(t.tiles||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;Rt(a)?i.push(this.canonicalizeTileURL(a,r)):i.push(a)}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"_makeAPIURL",value:function(t,e){var n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Bt(x.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==r.path&&(t.path="".concat(r.path).concat(t.path)),!x.REQUIRE_ACCESS_TOKEN)return jt(t);if(e=e||x.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token=".concat(e||"")),jt(t)}}]),t}(),t.ResourceType=wt,t.SegmentVector=bs,t.SourceCache=kv,t.StencilMode=mv,t.StructArrayLayout1ui2=Sa,t.StructArrayLayout2f1f2i16=va,t.StructArrayLayout2i4=na,t.StructArrayLayout2ui4=Ea,t.StructArrayLayout3f12=ga,t.StructArrayLayout3ui6=ma,t.StructArrayLayout4i8=ia,t.StructArrayLayout5f20=wa,t.Texture=Cd,t.Tile=ev,t.Transitionable=jo,t.Uniform1f=Qa,t.Uniform1i=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=0,r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}}]),n}(Ja),t.Uniform2f=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=[0,0],r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}}]),n}(Ja),t.Uniform3f=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=[0,0,0],r}return d(n,[{key:"set",value:function(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}}]),n}(Ja),t.Uniform4f=$a,t.UniformColor=ts,t.UniformMatrix2f=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=rs,r}return d(n,[{key:"set",value:function(t,e,n){if(this.fetchUniformLocation(t,e))for(var r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}]),n}(Ja),t.UniformMatrix3f=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=ns,r}return d(n,[{key:"set",value:function(t,e,n){if(this.fetchUniformLocation(t,e))for(var r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}]),n}(Ja),t.UniformMatrix4f=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).current=es,r}return d(n,[{key:"set",value:function(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}}]),n}(Ja),t.UnwrappedTileID=Th,t.ValidationError=yi,t.VectorTileFeature=ah,t.VectorTileWorkerSource=function(t){v(n,t);var e=y(n);function n(t,r,i,o,a){var s;return p(this,n),(s=e.call(this)).actor=t,s.layerIndex=r,s.availableImages=i,s.loadVectorData=a||Nv,s.loading={},s.loaded={},s.deduped=new zv(t.scheduler),s.isSpriteLoaded=o,s.scheduler=t.scheduler,s}return d(n,[{key:"loadTile",value:function(t,e){var n=this,r=t.uid,i=t&&t.request,o=i&&i.collectResourceTiming,a=this.loading[r]=new Rv(t);a.abort=this.loadVectorData(t,(function(s,l){var u=!n.loading[r];if(delete n.loading[r],u||s||!l)return a.status="done",u||(n.loaded[r]=a),e(s);var c=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),a.vectorTile=l.vectorTile||new oh(new If(c));var f=function(){a.parse(a.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(t,n){if(t||!n)return e(t);var r={};if(o){var a=se(i);a.length>0&&(r.resourceTiming=JSON.parse(JSON.stringify(a)))}e(null,W({rawTileData:c.slice(0)},n,h,r))}))};n.isSpriteLoaded?f():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(f,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):f()})),n.loaded=n.loaded||{},n.loaded[r]=a}))}},{key:"reloadTile",value:function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes,a.enableTerrain=!!t.enableTerrain,a.projection=t.projection,a.tileTransform=Vp(t.tileID.canonical,t.projection);var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(t,e){var n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}},{key:"removeTile",value:function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}]),n}(pe),t.WritingMode=Ff,t.ZoomDependentExpression=fi,t.add=Vs,t.addDynamicAttributes=dd,t.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=i*u-r*c,t[2]=r*s-i*a,t[3]=s*l-o*c,t[4]=n*c-i*l,t[5]=i*o-n*s,t[6]=o*u-a*l,t[7]=r*l-n*u,t[8]=n*a-r*o,t},t.asyncAll=q,t.bezier=B,t.bindAll=Q,t.boundsAttributes=$d,t.bufferConvexPolygon=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=G(r-1,-1,t.length-1),o=G(r+1,-1,t.length-1),a=t[r],s=t[o],l=t[i].sub(a).unit(),u=s.sub(a).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*e/Math.sin(c/2));n.push(a.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){++bt>gt&&(t.getActor().send("enforceCacheSizeLimit",yt),bt=0)},t.calculateGlobeLabelMatrix=function(t,e){var n=t.point,r=Wl(n.x,n.y,t.worldSize/t._pixelsPerMercatorPixel,0,0);return Ps(r,r,Zl(Ll(e)))},t.calculateGlobeMatrix=function(t){var e=t.point,n=e.x,r=e.y,i=t._center,o=i.lng,a=i.lat;return Wl(n,r,t.worldSize,o,a)},t.calculateGlobeMercatorMatrix=function(t){var e=t.pixelsPerMeter,n=e/au(1,t.center.lat),r=Is(new Float64Array(16));return As(r,r,[t.point.x,t.point.y,0]),Ls(r,r,[n,n,e]),Float32Array.from(r)},t.circumferenceAtLatitude=ru,t.clamp=U,t.clearTileCache=function(t){if(mt()){var e=m.caches.delete(vt);t&&e.catch(t).then((function(){return t()}))}},t.clipLine=lp,t.clone=function(t){var e=new Ss(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=nt,t.collisionCircleLayout=Hh,t.config=x,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new Ss(16);return Ss!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=Ts,t.createExpression=ci,t.createLayout=ta,t.createStyleLayer=function(t){return"custom"===t.type?new Sd(t):new Id[t.type](t)},t.cross=Js,t.degToRad=O,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=Ks,t.earthRadius=$l,t.ease=j,t.easeCubicInOut=F,t.ecefToLatLng=function(t){var e=h(t,3),n=e[0],r=e[1],i=e[2],o=Math.hypot(n,r,i),a=Math.atan2(n,i),s=.5*Math.PI-Math.acos(-r/o);return new nu(z(a),z(s))},t.emitValidationErrors=ro,t.endsWith=$,t.enforceCacheSizeLimit=function(t){_t(),pt&&pt.then((function(e){e.keys().then((function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=Qh,t.evaluateSizeForZoom=$h,t.evaluateVariableOffset=Pp,t.evented=Do,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=le,t.exported$1=b,t.extend=W,t.extend$1=ve,t.fillExtrusionHeightLift=xh,t.filterObject=et,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,f=i*a,p=i*s,d=i*l,v=o*a,y=o*s,g=o*l;return t[0]=1-h-d,t[1]=c+g,t[2]=f-y,t[3]=0,t[4]=c-g,t[5]=1-u-d,t[6]=p+v,t[7]=0,t[8]=f+y,t[9]=p-v,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=Os,t.furthestTileCorner=function(t){var e=Math.round((t+45+360)%360/90)%4;return N[e]},t.getAABBPointSquareDist=function(t,e,n){for(var r=0,i=0;i<2;++i){var o=n?n[i]:0;t[i]>o&&(r+=(t[i]-o)*(t[i]-o)),e[i]<o&&(r+=(o-e[i])*(o-e[i]))}return r},t.getAnchorAlignment=Kf,t.getAnchorJustification=Lp,t.getBounds=function(t){var e,n=1/0,r=1/0,i=-1/0,o=-1/0,a=f(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}}catch(l){a.e(l)}finally{a.f()}return{min:new L(n,r),max:new L(i,o)}},t.getColumn=ft,t.getDefaultExportFromCjs=T,t.getGridMatrix=function(t,e,n,r){var i=e.getNorth(),o=e.getSouth(),a=e.getWest(),s=e.getEast(),l=1<<t.z,u=s-a,c=i-o,h=u/kl,f=-c/El[n],p=[0,h,0,f,0,0,i,a,0];if(t.z>0){var d=180/r;Ms(p,p,[d/u+1,0,0,0,d/c+1,0,-.5*d/h,.5*d/f,1])}return p[2]=l,p[5]=t.x,p[8]=t.y,p},t.getImage=At,t.getJSON=function(t,e){return St(W(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){var e=cu-5;t=U(t,-e,e)/e*90;var n=Math.pow(Math.abs(Math.sin(O(t))),3);return Math.round(n*(El.length-1))},t.getMapSessionAPI=Jt,t.getPerformanceMeasurement=se,t.getProjection=ud,t.getRTLTextPluginStatus=Ro,t.getReferrer=Et,t.getTilePoint=function(t,e){var n=e.x,r=e.y;return new L(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*t.scale-t.x)*ws,(r*t.scale-t.y)*ws)},t.getTileVec3=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Us(((e.x-n)*t.scale-t.x)*ws,(e.y*t.scale-t.y)*ws,uu(e.z,e.y))},t.getVideo=function(t,e){var n=m.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var i=m.document.createElement("source");Mt(t[r])||(n.crossOrigin="Anonymous"),i.src=t[r],n.appendChild(i)}return{cancel:function(){}}},t.globeCenterToScreenPoint=function(t){var e=[0,0,0],n=Is(new Float64Array(16));return Ps(n,t.pixelMatrix,t.globeMatrix),Qs(e,e,n),new L(e[0],e[1])},t.globeDenormalizeECEF=Zl,t.globeECEFOrigin=function(t,e){var n=[0,0,0];return Qs(n,n,ql(Ll(e.canonical))),Qs(n,n,t),n},t.globeMetersToEcef=Il,t.globeNormalizeECEF=ql,t.globePixelsToTileUnits=function(t,e){return ws/(512*Math.pow(2,t))*Vl(Ll(e))},t.globePoleMatrixForTile=function(t,e,n){var r=Is(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return Rs(r,n.globeMatrix,i),Float32Array.from(r)},t.globeTileBounds=Ll,t.globeTiltAtLngLat=Hl,t.globeToMercatorTransition=Xl,t.globeUseCustomAntiAliasing=function(t,e,n){var r=Xl(n.zoom),i=t.style.map._antialias,o=!!e.extStandardDerivatives,a=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},t.identity=Is,t.identity$1=ll,t.invert=Cs,t.isFullscreen=function(){return!!m.document.fullscreenElement||!!m.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Yl,t.isMapAuthenticated=function(t){return Qt.has(t)},t.isMapboxURL=Dt,t.isSafariWithAntialiasingBug=function(t){var e=t.navigator?t.navigator.userAgent:null;return!!ct(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=lu,t.latLngToECEF=jl,t.len=rl,t.length=js,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=su,t.loadVectorTile=Nv,t.makeRequest=St,t.mapValue=function(t,e,n,r,i){return U((t-e)/(n-e)*(i-r)+r,r,i)},t.mercatorScale=hu,t.mercatorXfromLng=iu,t.mercatorYfromLat=ou,t.mercatorZfromAltitude=au,t.mul=Ns,t.mul$1=nl,t.multiply=Ps,t.multiply$1=Ms,t.multiply$2=qs,t.nextPowerOfTwo=K,t.normalize=Ys,t.normalize$1=hl,t.normalize$2=ol,t.number=Wn,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t},t.pbf=af,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=zo,t.pointGeometry=P,t.polesInViewport=function(t){var e=Is(new Float64Array(16));Ps(e,t.pixelMatrix,t.globeMatrix);var n=[0,Sl,0],r=[0,Tl,0];return Qs(n,n,e),Qs(r,r,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Yl(t,new nu(t.center.lat,90)),r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!Yl(t,new nu(t.center.lat,-90))]},t.polygonContainsPoint=Ru,t.polygonIntersectsBox=Ou,t.polygonIntersectsPolygon=Su,t.polygonizeBounds=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new L(n,n),o=t.sub(i),a=e.add(i),s=[o,new L(a.x,o.y),a,new L(o.x,a.y)];return r&&s.push(o.clone()),s},t.posAttributes=dl,t.postMapLoadEvent=Xt,t.postPerformanceEvent=Yt,t.postTurnstileEvent=Zt,t.potpack=Rf,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=z,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Co,pluginURL:Po}),Do.on("pluginStateChange",t),t},t.removeAuthState=function(t){Qt.delete(t)},t.renderColorRamp=ec,t.resample=du,t.rotateX=Ds,t.rotateX$1=ul,t.rotateY=Rs,t.rotateY$1=cl,t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+f*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-l*r,t},t.rotateZ$1=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=Ls,t.scale$1=il,t.scale$2=Xs,t.scaleAndAdd=Hs,t.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},t.setCacheLimits=function(t,e){yt=t,gt=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Co===So||Co===To||Co===Mo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Po=le.resolveURL(t),Co=So,Io=e,Lo(),n||Oo()},t.smoothstep=V,t.spec=de,t.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},t.storeAuthState=function(t,e){e?Qt.add(t):Qt.delete(t)},t.sub=el,t.subtract=Gs,t.symbolSize=tf,t.tileAABB=function(t,e,n,r,i,o,a,s,l){if("globe"===l.name)return zl(t,e,new Sh(n,r,i));var u=Vp({z:n,x:r,y:i},l);return new ml([(o+u.x/u.scale)*e,e*(u.y/u.scale),a],[(o+u.x2/u.scale)*e,e*(u.y2/u.scale),s])},t.tileCornersToBounds=Nl,t.tileTransform=Vp,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=Qs,t.transformMat4$1=al,t.transformQuat=$s,t.transitionTileAABBinECEF=Rl,t.translate=As,t.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=Ao,t.uniqueId=H,t.updateGlobeVertexNormal=function(t,e,n,r,i){var o=5*e+2;t.float32[o+0]=n,t.float32[o+1]=r,t.float32[o+2]=i},t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateFilter=function(t){return no(Ni(t))},t.validateFog=function(t){return no(Yi(t))},t.validateLayer=function(t){return no(Vi(t))},t.validateLight=function(t){return no(Xi(t))},t.validateSource=function(t){return no(Zi(t))},t.validateStyle=$i,t.validateTerrain=function(t){return no(Hi(t))},t.values=Z,t.vectorTile=Xc,t.version=_,t.warnOnce=it,t.window=m,t.wrap=G})),m(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){var n,r="[",i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r+="".concat(e(o),",")}}catch(c){i.e(c)}finally{i.f()}return"".concat(r,"]")}var a,s="{",l=f(Object.keys(t).sort());try{for(l.s();!(a=l.n()).done;){var u=a.value;s+="".concat(u,":").concat(e(t[u]),",")}}catch(c){l.e(c)}finally{l.f()}return"".concat(s,"}")}function n(n){var r,i="",o=f(t.refProperties);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="/".concat(e(n[a]))}}catch(s){o.e(s)}finally{o.f()}return i}var r=function(){function e(t){p(this,e),this.keyCache={},t&&this.replace(t)}return d(e,[{key:"replace",value:function(t){this._layerConfigs={},this._layers={},this.update(t,[])}},{key:"update",value:function(e,r){var i,o=this,a=f(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=t.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(b){a.e(b)}finally{a.f()}var l,u=f(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(b){u.e(b)}finally{u.f()}this.familiesBySource={};var h,p=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var l in r)s.push(r[l]);return s}(t.values(this._layerConfigs),this.keyCache),d=f(p);try{for(d.s();!(h=d.n()).done;){var v=h.value.map((function(t){return o._layers[t.id]})),y=v[0];if("none"!==y.visibility){var g=y.source||"",m=this.familiesBySource[g];m||(m=this.familiesBySource[g]={});var _=y.sourceLayer||"_geojsonTileLayer",x=m[_];x||(x=m[_]=[]),x.push(v)}}}catch(b){d.e(b)}finally{d.f()}}}]),e}(),i=function(){function e(){p(this,e)}return d(e,[{key:"loadTile",value:function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=e.padding,s=e.buildQuadTree,l=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap?this.getImageData(o,a):o;n(null,new t.DEMData(r,l,i,a<1,s))}},{key:"getImageData",value:function(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),e}();function o(t,e){if(0!==t.length){l(t[0],e);for(var n=1;n<t.length;n++)l(t[n],!e)}}function l(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}var u=t.getDefaultExportFromCjs((function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)o(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)o(e.coordinates[r],n);return e})),c=t.VectorTileFeature.prototype.toGeoJSON,g={exports:{}},m=t.pointGeometry,_=t.vectorTile.VectorTileFeature,x=b;function b(t,e){this.options=e||{},this.features=t,this.length=t.length}function w(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}b.prototype.feature=function(t){return new w(this.features[t],this.options.extent)},w.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new m(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},w.prototype.toGeoJSON=_.prototype.toGeoJSON;var k=t.pbf,E=x;function S(t){var e=new k;return function(t,e){for(var n in t.layers)e.writeMessage(3,T,t.layers[n])}(t,e),e.finish()}function T(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,M,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,L,o[n])}function M(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,I,t),e.writeVarintField(3,n.type),e.writeMessage(4,A,n)}function I(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],u=o[s];if(null!==l){void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),e.writeVarint(f)}}}function C(t,e){return(e<<3)+(7&t)}function P(t){return t<<1^t>>31}function A(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),e.writeVarint(C(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(C(2,c-1));var f=l[h].x-i,p=l[h].y-o;e.writeVarint(P(f)),e.writeVarint(P(p)),i+=f,o+=p}3===r&&e.writeVarint(C(7,1))}}function L(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}g.exports=S,g.exports.fromVectorTileJs=S,g.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new E(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return S({layers:n})},g.exports.GeoJSONWrapper=E;var D,R=t.getDefaultExportFromCjs(g.exports),O={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},z=Math.fround||(D=new Float32Array(1),function(t){return D[0]=+t,D[0]}),N=3,F=5,B=6,j=function(){function e(t){p(this,e),this.options=Object.assign(Object.create(O),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}return d(e,[{key:"load",value:function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom;n&&console.time("total time");var o="prepare ".concat(t.length," points");n&&console.time(o),this.points=t;for(var a=[],s=0;s<t.length;s++){var l=t[s];if(l.geometry){var u=h(l.geometry.coordinates,2),c=u[0],f=u[1],p=z(G(c)),d=z(q(f));a.push(p,d,1/0,s,-1,1),this.options.reduce&&a.push(0)}}var v=this.trees[i+1]=this._createTree(a);n&&console.timeEnd(o);for(var y=i;y>=r;y--){var g=+Date.now();v=this.trees[y]=this._createTree(this._cluster(v,y)),n&&console.log("z%d: %d clusters in %dms",y,v.numItems,+Date.now()-g)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}var l,u=this.trees[this._limitZoom(e)],c=u.range(G(n),q(o),G(i),q(r)),h=u.data,p=[],d=f(c);try{for(d.s();!(l=d.n()).done;){var v=l.value,y=this.stride*v;p.push(h[y+F]>1?U(h,y,this.clusterProps):this.points[h[y+N]])}}catch(g){d.e(g)}finally{d.f()}return p}},{key:"getChildren",value:function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.data;if(e*this.stride>=o.length)throw new Error(r);var a,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=i.within(o[e*this.stride],o[e*this.stride+1],s),u=[],c=f(l);try{for(c.s();!(a=c.n()).done;){var h=a.value*this.stride;o[h+4]===t&&u.push(o[h+F]>1?U(o,h,this.clusterProps):this.points[o[h+N]])}}catch(p){c.e(p)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}},{key:"getTile",value:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,u),r.data,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.data,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.data,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}},{key:"_appendLeaves",value:function(t,e,n,r,i){var o,a=this.getChildren(e),s=f(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(l),t.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_createTree",value:function(e){for(var n=new t.KDBush(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}},{key:"_addTileFeatures",value:function(t,e,n,r,i,o){var a,s=f(t);try{for(s.s();!(a=s.n()).done;){var l=a.value*this.stride,u=e[l+F]>1,c=void 0,p=void 0,d=void 0;if(u)c=V(e,l,this.clusterProps),p=e[l],d=e[l+1];else{var v=this.points[e[l+N]];c=v.properties;var y=h(v.geometry.coordinates,2),g=y[0],m=y[1];p=G(g),d=q(m)}var _={type:1,geometry:[[Math.round(this.options.extent*(p*i-n)),Math.round(this.options.extent*(d*i-r))]],tags:c},x=void 0;void 0!==(x=u||this.options.generateId?e[l+N]:this.points[e[l+N]].id)&&(_.id=x),o.features.push(_)}}catch(b){s.e(b)}finally{s.f()}}},{key:"_limitZoom",value:function(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}},{key:"_cluster",value:function(t,e){for(var n=this.options,r=n.radius,i=n.extent,o=n.reduce,a=n.minPoints,s=r/(i*Math.pow(2,e)),l=t.data,u=[],c=this.stride,h=0;h<l.length;h+=c)if(!(l[h+2]<=e)){l[h+2]=e;var p,d=l[h],v=l[h+1],y=t.within(l[h],l[h+1],s),g=l[h+F],m=g,_=f(y);try{for(_.s();!(p=_.n()).done;){var x=p.value*c;l[x+2]>e&&(m+=l[x+F])}}catch(O){_.e(O)}finally{_.f()}if(m>g&&m>=a){var b,w=void 0,k=d*g,E=v*g,S=-1,T=((h/c|0)<<5)+(e+1)+this.points.length,M=f(y);try{for(M.s();!(b=M.n()).done;){var I=b.value*c;if(!(l[I+2]<=e)){l[I+2]=e;var C=l[I+F];k+=l[I]*C,E+=l[I+1]*C,l[I+4]=T,o&&(w||(w=this._map(l,h,!0),S=this.clusterProps.length,this.clusterProps.push(w)),o(w,this._map(l,I)))}}}catch(O){M.e(O)}finally{M.f()}l[h+4]=T,u.push(k/m,E/m,1/0,T,-1,m),o&&u.push(S)}else{for(var P=0;P<c;P++)u.push(l[h+P]);if(m>1){var A,L=f(y);try{for(L.s();!(A=L.n()).done;){var D=A.value*c;if(!(l[D+2]<=e)){l[D+2]=e;for(var R=0;R<c;R++)u.push(l[D+R])}}}catch(O){L.e(O)}finally{L.f()}}}}return u}},{key:"_getOriginId",value:function(t){return t-this.points.length>>5}},{key:"_getOriginZoom",value:function(t){return(t-this.points.length)%32}},{key:"_map",value:function(t,e,n){if(t[e+F]>1){var r=this.clusterProps[t[e+B]];return n?Object.assign({},r):r}var i=this.points[t[e+N]].properties,o=this.options.map(i);return n&&o===i?Object.assign({},o):o}}]),e}();function U(t,e,n){return{type:"Feature",id:t[e+N],properties:V(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),Z(t[e+1])]}};var r}function V(t,e,n){var r=t[e+F],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+B],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:t[e+N],point_count:r,point_count_abbreviated:i})}function G(t){return t/360+.5}function q(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Z(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function W(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],f=e+3;f<n;f+=3){var p=X(t[f],t[f+1],l,u,c,h);if(p>o)i=f,o=p;else if(p===o){var d=Math.abs(f-a);d<s&&(i=f,s=d)}}o>r&&(i-e>3&&W(t,e,i,r),t[i+2]=o,n-i>3&&W(t,i,n,r))}function X(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function H(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Y(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Y(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Y(t,e[r][i])}(i),i}function Y(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function K(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)J(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)J(i[u],s);else if("LineString"===o)Q(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)Q(i[u],s=[],a,!1),t.push(H(l,"LineString",s,e.properties));return}$(i,s,a,!1)}else if("Polygon"===o)$(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)K(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];$(i[u],c,a,!0),s.push(c)}}t.push(H(l,o,s,e.properties))}}function J(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function Q(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=tt(t[s][0]),u=et(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,W(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function $(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Q(t[i],o,n,r),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)l.push(c);else if(!(d<n||p>=r)){var v=[];if("Point"===f||"MultiPoint"===f)rt(h,v,n,r,i);else if("LineString"===f)it(h,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)at(h,v,n,r,i,!1);else if("Polygon"===f)at(h,v,n,r,i,!0);else if("MultiPolygon"===f)for(var y=0;y<h.length;y++){var g=[];at(h[y],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===f){for(y=0;y<v.length;y++)l.push(H(c.id,f,v[y],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===v.length?(f="LineString",v=v[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===v.length?"Point":"MultiPoint"),l.push(H(c.id,f,v,c.tags))}}}return l.length?l:null}function rt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function it(t,e,n,r,i,o,a){for(var s,l,u=ot(t),c=0===i?lt:ut,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],v=t[f+2],y=t[f+3],g=t[f+4],m=0===i?p:d,_=0===i?y:g,x=!1;a&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(d-g,2))),m<n?_>n&&(l=c(u,p,d,y,g,n),a&&(u.start=h+s*l)):m>r?_<r&&(l=c(u,p,d,y,g,r),a&&(u.start=h+s*l)):st(u,p,d,v),_<n&&m>=n&&(l=c(u,p,d,y,g,n),x=!0),_>r&&m<=r&&(l=c(u,p,d,y,g,r),x=!0),!o&&x&&(a&&(u.end=h+s*l),e.push(u),u=ot(t)),a&&(h+=s)}var b=t.length-3;p=t[b],d=t[b+1],v=t[b+2],(m=0===i?p:d)>=n&&m<=r&&st(u,p,d,v),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&st(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,r,i,o){for(var a=0;a<t.length;a++)it(t[a],e,n,r,i,o,!1)}function st(t,e,n,r){t.push(e),t.push(n),t.push(r)}function lt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function ut(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ct(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ht(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ht(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(ht(o.geometry[s][u],e));i.push(l)}n.push(H(o.id,a,i,o.tags))}return n}function ht(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function ft(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(pt(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(pt(u[r][i],u[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function pt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function dt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,vt(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function vt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)yt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)yt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)yt(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function yt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function gt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)K(n,t.features[r],e,r);else K(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=nt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=ct(i,1).concat(r)),o&&(r=r.concat(ct(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function mt(t,e,n){return 32*((1<<t)*n+e)+t}function _t(e,n){var r=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);var o=new(function(){function e(n){p(this,e),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=n.length,this._features=n}return d(e,[{key:"feature",value:function(e){return new(function(){function e(n){p(this,e),this._feature=n,this.extent=t.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return d(e,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var e,n=[],r=f(this._feature.geometry);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push([new t.Point(i[0],i[1])])}}catch(d){r.e(d)}finally{r.f()}return n}var o,a=[],s=f(this._feature.geometry);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;c.push(new t.Point(p[0],p[1]))}}catch(d){h.e(d)}finally{h.f()}a.push(c)}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"toGeoJSON",value:function(t,e,n){return c.call(this,t,e,n)}}]),e}())(this._features[e])}}]),e}())(i.features),a=R(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),n(null,{vectorTile:o,rawData:a.buffer})}gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=mt(e,n,r),f=this.tiles[h];if(!f&&(u>1&&console.time("creation"),f=this.tiles[h]=dt(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,i){if(e===l.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){u>1&&console.time("clipping");var v,y,g,m,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,E=1+b;v=y=g=m=null,_=nt(t,c,n-b,n+k,0,f.minX,f.maxX,l),x=nt(t,c,n+w,n+E,0,f.minX,f.maxX,l),t=null,_&&(v=nt(_,c,r-b,r+k,1,f.minY,f.maxY,l),y=nt(_,c,r+w,r+E,1,f.minY,f.maxY,l),_=null),x&&(g=nt(x,c,r-b,r+k,1,f.minY,f.maxY,l),m=nt(x,c,r+w,r+E,1,f.minY,f.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(y||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(m||[],e+1,2*n+1,2*r+1)}}},gt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=mt(t,e=(e%a+a)%a,n);if(this.tiles[s])return ft(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[mt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ft(this.tiles[s],i):null):null};var xt=function(e){v(r,e);var n=y(r);function r(t,e,i,o,a){var s;return p(this,r),s=n.call(this,t,e,i,o,_t),a&&(s.loadGeoJSON=a),s}return d(r,[{key:"loadData",value:function(e,n){var r=this,i=e&&e.request,o=i&&i.collectResourceTiming;this.loadGeoJSON(e,(function(a,s){if(a||!s)return n(a);if("object"!=typeof s)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));u(s,!0);try{if(e.filter){var l=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===l.result)throw new Error(l.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));var c=s.features.filter((function(t){return l.value.evaluate({zoom:0},t)}));s={type:"FeatureCollection",features:c}}r._geoJSONIndex=e.cluster?new j(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u++){var f=c[u],p=h(r[f],2),d=p[0],v=p[1],y=t.createExpression(v),g=t.createExpression("string"==typeof d?[d,["accumulated"],["get",f]]:d);i[f]=y.value,o[f]=g.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=l;n<r.length;n++){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=l;n<r.length;n++){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(e)).load(s.features):function(t,e){return new gt(t,e)}(s,e.geojsonVtOptions)}catch(a){return n(a)}r.loaded={};var f={};if(o){var p=t.getPerformanceMeasurement(i);p&&(f.resourceTiming={},f.resourceTiming[e.source]=JSON.parse(JSON.stringify(p)))}n(null,f)}))}},{key:"reloadTile",value:function(t,e){var n=this.loaded;return n&&n[t.uid]?a(s(r.prototype),"reloadTile",this).call(this,t,e):this.loadTile(t,e)}},{key:"loadGeoJSON",value:function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}},{key:"getClusterChildren",value:function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}},{key:"getClusterLeaves",value:function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}]),r}(t.VectorTileWorkerSource),bt=function(){function e(n){var r=this;p(this,e),this.self=n,this.actor=new t.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:xt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}return d(e,[{key:"clearCaches",value:function(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}},{key:"checkIfReady",value:function(t,e,n){n()}},{key:"setReferrer",value:function(t,e){this.referrer=e}},{key:"spriteLoaded",value:function(e,n){for(var r in this.isSpriteLoaded[e]=n,this.workerSources[e]){var i=this.workerSources[e][r];for(var o in i)i[o]instanceof t.VectorTileWorkerSource&&(i[o].isSpriteLoaded=n,i[o].fire(new t.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()}},{key:"enableTerrain",value:function(t,e,n){this.terrain=e,n()}},{key:"setProjection",value:function(e,n){this.projections[e]=t.getProjection(n)}},{key:"setLayers",value:function(t,e,n){this.getLayerIndex(t).replace(e),n()}},{key:"updateLayers",value:function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}},{key:"loadTile",value:function(e,n,r){var i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(e,n,r){var i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(e,n,r){var i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}},{key:"removeTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}},{key:"removeSource",value:function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}}},{key:"loadWorkerSource",value:function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}},{key:"syncRTLPluginState",value:function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),o)}}catch(t){r(t.toString())}}},{key:"getAvailableImages",value:function(t){var e=this.availableImages[t];return e||(e=[]),e}},{key:"getLayerIndex",value:function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}},{key:"getWorkerSource",value:function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i,o,a,s){r.actor.send(e,n,i,t,a,s)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}},{key:"getDEMWorkerSource",value:function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new i),this.demWorkerSources[t][e]}},{key:"enforceCacheSizeLimit",value:function(e,n){t.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(t,e,n){n(void 0,void 0)}}]),e}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new bt(self)),bt})),m(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n}var n=u;function u(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===g[e=t&&t.failIfMajorPerformanceCaveat]&&(g[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(u.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),g[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var g={};function m(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function _(e,n,r){for(var i=t.window.document.createElementNS("http://www.w3.org/2000/svg",e),o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i.setAttributeNS(null,s,n[s])}return r&&r.appendChild(i),i}u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var x,b=t.window.document&&t.window.document.documentElement.style,w=b&&void 0!==b.userSelect?"userSelect":"WebkitUserSelect";function k(){b&&w&&(x=b[w],b[w]="none")}function E(){b&&w&&(b[w]=x)}function S(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",S,!0)}function T(){t.window.addEventListener("click",S,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",S,!0)}),0)}function M(t,e){var n=t.getBoundingClientRect();return P(t,n,e)}function I(t,e){for(var n=t.getBoundingClientRect(),r=[],i=0;i<e.length;i++)r.push(P(t,n,e[i]));return r}function C(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function P(e,n,r){var i=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function A(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(t[0]=o*(a=1/a),t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function L(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}var D=function(e){v(r,e);var n=y(r);function r(){var e;return p(this,r),(e=n.call(this)).images={},e.updatedImages={},e.callbackDispatchedThisFrame={},e.loaded=!1,e.requestors=[],e.patterns={},e.atlasImage=new t.RGBAImage({width:1,height:1}),e.dirty=!0,e}return d(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(t){if(this.loaded!==t&&(this.loaded=t,t)){var e,n=f(this.requestors);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.ids,o=r.callback;this._notify(i,o)}}catch(a){n.e(a)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(t){return!!this.getImage(t)}},{key:"getImage",value:function(t){return this.images[t]}},{key:"addImage",value:function(t,e){this._validate(t,e)&&(this.images[t]=e)}},{key:"_validate",value:function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(t,e){if(!t)return!0;var n,r=0,i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"_validateContent",value:function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}},{key:"updateImage",value:function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}},{key:"removeImage",value:function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(t,e){var n=!0;if(!this.isLoaded()){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.images[o]||(n=!1)}}catch(a){i.e(a)}finally{i.f()}}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}},{key:"_notify",value:function(e,n){var r,i={},o=f(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'.concat(a,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){o.e(l)}finally{o.f()}n(null,i)}},{key:"getPixelSize",value:function(){var t=this.atlasImage;return{width:t.width,height:t.height}}},{key:"getPattern",value:function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position}},{key:"bind",value:function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,f=h.width,p=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c},{width:f,height:p}),t.RGBAImage.copy(h,a,{x:0,y:p-1},{x:u,y:c-1},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c+p},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:f-1,y:0},{x:u-1,y:c},{width:1,height:p}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u+f,y:c},{width:1,height:p})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];L(i)&&this.updateImage(r,i)}}}catch(o){n.e(o)}finally{n.f()}}}]),r}(t.Evented),R=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new(function(){function e(){p(this,e),this.specification=t.spec.light.position}return d(e,[{key:"possiblyEvaluate",value:function(e,n){return function(e){var n=h(e,3),r=n[0],i=n[1],o=n[2],a=t.degToRad(i+90),s=t.degToRad(o);return{x:r*Math.cos(a)*Math.sin(s),y:r*Math.sin(a)*Math.sin(s),z:r*Math.cos(s),azimuthal:i,polar:o}}(e.expression.evaluate(n))}},{key:"interpolate",value:function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r),azimuthal:t.number(e.azimuthal,n.azimuthal,r),polar:t.number(e.polar,n.polar,r)}}}]),e}()),color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),O=function(e){v(r,e);var n=y(r);function r(e){var i;return p(this,r),(i=n.call(this))._transitionable=new t.Transitionable(R),i.setLight(e),i._transitioning=i._transitionable.untransitioned(),i}return d(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(t){this.properties=this._transitioning.possiblyEvaluate(t)}},{key:"_validate",value:function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}]),r}(t.Evented),z=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),N=function(e){v(r,e);var n=y(r);function r(e,i){var o;return p(this,r),(o=n.call(this))._transitionable=new t.Transitionable(z),o.set(e),o._transitioning=o._transitionable.untransitioned(),o.drapeRenderMode=i,o}return d(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(e){for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(t){this.properties=this._transitioning.possiblyEvaluate(t)}}]),r}(t.Evented);function F(e,n,r,i){var o=t.smoothstep(45,65,r),a=B(e,i),s=h(a,2),l=s[0],u=s[1],c=t.length(n),f=1-Math.min(1,Math.exp((c-l)/(u-l)*-6));return f*=f*f,(f=Math.min(1,1.00747*f))*o*e.alpha}function B(t,e){var n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}var j=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])}),U=function(e){v(r,e);var n=y(r);function r(e,i){var o;return p(this,r),(o=n.call(this))._transitionable=new t.Transitionable(j),o.set(e),o._transitioning=o._transitionable.untransitioned(),o._transform=i,o}return d(r,[{key:"state",get:function(){var e=this._transform,n="globe"===e.projection.name,r=t.globeToMercatorTransition(e.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[t.number(o[0],i[0],r),t.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateFog,e,n)){for(var r=0,i=Object.keys(t.spec.fog);r<i.length;r++){var o=i[r];e&&void 0===e[o]&&(e[o]=t.spec.fog[o].default)}for(var a in e){var s=e[a];t.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),s):this._transitionable.setValue(a,s)}}}},{key:"getOpacity",value:function(e){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}},{key:"getOpacityAtLatLng",value:function(e,n){return this._transform.projection.supportsFog?function(e,n,r){var i=t.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return t.transformMat4(a,a,r.mercatorFogMatrix),F(e,a,r.pitch,r._fov)}(this.state,e,n):0}},{key:"getFovAdjustedRange",value:function(t){return this._transform.projection.supportsFog?B(this.state,t):[0,1]}},{key:"updateTransitions",value:function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(t){this.properties=this._transitioning.possiblyEvaluate(t)}},{key:"_validate",value:function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}]),r}(t.Evented),V=function(){function e(n,r){var i=this;p(this,e),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=new e.Actor(o[a],r,this.id);s.name="Worker ".concat(a),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return d(e,[{key:"broadcast",value:function(e,n,r){t.asyncAll(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),e}();function G(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}V.Actor=t.Actor;var q=function(){function e(t,n,r,i){p(this,e),this.screenBounds=t,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return d(e,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}},{key:"bufferedCameraGeometry",value:function(e){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}},{key:"bufferedCameraGeometryGlobe",value:function(e){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,e),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}},{key:"containsTile",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n),s=e.tileID.wrap+(a.unwrapped?i:0),l=a.polygon.map((function(n){return t.getTilePoint(e.tileTransform,n,s)}));if(t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT)){s=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var u,c=this.screenGeometryMercator.polygon.map((function(n){return t.getTileVec3(e.tileTransform,n,s)})),h=c.map((function(e){return new t.Point(e[0],e[1])})),f=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),p=t.getTileVec3(e.tileTransform,f,s),d=c.map((function(e){var n=t.sub(e,e,p);return t.normalize(n,n),new t.Ray(p,n)})),v=G(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:h,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(u=t.getBounds(l),u.min.x=t.clamp(u.min.x,0,t.EXTENT),u.min.y=t.clamp(u.min.y,0,t.EXTENT),u.max.x=t.clamp(u.max.x,0,t.EXTENT),u.max.y=t.clamp(u.max.y,0,t.EXTENT),u),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:v}}}},{key:"_bufferedScreenMercator",value:function(t,e){var n,r=X(t);return this._screenRaycastCache[r]?this._screenRaycastCache[r]:(n="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((function(t){return e.pointCoordinate3D(t)})),unwrapped:!0},this._screenRaycastCache[r]=n,n)}},{key:"_bufferedCameraMercator",value:function(t,e){var n,r=X(t);return this._cameraRaycastCache[r]?this._cameraRaycastCache[r]:(n="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((function(t){return e.pointCoordinate3D(t)})),unwrapped:!0},this._cameraRaycastCache[r]=n,n)}},{key:"_projectAndResample",value:function(e,n){var r=function(e,n){var r=t.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-t.GLOBE_RADIUS,0,1],o=[0,t.GLOBE_RADIUS,0,1],a=[0,0,0,1];t.transformMat4$1(i,i,r),t.transformMat4$1(o,o,r),t.transformMat4$1(a,a,r);var s=new t.Point(i[0]/i[3],i[1]/i[3]),l=new t.Point(o[0]/o[3],o[1]/o[3]),u=t.polygonContainsPoint(e,s)&&i[3]<a[3],h=t.polygonContainsPoint(e,l)&&o[3]<a[3];if(!u&&!h)return null;var f=function(t,e,n){for(var r=1;r<t.length;r++){var i=W(e.pointCoordinate3D(t[r-1]).x),o=W(e.pointCoordinate3D(t[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(e,n,u?-1:1);if(!f)return null;var p=f.idx,d=f.t,v=p>1?Z(e.slice(0,p),n):[],y=p<e.length?Z(e.slice(p),n):[];v=v.map((function(e){return new t.Point(W(e.x),e.y)})),y=y.map((function(e){return new t.Point(W(e.x),e.y)}));var g=c(v);0===g.length&&g.push(y[y.length-1]);var m,_=t.number(g[g.length-1].y,(0===y.length?v[0]:y[0]).y,d);return m=u?[new t.Point(0,_),new t.Point(0,0),new t.Point(1,0),new t.Point(1,_)]:[new t.Point(1,_),new t.Point(1,1),new t.Point(0,1),new t.Point(0,_)],g.push.apply(g,c(m)),0===y.length?g.push(v[0]):g.push.apply(g,c(y)),{polygon:g.map((function(e){return new t.MercatorCoordinate(e.x,e.y)})),unwrapped:!1}}(e,n);if(r)return r;var i=function(e,n){for(var r=!1,i=-1/0,o=0,a=0;a<e.length-1;a++)e[a].x>i&&(i=e[a].x,o=a);for(var s=0;s<e.length-1;s++){var l=(o+s)%(e.length-1),u=e[l],c=e[l+1];Math.abs(u.x-c.x)>.5&&(u.x<c.x?(u.x+=1,0===l&&(e[e.length-1].x+=1)):(c.x+=1,l+1===e.length-1&&(e[0].x+=1)),r=!0)}var h=t.mercatorXfromLng(n.center.lng);return r&&h<Math.abs(h-1)&&e.forEach((function(t){t.x-=1})),{polygon:e,unwrapped:r}}(Z(e,n).map((function(e){return new t.Point(W(e.x),e.y)})),n);return{polygon:i.polygon.map((function(e){return new t.MercatorCoordinate(e.x,e.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(n,r){var i,o;if(n instanceof t.Point||"number"==typeof n[0]){var a=t.Point.convert(n);i=[a],o=r.isPointAboveHorizon(a)}else{var s=t.Point.convert(n[0]),l=t.Point.convert(n[1]);i=[s,l],o=t.polygonizeBounds(s,l).every((function(t){return r.isPointAboveHorizon(t)}))}return new e(i,r.getCameraPoint(),o,r)}}]),e}();function Z(e,n){return t.resample(e,(function(t){var e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function W(t){return t<0?1+t%1:t%1}function X(t){return 100*t|0}function H(e,n,r,i,o){var a=function(r,i){if(r)return o(r);if(i){e.url&&i.tiles&&e.tiles&&delete e.tiles;var a=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),o(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,r,i),t.ResourceType.Source),a):t.exported.frame((function(){return a(null,e)}))}var Y,K=function(){function e(n,r,i){p(this,e),this.bounds=t.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return d(e,[{key:"validateBounds",value:function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}},{key:"contains",value:function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}]),e}(),J=function(){function t(e,n,r){p(this,t),this.context=e;var i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||n.destroy()}return d(t,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),t}(),Q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},$=function(){function t(e,n,r,i){p(this,t),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=e;var o=e.gl;this.buffer=o.createBuffer(),e.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||n.destroy()}return d(t,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"enableAttributes",value:function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Q[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),t}(),tt=function(){function t(e){p(this,t),this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return d(t,[{key:"get",value:function(){return this.current}},{key:"set",value:function(t){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),t}(),et=function(e){v(r,e);var n=y(r);function r(){return p(this,r),n.apply(this,arguments)}return d(r,[{key:"getDefault",value:function(){return t.Color.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}]),r}(tt),nt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}]),n}(tt),rt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}]),n}(tt),it=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}]),n}(tt),ot=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}]),n}(tt),at=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}]),n}(tt),st=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}]),n}(tt),lt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}]),n}(tt),ut=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}}]),n}(tt),ct=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}]),n}(tt),ht=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}}]),n}(tt),ft=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}]),n}(tt),pt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}}]),n}(tt),dt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var t=this.gl;return[t.ONE,t.ZERO]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}]),n}(tt),vt=function(e){v(r,e);var n=y(r);function r(){return p(this,r),n.apply(this,arguments)}return d(r,[{key:"getDefault",value:function(){return t.Color.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}]),r}(tt),yt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}]),n}(tt),gt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}}]),n}(tt),mt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}]),n}(tt),_t=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}]),n}(tt),xt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}]),n}(tt),bt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}]),n}(tt),wt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}]),n}(tt),kt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}}]),n}(tt),Et=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}]),n}(tt),St=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}}]),n}(tt),Tt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}}]),n}(tt),Mt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}]),n}(tt),It=function(t){v(n,t);var e=y(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).vao=t.extVertexArrayObject,r}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}]),n}(tt),Ct=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}}]),n}(tt),Pt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}}]),n}(tt),At=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}}]),n}(tt),Lt=function(t){v(n,t);var e=y(n);function n(t,r){var i;return p(this,n),(i=e.call(this,t)).context=t,i.parent=r,i}return d(n,[{key:"getDefault",value:function(){return null}}]),n}(tt),Dt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}}]),n}(Lt),Rt=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}]),n}(Lt),Ot=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Rt),zt=function(){function t(e,n,r,i){p(this,t),this.context=e,this.width=n,this.height=r;var o=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new Dt(e,o),i&&(this.depthAttachment=new Rt(e,o))}return d(t,[{key:"destroy",value:function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)}}]),t}(),Nt=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p(this,n),this.gl=t,this.isWebGL2=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),e){var r=t;this.extVertexArrayObject={createVertexArrayOES:r.createVertexArray.bind(t),deleteVertexArrayOES:r.deleteVertexArray.bind(t),bindVertexArrayOES:r.bindVertexArray.bind(t)}}this.clearColor=new et(this),this.clearDepth=new nt(this),this.clearStencil=new rt(this),this.colorMask=new it(this),this.depthMask=new ot(this),this.stencilMask=new at(this),this.stencilFunc=new st(this),this.stencilOp=new lt(this),this.stencilTest=new ut(this),this.depthRange=new ct(this),this.depthTest=new ht(this),this.depthFunc=new ft(this),this.blend=new pt(this),this.blendFunc=new dt(this),this.blendColor=new vt(this),this.blendEquation=new yt(this),this.cullFace=new gt(this),this.cullFaceSide=new mt(this),this.frontFace=new _t(this),this.program=new xt(this),this.activeTexture=new bt(this),this.viewport=new wt(this),this.bindFramebuffer=new kt(this),this.bindRenderbuffer=new Et(this),this.bindTexture=new St(this),this.bindVertexBuffer=new Tt(this),this.bindElementBuffer=new Mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new It(this),this.pixelStoreUnpack=new Ct(this),this.pixelStoreUnpackPremultiplyAlpha=new Pt(this),this.pixelStoreUnpackFlipY=new At(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),e||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(e||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}return d(n,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(t,e){return new J(this,t,e)}},{key:"createVertexBuffer",value:function(t,e,n){return new $(this,t,e,n)}},{key:"createRenderbuffer",value:function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(t,e,n){return new zt(this,t,e,n)}},{key:"clear",value:function(t){var e=t.color,n=t.depth,r=t.stencil,i=this.gl,o=0;e&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(o|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(o)}},{key:"setCullFace",value:function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}},{key:"setDepthMode",value:function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),n}(),Ft=function(e){v(r,e);var n=y(r);function r(e,o,a,s){var u;if(p(this,r),(u=n.call(this)).id=e,u.dispatcher=a,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,t.extend(i(u),t.pick(o,["url","scheme","tileSize","promoteId"])),u._options=t.extend({type:"vector"},o),u._collectResourceTiming=o.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),u._tileWorkers={},u._deduped=new t.DedupedRequest,l(u)}return d(r,[{key:"load",value:function(e){var n=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));var r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=H(this._options,this.map._requestManager,r,i,(function(o,a){n._tileJSONRequest=null,n._loaded=!0,o?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(r)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),n.fire(new t.ErrorEvent(o))):a&&(t.extend(n,a),a.bounds&&(n.tileBounds=new K(a.bounds,n.minzoom,n.maxzoom)),t.postTurnstileEvent(a.tiles,n.map._requestManager._customAccessToken),n.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(o)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"reload",value:function(){var t=this;this.cancelTileJSONRequest(),this.load((function(){return t.map.style._clearSource(t.id)}))}},{key:"setTiles",value:function(t){return this._options.tiles=t,this.reload(),this}},{key:"setUrl",value:function(t){return this.url=t,this._options.url=t,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return t.extend({},this._options)}},{key:"loadTile",value:function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(o.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",o,s.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",o,s.bind(this),void 0,!0);else{var a=t.loadVectorTile.call({deduped:this._deduped},o,(function(t,n){t||!n?s.call(r,t):(o.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",o,s.bind(r),void 0,!0))}),!0);e.request={cancel:a}}function s(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}]),r}(t.Evented),Bt=function(e){v(r,e);var n=y(r);function r(e,o,a,s){var l;return p(this,r),(l=n.call(this)).id=e,l.dispatcher=a,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=t.extend({type:"raster"},o),t.extend(i(l),t.pick(o,["url","scheme","tileSize"])),l}return d(r,[{key:"load",value:function(e){var n=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,null,null,(function(r,i){n._tileJSONRequest=null,n._loaded=!0,r?n.fire(new t.ErrorEvent(r)):i&&(t.extend(n,i),i.bounds&&(n.tileBounds=new K(i.bounds,n.minzoom,n.maxzoom)),t.postTurnstileEvent(i.tiles),n.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(r)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"reload",value:function(){var t=this;this.cancelTileJSONRequest(),this.load((function(){return t.map.style._clearSource(t.id)}))}},{key:"setTiles",value:function(t){return this._options.tiles=t,this.reload(),this}},{key:"setUrl",value:function(t){return this.url=t,this._options.url=t,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return t.extend({},this._options)}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"loadTile",value:function(e,n){var r=this,i=t.exported.devicePixelRatio>=2,o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(o,t.ResourceType.Tile),(function(i,o,a,s){return delete e.request,e.aborted?(e.state="unloaded",n(null)):i?(e.state="errored",n(i)):o?(r.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s}),e.setTexture(o,r.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(t,e){t.request&&(t.request.cancel(),delete t.request),e()}},{key:"unloadTile",value:function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}},{key:"hasTransition",value:function(){return!1}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}],[{key:"loadTileData",value:function(t,e,n){t.setTexture(e,n)}},{key:"unloadTileData",value:function(t,e){t.texture&&e.saveTileTexture(t.texture)}}]),r}(t.Evented);function jt(e,n,r,i,o,a,s,l){var u=[e,r,o,n,i,a,1,1,1],c=[s,l,1],f=t.adjoint([],u),p=t.transformMat3(c,c,t.transpose(f,f)),d=h(p,3),v=d[0],y=d[1],g=d[2];return t.multiply$1(u,[v,0,0,0,y,0,0,0,g],u)}var Ut=function(e){v(r,e);var n=y(r);function r(t,e,i,o){var a;return p(this,r),(a=n.call(this)).id=t,a.dispatcher=i,a.coordinates=e.coordinates,a.type="image",a.minzoom=0,a.maxzoom=22,a.tileSize=512,a.tiles={},a._loaded=!1,a.setEventedParent(o),a.options=e,a._dirty=!1,a}return d(r,[{key:"load",value:function(e,n){var r=this;this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(n,i){if(r._imageRequest=null,r._loaded=!0,n)r.fire(new t.ErrorEvent(n));else if(i){var o=t.window.HTMLImageElement;r.image=i instanceof o?t.exported.getImageData(i):i,r._dirty=!0,r.width=r.image.width,r.height=r.image.height,e&&(r.coordinates=e),r._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"onRemove",value:function(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(e){this.coordinates=e,this._boundsArray=void 0;var n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=f(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}}catch(p){s.e(p)}finally{s.f()}var u=Math.max(o-r,a-i),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((r+o)/2*h),Math.floor((i+a)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(e){for(var n in this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}if(!this._boundsArray){var i=t.tileTransform(this.tileID,this.map.transform.projection),o=this.coordinates.map((function(e){var n=i.projection.project(e[0],e[1]);return t.getTilePoint(i,n)._round()})),a=h(o,4),s=a[0],l=a[1],u=a[2],c=a[3];this.perspectiveTransform=function(e,n,r,i,o,a,s,l,u,c){var h=jt(0,0,e,0,0,n,e,n),f=jt(r,i,o,a,s,l,u,c);return t.multiply$1(f,t.adjoint(h,h),f),[f[6]/f[8]*e/t.EXTENT,f[7]/f[8]*n/t.EXTENT]}(this.width,this.height,s.x,s.y,l.x,l.y,c.x,c.y,u.x,u.y);var f=this._boundsArray=new t.StructArrayLayout4i8;f.emplaceBack(s.x,s.y,0,0),f.emplaceBack(l.x,l.y,t.EXTENT,0),f.emplaceBack(c.x,c.y,0,t.EXTENT),f.emplaceBack(u.x,u.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(f,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}}},{key:"loadTile",value:function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),Vt={vector:Ft,raster:Bt,"raster-dem":function(e){v(r,e);var n=y(r);function r(e,i,o,a){var s;return p(this,r),(s=n.call(this,e,i,o,a)).type="raster-dem",s.maxzoom=22,s._options=t.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return d(r,[{key:"loadTile",value:function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});var l=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==Y&&(Y=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),Y),u=1-(o.width-t.prevPowerOfTwo(o.width))/2;u<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));var c=l?o:t.exported.getImageData(o,u),h={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:u};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",h,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}}]),r}(Bt),geojson:function(e){v(r,e);var n=y(r);function r(e,i,o,a){var s;p(this,r),(s=n.call(this)).id=e,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=o.getActor(),s.setEventedParent(a),s._data=i.data,s._options=t.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var l=t.EXTENT/s.tileSize;return s.workerOptions=t.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*l,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*l,extent:t.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*l,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return d(r,[{key:"onAdd",value:function(t){this.map=t,this.setData(this._data)}},{key:"setData",value:function(t){return this._data=t,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}},{key:"getClusterChildren",value:function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}},{key:"getClusterLeaves",value:function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var e=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,r){if(e._loaded=!0,e._pendingLoad=null,n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:e._metadataFired?"content":"metadata"};e._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[e.id]&&(i.resourceTiming=r.resourceTiming[e.id]),e.fire(new t.Event("data",i)),e._metadataFired=!0}e._coalesce&&(e._updateWorkerData(),e._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}},{key:"unloadTile",value:function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return t.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),video:function(e){v(r,e);var n=y(r);function r(t,e,i,o){var a;return p(this,r),(a=n.call(this,t,e,i,o)).roundZoom=!0,a.type="video",a.options=e,a}return d(r,[{key:"load",value:function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=f(n.urls);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.urls.push(this.map._requestManager.transformRequest(o,t.ResourceType.Source).url)}}catch(a){i.e(a)}finally{i.f()}t.getVideo(this.urls,(function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.setAttribute("playsinline",""),e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}(Ut),image:Ut,canvas:function(e){v(r,e);var n=y(r);function r(e,i,o,a){var s;return p(this,r),s=n.call(this,e,i,o,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return d(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t++){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1}}]),r}(Ut),custom:function(e){v(r,e);var n=y(r);function r(e,o,a,s){var l;return p(this,r),(l=n.call(this)).id=e,l.type="custom",l._dataType="raster",l._dispatcher=a,l._implementation=o,l.setEventedParent(s),l.scheme="xyz",l.minzoom=0,l.maxzoom=22,l.tileSize=512,l._loaded=!1,l.roundZoom=!0,l._implementation||l.fire(new t.ErrorEvent(new Error("Missing implementation for ".concat(l.id," custom source")))),l._implementation.loadTile||l.fire(new t.ErrorEvent(new Error("Missing loadTile implementation for ".concat(l.id," custom source")))),l._implementation.bounds&&(l.tileBounds=new K(l._implementation.bounds,l.minzoom,l.maxzoom)),o.update=l._update.bind(i(l)),o.clearTiles=l._clearTiles.bind(i(l)),o.coveringTiles=l._coveringTiles.bind(i(l)),t.extend(i(l),t.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),l}return d(r,[{key:"serialize",value:function(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}},{key:"onRemove",value:function(t){this._implementation.onRemove&&this._implementation.onRemove(t)}},{key:"hasTile",value:function(t){if(this._implementation.hasTile){var e=t.canonical,n=e.x,r=e.y,i=e.z;return this._implementation.hasTile({x:n,y:r,z:i})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"loadTile",value:function(e,n){var r=e.tileID.canonical,i=r.x,o=r.y,a=r.z,s=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:i,y:o,z:a},{signal:s.signal})).then(function(r){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===r?(e.state="errored",n(null)):null===r?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(r)?(this.loadTileData(e,r),e.state="loaded",void n(null)):(e.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((function(t){20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=function(){return s.abort()}}},{key:"loadTileData",value:function(t,e){Bt.loadTileData(t,e,this._map.painter)}},{key:"unloadTileData",value:function(t){Bt.unloadTileData(t,this._map.painter)}},{key:"unloadTile",value:function(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){var n=t.tileID.canonical,r=n.x,i=n.y,o=n.z;this._implementation.unloadTile({x:r,y:i,z:o})}e()}},{key:"abortTile",value:function(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(t){return{x:t.canonical.x,y:t.canonical.y,z:t.canonical.z}}))}},{key:"_clearTiles",value:function(){this._map.style._clearSource(this.id)}},{key:"_update",value:function(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),r}(t.Evented)},Gt=function(e,n,r,i){var o=new Vt[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(o.id));return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function qt(e,n){var r=t.identity([]);return t.scale(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Zt(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=t.tilesIn(r,a,s);l.sort(Xt);var u,c=[],h=f(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;c.push({wrappedTileID:p.tile.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,n,t._state,p,i,o,qt(t.transform,p.tile.tileID),s)})}}catch(y){h.e(y)}finally{h.f()}var d=function(t){var e,n={},r={},i=f(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a){var c,h=a[u],p=l[u]=l[u]||{},d=n[u]=n[u]||[],v=f(h);try{for(v.s();!(c=v.n()).done;){var g=c.value;p[g.featureIndex]||(p[g.featureIndex]=!0,d.push(g))}}catch(y){v.e(y)}finally{v.f()}}}}catch(y){i.e(y)}finally{i.f()}return n}(c);for(var v in d)d[v].forEach((function(e){var n=e.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(r["source-layer"],n.id):{})}));return d}function Wt(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}function Xt(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Ht(){return null!=So.workerClass?new So.workerClass:new t.window.Worker(So.workerUrl)}var Yt,Kt="mapboxgl_preloaded_worker_pool",Jt=function(){function t(){p(this,t),this.active={}}return d(t,[{key:"acquire",value:function(e){if(!this.workers)for(this.workers=[];this.workers.length<t.workerCount;)this.workers.push(new Ht);return this.active[e]=!0,this.workers.slice()}},{key:"release",value:function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[Kt]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),t}();function Qt(){return Yt||(Yt=new Jt),Yt}function $t(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach((function(t){t in n&&(r[t]=n[t])})),r}function te(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=$t(t[r],e[t[r].ref]));return t}Jt.workerCount=2;var ee={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ne(t,e,n){n.push({command:ee.addSource,args:[t,e[t]]})}function re(t,e,n){e.push({command:ee.removeSource,args:[t]}),n[t]=!0}function ie(t,e,n,r){re(t,n,r),ne(t,e,n)}function oe(t,n,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;return!0}function ae(t,n,r,i,o,a){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function se(t){return t.id}function le(t,e){return t[e.id]=e,t}var ue=function(){function e(t,n){p(this,e),this.reset(t,n)}return d(e,[{key:"reset",value:function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}]),e}(),ce=function(){function t(e,n,r){p(this,t);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return d(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(t,e,n,r,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}},{key:"_queryCircle",value:function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?u.length>0:u}},{key:"query",value:function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}},{key:"hitTestCircle",value:function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}},{key:"_queryCell",value:function(t,e,n,r,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u){var c,h=this.bboxes,p=f(u);try{for(p.s();!(c=p.n()).done;){var d=c.value;if(!l.box[d]){l.box[d]=!0;var v=4*d;if(t<=h[v+2]&&e<=h[v+3]&&n>=h[v+0]&&r>=h[v+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:h[v],y1:h[v+1],x2:h[v+2],y2:h[v+3]})}}}}catch(S){p.e(S)}finally{p.f()}}var y=this.circleCells[i];if(null!==y){var g,m=this.circles,_=f(y);try{for(_.s();!(g=_.n()).done;){var x=g.value;if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,r)&&(!s||s(this.circleKeys[x]))){if(a.hitTest)return o.push(!0),!0;var w=m[b],k=m[b+1],E=m[b+2];o.push({key:this.circleKeys[x],x1:w-E,y1:k-E,x2:w+E,y2:k+E})}}}}catch(S){_.e(S)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(t,e,n,r,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c){var h,p=this.bboxes,d=f(c);try{for(d.s();!(h=d.n()).done;){var v=h.value;if(!u.box[v]){u.box[v]=!0;var y=4*v;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[y+0],p[y+1],p[y+2],p[y+3])&&(!s||s(this.boxKeys[v])))return o.push(!0),!0}}}catch(k){d.e(k)}finally{d.f()}}var g=this.circleCells[i];if(null!==g){var m,_=this.circles,x=f(g);try{for(x.s();!(m=x.n()).done;){var b=m.value;if(!u.circle[b]){u.circle[b]=!0;var w=3*b;if(this._circlesCollide(_[w],_[w+1],_[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}}catch(k){x.e(k)}finally{x.f()}}}},{key:"_forEachCell",value:function(t,e,n,r,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=l;f<=c;f++)for(var p=u;p<=h;p++)if(i.call(this,t,e,n,r,this.xCellCount*p+f,o,a,s))return}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,n,r,i,o){var a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}},{key:"_circleAndRectCollide",value:function(t,e,n,r,i,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,f=c-u;return h*h+f*f<=n*n}}]),t}(),he={unknown:0,flipRequired:1,flipNotRequired:2},fe=Math.tan(85*Math.PI/180);function pe(e,n,r,i,o,a,s){var l=t.create();if(r)if("globe"===a.name){var u=t.calculateGlobeLabelMatrix(o,n);t.multiply(l,l,u)}else{var c=A([],s);l[0]=c[0],l[1]=c[1],l[4]=c[2],l[5]=c[3],i||t.rotateZ(l,l,o.angle)}else t.multiply(l,o.labelPlaneMatrix,e);return l}function de(t,e,n,r,i,o,a){var s=pe(t,e,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function ve(e,n,r,i,o,a,s){if(r){if("globe"===a.name){var l=pe(e,n,r,i,o,a,s);return t.invert(l,l),t.multiply(l,e,l),l}var u=t.clone(e),c=t.identity([]);return c[0]=s[0],c[1]=s[1],c[4]=s[2],c[5]=s[3],t.multiply(u,u,c),i||t.rotateZ(u,u,-o.angle),u}return o.glCoordMatrix}function ye(e,n,r,i){var o=[e,n,r,1];r?t.transformMat4$1(o,o,i):Me(o,o,i);var a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function ge(t,e){return Math.min(.5+t/e*.5,1.5)}function me(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function _e(e,n,r,i,o,a,s,l,u,c){var f=r.transform,p=i?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(p,r.transform.zoom),v="globe"===f.projection.name,y=[256/r.width*2+1,256/r.height*2+1],g=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();var m=null;v&&(m=i?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);for(var _,x=e.lineVertexArray,b=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,w=r.transform.width/r.transform.height,k=!1,E=0;E<b.length;E++){var S=b.get(E),T=S.numGlyphs,M=S.writingMode;if(M!==t.WritingMode.vertical||k||_===t.WritingMode.horizontal||(k=!0),_=M,!S.hidden&&M!==t.WritingMode.vertical||k){k=!1;var I=new t.Point(S.tileAnchorX,S.tileAnchorY),C=f.projection.projectTilePoint(I.x,I.y,c.canonical),P=C.x,A=C.y,L=C.z;if(u){var D=u(I),R=h(D,3);P+=R[0],A+=R[1],L+=R[2]}var O=[P,A,L,1];if(t.transformMat4$1(O,O,n),me(O,y)){var z=ge(r.transform.cameraToCenterDistance,O[3]),N=t.evaluateSizeForFeature(p,d,S),F=s?N/z:N*z,B=ye(P,A,L,o);if(B[3]<=0)Te(T,g);else{var j={},U=s?null:u,V=we(S,F,!1,l,n,o,a,e.glyphOffsetArray,x,g,m,B,I,j,w,U,f.projection,c,s);k=V.useVertical,U&&V.needsFlipping&&(j={}),(V.notEnoughRoom||k||V.needsFlipping&&we(S,F,!0,l,n,o,a,e.glyphOffsetArray,x,g,m,B,I,j,w,U,f.projection,c,s).notEnoughRoom)&&Te(T,g)}}else Te(T,g)}else Te(T,g)}i?(e.text.dynamicLayoutVertexBuffer.updateData(g),m&&e.text.globeExtVertexBuffer.updateData(m)):(e.icon.dynamicLayoutVertexBuffer.updateData(g),m&&e.icon.globeExtVertexBuffer.updateData(m))}function xe(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v){var y=s.lineStartIndex,g=s.glyphStartIndex,m=s.segment,_=g+s.numGlyphs,x=y+s.lineLength,b=e.getoffsetX(g),w=e.getoffsetX(_-1),k=Se(t*b,n,r,i,o,a,m,y,x,l,u,c,h,f,!0,p,d,v);if(!k)return null;var E=Se(t*w,n,r,i,o,a,m,y,x,l,u,c,h,f,!0,p,d,v);return E?{first:k,last:E}:null}function be(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:e===t.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==he.unknown&&function(t,e){return 0===t||Math.abs(e/t)>fe}(r,i)?n===he.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function we(e,n,r,i,o,a,s,l,u,c,f,p,d,v,y,g,m,_,x){var b=n/24,w=e.lineOffsetX*b,k=e.lineOffsetY*b,E=e.lineStartIndex,S=e.glyphStartIndex,T=e.numGlyphs,M=e.segment,I=e.writingMode,C=e.flipState,P=E+e.lineLength,A=function(e){if(f){var n=h(e.up,3),r=n[0],i=n[1],o=n[2],a=c.length;t.updateGlobeVertexNormal(f,a+0,r,i,o),t.updateGlobeVertexNormal(f,a+1,r,i,o),t.updateGlobeVertexNormal(f,a+2,r,i,o),t.updateGlobeVertexNormal(f,a+3,r,i,o)}var s=h(e.point,3),l=s[0],u=s[1],p=s[2];t.addDynamicAttributes(c,l,u,p,e.angle)};if(T>1){var L=xe(b,l,w,k,r,p,d,e,u,a,v,g,!1,m,_,x);if(!L)return{notEnoughRoom:!0};if(i&&!r){var D,R,O,z,N=h(L.first.point,3),F=N[0],B=N[1],j=N[2],U=h(L.last.point,3),V=U[0],G=U[1],q=U[2];D=ye(F,B,j,s),F=(R=h(D,2))[0],B=R[1],O=ye(V,G,q,s);var Z=be(I,C,((V=(z=h(O,2))[0])-F)*y,(G=z[1])-B);if(e.flipState=Z&&Z.needsFlipping?he.flipRequired:he.flipNotRequired,Z)return Z}A(L.first);for(var W=S+1;W<S+T-1;W++){var X=Se(b*l.getoffsetX(W),w,k,r,p,d,M,E,P,u,a,v,g,!1,!1,m,_,x);if(!X)return c.length-=4*(W-S),{notEnoughRoom:!0};A(X)}A(L.last)}else{if(i&&!r){var H=ye(d.x,d.y,0,o),Y=E+M+1,K=new t.Point(u.getx(Y),u.gety(Y)),J=ye(K.x,K.y,0,o),Q=J[3]>0?J:Ee(d,K,H,1,o,void 0,m,_.canonical),$=be(I,C,(Q[0]-H[0])*y,Q[1]-H[1]);if(e.flipState=$&&$.needsFlipping?he.flipRequired:he.flipNotRequired,$)return $}var tt=Se(b*l.getoffsetX(S),w,k,r,p,d,M,E,P,u,a,v,g,!1,!1,m,_,x);if(!tt)return{notEnoughRoom:!0};A(tt)}return{}}function ke(t,e,n,r,i){var o=r.projectTilePoint(t.x,t.y,e),a=o.x,s=o.y,l=o.z;if(!i)return ye(a,s,l,n);var u=i(t),c=h(u,3);return ye(a+c[0],s+c[1],l+c[2],n)}function Ee(e,n,r,i,o,a,s,l){var u=ke(e.sub(n)._unit()._add(e),l,o,s,a);return t.sub(u,r,u),t.normalize(u,u),t.scaleAndAdd(u,r,u,i)}function Se(e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g,m){var _=i?e-n:e+n,x=_>0?1:-1,b=0;i&&(x*=-1,b=Math.PI),x<0&&(b+=Math.PI);for(var w=l+s+(x>0?0:1)|0,k=o,E=o,S=0,T=0,M=Math.abs(_),I=[],C=[],P=a,A=P,L=function(){return Ee(A,P,E,M-S+1,h,p,y,g.canonical)};S+T<=M;){if((w+=x)<l||w>=u)return null;if(E=k,A=P,I.push(E),d&&C.push(A),P=new t.Point(c.getx(w),c.gety(w)),!(k=f[w])){var D=ke(P,g.canonical,h,y,p);k=D[3]>0?f[w]=D:L()}S+=T,T=t.distance(E,k)}v&&p&&(f[w]&&(k=L(),T=t.distance(E,k)),f[w]=k);var R=(M-S)/T,O=P.sub(A)._mult(R)._add(A),z=t.sub([],k,E),N=t.scaleAndAdd([],E,z,R),F=[0,0,1],B=z[0],j=z[1];if(m&&(0!==(F=y.upVector(g.canonical,O.x,O.y))[0]||0!==F[1]||1!==F[2])){var U=[F[2],0,-F[0]],V=t.cross([],F,U);t.normalize(U,U),t.normalize(V,V),B=t.dot(z,U),j=t.dot(z,V)}if(r){var G=t.cross([],F,z);t.normalize(G,G),t.scaleAndAdd(N,N,G,r*x)}var q=b+Math.atan2(j,B);return I.push(N),d&&C.push(O),{point:N,angle:q,path:I,tilePath:C,up:F}}function Te(t,e){var n=e.length,r=n+4*t;e.resize(r),e.float32.fill(-1/0,4*n,4*r)}function Me(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var Ie=100,Ce=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ce(t.width+200,t.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ce(t.width+200,t.height+200,25);p(this,e),this.transform=t,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Ie,this.screenBottomBoundary=t.height+Ie,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=n}return d(e,[{key:"placeCollisionBox",value:function(t,e,n,r,i,o,a,s){var l=n.projectedAnchorX,u=n.projectedAnchorY,c=n.projectedAnchorZ,f=n.elevation,p=n.tileID,d=t.getProjection();if(f&&p){var v=d.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),y=h(v,3),g=y[0],m=y[1],_=y[2],x=d.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=g*f*x,u+=m*f*x,c+=_*f*x}var b=this.projectAndGetPerspectiveRatio(a,l,u,c,n.tileID,"globe"===d.name||!!f||this.transform.pitch>0,d),w=o*b.perspectiveRatio,k=(n.x1*e+r.x-n.padding)*w+b.point.x,E=(n.y1*e+r.y-n.padding)*w+b.point.y,S=(n.x2*e+r.x+n.padding)*w+b.point.x,T=(n.y2*e+r.y+n.padding)*w+b.point.y,M=b.perspectiveRatio<=.55||b.occluded;return!this.isInsideGrid(k,E,S,T)||!i&&this.grid.hitTest(k,E,S,T,s)||M?{box:[],offscreen:!1,occluded:b.occluded}:{box:[k,E,S,T],offscreen:this.isOffscreen(k,E,S,T),occluded:!1}}},{key:"placeCollisionCircles",value:function(e,n,r,i,o,a,s,l,u,c,p,d,v,y,g){var m=[],_=this.transform.elevation,x=e.getProjection(),b=_?_.getAtTileOffsetFunc(g,this.transform.center.lat,this.transform.worldSize,x):null,w=new t.Point(r.tileAnchorX,r.tileAnchorY),k=x.projectTilePoint(w.x,w.y,g.canonical),E=k.x,S=k.y,T=k.z;if(b){var M=b(w),I=h(M,3);E+=I[0],S+=I[1],T+=I[2]}var C="globe"===x.name,P=this.projectAndGetPerspectiveRatio(s,E,S,T,g,C||!!_||this.transform.pitch>0,x),A=P.perspectiveRatio,L=(p?a/A:a*A)/t.ONE_EM,D=ye(E,S,T,l),R=P.signedDistanceFromCamera>0?xe(L,o,r.lineOffsetX*L,r.lineOffsetY*L,!1,D,w,r,i,l,{},_&&!p?b:null,p&&!!_,x,g,p):null,O=!1,z=!1,N=!0;if(R&&!P.occluded){for(var F=.5*v*A+y,B=new t.Point(-100,-100),j=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),U=new ue,V=R.first,G=R.last,q=V.path.length,Z=[],W=q-1;W>=1;W--)Z.push(V.path[W]);for(var X=1;X<G.path.length;X++)Z.push(G.path[X]);var H=2.5*F;u&&(Z=Z.map((function(t,e){var n=h(t,3),r=n[0],i=n[1],o=n[2];return b&&!C&&(o=b(e<q-1?V.tilePath[q-1-e]:G.tilePath[e-q+2])[2]),ye(r,i,o,u)})),Z.some((function(t){return t[3]<=0}))&&(Z=[]));var Y=[];if(Z.length>0){var K,J=1/0,Q=-1/0,$=1/0,tt=-1/0,et=f(Z);try{for(et.s();!(K=et.n()).done;){var nt=K.value;J=Math.min(J,nt[0]),$=Math.min($,nt[1]),Q=Math.max(Q,nt[0]),tt=Math.max(tt,nt[1])}}catch(yt){et.e(yt)}finally{et.f()}Q>=B.x&&J<=j.x&&tt>=B.y&&$<=j.y&&(Y=[Z.map((function(e){return new t.Point(e[0],e[1])}))],(J<B.x||Q>j.x||$<B.y||tt>j.y)&&(Y=t.clipLine(Y,B.x,B.y,j.x,j.y)))}var rt,it=f(Y);try{for(it.s();!(rt=it.n()).done;){var ot=rt.value;U.reset(ot,.25*F);var at=0;at=U.length<=.5*F?1:Math.ceil(U.paddedLength/H)+1;for(var st=0;st<at;st++){var lt=st/Math.max(at-1,1),ut=U.lerp(lt),ct=ut.x+Ie,ht=ut.y+Ie;m.push(ct,ht,F,0);var ft=ct-F,pt=ht-F,dt=ct+F,vt=ht+F;if(N=N&&this.isOffscreen(ft,pt,dt,vt),z=z||this.isInsideGrid(ft,pt,dt,vt),!n&&this.grid.hitTestCircle(ct,ht,F,d)&&(O=!0,!c))return{circles:[],offscreen:!1,collisionDetected:O,occluded:!1}}}}catch(yt){it.e(yt)}finally{it.f()}}return{circles:!c&&O||!z?[]:m,offscreen:N,collisionDetected:O,occluded:P.occluded}}},{key:"queryRenderedSymbols",value:function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,o=1/0,a=-1/0,s=-1/0,l=f(e);try{for(l.s();!(n=l.n()).done;){var u=n.value,c=new t.Point(u.x+Ie,u.y+Ie);i=Math.min(i,c.x),o=Math.min(o,c.y),a=Math.max(a,c.x),s=Math.max(s,c.y),r.push(c)}}catch(x){l.e(x)}finally{l.f()}var h,p=this.grid.query(i,o,a,s).concat(this.ignoredGrid.query(i,o,a,s)),d={},v={},y=f(p);try{for(y.s();!(h=y.n()).done;){var g=h.value,m=g.key;if(void 0===d[m.bucketInstanceId]&&(d[m.bucketInstanceId]={}),!d[m.bucketInstanceId][m.featureIndex]){var _=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(r,_)&&(d[m.bucketInstanceId][m.featureIndex]=!0,void 0===v[m.bucketInstanceId]&&(v[m.bucketInstanceId]=[]),v[m.bucketInstanceId].push(m.featureIndex))}}}catch(x){y.e(x)}finally{y.f()}return v}},{key:"insertCollisionBox",value:function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])}},{key:"insertCollisionCircles",value:function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(e,n,r,i,o,a,s){var l=[n,r,i,1],u=!1;if(i||this.transform.pitch>0){if(t.transformMat4$1(l,l,e),this.fogState&&o&&"globe"!==s.name){var c=function(e,n,r,i,o,a){var s=a.calculateFogTileMatrix(o),l=[n,r,i];return t.transformMat4(l,l,s),F(e,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);u=c>.9}}else Me(l,l,e);var h=l[3];return{point:new t.Point((l[0]/h+1)/2*this.transform.width+Ie,(-l[1]/h+1)/2*this.transform.height+Ie),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/h*.5,1.5),signedDistanceFromCamera:h,occluded:a&&l[2]>h||u}}},{key:"isOffscreen",value:function(t,e,n,r){return n<Ie||t>=this.screenRightBoundary||r<Ie||e>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}]),e}();function Pe(e,n,r){var i=n.createTileMatrix(e,e.worldSize,r.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,i)}function Ae(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;var r=n.clone();return r.setProjection(e.projection),Pe(r,e.getProjection(),t)}function Le(t,e,n){return e.name===n.projection.name?t.projMatrix:Pe(n,e,t)}var De=function(){function t(e,n,r,i){p(this,t),this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):i&&r?1:0,this.placed=r}return d(t,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),t}(),Re=function(){function t(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];p(this,t),this.text=new De(e?e.text:null,n,r,o),this.icon=new De(e?e.icon:null,n,i,o),this.clipped=a}return d(t,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),t}(),Oe=d((function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];p(this,t),this.text=e,this.icon=n,this.skipFade=r,this.clipped=i})),ze=d((function e(){p(this,e),this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]})),Ne=d((function t(e,n,r,i,o){p(this,t),this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=o})),Fe=function(){function t(e){p(this,t),this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}return d(t,[{key:"get",value:function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]}}]),t}();function Be(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,l=-(a.verticalAlign-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.Point(s+u[0]*o,l+u[1]*o)}function je(e,n,r,i,o){var a=new t.Point(e,n);return r&&a._rotate(i?o:-o),a}var Ue=function(){function e(t,n,r,i,o){p(this,e),this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new Ce(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Fe(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return d(e,[{key:"getBucketParts",value:function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=o.layers[0].layout,l=r.collisionBoxArray,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);var p,d,v,y=(p=r.tileID,d=o.getProjection(),v=this.transform,d.name===this.projection?v.calculateProjMatrix(p.toUnwrapped()):Pe(v,d,p)),g="map"===s.get("text-pitch-alignment"),m="map"===s.get("text-rotation-alignment");n.compileFilter();var _=n.dynamicFilter(),x=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),w=de(y,r.tileID.canonical,g,m,this.transform,o.getProjection(),b),k=null;if(g){var E=ve(y,r.tileID.canonical,g,m,this.transform,o.getProjection(),b);k=t.multiply([],this.transform.labelPlaneMatrix,E)}var S=null;_&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:x,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Ne(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var T={bucket:o,layout:s,posMatrix:y,textLabelPlaneMatrix:w,labelToScreenMatrix:k,clippingData:S,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i){var M,I=f(o.sortKeyRanges);try{for(I.s();!(M=I.n()).done;){var C=M.value,P=C.sortKey,A=C.symbolInstanceStart,L=C.symbolInstanceEnd;e.push({sortKey:P,symbolInstanceStart:A,symbolInstanceEnd:L,parameters:T})}}catch(D){I.e(D)}finally{I.f()}}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:T})}}},{key:"attemptAnchorPlacement",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g){var m,_=h.textOffset0,x=h.textOffset1,b=h.crossTileID,w=[_,x],k=Be(t,n,r,w,i),E=this.collisionIndex.placeCollisionBox(p,i,e,je(k.x,k.y,o,a,this.transform.angle),c,s,l,u.predicate);if(v){var S=p.getSymbolInstanceIconSize(g,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,S,v,je(k.x,k.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return}if(E.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(m=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:w,width:n,height:r,anchor:t,textScale:i,prevAnchor:m},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[b]=d),{shift:k,placedGlyphBoxes:E}}},{key:"placeLayerBucketPart",value:function(e,n,r,i){var o=this,a=e.parameters,s=a.bucket,l=a.layout,u=a.posMatrix,c=a.textLabelPlaneMatrix,h=a.labelToScreenMatrix,p=a.clippingData,d=a.textPixelRatio,v=a.holdingForFade,y=a.collisionBoxArray,g=a.partiallyEvaluatedTextSize,m=a.partiallyEvaluatedIconSize,_=a.collisionGroup,x=l.get("text-optional"),b=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),E="map"===l.get("text-rotation-alignment"),S="map"===l.get("text-pitch-alignment"),T="none"!==l.get("icon-text-fit"),M="viewport-y"===l.get("symbol-z-order");this.transform.setProjection(s.projection);var I=w&&(k||!s.hasIconData()||b),C=k&&(w||!s.hasTextData()||x);!s.collisionArrays&&y&&s.deserializeCollisionBoxes(y),r&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,y);var P=function(e,i,a){var y=e.crossTileID,M=e.numVerticalGlyphVertices;if(p){var P={zoom:o.transform.zoom,pitch:o.transform.pitch},A=null;if(p.dynamicFilterNeedsFeature){var L=o.retainedQueryData[s.bucketInstanceId];A=p.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:L.bucketIndex,sourceLayerIndex:L.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,p.dynamicFilter)(P,A,o.retainedQueryData[s.bucketInstanceId].tileID.canonical,new t.Point(e.tileAnchorX,e.tileAnchorY),o.transform.calculateDistanceTileData(p.unwrappedTileID)))return o.placements[y]=new Oe(!1,!1,!1,!0),void n.add(y)}if(!n.has(y))if(v)o.placements[y]=new Oe(!1,!1,!1);else{var D=!1,R=!1,O=!0,z=!1,N=!1,F=null,B={box:null,offscreen:null,occluded:null},j={box:null,offscreen:null,occluded:null},U=null,V=null,G=null,q=0,Z=0,W=0;a.textFeatureIndex?q=a.textFeatureIndex:e.useRuntimeCollisionCircles&&(q=e.featureIndex),a.verticalTextFeatureIndex&&(Z=a.verticalTextFeatureIndex);var X=function(t){t.tileID=o.retainedQueryData[s.bucketInstanceId].tileID;var e=o.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},H=a.textBox;if(H){X(H);var Y=function(n){var r=t.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&o.prevPlacement){var i=o.prevPlacement.placedOrientations[y];i&&(o.placedOrientations[y]=i,r=i,o.markUsedOrientation(s,r,e))}return r},K=function(e,n){if(s.allowVerticalPlacement&&M>0&&a.verticalTextBox){var r,i=f(s.writingModes);try{for(i.s();!(r=i.n()).done&&(r.value===t.WritingMode.vertical?(B=n(),j=B):B=e(),!(B&&B.box&&B.box.length)););}catch(o){i.e(o)}finally{i.f()}}else B=e()};if(l.get("text-variable-anchor")){var J=l.get("text-variable-anchor");if(o.prevPlacement&&o.prevPlacement.variableOffsets[y]){var Q=o.prevPlacement.variableOffsets[y];J.indexOf(Q.anchor)>0&&(J=J.filter((function(t){return t!==Q.anchor})),J.unshift(Q.anchor))}var $=function(t,n,r){var a=s.getSymbolInstanceTextSize(g,e,o.transform.zoom,i),l=(t.x2-t.x1)*a+2*t.padding,c=(t.y2-t.y1)*a+2*t.padding,h=T&&!k?n:null;h&&X(h);for(var f={box:[],offscreen:!1,occluded:!1},p=w?2*J.length:J.length,v=0;v<p;++v){var y=o.attemptAnchorPlacement(J[v%J.length],t,l,c,a,E,S,d,u,_,v>=J.length,e,i,s,r,h,g,m);if(y&&(f=y.placedGlyphBoxes)&&f.box&&f.box.length){D=!0,F=y.shift;break}}return f};K((function(){return $(H,a.iconBox,t.WritingMode.horizontal)}),(function(){var e=a.verticalTextBox;return e&&X(e),s.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&M>0&&e?$(e,a.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),B&&(D=B.box,O=B.offscreen,z=B.occluded);var tt=Y(!(!B||!B.box));if(!D&&o.prevPlacement){var et=o.prevPlacement.variableOffsets[y];et&&(o.variableOffsets[y]=et,o.markUsedJustification(s,et.anchor,e,tt))}}else{var nt=function(n,r){var a=s.getSymbolInstanceTextSize(g,e,o.transform.zoom,i),l=o.collisionIndex.placeCollisionBox(s,a,n,new t.Point(0,0),w,d,u,_.predicate);return l&&l.box&&l.box.length&&(o.markUsedOrientation(s,r,e),o.placedOrientations[y]=r),l};K((function(){return nt(H,t.WritingMode.horizontal)}),(function(){var e=a.verticalTextBox;return s.allowVerticalPlacement&&M>0&&e?(X(e),nt(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),Y(!!(B&&B.box&&B.box.length))}}if(D=(U=B)&&U.box&&U.box.length>0,O=U&&U.offscreen,z=U&&U.occluded,e.useRuntimeCollisionCircles){var rt=s.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),it=t.evaluateSizeForFeature(s.textSizeData,g,rt),ot=l.get("text-padding");V=o.collisionIndex.placeCollisionCircles(s,w,rt,s.lineVertexArray,s.glyphOffsetArray,it,u,c,h,r,S,_.predicate,e.collisionCircleDiameter*it/t.ONE_EM,ot,o.retainedQueryData[s.bucketInstanceId].tileID),D=w||V.circles.length>0&&!V.collisionDetected,O=O&&V.offscreen,z=V.occluded}if(a.iconFeatureIndex&&(W=a.iconFeatureIndex),a.iconBox){var at=function(n){X(n);var r=T&&F?je(F.x,F.y,E,S,o.transform.angle):new t.Point(0,0),i=s.getSymbolInstanceIconSize(m,o.transform.zoom,e.placedIconSymbolIndex);return o.collisionIndex.placeCollisionBox(s,i,n,r,k,d,u,_.predicate)};R=j&&j.box&&j.box.length&&a.verticalIconBox?(G=at(a.verticalIconBox)).box.length>0:(G=at(a.iconBox)).box.length>0,O=O&&G.offscreen,N=G.occluded}var st=x||0===e.numHorizontalGlyphVertices&&0===M,lt=b||0===e.numIconVertices;if(st||lt?lt?st||(R=R&&D):D=R&&D:R=D=R&&D,D&&U&&U.box&&o.collisionIndex.insertCollisionBox(U.box,l.get("text-ignore-placement"),s.bucketInstanceId,j&&j.box&&Z?Z:q,_.ID),R&&G&&o.collisionIndex.insertCollisionBox(G.box,l.get("icon-ignore-placement"),s.bucketInstanceId,W,_.ID),V&&(D&&o.collisionIndex.insertCollisionCircles(V.circles,l.get("text-ignore-placement"),s.bucketInstanceId,q,_.ID),r)){var ut=s.bucketInstanceId,ct=o.collisionCircleArrays[ut];void 0===ct&&(ct=o.collisionCircleArrays[ut]=new ze);for(var ht=0;ht<V.circles.length;ht+=4)ct.circles.push(V.circles[ht+0]),ct.circles.push(V.circles[ht+1]),ct.circles.push(V.circles[ht+2]),ct.circles.push(V.collisionDetected?1:0)}var ft="globe"!==s.projection.name;I=I&&(ft||!z),C=C&&(ft||!N),o.placements[y]=new Oe(D||I,R||C,O||s.justReloaded),n.add(y)}};if(M)for(var A=s.getSortedSymbolIndexes(this.transform.angle),L=A.length-1;L>=0;--L){var D=A[L];P(s.symbolInstances.get(D),D,s.collisionArrays[D])}else for(var R=e.symbolInstanceStart;R<e.symbolInstanceEnd;R++)P(s.symbolInstances.get(R),R,s.collisionArrays[R]);if(r&&s.bucketInstanceId in this.collisionCircleArrays){var O=this.collisionCircleArrays[s.bucketInstanceId];t.invert(O.invProjMatrix,u),O.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(e,n,r,i){var o=r.leftJustifiedTextSymbolIndex,a=r.centerJustifiedTextSymbolIndex,s=r.rightJustifiedTextSymbolIndex,l=r.verticalPlacedTextSymbolIndex,u=r.crossTileID,c=t.getAnchorJustification(n),h=i===t.WritingMode.vertical?l:"left"===c?o:"center"===c?a:"right"===c?s:-1;o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:u),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:u),s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:u),l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:u)}},{key:"markUsedOrientation",value:function(e,n,r){var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=r.leftJustifiedTextSymbolIndex,s=r.centerJustifiedTextSymbolIndex,l=r.rightJustifiedTextSymbolIndex,u=r.verticalPlacedTextSymbolIndex,c=e.text.placedSymbolArray;a>=0&&(c.get(a).placedOrientation=i),s>=0&&(c.get(s).placedOrientation=i),l>=0&&(c.get(l).placedOrientation=i),u>=0&&(c.get(u).placedOrientation=o)}},{key:"commit",value:function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=i[s];u?(this.opacities[s]=new Re(u,r,l.text,l.icon,null,l.clipped),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new Re(null,r,l.text,l.icon,l.skipFade,l.clipped),n=n||l.text||l.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var f=new Re(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}},{key:"updateLayerOpacities",value:function(t,e){var n,r=new Set,i=f(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),a=new Re(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),p=new Re(null,0,s&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(s||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},v=0,y=0;y<e.symbolInstances.length;y++){var g=e.symbolInstances.get(y),m=g.numHorizontalGlyphVertices,_=g.numVerticalGlyphVertices,x=g.crossTileID,b=g.numIconVertices,w=n.has(x),k=this.opacities[x];w?k=a:k||(k=p,this.opacities[x]=k),n.add(x);var E=m>0||_>0,S=b>0,T=this.placedOrientations[x],M=T===t.WritingMode.vertical,I=T===t.WritingMode.horizontal||T===t.WritingMode.horizontalOnly;if(!E&&!S||k.isHidden()||v++,E){var C=Ke(k.text);d(e.text,m,M?Je:C),d(e.text,_,I?Je:C);var P=k.text.isHidden(),A=g.leftJustifiedTextSymbolIndex,L=g.centerJustifiedTextSymbolIndex,D=g.rightJustifiedTextSymbolIndex,R=g.verticalPlacedTextSymbolIndex,O=e.text.placedSymbolArray,z=P||M?1:0;A>=0&&(O.get(A).hidden=z),L>=0&&(O.get(L).hidden=z),D>=0&&(O.get(D).hidden=z),R>=0&&(O.get(R).hidden=P||I?1:0);var N=this.variableOffsets[x];N&&this.markUsedJustification(e,N.anchor,g,T);var F=this.placedOrientations[x];F&&(this.markUsedJustification(e,"left",g,F),this.markUsedOrientation(e,F,g))}if(S){var B=Ke(k.icon),j=g.placedIconSymbolIndex,U=g.verticalPlacedIconSymbolIndex,V=e.icon.placedSymbolArray,G=k.icon.isHidden()?1:0;j>=0&&(d(e.icon,b,M?Je:B),V.get(j).hidden=G),U>=0&&(d(e.icon,g.numVerticalIconVertices,I?Je:B),V.get(U).hidden=G)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var q=e.collisionArrays[y];if(q){var Z=new t.Point(0,0),W=!0;if(q.textBox||q.verticalTextBox){if(u){var X=this.variableOffsets[x];X?(Z=Be(X.anchor,X.width,X.height,X.textOffset,X.textScale),c&&Z._rotate(h?this.transform.angle:-this.transform.angle)):W=!1}o&&(W=!k.clipped),q.textBox&&Ve(e.textCollisionBox.collisionVertexArray,k.text.placed,!W||M,Z.x,Z.y),q.verticalTextBox&&Ve(e.textCollisionBox.collisionVertexArray,k.text.placed,!W||I,Z.x,Z.y)}var H=W&&Boolean(!I&&q.verticalIconBox);q.iconBox&&Ve(e.iconCollisionBox.collisionVertexArray,k.icon.placed,H,f?Z.x:0,f?Z.y:0),q.verticalIconBox&&Ve(e.iconCollisionBox.collisionVertexArray,k.icon.placed,!H,f?Z.x:0,f?Z.y:0)}}}if(e.fullyClipped=0===v,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var Y=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=Y.invProjMatrix,e.placementViewportMatrix=Y.viewportMatrix,e.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(t){return Math.max(0,(this.transform.zoom-t)/1.5)}},{key:"hasTransitions",value:function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}},{key:"setStale",value:function(){this.stale=!0}}]),e}();function Ve(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}var Ge=Math.pow(2,25),qe=Math.pow(2,24),Ze=Math.pow(2,17),We=Math.pow(2,16),Xe=Math.pow(2,9),He=Math.pow(2,8),Ye=Math.pow(2,1);function Ke(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Ge+e*qe+n*Ze+e*We+n*Xe+e*He+n*Ye+e}var Je=0,Qe=function(){function t(e){p(this,t),this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}return d(t,[{key:"continuePlacement",value:function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;){var a=o[this._currentPartIndex];if(e.placeLayerBucketPart(a,this._seenCrossTileIDs,n,0===a.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),t}(),$e=function(){function e(t,n,r,i,o,a,s,l){p(this,e),this.placement=new Ue(t,o,a,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return d(e,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(e,n,r){for(var i=this,o=t.exported.now(),a=function(){var e=t.exported.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Qe(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(t){return this.placement.commit(t),this.placement}}]),e}(),tn=512/t.EXTENT/2,en=function(){function e(n,r,i){p(this,e),this.tileID=n,this.bucketInstanceId=i,this.index=new t.KDBush(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];for(var o=n.canonical.x*t.EXTENT,a=n.canonical.y*t.EXTENT,s=0;s<r.length;s++){var l=r.get(s),u=l.key,c=l.crossTileID,h=l.tileAnchorX,f=l.tileAnchorY,d=Math.floor((o+h)*tn),v=Math.floor((a+f)*tn);this.index.add(d,v),this.keys.push(u),this.crossTileIDs.push(c)}this.index.finish()}return d(e,[{key:"findMatches",value:function(e,n,r){for(var i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=tn/Math.pow(2,n.canonical.z-this.tileID.canonical.z),a=n.canonical.x*t.EXTENT,s=n.canonical.y*t.EXTENT,l=0;l<e.length;l++){var u=e.get(l);if(!u.crossTileID){var c,h=u.key,p=u.tileAnchorX,d=u.tileAnchorY,v=Math.floor((a+p)*o),y=Math.floor((s+d)*o),g=this.index.range(v-i,y-i,v+i,y+i),m=f(g);try{for(m.s();!(c=m.n()).done;){var _=c.value,x=this.crossTileIDs[_];if(this.keys[_]===h&&!r.has(x)){r.add(x),u.crossTileID=x;break}}}catch(b){m.e(b)}finally{m.f()}}}}}]),e}(),nn=function(){function t(){p(this,t),this.maxCrossTileID=0}return d(t,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),t}(),rn=function(){function t(){p(this,t),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return d(t,[{key:"handleWrapJump",value:function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t}},{key:"addBucket",value:function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,i)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i.add(h.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new en(t,e.symbolInstances,e.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(t,e){var n,r=f(e.crossTileIDs);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.usedCrossTileIDs[t].delete(i)}}catch(o){r.e(o)}finally{r.f()}}},{key:"removeStaleBuckets",value:function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}]),t}(),on=function(){function t(){p(this,t),this.layerIndexes={},this.crossTileIDs=new nn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return d(t,[{key:"addLayer",value:function(t,e,n,r){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new rn);var o=!1,a={};"globe"!==r.name&&i.handleWrapJump(n);var s,l=f(e);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,c,this.crossTileIDs)&&(o=!0),a[c.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return i.removeStaleBuckets(a)&&(o=!0),o}},{key:"pruneUnusedLayers",value:function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]}}]),t}(),an=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},sn=t.pick(ee,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ln=t.pick(ee,["setCenter","setZoom","setBearing","setPitch"]),un={version:8,layers:[],sources:{}},cn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},hn=function(n){v(o,n);var r=y(o);function o(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,o),(n=r.call(this)).map=e,n.dispatcher=new V(Qt(),i(n)),n.imageManager=new D,n.imageManager.setEventedParent(i(n)),n.glyphManager=new t.GlyphManager(e._requestManager,a.localFontFamily?t.LocalGlyphMode.all:a.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,a.localFontFamily||a.localIdeographFontFamily),n.crossTileSymbolIndex=new on,n._layers={},n._num3DLayers=0,n._numSymbolLayers=0,n._numCircleLayers=0,n._serializedLayers={},n._sourceCaches={},n._otherSourceCaches={},n._symbolSourceCaches={},n._loaded=!1,n._availableImages=[],n._order=[],n._drapedFirstOrder=[],n._markersNeedUpdate=!1,n._resetUpdates(),n.dispatcher.broadcast("setReferrer",t.getReferrer());var s=i(n);return n._rtlTextPluginCallback=o.registerForPluginStateChange((function(e){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var r in s._sourceCaches){var i=s._sourceCaches[r],o=i.getSource().type;"vector"!==o&&"geojson"!==o||i.reload()}}))})),n.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=n.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(var r in n._layers){var i=n._layers[r];i.source===e.id&&n._validateLayer(i)}}})),n}return d(o,[{key:"loadURL",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,r){n._request=null,e?n.fire(new t.ErrorEvent(e)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((function(){n._request=null,n._load(e,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(un,!1)}},{key:"_updateLayerCount",value:function(t,e){var n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(e,n){if(!n||!an(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection(),e.sources)this.addSource(r,e.sources[r],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);var i=te(this.stylesheet.layers);this._order=i.map((function(t){return t.id})),this._layers={},this._serializedLayers={};var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=t.createStyleLayer(s);l.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize(),this._updateLayerCount(l,!0)}}catch(u){a.e(u)}finally{a.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(e){var n=this;this._spriteRequest=function(e,n,r){var i,o,a,s=t.exported.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,a||(a=t,i=e,c())})),u=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){u=null,a||(a=t,o=e,c())}));function c(){if(a)r(a);else if(i&&o){var e=t.exported.getImageData(o),n={};for(var s in i){var l=i[s],u=l.width,c=l.height,h=l.x,f=l.y,p=l.sdf,d=l.pixelRatio,v=l.stretchX,y=l.stretchY,g=l.content,m=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,m,{x:h,y:f},{x:0,y:0},{width:u,height:c}),n[s]={data:m,pixelRatio:d,sdf:p,stretchX:v,stretchY:y,content:g}}r(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,(function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new t.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(e){var n=this.getSource(e.source);if(n){var r=e.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(e.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(t){var e,n=[],r=f(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=this._layers[i];"custom"!==o.type&&n.push(o.serialize())}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():cn[t.type])}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}var l={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];l[u]=c.used,c.used=!1}var h,p=f(this._order);try{for(p.s();!(h=p.n()).done;){var d=h.value,v=this._layers[d];if(v.recalculate(e,this._availableImages),!v.isHidden(e.zoom)){var y=this._getLayerSourceCache(v);y&&(y.used=!0)}var g=this.map.painter;if(g){var m=v.getProgramIds();if(!m)continue;var _,x=v.getProgramConfiguration(e.zoom),b=f(m);try{for(b.s();!(_=b.n()).done;){var w=_.value;g.useProgram(w,x)}}catch(S){b.e(S)}finally{b.f()}}}}catch(S){p.e(S)}finally{p.f()}for(var k in l){var E=this._sourceCaches[k];l[k]!==E.used&&E.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(n){var r=this;if(this._checkLoaded(),an(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=te(n.layers);var i=function(t,n){if(!t)return[{command:ee.setStyle,args:[n]}];var r=[];try{if(!e(t.version,n.version))return[{command:ee.setStyle,args:[n]}];e(t.center,n.center)||r.push({command:ee.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||r.push({command:ee.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||r.push({command:ee.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||r.push({command:ee.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||r.push({command:ee.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||r.push({command:ee.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||r.push({command:ee.setTransition,args:[n.transition]}),e(t.light,n.light)||r.push({command:ee.setLight,args:[n.light]}),e(t.fog,n.fog)||r.push({command:ee.setFog,args:[n.fog]}),e(t.projection,n.projection)||r.push({command:ee.setProjection,args:[n.projection]});var i={},o=[];!function(t,n,r,i){var o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||re(o,r,i));for(o in n)if(n.hasOwnProperty(o)){var a=n[o];t.hasOwnProperty(o)?e(t[o],a)||("geojson"===t[o].type&&"geojson"===a.type&&oe(t,n,o)?r.push({command:ee.setGeoJSONSourceData,args:[o,a.data]}):ie(o,n,r,i)):ne(o,n,r)}}(t.sources,n.sources,o,i);var a=[];t.layers&&t.layers.forEach((function(t){t.source&&i[t.source]?r.push({command:ee.removeLayer,args:[t.id]}):a.push(t)}));var s=t.terrain;s&&i[s.source]&&(r.push({command:ee.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),e(s,n.terrain)||r.push({command:ee.setTerrain,args:[n.terrain]}),function(t,n,r){n=n||[];var i,o,a,s,l,u,c,h=(t=t||[]).map(se),f=n.map(se),p=t.reduce(le,{}),d=n.reduce(le,{}),v=h.slice(),y=Object.create(null);for(i=0,o=0;i<h.length;i++)a=h[i],d.hasOwnProperty(a)?o++:(r.push({command:ee.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<f.length;i++)a=f[f.length-1-i],v[v.length-1-i]!==a&&(p.hasOwnProperty(a)?(r.push({command:ee.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,u=v[v.length-i],r.push({command:ee.addLayer,args:[d[a],u]}),v.splice(v.length-i,0,a),y[a]=!0);for(i=0;i<f.length;i++)if(s=p[a=f[i]],l=d[a],!y[a]&&!e(s,l))if(e(s.source,l.source)&&e(s["source-layer"],l["source-layer"])&&e(s.type,l.type)){for(c in ae(s.layout,l.layout,r,a,null,ee.setLayoutProperty),ae(s.paint,l.paint,r,a,null,ee.setPaintProperty),e(s.filter,l.filter)||r.push({command:ee.setFilter,args:[a,l.filter]}),e(s.minzoom,l.minzoom)&&e(s.maxzoom,l.maxzoom)||r.push({command:ee.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ae(s[c],l[c],r,a,c.slice(6),ee.setPaintProperty):e(s[c],l[c])||r.push({command:ee.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ae(s[c],l[c],r,a,c.slice(6),ee.setPaintProperty):e(s[c],l[c])||r.push({command:ee.setLayerProperty,args:[a,c,l[c]]}))}else r.push({command:ee.removeLayer,args:[a]}),u=v[v.lastIndexOf(a)+1],r.push({command:ee.addLayer,args:[l,u]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:ee.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((function(t){return!(t.command in ln)}));if(0===i.length)return!1;var o=i.filter((function(t){return!(t.command in sn)}));if(o.length>0)throw new Error("Unimplemented: ".concat(o.map((function(t){return t.command})).join(", "),"."));return i.forEach((function(t){"setTransition"!==t.command&&"setProjection"!==t.command&&r[t.command].apply(r,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}},{key:"addImage",value:function(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}},{key:"updateImage",value:function(t,e){this.imageManager.updateImage(t,e)}},{key:"getImage",value:function(t){return this.imageManager.getImage(t)}},{key:"removeImage",value:function(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,"sources.".concat(e),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=Gt(e,n,this.dispatcher,this);o.setEventedParent(this,(function(){return{isSourceLoaded:r._isSourceCacheLoaded(e),source:o.serialize(),sourceId:e}}));var a=function(n){var i=(n?"symbol:":"other:")+e,a=r._sourceCaches[i]=new t.SourceCache(i,o,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[e]=a,a.style=r,a.onAdd(r.map)};a(!1),"vector"!==n.type&&"geojson"!==n.type||a(!0),o.onAdd&&o.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(e){this._checkLoaded();var n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));var i,o=this._getSourceCaches(e),a=f(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){a.e(l)}finally{a.f()}return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}},{key:"getSource",value:function(t){var e=this._getSourceCache(t);return e&&e.getSource()}},{key:"_getSources",value:function(){var t=[];for(var e in this._otherSourceCaches){var n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}},{key:"addLayer",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var o;if("custom"===e.type){if(an(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateLayer,"layers.".concat(i),e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;var s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){var l=this._removedLayers[i];delete this._removedLayers[i],l.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"hasLayer",value:function(t){return t in this._layers}},{key:"hasLayerType",value:function(t){for(var e in this._layers)if(this._layers[e].type===t)return!0;return!1}},{key:"setLayerZoomRange",value:function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var o=this.getLayer(n);if(o){if(!e(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateFilter,"layers.".concat(o.id,".filter"),r,{layerType:o.type},i)||(o.filter=t.clone$1(r),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(e){var n=this.getLayer(e);return n&&t.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(n);a?e(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(n);a?e(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(t,e){var n=this.getLayer(t);return n&&n.getPaintProperty(e)}},{key:"setFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.getSource(r);if(o){var a=o.type;if("geojson"===a&&i)this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==a||i){void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(r),u=f(l);try{for(u.s();!(s=u.n()).done;)s.value.setFeatureState(i,e.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=this.getSource(r);if(i){var o=i.type,a="vector"===o?e.sourceLayer:void 0;if("vector"!==o||a)if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(r),u=f(l);try{for(u.s();!(s=u.n()).done;)s.value.removeFeatureState(a,e.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var e={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();e[r.id]||(e[r.id]=r.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))}},{key:"_updateLayer",value:function(t){this._updatedLayers[t.id]=!0;var e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u=s.value[a];if(u){var c,h=f(u);try{for(h.s();!(c=h.n()).done;){var p=c.value;i.push(p)}}catch(S){h.e(S)}finally{h.f()}}}}catch(S){l.e(S)}finally{l.f()}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],v=this._order.length-1;v>=0;v--){var y=this._order[v];if(n(y))for(var g=i.length-1;g>=0;g--){var m=i[g].feature;if(r[m.layer.id]<v)break;d.push(m),i.pop()}else{var _,x=f(t);try{for(x.s();!(_=x.n()).done;){var b=_.value[y];if(b){var w,k=f(b);try{for(k.s();!(w=k.n()).done;){var E=w.value;d.push(E.feature)}}catch(S){k.e(S)}finally{k.f()}}}}catch(S){x.e(S)}finally{x.f()}}}return d}},{key:"queryRenderedFeatures",value:function(e,n,r){var i=this;n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var o={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var a,s=f(n.layers);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=this._layers[l];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];o[u.source]=!0}}catch(y){s.e(y)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(t){var e=i.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),p=q.createFromScreenPoints(e,r);for(var d in this._sourceCaches){var v=this._sourceCaches[d].getSource().id;n.layers&&!o[v]||c.push(Zt(this._sourceCaches[d],this._layers,this._serializedLayers,p,n,r,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(t,e,n,r,i,o,a){var s,l={},u=o.queryRenderedSymbols(r),c=[],h=f(Object.keys(u).map(Number));try{for(h.s();!(s=h.n()).done;){var p=s.value;c.push(a[p])}}catch(y){h.e(y)}finally{h.f()}c.sort(Xt);for(var d=function(){var n=g[v],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=l[o]=l[o]||[],s=r[o];s.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));var c,h=f(s);try{for(h.s();!(c=h.n()).done;){var p=c.value;a.push(p)}}catch(y){h.e(y)}finally{h.f()}}},v=0,g=c;v<g.length;v++)d();var m=function(e){l[e].forEach((function(r){var i=r.feature,o=n(t[e]);if(o){var a=o.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}}))};for(var _ in l)m(_);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),p.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(e),o=[],a=f(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;o=o.concat(Wt(s,n))}}catch(l){a.e(l)}finally{a.f()}return o}},{key:"addSourceType",value:function(t,e,n){return o.getSourceType(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):(o.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in t)if(!e(t[o],r[o])){i=!0;break}if(i){var a=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(a)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);var i=n;if(1===r){if("object"==typeof i.source){var o="terrain-dem-src";this.addSource(o,i.source),i=t.clone$1(i),i=t.extend(i,{source:o})}if(this._validate(t.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{for(var a=this.terrain,s=a.get(),l=0,u=Object.keys(t.spec.terrain);l<u.length;l++){var c=u[l];!i.hasOwnProperty(c)&&t.spec.terrain[c].default&&(i[c]=t.spec.terrain[c].default)}for(var h in i)if(!e(i[h],s[h])){a.set(i),this.stylesheet.terrain=i;var f=this._setTransitionParameters({duration:0});a.updateTransitions(f);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(t){var e=this.fog=new U(t,this.map.transform);this.stylesheet.fog=t;var n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var t=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var e,n=f(t.map._markers);try{for(n.s();!(e=n.n()).done;)e.value._evaluateOpacity()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,r=n.get();for(var i in 0===Object.keys(t).length&&n.set(t),t)if(!e(t[i],r[i])){n.set(t),this.stylesheet.fog=t;var o=this._setTransitionParameters({duration:0});n.updateTransitions(o);break}}else this._createFog(t);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var t,e,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(t){return n.isLayerDraped(n._layers[t])})),i=this._order.filter((function(t){return!n.isLayerDraped(n._layers[t])}));this._drapedFirstOrder=[],(t=this._drapedFirstOrder).push.apply(t,c(r)),(e=this._drapedFirstOrder).push.apply(e,c(i))}}},{key:"_createTerrain",value:function(t,e){var n=this.terrain=new N(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var t in this._layers){var e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var t in this._layers){var e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}},{key:"_validate",value:function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&an(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}},{key:"_remove",value:function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(t){var e,n=this._getSourceCaches(t),r=f(n);try{for(r.s();!(e=r.n()).done;)e.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(t){var e,n=this._getSourceCaches(t),r=f(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.resume(),i.reload()}}catch(o){r.e(o)}finally{r.f()}}},{key:"_reloadSources",value:function(){var t,e=f(this._getSources());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.reload&&n.reload()}}catch(r){e.e(r)}finally{e.f()}}},{key:"_updateSources",value:function(t){for(var e in this._sourceCaches)this._sourceCaches[e].update(t)}},{key:"_generateCollisionBoxes",value:function(){for(var t in this._sourceCaches){var e=this._sourceCaches[t];e.resume(),e.reload()}}},{key:"_updatePlacement",value:function(e,n,r,i){var o,a=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=f(this._order);try{var p=function(){var t=o.value,n=a._layers[t];if("symbol"!==n.type)return"continue";if(!c[n.source]){var r=a._getLayerSourceCache(n);if(!r)return"continue";c[n.source]=r.getRenderableIds(!0).map((function(t){return r.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var i=a.crossTileSymbolIndex.addLayer(n,c[n.source],e.center.lng,e.projection);l=l||i};for(h.s();!(o=h.n()).done;)p()}catch(m){h.e(m)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new $e(e,this._order,s,n,r,i,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var d,v=f(this._order);try{for(v.s();!(d=v.n()).done;){var y=d.value,g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,c[g.source])}}catch(m){v.e(m)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}},{key:"getImages",value:function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=function(t){t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}},{key:"getGlyphs",value:function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}},{key:"getResource",value:function(e,n,r){return t.makeRequest(n,r)}},{key:"_getSourceCache",value:function(t){return this._otherSourceCaches[t]}},{key:"_getLayerSourceCache",value:function(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}},{key:"_getSourceCaches",value:function(t){var e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}},{key:"_isSourceCacheLoaded",value:function(e){var n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'")))),!1):n.every((function(t){return t.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),o}(t.Evented);hn.getSourceType=function(t){return Vt[t]},hn.setSourceType=function(t,e){Vt[t]=e},hn.registerForPluginStateChange=t.registerForPluginStateChange;var fn="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",pn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",dn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",vn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",yn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",gn={},mn={},_n=[];En(fn,_n),En(dn,_n),En(vn,_n),En(yn,_n),gn=Sn("",dn),mn=Sn(yn,vn);var xn=Sn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),bn=fn,wn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",kn={background:Sn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Sn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Sn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Sn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Sn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Sn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Sn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Sn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Sn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Sn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Sn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Sn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Sn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Sn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Sn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pn),skyboxGradient:Sn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pn),skyboxCapture:Sn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Sn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function En(t,e){var n,r=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=f(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("#"===(o=o.trim())[0]&&o.includes("if")&&!o.includes("endif")){var a,s=(o=o.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),l=f(s);try{for(l.s();!(a=l.n()).done;){var u=a.value;e.includes(u)||e.push(u)}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){i.e(c)}finally{i.f()}}function Sn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[].concat(_n);return En(t,o),En(e,o),{fragmentSource:t=t.replace(n,(function(t,e,n,r,o){return i[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")})),vertexSource:e=e.replace(n,(function(t,e,n,r,o){var a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")})),staticAttributes:r,usedDefines:o}}var Tn=function(){function t(){p(this,t),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return d(t,[{key:"bind",value:function(t,e,n,r,i,o,a){this.context=t;for(var s=this.boundPaintVertexBuffers.length!==r.length,l=0;!s&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(s=!0);for(var u=this.boundDynamicVertexBuffers.length!==a.length,c=0;!u&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(u=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||s||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(e,n,r,i,o,a);else{t.bindVertexArrayOES.set(this.vao);var h,p=f(a);try{for(p.s();!(h=p.n()).done;){var d=h.value;d&&d.bind()}}catch(v){p.e(v)}finally{p.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(t,e,n,r,i,o){var a,s=t.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(var c=s;c<a;c++)u.disableVertexAttribArray(c)}e.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,i);var h,p=f(n);try{for(p.s();!(h=p.n()).done;){var d=h.value;d.enableAttributes(u,t),d.bind(),d.setVertexAttribPointers(u,t,i)}}catch(m){p.e(m)}finally{p.f()}var v,y=f(o);try{for(y.s();!(v=y.n()).done;){var g=v.value;g&&(g.enableAttributes(u,t),g.bind(),g.setVertexAttribPointers(u,t,i))}}catch(m){y.e(m)}finally{y.f()}r&&r.bind(),l.currentNumAttributes=s}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),t}();function Mn(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function In(e,n,r,i,o,a,s){var l=e.context,u=l.gl,c=r.fbo;if(c){e.prepareDrawTile();var h=e.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var f=function(t,e,n,r){var i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var l=!t.options.moving;return{u_matrix:r||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Mn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(e,r,i,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped());var p=e.getTileBoundsBuffers(r),d=p.tileBoundsBuffer,v=p.tileBoundsIndexBuffer,y=p.tileBoundsSegments;h.draw(l,u.TRIANGLES,o,a,s,t.CullFaceMode.disabled,f,i.id,d,v,y)}}function Cn(e,n,r){if(n.needsDEMTextureUpload){var i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(r.stride);var a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new t.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function Pn(e,n,r,i,o,a){var s=e.context,l=s.gl;if(n.dem){var u=n.dem;if(s.activeTexture.set(l.TEXTURE1),Cn(e,n,u),n.demTexture){n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var c=u.dim;s.activeTexture.set(l.TEXTURE0);var h=n.fbo;if(!h){var f=new t.Texture(s,{width:c,height:c,data:null},l.RGBA);f.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(f.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]);var p=e.getMercatorTileBoundsBuffers(),d=p.tileBoundsBuffer,v=p.tileBoundsIndexBuffer,y=p.tileBoundsSegments;e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,t.CullFaceMode.disabled,function(e,n){var r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,u),r.id,d,v,y),n.needsHillshadePrepare=!1}}}var An=function(e){return{u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}},Ln=function(t,e){return{u_matrix:t,u_image0:0,u_skirt_height:e}},Dn=function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d){return{u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:h,u_viewport:f,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9),u_skirt_height:p}};function Rn(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}var On=new(function(){function t(){p(this,t),this.operations={}}return d(t,[{key:"newMorphing",value:function(t,e,n,r,i){if(t in this.operations){var o=this.operations[t];o.to.tileID.key!==n.tileID.key&&(o.queued=n)}else this.operations[t]={startTime:r,phase:0,duration:i,from:e,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(t){if(!(t in this.operations))return null;var e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}},{key:"update",value:function(t){for(var e in this.operations){var n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}},{key:"_nextOp",value:function(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}},{key:"_validOp",value:function(t){return t.from.hasData()&&t.to.hasData()}}]),t}()),zn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Nn(t){return 6*Math.pow(1.5,22-t)}function Fn(t,e){var n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}var Bn=function(t){return{u_matrix:t}};function jn(e,n,r,i,o){if(o>0){var a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),f=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var Un=function(t){v(n,t);var e=y(n);function n(t){var r;p(this,n);var o={type:"raster-dem",maxzoom:t.transform.maxZoom},a=new V(Qt(),null),s=Gt("mock-dem",o,a,t.style);return r=e.call(this,"mock-dem",s,!1),s.setEventedParent(i(r)),r._sourceLoaded=!0,r}return d(n,[{key:"_loadTile",value:function(t,e){t.state="loaded",e(null)}}]),n}(t.SourceCache),Vn=function(e){v(r,e);var n=y(r);function r(t){var e;p(this,r);var o=Gt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new V(Qt(),null),t.style);return e=n.call(this,"proxy",o,!1),o.setEventedParent(i(e)),e.map=e.getSource().map=t,e.used=e._sourceLoaded=!0,e.renderCache=[],e.renderCachePool=[],e.proxyCachedFBO={},e}return d(r,[{key:"update",value:function(e,n,r){var i=this;if(!e.freezeTileCoverage){this.transform=e;var o=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var o=new t.Tile(r,i._source.tileSize*r.overscaleFactor(),e.tileZoom);o.state="loaded",i._tiles[r.key]=o}return n}),{});for(var a in this._tiles)a in o||(this.freeFBO(a),this._tiles[a].unloadVectorData(),delete this._tiles[a])}}},{key:"freeFBO",value:function(t){var e=this.proxyCachedFBO[t];if(void 0!==e){var n,r=Object.values(e);(n=this.renderCachePool).push.apply(n,r),delete this.proxyCachedFBO[t]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(t){return t.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(t.SourceCache),Gn=function(t){v(n,t);var e=y(n);function n(t,r,i){var o;return p(this,n),(o=e.call(this,t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)).proxyTileKey=r,o.projMatrix=i,o}return d(n)}(t.OverscaledTileID),qn=function(e){v(r,e);var n=y(r);function r(e,i){var o;p(this,r),(o=n.call(this)).painter=e,o.terrainTileForTile={},o.prevTerrainTileForTile={};var a=function(e){var n=new t.StructArrayLayout2i4,r=new t.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);for(var o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o,l=-o;l<s;l+=o)for(var u=-o;u<s;u+=o){var c=u<0||u>a||l<0||l>a?24575:0,h=t.clamp(Math.round(u),0,t.EXTENT),f=t.clamp(Math.round(l),0,t.EXTENT);n.emplaceBack(h+c,f)}for(var p=function(t,e){var n=e*i+t;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)},d=1;d<129;d++)for(var v=1;v<129;v++)p(v,d);return[0,129].forEach((function(t){for(var e=0;e<130;e++)p(e,t),p(t,e)})),[n,r,32768]}(),s=h(a,3),l=s[0],u=s[1],c=s[2],f=e.context;o.gridBuffer=f.createVertexBuffer(l,t.posAttributes.members),o.gridIndexBuffer=f.createIndexBuffer(u),o.gridSegments=t.SegmentVector.simpleSegment(0,0,l.length,u.length),o.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,l.length,c),o.proxyCoords=[],o.proxiedCoords={},o._visibleDemTiles=[],o._drapedRenderBatches=[],o._sourceTilesOverlap={},o.proxySourceCache=new Vn(i.map),o.orthoMatrix=t.create(),t.ortho(o.orthoMatrix,"globe"===o.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);var d=f.gl;return o._overlapStencilMode=new t.StencilMode({func:d.GEQUAL,mask:255},0,255,d.KEEP,d.KEEP,d.REPLACE),o._previousZoom=e.transform.zoom,o.pool=[],o._findCoveringTileCache={},o._tilesDirty={},o.style=i,o._useVertexMorphing=!0,o._exaggeration=1,o._mockSourceCache=new Un(i.map),o}return d(r,[{key:"style",set:function(t){var e=this;t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(function(){e._clearLineLayersFromRenderCache()}))}},{key:"update",value:function(e,n,r){var i=this;if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;var o=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(o.get("source")),this._exaggeration=o.get("exaggeration");var a=function(){i.sourceCache.used&&t.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var e=i.getScaledDemTileSize();i.sourceCache.update(n,e,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(t){this._findCoveringTileCache[t]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(t){return t.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"isUsingMockSource",value:function(){return this.sourceCache===this._mockSourceCache}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}},{key:"useVertexMorphing",set:function(t){this._useVertexMorphing=t}},{key:"updateTileBinding",value:function(e){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var o=this.proxyCoords=r.getIds().map((function(t){var e=r.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new t.Point(r.x,r.y);e.sort((function(e,n){if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;var r=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(o,this.painter),this._previousZoom=i.zoom;var a=this.proxyToSource||{};this.proxyToSource={},o.forEach((function(t){n.proxyToSource[t.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var u=s[l];if(u.used&&(u!==this.sourceCache&&this.resetTileLookupCache(u.id),this._setupProxiedCoordsForOrtho(u,e[l],a),!u.usedForTerrain)){var c=e[l];u.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[r.id]=o.map((function(t){return new Gn(t,t.key,n.orthoMatrix)})),this._assignTerrainTiles(o),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(a),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();var h={};this._visibleDemTiles=[];var p,d=f(this.proxyCoords);try{for(d.s();!(p=d.n()).done;){var v=p.value,y=this.terrainTileForTile[v.key];if(y){var g=y.tileID.key;g in h||(this._visibleDemTiles.push(y),h[g]=g)}}}catch(m){d.e(m)}finally{d.f()}}}},{key:"_assignTerrainTiles",value:function(t){var e=this;this._initializing||t.forEach((function(t){if(!e.terrainTileForTile[t.key]){var n=e._findTileCoveringTileID(t,e.sourceCache);n&&(e.terrainTileForTile[t.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var t=this.painter.context,e=t.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),Cn(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(t,e,n,r){if(!e||null==e.demTexture)return!1;var i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),a=r||"";return n["u_dem_tl".concat(a)]=[i.x*o%1,i.y*o%1],n["u_dem_scale".concat(a)]=o,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){var r=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var t=0,e=this._visibleDemTiles.reduce((function(e,n){if(!n.dem)return e;var r=n.dem.tree.minimums[0];return r>0&&t++,e+r}),0);return t?e/t:0}},{key:"_updateEmptyDEMTexture",value:function(){var e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1}),o}},{key:"setupElevationDraw",value:function(e,n,r){var i,o=this.painter.context,a=o.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=null,u=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){var h=r.morphing.srcDemTile,f=r.morphing.dstDemTile;c=r.morphing.phase,h&&f&&(this._prepareDemTileUniforms(e,h,s,"_prev")&&(u=h),this._prepareDemTileUniforms(e,f,s)&&(l=f))}if(u&&l?(o.activeTexture.set(a.TEXTURE2),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.activeTexture.set(a.TEXTURE4),u.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.u_dem_lerp=c):(l=this.terrainTileForTile[e.tileID.key],o.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(e,l,s)?l.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE)),o.activeTexture.set(a.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){var p=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=p}if(r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(o,s),"globe"===this.painter.transform.projection.name){var d=this.globeUniformValues(this.painter.transform,e.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(o,d)}}},{key:"globeUniformValues",value:function(e,n,r){var i=e.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,t.EXTENT,0),u_tile_br_up:i.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:i.upVector(n,0,t.EXTENT),u_tile_up_scale:r?t.globeMetersToEcef(1):i.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}},{key:"renderToBackBuffer",value:function(e){var n=this.painter,r=this.painter.context;0!==e.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,r,i,o){if("globe"===e.transform.projection.name)!function(e,n,r,i,o){var a,s,l=e.context,u=l.gl,c=e.options.showTerrainWireframe?2:0,p=e.transform,d=t.globeUseCustomAntiAliasing(e,l,p),v=function(t,n){if(s!==t){var r=[zn[t],"PROJECTION_GLOBE_VIEW"];d&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(zn[c]),a=e.useProgram("globeRaster",null,r),s=t}},y=e.colorModeForRenderPass(),g=new t.DepthMode(u.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);On.update(o);var m=t.calculateGlobeMercatorMatrix(p),_=[t.mercatorXfromLng(p.center.lng),t.mercatorYfromLat(p.center.lat)],x=c?[!1,!0]:[!1],b=e.globeSharedBuffers,w=[p.width*t.exported.devicePixelRatio,p.height*t.exported.devicePixelRatio],k=Float32Array.from(p.globeMatrix),E={useDenormalizedUpVectorScale:!0};if(x.forEach((function(c){var p=e.transform,d=Nn(p.zoom)*n.exaggeration();s=-1;var x,S=c?u.LINES:u.TRIANGLES,T=f(i);try{for(T.s();!(x=T.n()).done;){var M=x.value,I=r.getTile(M),C=t.StencilMode.disabled,P=n.prevTerrainTileForTile[M.key],A=n.terrainTileForTile[M.key];Rn(P,A)&&On.newMorphing(M.key,P,A,o,250),l.activeTexture.set(u.TEXTURE0),I.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var L=On.getMorphValuesForProxy(M.key),D=L?1:0;L&&t.extend$1(E,{morphing:{srcDemTile:L.from,dstDemTile:L.to,phase:t.easeCubicInOut(L.phase)}});var R=t.tileCornersToBounds(M.canonical),O=t.getLatitudinalLod(R.getCenter().lat),z=t.getGridMatrix(M.canonical,R,O,p.worldSize/p._pixelsPerMercatorPixel),N=t.globeNormalizeECEF(t.globeTileBounds(M.canonical)),F=Dn(p.projMatrix,k,m,N,t.globeToMercatorTransition(p.zoom),_,p.frustumCorners.TL,p.frustumCorners.TR,p.frustumCorners.BR,p.frustumCorners.BL,p.globeCenterInViewSpace,p.globeRadius,w,d,z);if(v(D,c),n.setupElevationDraw(I,a,E),e.prepareDrawProgram(l,a,M.toUnwrapped()),b){var B=c?b.getWirefameBuffers(e.context,O):b.getGridBuffers(O,0!==d),j=h(B,3),U=j[0],V=j[1],G=j[2];a.draw(l,S,g,C,y,t.CullFaceMode.backCCW,F,"globe_raster",U,V,G)}}}catch(q){T.e(q)}finally{T.f()}})),b){var S=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&S.push("CUSTOM_ANTIALIASING"),a=e.useProgram("globeRaster",null,S);var T,M=f(i);try{var I=function(){var i=T.value,o=i.canonical,s=o.x,c=o.y,f=o.z,d=0===c,v=c===(1<<f)-1,m=b.getPoleBuffers(f),x=h(m,4),k=x[0],S=x[1],M=x[2],I=x[3];if(I&&(d||v)){var C=r.getTile(i);l.activeTexture.set(u.TEXTURE0),C.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var P=t.globePoleMatrixForTile(f,s,p),A=t.globeNormalizeECEF(t.globeTileBounds(i.canonical)),L=function(e,n){return e.draw(l,u.TRIANGLES,g,t.StencilMode.disabled,y,t.CullFaceMode.disabled,Dn(p.projMatrix,P,P,A,0,_,p.frustumCorners.TL,p.frustumCorners.TR,p.frustumCorners.BR,p.frustumCorners.BL,p.globeCenterInViewSpace,p.globeRadius,w,0),"globe_pole_raster",n,M,I)};n.setupElevationDraw(C,a,E),e.prepareDrawProgram(l,a,i.toUnwrapped()),d&&L(a,k),v&&(P=t.scale(t.create(),P,[1,-1,1]),L(a,S))}};for(M.s();!(T=M.n()).done;)I()}catch(C){M.e(C)}finally{M.f()}}}(e,n,r,i,o);else{var a,s,l=e.context,u=l.gl,c=e.options.showTerrainWireframe?2:0,p=function(t,n){if(s!==t){var r=[zn[t]];n&&r.push(zn[c]),a=e.useProgram("terrainRaster",null,r),s=t}},d=e.colorModeForRenderPass(),v=new t.DepthMode(u.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);On.update(o);var y=e.transform,g=Nn(y.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var m,_=c?u.LINES:u.TRIANGLES,x=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],b=h(x,2),w=b[0],k=b[1],E=f(i);try{for(E.s();!(m=E.n()).done;){var S=m.value,T=r.getTile(S),M=t.StencilMode.disabled,I=n.prevTerrainTileForTile[S.key],C=n.terrainTileForTile[S.key];Rn(I,C)&&On.newMorphing(S.key,I,C,o,250),l.activeTexture.set(u.TEXTURE0),T.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var P=On.getMorphValuesForProxy(S.key),A=P?1:0,L=void 0;P&&(L={morphing:{srcDemTile:P.from,dstDemTile:P.to,phase:t.easeCubicInOut(P.phase)}});var D=Ln(S.projMatrix,Fn(S.canonical,y.renderWorldCopies)?g/10:g);p(A,c),n.setupElevationDraw(T,a,L),e.prepareDrawProgram(l,a,S.toUnwrapped()),a.draw(l,_,v,M,d,t.CullFaceMode.backCCW,D,"terrain_raster",n.gridBuffer,w,k)}}catch(R){E.e(R)}finally{E.f()}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}},{key:"renderBatch",value:function(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;var n,r=this.painter,i=this.painter.context,o=this.proxySourceCache,a=this.proxiedCoords[o.id],s=this._drapedRenderBatches.shift(),l=[],u=r.style.order,c=0,h=f(a);try{for(h.s();!(n=h.n()).done;){var p=n.value,d=o.getTileByID(p.proxyTileKey),v=o.proxyCachedFBO[p.key]?o.proxyCachedFBO[p.key][e]:void 0,y=void 0!==v?o.renderCache[v]:this.pool[c++],g=void 0!==v;if(d.texture=y.tex,!g||y.dirty){var m=void 0;i.bindFramebuffer.set(y.fb.framebuffer),this.renderedToTile=!1,y.dirty&&(i.clear({color:t.Color.transparent,stencil:0}),y.dirty=!1);for(var _=s.start;_<=s.end;++_){var x=r.style._layers[u[_]];if(!x.isHidden(r.transform.zoom)){var b=r.style._getLayerSourceCache(x),w=b?this.proxyToSource[p.key][b.id]:[p];if(w){var k=w;i.viewport.set([0,0,y.fb.width,y.fb.height]),m!==(b?b.id:null)&&(this._setupStencil(y,w,x,b),m=b?b.id:null),r.renderLayer(r,b,x,k)}}}this.renderedToTile?(y.dirty=!0,l.push(d.tileID)):g||--c,5===c&&(c=0,this.renderToBackBuffer(l))}else l.push(d.tileID)}}catch(E){h.e(E)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,r.width,r.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(t){var e=t.order.length;if(0===e)return{efficiency:100};for(var n,r=0,i=0,o=!1,a=0;a<e;++a){var s=t._layers[t.order[a]];this._style.isLayerDraped(s)?(o&&++r,++i):o||(o=!0,n=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var t=0;return this._visibleDemTiles.filter((function(t){return t.dem})).forEach((function(e){t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}},{key:"raycast",value:function(t,e,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(t){return t.dem})).map((function(r){var i=r.tileID,o=1<<i.overscaledZ,a=i.canonical,s=a.x,l=a.y,u=s/o,c=(s+1)/o,h=l/o,f=(l+1)/o;return{minx:u,miny:h,maxx:c,maxy:f,t:r.dem.tree.raycastRoot(u,h,c,f,t,e,n),tile:r}}));r.sort((function(t,e){return(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)}));var i,o=f(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(null==a.t)return null;var s=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,t,e,n);if(null!=s)return s}}catch(l){o.e(l)}finally{o.f()}return null}},{key:"_createFBO",value:function(){var e=this.painter.context,n=e.gl,r=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);var i=new t.Texture(e,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var o=e.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Ot(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var t=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((function(e){var n=t._style._layers[e],r=n.isHidden(t.painter.transform.zoom);return"custom"===n.type?!r&&n.shouldRedrape():!r&&n.hasTransition()}))}},{key:"_clearLineLayersFromRenderCache",value:function(){var e,n=!1,r=f(this._style._getSources());try{for(r.s();!(e=r.n()).done;)if(e.value instanceof Ft){n=!0;break}}catch(y){r.e(y)}finally{r.f()}if(n)for(var i={},o=0;o<this._style.order.length;++o){var a=this._style._layers[this._style.order[o]],s=this._style._getLayerSourceCache(a);if(s&&!i[s.id]&&!a.isHidden(this.painter.transform.zoom)&&"line"===a.type&&a.widthExpression()instanceof t.ZoomDependentExpression){i[s.id]=!0;var l,u=f(this.proxyCoords);try{for(u.s();!(l=u.n()).done;){var c=l.value,h=this.proxyToSource[c.key][s.id];if(h){var p,d=f(h);try{for(d.s();!(p=d.n()).done;){var v=p.value;this._clearRenderCacheForTile(s.id,v)}}catch(y){d.e(y)}finally{d.f()}}}}catch(y){u.e(y)}finally{u.f()}}}}},{key:"_clearRasterLayersFromRenderCache",value:function(){var t=!1;for(var e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof Bt){t=!0;break}if(t)for(var n={},r=0;r<this._style.order.length;++r){var i=this._style._layers[this._style.order[r]],o=this._style._getLayerSourceCache(i);if(o&&!n[o.id]&&!i.isHidden(this.painter.transform.zoom)&&"raster"===i.type){var a,s=i.paint.get("raster-fade-duration"),l=f(this.proxyCoords);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=this.proxyToSource[u.key][o.id];if(c){var h,p=f(c);try{for(p.s();!(h=p.n()).done;){var d=h.value,v=jn(o.getTile(d),o.findLoadedParent(d,0),o,this.painter.transform,s);(1!==v.opacity||0!==v.mix)&&this._clearRenderCacheForTile(o.id,d)}}catch(y){p.e(y)}finally{p.f()}}}}catch(y){l.e(y)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var t=this._style.order,e=t.length;if(0!==e){for(var n,r=[],i=0,o=this._style._layers[t[i]];!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){var a=this._style._layers[t[i]];a.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(a)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(t){var e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){var n=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,o=Object.values(n[r]);(i=e.renderCachePool).push.apply(i,o)}}}else{this._clearRasterLayersFromRenderCache();for(var a=this.proxyCoords,s=this._tilesDirty,l=a.length-1;l>=0;l--){var u=a[l];if(e.getTileByID(u.key),void 0!==e.proxyCachedFBO[u.key]){var h=t[u.key],p=this.proxyToSource[u.key],d=0,v=function(t){var e=p[t],n=h[t];if(!n||n.length!==e.length||e.some((function(e,r){return e!==n[r]||s[t]&&s[t].hasOwnProperty(e.key)})))return d=-1,"break";++d};for(var y in p)if("break"===v(y))break;for(var g in e.proxyCachedFBO[u.key])e.renderCache[e.proxyCachedFBO[u.key][g]].dirty=d<0||d!==Object.values(h).length}}var m=c(this._drapedRenderBatches);m.sort((function(t,e){return e.end-e.start-(t.end-t.start)}));var _,x=f(m);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=f(a);try{for(k.s();!(b=k.n()).done;){var E=b.value;if(!e.proxyCachedFBO[E.key]){var S=e.renderCachePool.pop();void 0===S&&e.renderCache.length<50&&(S=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==S&&(e.proxyCachedFBO[E.key]={},e.proxyCachedFBO[E.key][w.start]=S,e.renderCache[S].dirty=!0)}}}catch(T){k.e(T)}finally{k.f()}}}catch(T){x.e(T)}finally{x.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(t,e,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,o=i.gl;if(e.length<=1)this._overlapStencilType=!1;else{var a;if(n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(e,n){var r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);var a,s=r.useProgram("clippingMask"),l=f(e);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=r._tileClippingMaskIDs[u.key]=--n;s.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},c,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Bn(u.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(e){var n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;var r=[e.x,e.y,1,1];t.transformMat4$1(r,r,n.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=t.subtract([],r.slice(0,3),a);t.normalize(s,s);var l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}},{key:"drawDepth",value:function(){var e=this.painter,n=e.context,r=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var a=n.gl,s=n.createFramebuffer(i,o,!0);n.activeTexture.set(a.TEXTURE0);var l=new t.Texture(n,{width:i,height:o,data:null},a.RGBA);l.bind(a.NEAREST,a.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var u=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);s.depthAttachment.set(u),this._depthFBO=s,this._depthTexture=l}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(e,n,r,i){if("globe"!==e.transform.projection.name){var o=e.context,a=o.gl;o.clear({depth:1});var s,l=e.useProgram("terrainDepth"),u=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D),c=f(i);try{for(c.s();!(s=c.n()).done;){var h=s.value,p=r.getTile(h),d=Ln(h.projMatrix,0);n.setupElevationDraw(p,l),l.draw(o,a.TRIANGLES,u,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,d,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(v){c.e(v)}finally{c.f()}}}(e,this,r,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(t,e,n){if(t.getSource()instanceof Ut)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};for(var r=this.proxiedCoords[t.id]=[],i=this.proxyCoords,o=0;o<i.length;o++){var a=i[o],s=this._findTileCoveringTileID(a,t);if(s){var l=this._createProxiedId(a,s,n[a.key]&&n[a.key][t.id]);r.push(l),this.proxyToSource[a.key][t.id]=[l]}}for(var u=!1,c=0;c<e.length;c++){var h=t.getTile(e[c]);if(h&&h.hasData()){var f=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==h.tileID.canonical.z){var p=this.proxyToSource[f.tileID.key][t.id],d=this._createProxiedId(f.tileID,h,n[f.tileID.key]&&n[f.tileID.key][t.id]);p?p.splice(p.length-1,0,d):this.proxyToSource[f.tileID.key][t.id]=[d],r.push(d),u=!0}}}this._sourceTilesOverlap[t.id]=u}},{key:"_setupProxiedCoordsForImageSource",value:function(e,n,r){if(e.getSource().loaded())for(var i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce((function(t,e){return t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t}),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(e,n){var r=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y},c=0;c<o.length;c++)for(var h=o[c],f=0;f<n.length;f++){var p=e.getTile(n[f]);if(p&&p.hasData()&&!u(h,p.tileID)){var d=this._createProxiedId(h,p,r[h.key]&&r[h.key][e.id]),v=this.proxyToSource[h.key][e.id];v?v.push(d):this.proxyToSource[h.key][e.id]=[d],i.push(d)}}}},{key:"_createProxiedId",value:function(e,n,r){var i=this.orthoMatrix;if(r){var o=r.find((function(t){return t.key===n.tileID.key}));if(o)return o}if(n.tileID.key!==e.key){var a,s,l,u=e.canonical.z-n.tileID.canonical.z;i=t.create();var c=n.tileID.wrap-e.wrap<<e.overscaledZ;u>0?(s=(a=t.EXTENT>>u)*((n.tileID.canonical.x<<u)-e.canonical.x+c),l=a*((n.tileID.canonical.y<<u)-e.canonical.y)):(a=t.EXTENT<<-u,s=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+c<<-u)),l=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-u))),t.ortho(i,0,a,0,a,0,1),t.translate(i,i,[s,l,0])}return new Gn(n.tileID,e.key,i)}},{key:"_findTileCoveringTileID",value:function(e,n){var r=n.getTile(e);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],o=i[e.key];if((r=o?n.getTileByID(o):null)&&r.hasData()||null===o)return r;var a=r?r.tileID:e,s=a.overscaledZ,l=n.getSource().minzoom,u=[];if(!o){var c=n.getSource().maxzoom;if(e.canonical.z>=c){var h=e.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,c,e.canonical.x>>h,e.canonical.y>>h)):0!==h&&(s=c,a=new t.OverscaledTileID(s,e.wrap,c,e.canonical.x>>h,e.canonical.y>>h))}a.key!==e.key&&(u.push(a.key),r=n.getTile(a))}var f=function(t){u.forEach((function(e){i[e]=t})),u.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&f(r.tileID.key);var p=a.calculateScaledKey(s);if((r=n.getTileByID(p))&&r.hasData())break;var d=i[p];if(null===d)break;void 0===d?u.push(p):r=n.getTileByID(d)}return f(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(t,e){var n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var e=function(e){for(var n=0,r=new t.StructArrayLayout2ui4,i=131,o=1;o<129;o++){for(var a=1;a<129;a++)n=o*i+a,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===o&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),r}(t.Elevation),Zn=function(){function e(n,r,i,o,a,s){p(this,e);var l=n.gl;this.program=l.createProgram();var u=function(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}(i.staticAttributes),c=o?o.getBinderAttributes():[],h=u.concat(c),f=o?o.defines():[];f=f.concat(s.map((function(t){return"#define ".concat(t)})));var d=n.isWebGL2?"#version 300 es\n":"",v=d+f.concat(n.extStandardDerivatives&&0===d.length?"#extension GL_OES_standard_derivatives : enable\n".concat(wn):wn,wn,bn,xn.fragmentSource,mn.fragmentSource,i.fragmentSource).join("\n"),y=d+f.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",bn,xn.vertexSource,mn.vertexSource,gn.vertexSource,i.vertexSource).join("\n"),g=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(g,v),l.compileShader(g),l.attachShader(this.program,g);var m=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(m,y),l.compileShader(m),l.attachShader(this.program,m),this.attributes={},this.numAttributes=h.length;for(var _=0;_<this.numAttributes;_++)h[_]&&(l.bindAttribLocation(this.program,_,h[_]),this.attributes[h[_]]=_);l.linkProgram(this.program),l.deleteShader(m),l.deleteShader(g),this.fixedUniforms=a(n),this.binderUniforms=o?o.getUniforms(n):[],s.includes("TERRAIN")&&(this.terrainUniforms=function(e){return{u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}}(n)),s.includes("GLOBE")&&(this.globeUniforms=function(e){return{u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}}(n)),s.includes("FOG")&&(this.fogUniforms=function(e){return{u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}}(n))}}}return d(e,[{key:"setTerrainUniformValues",value:function(t,e){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in t.program.set(this.program),e)n[r]&&n[r].set(this.program,r,e[r])}}},{key:"setGlobeUniformValues",value:function(t,e){if(this.globeUniforms){var n=this.globeUniforms;if(!this.failedToCreate)for(var r in t.program.set(this.program),e)n[r]&&n[r].set(this.program,r,e[r])}}},{key:"setFogUniformValues",value:function(t,e){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var r in t.program.set(this.program),e)n[r].set(this.program,r,e[r])}}},{key:"draw",value:function(t,e,n,i,o,a,s,l,u,c,h,p,d,v,y){var g,m=t.gl;if(!this.failedToCreate){t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(o),t.setCullFace(a);for(var _=0,x=Object.keys(this.fixedUniforms);_<x.length;_++){var b=x[_];this.fixedUniforms[b].set(this.program,b,s[b])}v&&v.setUniforms(this.program,t,this.binderUniforms,p,{zoom:d});var w,k=(g={},r(g,m.LINES,2),r(g,m.TRIANGLES,3),r(g,m.LINE_STRIP,1),g)[e],E=f(h.get());try{for(E.s();!(w=E.n()).done;){var S=w.value,T=S.vaos||(S.vaos={});(T[l]||(T[l]=new Tn)).bind(t,this,u,v?v.getPaintVertexBuffers():[],c,S.vertexOffset,y||[]),m.drawElements(e,S.primitiveLength*k,m.UNSIGNED_SHORT,S.primitiveOffset*k*2)}}catch(M){E.e(M)}finally{E.f()}}}}],[{key:"cacheKey",value:function(t,e,n,r){var i,o="".concat(e).concat(r?r.cacheKey:""),a=f(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.usedDefines.includes(s)&&(o+="/".concat(s))}}catch(l){a.e(l)}finally{a.f()}return o}}]),e}();function Wn(t,e){var n=Math.pow(2,e.tileID.overscaledZ),r=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,i=r*(e.tileID.canonical.x+e.tileID.wrap*n),o=r*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/G(e,1,t.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}var Xn=t.create(),Hn=function(e,n,r,i,o,a,s,l,u,c,h){var f=n.style.light,p=f.properties.get("position"),d=[p.x,p.y,p.z],v=t.create$1();"viewport"===f.properties.get("anchor")&&(t.fromRotation(v,-n.transform.angle),t.transformMat3(d,d,v));var y=f.properties.get("color"),g=n.transform,m={u_matrix:e,u_lightpos:d,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[y.r,y.g,y.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Xn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===g.projection.name&&(m.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],m.u_zoom_transition=u,m.u_inv_rot_matrix=h,m.u_merc_center=c,m.u_up_dir=g.projection.upVector(new t.CanonicalTileID(0,0,0),c[0]*t.EXTENT,c[1]*t.EXTENT),m.u_height_lift=l),m},Yn=function(e,n,r,i,o,a,s,l,u,c,h,f){var p=Hn(e,n,r,i,o,a,s,u,c,h,f),d={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return t.extend(p,Wn(n,l),d)},Kn=function(t){return{u_matrix:t}},Jn=function(e,n,r){return t.extend(Kn(e),Wn(n,r))},Qn=function(t,e){return{u_matrix:t,u_world:e}},$n=function(e,n,r,i){return t.extend(Jn(e,n,r),{u_world:i})},tr=t.create(),er=function(e,n,r,i,o,a){var s,l=e.transform,u="globe"===l.projection.name;if("map"===a.paint.get("circle-pitch-alignment"))if(u){var c=t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel;s=Float32Array.from([c,0,0,c])}else s=l.calculatePixelsToTileUnitsMatrix(r);else s=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:l.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:tr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(l.zoom);var f=o[0]*t.EXTENT,p=o[1]*t.EXTENT;h.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),f,p)}return h},nr=function(t){var e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},rr=function(e,n,r,i){var o=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},ir=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},or=t.create(),ar=function(e,n,r,i,o,a,s){var l=e.transform,u="globe"===l.projection.name,c=u?t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:G(r,1,a),h={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:or,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(l.zoom);var f=o[0]*t.EXTENT,p=o[1]*t.EXTENT;h.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),f,p)}return h},sr=function(t,e,n,r,i,o,a){var s=t.transform,l=s.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:cr(t,e,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:hr(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ur(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},lr=function(t,e,n,r,i){var o=t.transform;return{u_matrix:cr(t,e,n,r),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:ur(e,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ur(t,e){return 1/G(t,1,e.tileZoom)}function cr(t,e,n,r){return t.translatePosMatrix(r||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function hr(t){var e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}var fr=function(t,e,n,r,i,o){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:pr(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function pr(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var dr,vr=t.create(),yr=function(e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y){var g=o.transform,m={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:g.width/g.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:vr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:vr,u_up_vector:[0,-1,0]};return"globe"===y.name&&(m.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],m.u_zoom_transition=f,m.u_inv_rot_matrix=d,m.u_merc_center=p,m.u_camera_forward=g._camera.forward(),m.u_ecef_origin=t.globeECEFOrigin(g.globeMatrix,h.toUnwrapped()),m.u_tile_matrix=Float32Array.from(g.globeMatrix),m.u_up_vector=v),m},gr=function(e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y,g){return t.extend(yr(e,n,r,i,o,a,s,l,u,c,f,p,d,v,y,g),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},mr=function(e,n,r,i,o,a,s,l,u,c,h,f,p,d,v,y){return t.extend(gr(e,n,r,i,o,a,s,l,!0,u,!0,h,f,p,d,v,y),{u_texsize_icon:c,u_texture_icon:1})},_r=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},xr=function(e,n,r,i,o){return t.extend(function(t,e,n){var r=e.imageManager.getPattern(t.toString()),i=e.imageManager.getPixelSize(),o=i.width,a=i.height,s=Math.pow(2,n.tileID.overscaledZ),l=n.tileSize*Math.pow(2,e.transform.tileZoom)/s,u=l*(n.tileID.canonical.x+n.tileID.wrap*s),c=l*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[o,a],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/G(n,1,e.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(i,r,o),{u_matrix:e,u_opacity:n})},br={fillExtrusion:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}},fillExtrusionPattern:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}},fill:function(e){return{u_matrix:new t.UniformMatrix4f(e)}},fillPattern:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}},fillOutline:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}},fillOutlinePattern:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}},circle:function(e){return{u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}},collisionBox:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}},collisionCircle:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}},debug:function(e){return{u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}},clippingMask:function(e){return{u_matrix:new t.UniformMatrix4f(e)}},heatmap:function(e){return{u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}},heatmapTexture:function(e){return{u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}},hillshade:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}},hillshadePrepare:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}},line:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}},linePattern:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}},raster:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}},symbolIcon:function(e){return{u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}},symbolSDF:function(e){return{u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}},symbolTextAndIcon:function(e){return{u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}},background:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}},backgroundPattern:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}},terrainRaster:An,terrainDepth:An,skybox:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}},skyboxGradient:function(e){return{u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}},skyboxCapture:function(e){return{u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}},globeRaster:function(e){return{u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_skirt_height:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}},globeAtmosphere:function(e){return{u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)}}};function wr(e,n,r,i,o,a,s){for(var l=e.context,u=l.gl,c=e.transform,h=e.useProgram("collisionBox"),f=[],p=0,d=0,v=0;v<i.length;v++){var y=i[v],g=n.getTile(y),m=g.getBucket(r);if(m){var _=Ae(y,m,c),x=_;0===o[0]&&0===o[1]||(x=e.translatePosMatrix(_,g,o,a));var b=s?m.textCollisionBox:m.iconCollisionBox,w=m.collisionCircleArray;if(w.length>0){var k=t.create(),E=x;t.mul(k,m.placementInvProjMatrix,c.glCoordMatrix),t.mul(k,k,m.placementViewportMatrix),f.push({circleArray:w,circleOffset:d,transform:E,invTransform:k,projection:m.getProjection()}),d=p+=w.length/4}b&&(e.terrain&&e.terrain.setupElevationDraw(g,h),h.draw(l,u.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,rr(x,c,g,m.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,c.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}}if(s&&f.length){var S=e.useProgram("collisionCircle"),T=new t.StructArrayLayout2f1f2i16;T.resize(4*p),T._trim();for(var M=0,I=0,C=f;I<C.length;I++)for(var P=C[I],A=0;A<P.circleArray.length/4;A++){var L=4*A,D=P.circleArray[L+0],R=P.circleArray[L+1],O=P.circleArray[L+2],z=P.circleArray[L+3];T.emplace(M++,D,R,O,z,0),T.emplace(M++,D,R,O,z,1),T.emplace(M++,D,R,O,z,2),T.emplace(M++,D,R,O,z,3)}(!dr||dr.length<2*p)&&(dr=function(e){var n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(p));for(var N,F=l.createIndexBuffer(dr,!0),B=l.createVertexBuffer(T,t.collisionCircleLayout.members,!0),j=0,U=f;j<U.length;j++){var V=U[j],G={u_matrix:V.transform,u_inv_matrix:V.invTransform,u_camera_to_center_distance:(N=c).getCameraToCenterDistance(V.projection),u_viewport_size:[N.width,N.height]};S.draw(l,u.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,G,r.id,B,F,t.SegmentVector.simpleSegment(0,2*V.circleOffset,V.circleArray.length,V.circleArray.length/2),null,c.zoom)}B.destroy(),F.destroy()}}var kr=t.create();function Er(e,n){var r=e.width,i=e.height,o=e.anchor,a=e.textOffset,s=e.textScale,l=t.getAnchorAlignment(o),u=-(l.horizontalAlign-.5)*r,c=-(l.verticalAlign-.5)*i,h=t.evaluateVariableOffset(o,a);return new t.Point((u/s+h[0])*n,(c/s+h[1])*n)}function Sr(e,n,r,i,o,a,s,l,u,c,f){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,v=e.icon.dynamicLayoutVertexArray,y={},g=e.getProjection(),m=Le(l,g,a),_=a.elevation,x=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;d.clear();for(var b=0;b<p.length;b++){var w=p.get(b),k=w.tileAnchorX,E=w.tileAnchorY,S=w.numGlyphs,T=w.hidden||!w.crossTileID||e.allowVerticalPlacement&&!w.placedOrientation?null:i[w.crossTileID];if(T){var M,I,C,P=0,A=0,L=0;if(_){var D=_?_.getAtTileOffset(l,k,E):0,R=g.upVector(l.canonical,k,E),O=h(R,3);P=D*O[0]*x,A=D*O[1]*x,L=D*O[2]*x}var z=ye(w.projectedAnchorX+P,w.projectedAnchorY+A,w.projectedAnchorZ+L,r?m:s),N=h(z,4),F=N[0],B=N[1],j=N[2],U=N[3],V=ge(a.getCameraToCenterDistance(g),U),G=o.evaluateSizeForFeature(e.textSizeData,c,w)*V/t.ONE_EM;r&&(G*=e.tilePixelRatio/u);var q=Er(T,G);r?(I=ye((F=(M=g.projectTilePoint(k+q.x,E+q.y,l.canonical)).x)+P,(B=M.y)+A,(j=M.z)+L,s),F=(C=h(I,3))[0],B=C[1],j=C[2]):(n&&q._rotate(-a.angle),F+=q.x,B+=q.y,j=0);for(var Z=e.allowVerticalPlacement&&w.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,W=0;W<S;W++)t.addDynamicAttributes(d,F,B,j,Z);f&&w.associatedIconIndex>=0&&(y[w.associatedIconIndex]={x:F,y:B,z:j,angle:Z})}else Te(S,d)}if(f){v.clear();for(var X=e.icon.placedSymbolArray,H=0;H<X.length;H++){var Y=X.get(H),K=Y.numGlyphs,J=y[H];if(Y.hidden||!J)Te(K,v);else for(var Q=J.x,$=J.y,tt=J.z,et=J.angle,nt=0;nt<K;nt++)t.addDynamicAttributes(v,Q,$,tt,et)}e.icon.dynamicLayoutVertexBuffer.updateData(v)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function Tr(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Mr(e,n,r,i,o,a,s,l,u,c,h,p){var d=e.context,v=d.gl,y=e.transform,g="map"===l,m="map"===u,_=g&&"point"!==r.layout.get("symbol-placement"),x=g&&!m&&!_,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),w=!1,k=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=[t.mercatorXfromLng(y.center.lng),t.mercatorYfromLat(y.center.lat)],S=r.layout.get("text-variable-anchor"),T="globe"===y.projection.name,M=[],I=[0,-1,0],C=I;!T&&!y.mercatorFromTransition||g||(C=function(e){var n=e._camera.getWorldToCamera(e.worldSize,1),r=t.multiply([],n,e.globeMatrix);t.invert(r,r);var i=[0,0,0],o=[0,1,0,0];return t.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],t.normalize(i,i),i}(y));var P,A=f(i);try{for(A.s();!(P=A.n()).done;){var L=P.value,D=n.getTile(L),R=D.getBucket(r);if(R&&("mercator"!==R.projection.name||!T)){var O=o?R.text:R.icon;if(O&&!R.fullyClipped&&O.segments.get().length){var z=O.programConfigurations.get(r.id),N=o||R.sdfIcons,F=o?R.textSizeData:R.iconSizeData,B=m||0!==y.pitch,j=t.evaluateSizeForZoom(F,y.zoom),U=void 0,V=void 0,G=void 0,q=void 0,Z=[0,0],W=null;if(o)V=D.glyphAtlasTexture,G=v.LINEAR,U=D.glyphAtlasTexture.size,R.iconsInText&&(Z=D.imageAtlasTexture.size,W=D.imageAtlasTexture,q=B||e.options.rotating||e.options.zooming||"composite"===F.kind||"camera"===F.kind?v.LINEAR:v.NEAREST);else{var X=1!==r.layout.get("icon-size").constantOr(0)||R.iconsNeedLinear;V=D.imageAtlasTexture,G=N||e.options.rotating||e.options.zooming||X||B?v.LINEAR:v.NEAREST,U=D.imageAtlasTexture.size}var H="globe"===R.projection.name,Y=H?C:I,K=H?t.globeToMercatorTransition(y.zoom):0,J=Le(L,R.getProjection(),y),Q=y.calculatePixelsToTileUnitsMatrix(D),$=pe(J,D.tileID.canonical,m,g,y,R.getProjection(),Q),tt=e.terrain&&m&&_?t.invert(t.create(),$):kr,et=ve(J,D.tileID.canonical,m,g,y,R.getProjection(),Q),nt=S&&R.hasTextData(),rt="none"!==r.layout.get("icon-text-fit")&&nt&&R.hasIconData();if(_){var it=y.elevation,ot=it?it.getAtTileOffsetFunc(L,y.center.lat,y.worldSize,R.getProjection()):null,at=de(J,D.tileID.canonical,m,g,y,R.getProjection(),Q);_e(R,J,e,o,at,et,m,c,ot,L)}var st=_||o&&S||rt,lt=e.translatePosMatrix(J,D,a,s),ut=st?kr:$,ct=e.translatePosMatrix(et,D,a,s,!0),ht=R.getProjection().createInversionMatrix(y,L.canonical),ft=[];e.terrainRenderModeElevated()&&m&&ft.push("PITCH_WITH_MAP_TERRAIN"),H&&ft.push("PROJECTION_GLOBE_VIEW"),st&&ft.push("PROJECTED_POS_ON_VIEWPORT");var pt=N&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),dt=void 0;dt=N?R.iconsInText?mr(F.kind,j,x,m,e,lt,ut,ct,U,Z,L,K,E,ht,Y,R.getProjection()):gr(F.kind,j,x,m,e,lt,ut,ct,o,U,!0,L,K,E,ht,Y,R.getProjection()):yr(F.kind,j,x,m,e,lt,ut,ct,o,U,L,K,E,ht,Y,R.getProjection());var vt={program:e.useProgram(Tr(N,o,R),z,ft),buffers:O,uniformValues:dt,atlasTexture:V,atlasTextureIcon:W,atlasInterpolation:G,atlasInterpolationIcon:q,isSDF:N,hasHalo:pt,tile:D,labelPlaneMatrixInv:tt};if(b&&R.canOverlap){w=!0;var yt,gt=O.segments.get(),mt=f(gt);try{for(mt.s();!(yt=mt.n()).done;){var _t=yt.value;M.push({segments:new t.SegmentVector([_t]),sortKey:_t.sortKey,state:vt})}}catch(St){mt.e(St)}finally{mt.f()}}else M.push({segments:O.segments,sortKey:0,state:vt})}}}}catch(St){A.e(St)}finally{A.f()}w&&M.sort((function(t,e){return t.sortKey-e.sortKey}));for(var xt=0,bt=M;xt<bt.length;xt++){var wt=bt[xt],kt=wt.state;if(e.terrain&&e.terrain.setupElevationDraw(kt.tile,kt.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:kt.labelPlaneMatrixInv}),d.activeTexture.set(v.TEXTURE0),kt.atlasTexture.bind(kt.atlasInterpolation,v.CLAMP_TO_EDGE),kt.atlasTextureIcon&&(d.activeTexture.set(v.TEXTURE1),kt.atlasTextureIcon&&kt.atlasTextureIcon.bind(kt.atlasInterpolationIcon,v.CLAMP_TO_EDGE)),kt.isSDF){var Et=kt.uniformValues;kt.hasHalo&&(Et.u_is_halo=1,Ir(kt.buffers,wt.segments,r,e,kt.program,k,h,p,Et)),Et.u_is_halo=0}Ir(kt.buffers,wt.segments,r,e,kt.program,k,h,p,kt.uniformValues)}}function Ir(e,n,r,i,o,a,s,l,u){var c=i.context,h=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];o.draw(c,c.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,u,r.id,e.layoutVertexBuffer,e.indexBuffer,n,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),h)}function Cr(e,n,r,i,o,a,s){var l,u,c,h,p,d=e.context.gl,v=r.paint.get("fill-pattern"),y=v&&v.constantOr(1);s?(u=y&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=d.LINES):(u=y?"fillPattern":"fill",l=d.TRIANGLES);var g,m=f(i);try{for(m.s();!(g=m.n()).done;){var _=g.value,x=n.getTile(_);if(!y||x.patternsLoaded()){var b=x.getBucket(r);if(b){e.prepareDrawTile();var w=b.programConfigurations.get(r.id),k=e.useProgram(u,w);y&&(e.context.activeTexture.set(d.TEXTURE0),x.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),w.updatePaintBuffers());var E=v.constantOr(null);if(E&&x.imageAtlas){var S=x.imageAtlas.patternPositions[E.toString()];S&&w.setConstantPatternPositions(S)}var T=e.translatePosMatrix(_.projMatrix,x,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){h=b.indexBuffer2,p=b.segments2;var M=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[d.drawingBufferWidth,d.drawingBufferHeight];c="fillOutlinePattern"===u&&y?$n(T,e,x,M):Qn(T,M)}else h=b.indexBuffer,p=b.segments,c=y?Jn(T,e,x):Kn(T);e.prepareDrawProgram(e.context,k,_.toUnwrapped()),k.draw(e.context,l,o,e.stencilModeForClipping(_),a,t.CullFaceMode.disabled,c,r.id,b.layoutVertexBuffer,h,p,r.paint,e.transform.zoom,w)}}}}catch(I){m.e(I)}finally{m.f()}}function Pr(e,n,r,i,o,a,s){var l=e.context,u=l.gl,c=e.transform,h=r.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),d=r.paint.get("fill-extrusion-opacity"),v=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],y=r.layout.get("fill-extrusion-edge-radius"),g=y>0&&!r.paint.get("fill-extrusion-rounded-roof"),m=g?0:y,_="globe"===c.projection.name?t.fillExtrusionHeightLift():0,x="globe"===c.projection.name,b=x?t.globeToMercatorTransition(c.zoom):0,w=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)],k=[];x&&k.push("PROJECTION_GLOBE_VIEW"),v[0]>0&&k.push("FAUX_AO"),g&&k.push("ZERO_ROOF_RADIUS");var E,S=f(i);try{for(S.s();!(E=S.n()).done;){var T=E.value,M=n.getTile(T),I=M.getBucket(r);if(I&&I.projection.name===c.projection.name){var C=I.programConfigurations.get(r.id),P=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",C,k);if(e.terrain){var A=e.terrain;if(e.style.terrainSetForDrapingOnly())A.setupElevationDraw(M,P,{useMeterToDem:!0});else{if(!I.enableTerrain)continue;if(A.setupElevationDraw(M,P,{useMeterToDem:!0}),Ar(l,n,T,I,r,A),!I.centroidVertexBuffer){var L=P.attributes.a_centroid_pos;void 0!==L&&u.vertexAttrib2f(L,0,0)}}}p&&(e.context.activeTexture.set(u.TEXTURE0),M.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),C.updatePaintBuffers());var D=h.constantOr(null);if(D&&M.imageAtlas){var R=M.imageAtlas.patternPositions[D.toString()];R&&C.setConstantPatternPositions(R)}var O=e.translatePosMatrix(T.projMatrix,M,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),z=c.projection.createInversionMatrix(c,T.canonical),N=r.paint.get("fill-extrusion-vertical-gradient"),F=p?Yn(O,e,N,d,v,m,T,M,_,b,w,z):Hn(O,e,N,d,v,m,T,_,b,w,z);e.prepareDrawProgram(l,P,T.toUnwrapped());var B=[];e.terrain&&B.push(I.centroidVertexBuffer),x&&B.push(I.layoutVertexExtBuffer),P.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,F,r.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,r.paint,e.transform.zoom,C,B)}}}catch(j){S.e(j)}finally{S.f()}}function Ar(e,n,r,i,o,a){for(var s,l,u,c=[function(e){var n=e.canonical.x-1,r=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},function(e){var n=e.canonical.x+1,r=e.wrap;return n===1<<e.canonical.z&&(n=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},function(e){return new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1)},function(e){return new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)}],h=function(t){for(var e=n.getSource().minzoom,r=function(t){var e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)},i=0,a=[0,-1,1];i<a.length;i++){var s=a[i];if(!(t.overscaledZ+s<e)){var l=r(t.calculateScaledKey(t.overscaledZ+s));if(l)return l}}},p=[0,0,0],d=function(e,n){return p[0]=Math.min(e.min.y,n.min.y),p[1]=Math.max(e.max.y,n.max.y),p[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,p},v=function(e,n){return p[0]=Math.min(e.min.x,n.min.x),p[1]=Math.max(e.max.x,n.max.x),p[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,p},y=[function(t,e){return d(t,e)},function(t,e){return d(e,t)},function(t,e){return v(t,e)},function(t,e){return v(e,t)}],g=new t.Point(0,0),m=function(e,n,i,o,c){var h=[[o?i:e,o?e:i,0],[o?i:n,o?n:i,0]],f=c<0?t.EXTENT+c:c,p=[o?f:(e+n)/2,o?(e+n)/2:f,0];return 0===i&&c<0||0!==i&&c>0?a.getForTilePoints(u,[p],!0,l):h.push(p),a.getForTilePoints(r,h,!0,s),Math.max(h[0][2],h[1][2],p[2])/a.exaggeration()},_=0;_<4;_++){var x=(_<2?1:5)-_,b=i.borders[_];if(0!==b.length){var w=u=c[_](r),k=h(w);if(k&&k instanceof t.FillExtrusionBucket&&k.enableTerrain&&(i.borderDoneWithNeighborZ[_]!==k.canonical.z||k.borderDoneWithNeighborZ[x]!==i.canonical.z)&&(l=a.findDEMTileFor(w))&&l.dem){if(!s){var E=a.findDEMTileFor(r);if(!E||!E.dem)return;s=E}var S=k.borders[x],T=0,M=k.borderDoneWithNeighborZ[x]!==i.canonical.z;if(i.canonical.z===k.canonical.z){for(var I=0;I<b.length;I++){for(var C=i.featuresOnBorder[b[I]],P=C.borders[_],A=void 0;T<S.length&&!((A=k.featuresOnBorder[S[T]]).borders[x][1]>P[0]+3);)M&&k.encodeCentroid(void 0,A,!1),T++;if(A&&T<S.length){for(var L=T,D=0;!(A.borders[x][0]>P[1]-3)&&(D++,++T!==S.length);)A=k.featuresOnBorder[S[T]];if(A=k.featuresOnBorder[S[L]],C.intersectsCount()>1||A.intersectsCount()>1||1!==D){1!==D&&(T=L),i.encodeCentroid(void 0,C,!1),M&&k.encodeCentroid(void 0,A,!1);continue}var R=y[_](C,A),O=_%2?t.EXTENT-1:0;g.x=m(R[0],Math.min(t.EXTENT-1,R[1]),O,_<2,R[2]),g.y=0,i.encodeCentroid(g,C,!1),M&&k.encodeCentroid(g,A,!1)}else i.encodeCentroid(void 0,C,!1)}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0,M&&(k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0)}else{var z,N=f(b);try{for(N.s();!(z=N.n()).done;){var F=z.value;i.encodeCentroid(void 0,i.featuresOnBorder[F],!1)}}catch(V){N.e(V)}finally{N.f()}if(M){var B,j=f(S);try{for(j.s();!(B=j.n()).done;){var U=B.value;k.encodeCentroid(void 0,k.featuresOnBorder[U],!1)}}catch(V){j.e(V)}finally{j.f()}k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}var Lr=new t.Color(1,0,0,1),Dr=new t.Color(0,1,0,1),Rr=new t.Color(0,0,1,1),Or=new t.Color(1,0,1,1),zr=new t.Color(0,1,1,1);function Nr(e,n,r){var i=e.context,o=e.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null,u=r.projMatrix;if(s&&t.globeToMercatorTransition(o.zoom)>0){var c=t.transitionTileAABBinECEF(r.canonical,o),h=t.globeDenormalizeECEF(c);u=t.multiply(new Float32Array(16),o.globeMatrix,h),t.multiply(u,o.projMatrix,u)}var f=e.useProgram("debug",null,l),p=n.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(p,f);var d=t.DepthMode.disabled,v=t.StencilMode.disabled,y=e.colorModeForRenderPass(),g="$debug";i.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?p._makeGlobeTileDebugBuffers(e.context,o):p._makeDebugTileBoundsBuffers(e.context,o.projection);var m=p._tileDebugBuffer||e.debugBuffer,_=p._tileDebugIndexBuffer||e.debugIndexBuffer,x=p._tileDebugSegments||e.debugSegments;f.draw(i,a.LINE_STRIP,d,v,y,t.CullFaceMode.disabled,ir(u,t.Color.red),g,m,_,x,null,null,null,[p._globeTileDebugBorderBuffer]);var b=p.latestRawTileData,w=Math.floor((b&&b.byteLength||0)/1024),k=n.getTile(r).tileSize,E=512/Math.min(k,512)*(r.overscaledZ/o.zoom)*.5,S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=" => ".concat(r.overscaledZ)),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,S+=" ".concat(w,"kb"));var T=p._tileDebugTextBuffer||e.debugBuffer,M=p._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,I=p._tileDebugTextSegments||e.debugSegments;f.draw(i,a.TRIANGLES,d,v,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,ir(u,t.Color.transparent,E),g,T,M,I,null,null,null,[p._globeTileDebugTextBuffer])}function Fr(t,e,n,r){jr(t,0,e+n/2,t.transform.width,n,r)}function Br(t,e,n,r){jr(t,e-n/2,0,n,t.transform.height,r)}function jr(e,n,r,i,o,a){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}var Ur=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Vr(t,e,n,r){t.emplaceBack(e,n,r)}var Gr=d((function e(n){p(this,e),this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Vr(this.vertexArray,-1,-1,1),Vr(this.vertexArray,1,-1,1),Vr(this.vertexArray,-1,1,1),Vr(this.vertexArray,1,1,1),Vr(this.vertexArray,-1,-1,-1),Vr(this.vertexArray,1,-1,-1),Vr(this.vertexArray,-1,1,-1),Vr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,Ur),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}));function qr(e,n,r,i,o,a){var s=e.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(t,e,n,r,i){return{u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(t.fromMat4(t.create$1(),i),o,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var Zr=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Wr=function(){function e(n){p(this,e);var r=new t.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);var i=new t.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(r,Zr.members),this.indexBuffer=n.createIndexBuffer(i),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}return d(e,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),e}(),Xr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=t.StencilMode.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){var l,u=n.transform,c="map"===o,h="map"===a,p=f(e);try{for(p.s();!(l=p.n()).done;){var d=l.value,v=i.getTile(d),y=v.getBucket(r);if(y&&y.text&&y.text.segments.get().length){var g=t.evaluateSizeForZoom(y.textSizeData,u.zoom),m=Le(d,y.getProjection(),u),_=u.calculatePixelsToTileUnitsMatrix(v),x=pe(m,v.tileID.canonical,h,c,u,y.getProjection(),_),b="none"!==r.layout.get("icon-text-fit")&&y.hasIconData();if(g){var w=Math.pow(2,u.zoom-v.tileID.overscaledZ);Sr(y,c,h,s,t.symbolSize,u,x,d,w,g,b)}}}}catch(k){p.e(k)}finally{p.f()}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Mr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Mr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(wr(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),wr(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,h=e.transform,p=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,v=e.colorModeForRenderPass(),y="globe"===h.projection.name,g=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],m=[],_=0;_<i.length;_++){var x=i[_],b=n.getTile(x),w=b.getBucket(r);if(w&&w.projection.name===h.projection.name){var k=w.programConfigurations.get(r.id),E=nr(r);y&&E.push("PROJECTION_GLOBE_VIEW");var S=e.useProgram("circle",k,E),T=w.layoutVertexBuffer,M=w.globeExtVertexBuffer,I=w.indexBuffer,C=h.projection.createInversionMatrix(h,x.canonical),P={programConfiguration:k,program:S,layoutVertexBuffer:T,globeExtVertexBuffer:M,indexBuffer:I,uniformValues:er(e,x,b,C,g,r),tile:b};if(l){var A,L=w.segments.get(),D=f(L);try{for(D.s();!(A=D.n()).done;){var R=A.value;m.push({segments:new t.SegmentVector([R]),sortKey:R.sortKey,state:P})}}catch(H){D.e(H)}finally{D.f()}}else m.push({segments:w.segments,sortKey:0,state:P})}}l&&m.sort((function(t,e){return t.sortKey-e.sortKey}));for(var O={useDepthForOcclusion:!y},z=0,N=m;z<N.length;z++){var F=N[z],B=F.state,j=B.programConfiguration,U=B.program,V=B.layoutVertexBuffer,G=B.globeExtVertexBuffer,q=B.indexBuffer,Z=B.uniformValues,W=B.tile,X=F.segments;e.terrain&&e.terrain.setupElevationDraw(W,U,O),e.prepareDrawProgram(u,U,W.tileID.toUnwrapped()),U.draw(u,c.TRIANGLES,p,d,v,t.CullFaceMode.disabled,Z,r.id,V,q,X,r.paint,h.zoom,j,[G])}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,r){var i=t.gl,o=e.width*r,a=e.height*r;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,o,a]);var s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();var l=i.createTexture();i.bindTexture(i.TEXTURE_2D,l),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=t.createFramebuffer(o,a,!1),function(t,e,n,r,i,o){var a=t.gl;a.texImage2D(a.TEXTURE_2D,0,t.isWebGL2&&t.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,t.extRenderToTextureHalfFloat?t.isWebGL2?a.HALF_FLOAT:t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,0,l,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),t.bindFramebuffer.set(s.framebuffer)}(o,e,r,"globe"===e.transform.projection.name?.5:.25),o.clear({color:t.Color.transparent});for(var u=e.transform,c="globe"===u.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,f=c?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,p=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],d=0;d<i.length;d++){var v=i[d];if(!n.hasRenderableParent(v)){var y=n.getTile(v),g=y.getBucket(r);if(g&&g.projection.name===u.projection.name){var m=g.programConfigurations.get(r.id),_=e.useProgram("heatmap",m,h),x=e.transform.zoom;e.terrain&&e.terrain.setupElevationDraw(y,_),e.prepareDrawProgram(o,_,v.toUnwrapped());var b=u.projection.createInversionMatrix(u,v.canonical);_.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,f,ar(e,v,y,b,p,x,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,e.transform.zoom,m,c?[g.globeExtVertexBuffer]:null)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,function(t,e,n,r){return{u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),u=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),p=c.constantOr(1),d=r.layout.get("line-cap"),v=r.paint.get("line-pattern"),y=v.constantOr(1),g=r.paint.get("line-gradient"),m=y?"linePattern":"line",_=e.context,x=_.gl,b=function(t){var e=[];hr(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");var n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");var r=t.paint.get("line-pattern").constantOr(1),i=1!==t.paint.get("line-opacity").constantOr(1);return!r&&i&&e.push("RENDER_LINE_ALPHA_DISCARD"),e}(r),w=b.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(w=!1);var k,E=f(i);try{var S=function(){var i=k.value,o=n.getTile(i);if(y&&!o.patternsLoaded())return"continue";var a=o.getBucket(r);if(!a)return"continue";e.prepareDrawTile();var f=a.programConfigurations.get(r.id),E=e.useProgram(m,f,b),S=v.constantOr(null);if(S&&o.imageAtlas){var T=o.imageAtlas.patternPositions[S.toString()];T&&f.setConstantPatternPositions(T)}var M=c.constantOr(null),I=d.constantOr(null);if(!y&&M&&I&&o.lineAtlas){var C=o.lineAtlas.getDash(M,I);C&&f.setConstantPatternPositions(C)}var P=r.paint.get("line-trim-offset"),A=h(P,2),L=A[0],D=A[1];if("round"===I||"square"===I){var R=1;L!==D&&(0===L&&(L-=R),1===D&&(D+=R))}var O=e.terrain?i.projMatrix:null,z=y?lr(e,o,r,O,u):sr(e,o,r,O,a.lineClipsArray.length,u,[L,D]);if(g){var N=a.gradients[r.id],F=N.texture;if(r.gradientVersion!==N.version){var B=256;if(r.stepInterpolant){var j=n.getSource().maxzoom,U=i.canonical.z===j?Math.ceil(1<<e.transform.maxZoom-i.canonical.z):1;B=t.clamp(t.nextPowerOfTwo(a.maxLineLength/t.EXTENT*1024*U),256,_.maxTextureSize)}N.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:B,image:N.gradient||void 0,clips:a.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new t.Texture(_,N.gradient,x.RGBA),N.version=r.gradientVersion,F=N.texture}_.activeTexture.set(x.TEXTURE1),F.bind(r.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}p&&(_.activeTexture.set(x.TEXTURE0),o.lineAtlasTexture.bind(x.LINEAR,x.REPEAT),f.updatePaintBuffers()),y&&(_.activeTexture.set(x.TEXTURE0),o.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),f.updatePaintBuffers()),e.prepareDrawProgram(_,E,i.toUnwrapped());var V=function(n){E.draw(_,x.TRIANGLES,s,n,l,t.CullFaceMode.disabled,z,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,e.transform.zoom,f,[a.layoutVertexBuffer2])};if(w){var G=e.stencilModeForClipping(i).ref;0===G&&e.terrain&&_.clear({stencil:0});var q={func:x.EQUAL,mask:255};z.u_alpha_discard_threshold=.8,V(new t.StencilMode(q,G,255,x.KEEP,x.KEEP,x.INVERT)),z.u_alpha_discard_threshold=0,V(new t.StencilMode(q,G,255,x.KEEP,x.KEEP,x.KEEP))}else V(e.stencilModeForClipping(i))};for(E.s();!(k=E.n()).done;)S()}catch(T){E.e(T)}finally{E.f()}w&&(e.resetStencilClippingMasks(),e.terrain&&_.clear({stencil:0}))}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Cr(e,n,r,i,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var h=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Cr(e,n,r,i,h,s,!0)}}},"fill-extrusion":function(e,n,r,i){var o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){var a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))Pr(e,n,r,i,a,t.StencilMode.disabled,t.ColorMode.disabled),Pr(e,n,r,i,a,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{var s=e.colorModeForRenderPass();Pr(e,n,r,i,a,t.StencilMode.disabled,s)}}},hillshade:function(e,n,r,i){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var o,a=e.context,s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),u=e.terrain&&e.terrain.renderingToTexture,c="translucent"!==e.renderPass||u?[{},i]:e.stencilConfigForOverlap(i),p=h(c,2),d=p[0],v=p[1],y=f(v);try{for(y.s();!(o=y.n()).done;){var g=o.value,m=n.getTile(g);if(m.needsHillshadePrepare&&"offscreen"===e.renderPass)Pn(e,m,r,s,t.StencilMode.disabled,l);else if("translucent"===e.renderPass){var _=u&&e.terrain?e.terrain.stencilModeForRTTOverlap(g):d[g.overscaledZ];In(e,g,m,r,s,_,l)}}}catch(x){y.e(x)}finally{y.f()}a.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()}},raster:function(e,n,r,i,o,a){if("translucent"===e.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var s,l=e.context,u=l.gl,c=n.getSource(),p=e.useProgram("raster"),d=e.colorModeForRenderPass(),v=e.terrain&&e.terrain.renderingToTexture,y=c instanceof Ut||v?[{},i]:e.stencilConfigForOverlap(i),g=h(y,2),m=g[0],_=g[1],x=_[_.length-1].overscaledZ,b=!e.options.moving,w=f(_);try{for(w.s();!(s=w.n()).done;){var k=s.value,E=v?t.DepthMode.disabled:e.depthModeForSublayer(k.overscaledZ-x,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,u.LESS),S=k.toUnwrapped(),T=n.getTile(k);if(!v||T&&T.hasData()){var M=v?k.projMatrix:e.transform.calculateProjMatrix(S,b),I=e.terrain&&v?e.terrain.stencilModeForRTTOverlap(k):m[k.overscaledZ],C=a?0:r.paint.get("raster-fade-duration");T.registerFadeDuration(C);var P=n.findLoadedParent(k,0),A=jn(T,P,n,e.transform,C),L=void 0,D=void 0;e.terrain&&e.terrain.prepareDrawTile();var R="nearest"===r.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;l.activeTexture.set(u.TEXTURE0),T.texture.bind(R,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),P?(P.texture.bind(R,u.CLAMP_TO_EDGE),L=Math.pow(2,P.tileID.overscaledZ-T.tileID.overscaledZ),D=[T.tileID.canonical.x*L%1,T.tileID.canonical.y*L%1]):T.texture.bind(R,u.CLAMP_TO_EDGE),T.texture.useMipmap&&l.extTextureFilterAnisotropic&&e.transform.pitch>20&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax);var O=fr(M,D||[0,0],L||1,A,r,c instanceof Ut?c.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(l,p,S),c instanceof Ut)c.boundsBuffer&&c.boundsSegments&&p.draw(l,u.TRIANGLES,E,t.StencilMode.disabled,d,t.CullFaceMode.disabled,O,r.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments);else{var z=e.getTileBoundsBuffers(T),N=z.tileBoundsBuffer,F=z.tileBoundsIndexBuffer,B=z.tileBoundsSegments;p.draw(l,u.TRIANGLES,E,I,d,t.CullFaceMode.disabled,O,r.id,N,F,B)}}}}catch(j){w.e(j)}finally{w.f()}e.resetStencilClippingMasks()}},background:function(e,n,r,i){var o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0!==a){var s=e.context,l=s.gl,u=e.transform,c=u.tileSize,h=r.paint.get("background-pattern");if(!e.isPatternMissing(h)){var p=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===p){var d,v=t.StencilMode.disabled,y=e.depthModeForSublayer(0,"opaque"===p?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),g=e.colorModeForRenderPass(),m=e.useProgram(h?"backgroundPattern":"background"),_=i;_||(d=e.getBackgroundTiles(),_=Object.values(d).map((function(t){return t.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));var x,b=f(_);try{for(b.s();!(x=b.n()).done;){var w=x.value,k=w.toUnwrapped(),E=i?w.projMatrix:e.transform.calculateProjMatrix(k);e.prepareDrawTile();var S=n?n.getTile(w):d?d[w.key]:new t.Tile(w,c,u.zoom,e),T=h?xr(E,a,e,h,{tileID:w,tileSize:c}):_r(E,a,o);e.prepareDrawProgram(s,m,k);var M=e.getTileBoundsBuffers(S),I=M.tileBoundsBuffer,C=M.tileBoundsIndexBuffer,P=M.tileBoundsSegments;m.draw(s,l.TRIANGLES,y,v,g,t.CullFaceMode.disabled,T,r.id,I,C,P)}}catch(A){b.e(A)}finally{b.f()}}}}},sky:function(e,n,r){var i=e.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:t.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0!==a){var s=e.context,l=r.paint.get("sky-type"),u=new t.DepthMode(s.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),c=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,n,r,i){var o=e.context,a=o.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Gr(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(var l=0;l<6;++l)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);var u=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),h=new Float64Array(16);t.identity(h),t.rotateY(h,h,.5*-Math.PI),qr(o,n,c,h,u,0),t.identity(h),t.rotateY(h,h,.5*Math.PI),qr(o,n,c,h,u,1),t.identity(h),t.rotateX(h,h,.5*-Math.PI),qr(o,n,c,h,u,2),t.identity(h),t.rotateX(h,h,.5*Math.PI),qr(o,n,c,h,u,3),t.identity(h),qr(o,n,c,h,u,4),t.identity(h),t.rotateY(h,h,Math.PI),qr(o,n,c,h,u,5),o.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,r,i,o){var a=e.context,s=a.gl,l=e.transform,u=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(t,e,n,r,i){return{u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(l.skyboxMatrix,n.getCenter(e,!1),0,i,o);e.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,u,a,c):"gradient"===l&&"sky"===e.renderPass&&function(e,n,r,i,o){var a=e.context,s=a.gl,l=e.transform,u=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Gr(a)),a.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(e,n,r,i,o){return{u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(r),u_opacity:i,u_temporal_offset:o}}(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,u,a,c)}},debug:function(t,e,n){for(var r=0;r<n.length;r++)Nr(t,e,n[r])},custom:function(e,n,r,i){var o=e.context,a=r.implementation;if(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes("custom")||e.terrain&&(e.terrain.renderingToTexture||"offscreen"===e.renderPass)&&r.isLayerDraped()){if("offscreen"===e.renderPass){var s=a.prerender;if(s){if(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),"globe"===e.transform.projection.name){var l=e.transform.pointMerc;s.call(a,o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[l.x,l.y],e.transform.pixelsPerMeterRatio)}else s.call(a,o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState()}}else if("translucent"===e.renderPass){if(e.terrain&&e.terrain.renderingToTexture){var u=a.renderToTile;if(u){var c=i[0].canonical,h=new t.MercatorCoordinate(c.x+i[0].wrap*(1<<c.z),c.y,c.z);o.setDepthMode(t.DepthMode.disabled),o.setStencilMode(t.StencilMode.disabled),o.setColorMode(e.colorModeForRenderPass()),e.setCustomLayerDefaults(),u.call(a,o.gl,h),o.setDirty(),e.setBaseState()}return}e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(t.StencilMode.disabled);var f="3d"===a.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(o.setDepthMode(f),"globe"===e.transform.projection.name){var p=e.transform.pointMerc;a.render(o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[p.x,p.y],e.transform.pixelsPerMeterRatio)}else a.render(o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}},Hr=function(){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this.context=new Nt(n,i),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return d(e,[{key:"updateTerrain",value:function(t,e){var n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new qn(this,t));var r=this._terrain;this.transform.elevation=n?r:null,r.update(t,this.transform,e)}}},{key:"_updateFog",value:function(t){var e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=e.getFovAdjustedRange(this.transform._fov),r=h(n,2),i=r[0],o=r[1];if(i>o)this.transform.fogCullDistSq=null;else{var a=i+.78*(o-i);this.transform.fogCullDistSq=a*a}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=f(this.style.order);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.style._layers[o].resize()}}catch(a){i.e(a)}finally{i.f()}}}},{key:"setup",value:function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);for(var s=new t.StructArrayLayout1ui2,l=0,u=[0,1,3,2,0];l<u.length;l++){var c=u[l];s.emplaceBack(c)}this.debugIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();var h=this.context.gl;this.stencilClearMode=new t.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Wr(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Bn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(e,n,r){if(n&&this.currentStencilSource!==n.id&&e.isTileClipped()&&r&&0!==r.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,o=!1,a=f(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(void 0===this._tileClippingMaskIDs[s.key]){o=!0;break}}}catch(b){a.e(b)}finally{a.f()}if(!o)return}this.currentStencilSource=n.id;var l=this.context,u=l.gl;this.nextStencilID+r.length>256&&this.clearStencil(),l.setColorMode(t.ColorMode.disabled),l.setDepthMode(t.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,p=f(r);try{for(p.s();!(h=p.n()).done;){var d=h.value,v=n.getTile(d),y=this._tileClippingMaskIDs[d.key]=this.nextStencilID++,g=this.getTileBoundsBuffers(v),m=g.tileBoundsBuffer,_=g.tileBoundsIndexBuffer,x=g.tileBoundsSegments;c.draw(l,u.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:u.ALWAYS,mask:0},y,255,u.KEEP,u.KEEP,u.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Bn(d.projMatrix),"$clipping",m,_,x)}}catch(b){p.e(b)}finally{p.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);var n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(e){var n=this.context.gl,i=e.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),o=i[i.length-1].overscaledZ,a=i[0].overscaledZ-o+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var s={},l=0;l<a;l++)s[l+o]=new t.StencilMode({func:n.GEQUAL,mask:255},l+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=a,[s,i]}return[r({},o,t.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var e=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(e,n,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(e,n){var r=this;this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();var i=this.style.order,o=this.style._sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in o){var p=o[h];l[h]=p.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var d=0;d<i.length;d++)if(this.style._layers[i[d]].is3D()){this.opaquePassCutoff=d;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),t.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var v,y=f(i);try{for(y.s();!(v=y.n()).done;){var g=v.value,m=this.style._layers[g],_=e._getLayerSourceCache(m);if(m.hasOffscreenPass()&&!m.isHidden(this.transform.zoom)){var x=_?u[_.id]:void 0;("custom"===m.type||m.isSky()||x&&x.length)&&this.renderLayer(this,_,m,x)}}}catch(A){y.e(A)}finally{y.f()}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon];var b=this.terrain;if(b&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&b.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[i[this.currentLayer]],k=e._getLayerSourceCache(w);if(!w.isSky()){var E=k?u[k.id]:void 0;this._renderTileClippingMasks(w,k,E),this.renderLayer(this,k,w,E)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){var r=e.context,i=r.gl,o=e.transform,a=new t.DepthMode(i.LEQUAL,t.DepthMode.ReadOnly,[0,1]),s=e.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(o.zoom),u=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),f=t.identity$1([]);t.rotateY$1(f,f,-t.degToRad(o._center.lng)),t.rotateX$1(f,f,t.degToRad(o._center.lat)),t.rotateZ$1(f,f,o.angle),t.rotateX$1(f,f,-o._pitch);var p=t.fromQuat(new Float32Array(16),f),d=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),v=5e-4,y=t.mapValue(n.properties.get("horizon-blend"),0,1,v,.25),g=t.globeUseCustomAntiAliasing(e,r,o)&&y===v?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,m=e.frameCounter/1e3%1,_=t.length(o.globeCenterInViewSpace),x=Math.sqrt(Math.pow(_,2)-Math.pow(g,2)),b=Math.acos(x/_),w=function(e,n,r,i,o,a,s,l,u,c,h,f,p,d){return{u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:u,u_space_color:c,u_star_intensity:h,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:f,u_horizon_angle:p,u_rotation_matrix:d}}(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,y,u,c,h,d,m,b,p);e.prepareDrawProgram(r,s);var k=e.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,a,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,w,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],T=e._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,T,S,T?u[T.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var M=this.style._layers[i[this.currentLayer]],I=e._getLayerSourceCache(M);if(M.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(M)){if(M.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var C=I?("symbol"===M.type?c:u)[I.id]:void 0;this._renderTileClippingMasks(M,I,I?l[I.id]:void 0),this.renderLayer(this,I,M,C),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){var P=null;t.values(this.style._layers).forEach((function(t){var n=e._getLayerSourceCache(t);n&&!t.isHidden(r.transform.zoom)&&(!P||P.getSource().maxzoom<n.getSource().maxzoom)&&(P=n)})),P&&this.options.showTileBoundaries&&Xr.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(t){var e=t.transform.padding;Fr(t,t.transform.height-(e.top||0),3,Lr),Fr(t,e.bottom||0,3,Dr),Br(t,e.left||0,3,Rr),Br(t,t.transform.width-(e.right||0),3,Or);var n=t.transform.centerPoint;!function(t,e,n,r){jr(t,e-1,n-10,2,20,r),jr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,zr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(n.type)||t.terrain&&"custom"===n.type)&&Xr[n.type](t,e,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var t=this.gpuTimers;return this.gpuTimers={},t}},{key:"collectDeferredRenderGpuQueries",value:function(){var t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}},{key:"queryGpuTimers",value:function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}},{key:"queryGpuTimeDeferredRender",value:function(t){if(!this.options.gpuTimingDeferredRender)return 0;var e,n=this.context.extTimerQuery,r=0,i=f(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r+=n.getQueryObjectEXT(o,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(o)}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"translatePosMatrix",value:function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[o?r[0]:G(n,r[0],this.transform.zoom),o?r[1]:G(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c}},{key:"saveTileTexture",value:function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}},{key:"getTileTexture",value:function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null}},{key:"isPatternMissing",value:function(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}},{key:"terrainRenderModeElevated",value:function(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}},{key:"currentGlobalDefines",value:function(){var t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),e&&r.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),t&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}},{key:"useProgram",value:function(t,e,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),o=Zn.cacheKey(kn[t],t,i,e);return this.cache[o]||(this.cache[o]=new Zn(this.context,t,kn[t],e,br[t],i)),this.cache[o]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(e,n,r){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var o=i.getOpacity(this.transform.pitch),a=function(e,n,r,i,o,a,s,l,u,c,h){var f=e.transform,p=n.properties.get("color").toArray01();p[3]=i;var d=e.frameCounter/1e3%1;return{u_fog_matrix:r?f.calculateFogTileMatrix(r):e.identityMat,u_fog_range:n.getFovAdjustedRange(f._fov),u_fog_color:p,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:d,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:c,u_viewport:h,u_globe_transition:t.globeToMercatorTransition(f.zoom),u_is_globe:+("globe"===f.projection.name)}}(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,a)}}}},{key:"setTileLoadedFlag",value:function(t){this.tileLoaded=t}},{key:"saveCanvasCopy",value:function(){var t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}},{key:"canvasCopy",value:function(){var t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var e,n=this._backgroundTiles,r=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),o=f(i);try{for(o.s();!(e=o.n()).done;){var a=e.value;r[a.key]=n[a.key]||new t.Tile(a,512,this.transform.tileZoom,this)}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),e}(),Yr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(p(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=r,this.right=i}return d(e,[{key:"interpolate",value:function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}},{key:"getCenter",value:function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}();function Kr(e,n){var r=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,r)}function Jr(e,n){var r=t.identity$1([]);return t.rotateZ$1(r,r,-n),t.rotateX$1(r,r,-e),r}function Qr(e,n){var r=[e[0],e[1],0],i=[n[0],n[1],0];if(t.length(r)>=1e-15){var o=t.normalize([],r);t.scale$2(i,o,t.dot(i,o)),n[0]=i[0],n[1]=i[1]}var a=t.cross([],n,e);if(t.len(a)<1e-15)return null;var s=Math.atan2(-a[1],a[0]);return Jr(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),s)}var $r=function(){function e(t,n){p(this,e),this.position=t,this.orientation=n}return d(e,[{key:"position",get:function(){return this._position},set:function(e){if(e){var n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(e,n){if(this.orientation=null,this.position){var r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Qr(a,n)}}},{key:"setPitchBearing",value:function(e,n){this.orientation=Jr(t.degToRad(e),t.degToRad(-n))}}]),e}(),ti=function(){function e(n,r){p(this,e),this._transform=t.identity([]),this.orientation=r,this.position=n}return d(e,[{key:"mercatorPosition",get:function(){var e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}},{key:"position",get:function(){var e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]},set:function(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e||t.identity$1([]),e&&Kr(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}},{key:"setPitchBearing",value:function(t,e){this._orientation=Jr(t,e),Kr(this._transform,this._orientation)}},{key:"forward",value:function(){var e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}},{key:"up",value:function(){var e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}},{key:"right",value:function(){var e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}},{key:"getCameraToWorld",value:function(e,n){var r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,n)),r}},{key:"getWorldToCameraPosition",value:function(e,n,r){var i=this.position;t.scale$2(i,i,-e);var o=new Float64Array(16);return t.fromScaling(o,[r,r,r]),t.translate(o,o,i),o[10]*=n,o}},{key:"getWorldToCamera",value:function(e,n){var r=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale$2(o,o,-e),t.fromQuat(r,i),t.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(e,n,r,i){var o=new Float64Array(16);return t.perspective(o,e,n,r,i),o}},{key:"getDistanceToElevation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}},{key:"clone",value:function(){return new e(c(this.position),c(this.orientation))}}]),e}();function ei(e,n){var r=ri(e.projection,e.zoom,e.width,e.height),i=function(e,n,r,i,o){var a=new t.LngLat(r.lng-180*ii,r.lat),s=new t.LngLat(r.lng+180*ii,r.lat),l=e.project(a.lng,a.lat),u=e.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=t.MercatorCoordinate.fromLngLat(r);h.y=t.clamp(h.y,-1+ii,1-ii);var f=h.toLngLat(),p=e.project(f.lng,f.lat),d=t.MercatorCoordinate.fromLngLat(f);d.x+=ii;var v=d.toLngLat(),y=e.project(v.lng,v.lat),g=ai(y.x-p.x,y.y-p.y,c),m=t.MercatorCoordinate.fromLngLat(f);m.y+=ii;var _=m.toLngLat(),x=e.project(_.lng,_.lat),b=ai(x.x-p.x,x.y-p.y,c),w=Math.abs(g.x)/Math.abs(b.y),k=t.identity([]);t.rotateZ(k,k,-c*(1-(o?0:i)));var E=t.identity([]);return t.scale(E,E,[1,1-(1-w)*i,1]),E[4]=-b.x/b.y*i,t.rotateZ(E,E,c),t.multiply(E,k,E),E}(e.projection,0,e.center,r,n),o=ni(e);return t.scale(i,i,[o,o,1]),i}function ni(e){var n=e.projection,r=ri(e.projection,e.zoom,e.width,e.height),i=oi(n,e.center),o=oi(n,t.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function ri(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=e.range;if(!a)return 0;var s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return t.smoothstep(a[0]+l,a[1]+l,n)}var ii=1/4e4;function oi(e,n){var r=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(n.lng-180*ii,r),o=new t.LngLat(n.lng+180*ii,r),a=e.project(i.lng,r),s=e.project(o.lng,r),l=t.MercatorCoordinate.fromLngLat(i),u=t.MercatorCoordinate.fromLngLat(o),c=s.x-a.x,h=s.y-a.y,f=u.x-l.x,p=u.y-l.y,d=Math.sqrt((f*f+p*p)/(c*c+h*h));return Math.log(d)/Math.LN2}function ai(t,e,n){var r=Math.cos(n),i=Math.sin(n);return{x:t*r-e*i,y:t*i+e*r}}var si=function(){function n(e,r,i,o,a,s,l){p(this,n),this.tileSize=512,this._renderWorldCopies=void 0===a||a,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==o?60:o,this.setProjection(s),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Yr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ti,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return d(n,[{key:"clone",value:function(){var t=new n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}},{key:"elevation",get:function(){return this._elevation},set:function(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}},{key:"getProjection",value:function(){return t.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(n){this.projectionOptions=n||{name:"mercator"};var r=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);var i=!e(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});var n=e!==this.projection.name;return n&&this._calcMatrices(),n}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSizeForFog",get:function(){var t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}},{key:"cameraWorldSize",get:function(){var t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new t.Point(this.width,this.height)}},{key:"bearing",get:function(){return t.wrap(this.rotation,-180,180)},set:function(t){this.rotation=t}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(e){var n,r=-e*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"aspect",get:function(){return this.width/this.height}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}},{key:"fovX",get:function(){return this._fov}},{key:"fovY",get:function(){var t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop(),i=0,o=0,a=0;a<n.length;a++){var s=new t.Point(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=e.pointCoordinate(s);if(l){var u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*u,o+=u}}return 0===o?NaN:i/o}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,r=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(e){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));n=e.z<this._camera.position[2]?[r.x,r.y,r.z]:[e.x,e.y,e.z];var i=t.length(t.sub([],this._camera.position,n));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(e){if(this.height&&(e.position||e.orientation)){this._updateCameraState();var n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){var r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var e=this._camera.position,n=new $r;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);var n=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;var i=Qr(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(e){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/r,i/n),this._camera.position=e}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(t){return this._edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"getVisibleUnwrappedCoordinates",value:function(e){var n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n}},{key:"coveringTiles",value:function(e){var n=this,r=this.coveringZoomLevel(e),i=r,o=this.elevation&&!e.isTerrainDEM,a="mercator"===this.projection.name;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var s=this.locationCoordinate(this.center),l=this.center.lat,u=1<<r,c=[u*s.x,u*s.y,0],h="globe"===this.projection.name,f=!h,p=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,f),d=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),v=u*t.mercatorZfromAltitude(1,this.center.lat),y=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),g=[u*d.x,u*d.y,y*(f?1:v)],m=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,x=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=e.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?ni(this):1,k=function(e){var r=1/4e4,i=new t.MercatorCoordinate(e.x+r,e.y,e.z),o=new t.MercatorCoordinate(e.x,e.y+r,e.z),a=e.toLngLat(),s=i.toLngLat(),l=o.toLngLat(),u=n.locationCoordinate(a),c=n.locationCoordinate(s),h=n.locationCoordinate(l),f=Math.hypot(c.x-u.x,c.y-u.y),p=Math.hypot(h.x-u.x,h.y-u.y);return Math.sqrt(f*p)*w/r},E=function(e){var r=x,i=b;return{aabb:t.tileAABB(n,u,0,0,0,e,i,r,n.projection),zoom:0,x:0,y:0,minZ:i,maxZ:r,wrap:e,fullyVisible:!1}},S=[],T=[],M=r,I=e.reparseOverscaled?i:r,C=function(t){return t*t},P=C((y-this._centerAltitude)*v),A=function(t){if(n._elevation&&t.tileID&&a){var e=n._elevation.getMinMaxForTile(t.tileID),r=t.aabb;e?(r.min[2]=e.min,r.max[2]=e.max,r.center[2]=(r.min[2]+r.max[2])/2):(t.shouldSplit=L(t),t.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=n._centerAltitude))}},L=function(e){if(e.zoom<_)return!0;if(e.zoom===M)return!1;if(null!=e.shouldSplit)return e.shouldSplit;var r=e.aabb.distanceX(g),a=e.aabb.distanceY(g),s=P,u=1;if(h){s=C(e.aabb.distanceZ(g));var c=Math.pow(2,e.zoom),f=t.latFromMercatorY((e.y+1)/c),p=t.latFromMercatorY(e.y/c),d=Math.min(Math.max(l,f),p),y=t.circumferenceAtLatitude(d)/t.circumferenceAtLatitude(l);if(u=d===l?1/Math.max(1,n._mercatorScaleRatio-.3):Math.min(1,y/n._mercatorScaleRatio),n.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===M-1&&y>=.9)return!0}else if(o&&(s=C(e.aabb.distanceZ(g)*v)),n.projection.isReprojectedInTileSpace&&i<=5){var x=Math.pow(2,e.zoom),b=k(new t.MercatorCoordinate((e.x+.5)/x,(e.y+.5)/x));u=b>.85?1:b}var w=r*r+a*a+s,E=C((1<<M-e.zoom)*m*u*function(t,e){if(e*C(.707)<t)return 1;var n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,P),w));return w<E};if(this.renderWorldCopies)for(var D=1;D<=3;D++)S.push(E(-D)),S.push(E(D));for(S.push(E(0));S.length>0;){var R=S.pop(),O=R.x,z=R.y,N=R.fullyVisible;if(!N){var F=R.aabb.intersects(p);if(0===F)continue;N=2===F}if(R.zoom!==M&&L(R))for(var B=0;B<4;B++){var j=(O<<1)+B%2,U=(z<<1)+(B>>1),V={aabb:a?R.aabb.quadrant(B):t.tileAABB(this,u,R.zoom+1,j,U,R.wrap,R.minZ,R.maxZ,this.projection),zoom:R.zoom+1,x:j,y:U,wrap:R.wrap,fullyVisible:N,tileID:void 0,shouldSplit:void 0,minZ:R.minZ,maxZ:R.maxZ};o&&!h&&(V.tileID=new t.OverscaledTileID(R.zoom+1===M?I:R.zoom+1,R.wrap,R.zoom+1,j,U),A(V)),S.push(V)}else{var G=R.zoom===M?I:R.zoom;if(e.minzoom&&e.minzoom>G)continue;var q=c[0]-(.5+O+(R.wrap<<R.zoom))*(1<<r-R.zoom),Z=c[1]-.5-z,W=R.tileID?R.tileID:new t.OverscaledTileID(G,R.wrap,R.zoom,O,z);T.push({tileID:W,distanceSq:q*q+Z*Z})}}if(this.fogCullDistSq){var X=this.fogCullDistSq,H=this.horizonLineFromTop();T=T.filter((function(r){var i=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=n.calculateFogTileMatrix(r.tileID.toUnwrapped());t.transformMat4$1(i,i,a),t.transformMat4$1(o,o,a);var s=t.getAABBPointSquareDist(i,o);if(0===s)return!0;var l=!1,u=n._elevation;if(u&&s>X&&0!==H){var c,h=n.calculateProjMatrix(r.tileID.toUnwrapped());e.isTerrainDEM||(c=u.getMinMaxForTile(r.tileID)),c||(c={min:b,max:x});var f=t.furthestTileCorner(n.rotation),p=[f[0]*t.EXTENT,f[1]*t.EXTENT,c.max];t.transformMat4(p,p,h),l=(1-p[1])*n.height*.5<H}return s<X||l}))}return T.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(e){var n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=this.projection.project(e.lng,n);return new t.Point(r.x*this.worldSize,r.y*this.worldSize)}},{key:"unproject",value:function(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"pointMerc",get:function(){return this.point._div(this.worldSize)}},{key:"pixelsPerMeterRatio",get:function(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}},{key:"setLocationAtPoint",value:function(e,n){var r,i,o=this.centerPoint;if("globe"===this.projection.name){var a=this.worldSize;r=(n.x-o.x)/a,i=(n.y-o.y)/a}else{var s=this.pointCoordinate(n),l=this.pointCoordinate(o);r=s.x-l.x,i=s.y-l.y}var u=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(u.x-r,u.y-i))}},{key:"setLocation",value:function(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(t){return this.projection.locationPoint(this,t)}},{key:"locationPoint3D",value:function(t){return this.projection.locationPoint(this,t,!0)}},{key:"pointLocation",value:function(t){return this.coordinateLocation(this.pointCoordinate(t))}},{key:"pointLocation3D",value:function(t){return this.coordinateLocation(this.pointCoordinate3D(t))}},{key:"locationCoordinate",value:function(e,n){var r=n?t.mercatorZfromAltitude(n,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,r)}},{key:"coordinateLocation",value:function(t){return this.projection.unproject(t.x,t.y)}},{key:"pointRayIntersection",value:function(e,n){var r=null!=n?n:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(i,i,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);var a=o[3];t.scale$1(i,i,1/i[3]),t.scale$1(o,o,1/a);var s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(r,r,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(r,r,1/r[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(r,r,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(e){var n=e.p0,r=e.p1,i=e.t,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],r[0],i)/this.worldSize,t.number(n[1],r[1],i)/this.worldSize,t.number(o,a,i))}},{key:"pointCoordinate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,t.x,t.y,e)}},{key:"pointCoordinate3D",value:function(e){if(!this.elevation)return this.pointCoordinate(e);var n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);for(var o=.02*i,a=e.clone(),s=0;s<10&&i-r>o;s++){a.y=t.number(r,i,.66);var l=this.projection.pointCoordinate3D(this,a.x,a.y);l?(i=a.y,n=l):r=a.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}},{key:"isPointAboveHorizon",value:function(t){return this.projection.isPointAboveHorizon(this,t)}},{key:"isPointOnSurface",value:function(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(e);var n=this.pointCoordinate(e);return n.y>=0&&n.y<=1}},{key:"_coordinatePoint",value:function(e,n){var r=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new t.Point(i[0]/i[3],i[1]/i[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBoundsNonRectangular",value:function(){var e=this,n=this._edgeInsets,r=n.top,i=n.left,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=this.pointLocation3D(new t.Point(i,r)),l=this.pointLocation3D(new t.Point(a,r)),u=this.pointLocation3D(new t.Point(a,o)),c=this.pointLocation3D(new t.Point(i,o)),f=Math.min(s.lng,l.lng,u.lng,c.lng),p=Math.max(s.lng,l.lng,u.lng,c.lng),d=Math.min(s.lat,l.lat,u.lat,c.lat),v=Math.max(s.lat,l.lat,u.lat,c.lat),y=Math.pow(2,-this.zoom)/16*270,g="globe"===this.projection.name?1:4,m=function n(r,i,o,a,s){var l=(r+o)/2,u=(i+a)/2,c=new t.Point(l,u),h=e.pointLocation3D(c),m=h.lng,_=h.lat,x=Math.max(0,f-m,d-_,m-p,_-v);f=Math.min(f,m),p=Math.max(p,m),d=Math.min(d,_),v=Math.max(v,_),(s<g||x>y)&&(n(r,i,l,u,s+1),n(l,u,o,a,s+1))};if(m(i,r,a,r,1),m(a,r,a,o,1),m(a,o,i,o,1),m(i,o,i,r,1),"globe"===this.projection.name){var _=t.polesInViewport(this),x=h(_,2),b=x[0],w=x[1];b?(v=90,p=180,f=-180):w&&(d=-90,p=180,f=-180)}return new t.LngLatBounds(new t.LngLat(f,d),new t.LngLat(p,v))}},{key:"_getBoundsRectangular",value:function(e,n){var r=this._edgeInsets,i=r.top,o=r.left,a=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,l=new t.Point(o,i),u=new t.Point(s,i),c=new t.Point(s,a),h=new t.Point(o,a),f=this.pointCoordinate(l,e),p=this.pointCoordinate(u,e),d=this.pointCoordinate(c,n),v=this.pointCoordinate(h,n),y=function(t,e){return(e.y-t.y)/(e.x-t.x)};return f.y>1&&p.y>=0?f=new t.MercatorCoordinate((1-v.y)/y(v,f)+v.x,1):f.y<0&&p.y<=1&&(f=new t.MercatorCoordinate(-v.y/y(v,f)+v.x,0)),p.y>1&&f.y>=0?p=new t.MercatorCoordinate((1-d.y)/y(d,p)+d.x,1):p.y<0&&f.y<=1&&(p=new t.MercatorCoordinate(-d.y/y(d,p)+d.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(v)).extend(this.coordinateLocation(d))}},{key:"_getBoundsRectangularTerrain",value:function(){var t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);var e=t.visibleDemTiles.reduce((function(t,e){if(e.dem){var n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(e.min*t.exaggeration(),e.max*t.exaggeration())}},{key:"getBounds",value:function(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}},{key:"horizonLineFromTop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(t,e){return this.projection.createTileMatrix(this,e,t)}},{key:"calculateDistanceTileData",value:function(e){var n=e.key,r=this._distanceTileDataCache;if(r[n])return r[n];var i=e.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*e.wrap)*s,u=i.y*s,c=this.point;c.x*=a/this.worldSize,c.y*=a/this.worldSize;var h=this.angle,f=Math.sin(-h),p=-Math.cos(-h);return r[n]={bearing:[f,p],center:[(c.x-l)*o,(c.y-u)*o],scale:s/t.EXTENT*o},r[n]}},{key:"calculateFogTileMatrix",value:function(e){var n=e.key,r=this._fogTileMatrixCache;if(r[n])return r[n];var i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}},{key:"calculateProjMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];var o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(e){var n=e.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];var i=function(e,n){var r,i,o,a,s,l,u,c,h=e.tileTransform.scale*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return r=new Float32Array(4),a=(i=n.inverseAdjustmentMatrix)[1],s=i[2],l=i[3],c=(o=[h,h])[1],r[0]=i[0]*(u=o[0]),r[1]=a*u,r[2]=s*c,r[3]=l*c,r}(e,this);return r[n]=i,r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"globeToMercatorMatrix",value:function(){if("globe"===this.projection.name){var e=1/this.worldSize,n=t.fromScaling([],[e,e,e]);return t.multiply(n,n,this.globeMatrix),n}}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var e=this._elevation;this._updateCameraState();var n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=t.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,t.normalize(i,i);var a=e.raycast(r,i,e.exaggeration());if(a){var s=t.scaleAndAdd([],r,i,a),l=new t.MercatorCoordinate(s[0],s[1],t.mercatorZfromAltitude(s[2],t.latFromMercatorY(s[1]))),u=(l.z+t.length([l.x-r[0],l.y-r[1],l.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(u),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._elevation){var n=this._elevation,r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),a=n.getAtPointOrZero(o(t.MercatorCoordinate,c(i))),s=this.pixelsPerMeter/this.worldSize*a,l=this._minimumHeightOverTerrain(),u=i[2]-s;if(u<=l)if(u<0||e){var h=this.locationCoordinate(this._center,this._centerAltitude),f=[i[0],i[1],h.z-i[2]],p=t.length(f);f[2]-=(l-u)/this._pixelsPerMercatorPixel;var d=t.length(f);if(0===d)return;t.scale$2(f,f,p/d*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],h.z*this._pixelsPerMercatorPixel-f[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){var n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}var r=this._unmodified,i=this.point,o=i.x,a=i.y,s=0,l=o,u=a,c=this.width/2,h=this.height/2,f=this.worldMinY*this.scale,p=this.worldMaxY*this.scale;if(a-h<f&&(u=f+h),a+h>p&&(u=p-h),p-f<this.height&&(s=Math.max(s,this.height/(p-f)),u=(p+f)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var d=this.worldMinX*this.scale,v=this.worldMaxX*this.scale,y=this.worldSize/2-(d+v)/2;(l=(o+y+this.worldSize)%this.worldSize-y)-c<d&&(l=d+c),l+c>v&&(l=v-c),v-d<this.width&&(s=Math.max(s,this.width/(v-d)),l=(v+d)/2)}l===o&&u===a||(this.center=this.unproject(new t.Point(l,u))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));var r=ri(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-e.x/this.width,a[9]=2*e.y/this.height;var s=t.mul([],a,o);if(this.projection.isReprojectedInTileSpace){var l=this.locationCoordinate(this.center),u=t.identity([]);t.translate(u,u,[l.x*this.worldSize,l.y*this.worldSize,0]),t.multiply(u,u,ei(this)),t.translate(u,u,[-l.x*this.worldSize,-l.y*this.worldSize,0]),t.multiply(s,s,u),this.inverseAdjustmentMatrix=function(t){var e=ei(t,!0);return A([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);var c=t.invert([],a);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);var h=new Float32Array(16);t.identity(h),t.scale(h,h,[1,-1,1]),t.rotateX(h,h,this._pitch),t.rotateZ(h,h,this.angle);var f=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),p=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;f[8]=2*-e.x/this.width,f[9]=2*(e.y+p)/this.height,this.skyboxMatrix=t.multiply(h,f,h);var d=this.point,v=d.x,y=d.y,g=this.width%2/2,m=this.height%2/2,_=Math.cos(this.angle),x=Math.sin(this.angle),b=v-Math.round(v)+_*g+x*m,w=y-Math.round(y)+_*m+x*g,k=new Float64Array(s);if(t.translate(k,k,[b>.5?b-1:b,w>.5?w-1:w,0]),this.alignedProjMatrix=k,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=t.create(),t.scale(s,s,[1,-1,1]),t.translate(s,s,[-1,-1,0]),t.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);var E=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(E,E,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[e,e,n];t.scale$2(o,o,i),t.scale$2(r,r,-1),t.multiply$2(r,r,o);var a=t.create();t.translate(a,a,r),t.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,i)}},{key:"_computeCameraPosition",value:function(t){var e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,t/this.worldSize*this._centerAltitude-n[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(e){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=e[2],o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var e=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,o=r.bearing,a=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),l=Math.max((e[2]-a)/Math.cos(i),s),u=this._zoomFromMercatorZ(l);t.scaleAndAdd(e,e,n,l),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(o,-Math.PI,Math.PI),this._setZoom(t.clamp(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(t){return Math.pow(2,t)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}},{key:"_minimumHeightOverTerrain",value:function(){var t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}},{key:"_zoomFromMercatorZ",value:function(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}},{key:"zoomFromMercatorZAdjusted",value:function(e){for(var n=0,r=t.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;r-n>1e-6&&r>n;){var a=n+.5*(r-n),s=this.tileSize*Math.pow(2,a),l=this.getCameraToCenterDistance(this.projection,a,s),u=this.scaleZoom(l/(e*this.tileSize)),c=Math.abs(a-u);c<o&&(o=c,i=a),a<u?n=a:r=a}return i}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(e,n){var r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new t.Point(r,o),new t.Point(i,a),new t.Point(r,a),new t.Point(i,o)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var f=h[c],p=this.pointRayIntersection(f);if(p.t<0)return!0;var d=this.rayIntersectionCoordinate(p);if(d.x<l||d.y<0||d.x>u||d.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(e,n){var r=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var e=function(e,n){var r=h(e,3),i=[r[0],r[1],r[2],1];t.transformMat4$1(i,i,n);var o=i[3]=Math.max(i[3],1e-6);return i[0]/=o,i[1]/=o,i[2]/=o,i}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(e[0],e[1])}var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,n))}},{key:"getCameraToCenterDistance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize,r=ri(t,e,this.width,this.height,1024),i=t.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}},{key:"getWorldToCameraMatrix",value:function(){var e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}]),n}();function li(t,e){var n=!1,r=null,i=function i(){r=null,n&&(t(),r=setTimeout(i,e),n=!1)};return function(){return n=!0,r||i(),r}}var ui=function(){function e(n){p(this,e),this._hashName=n&&encodeURIComponent(n),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=li(this._updateHashUnthrottled.bind(this),300)}return d(e,[{key:"addTo",value:function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var e=this._map;if(!e)return"";var n=ci(e);if(this._hashName){var r=this._hashName,i=!1,o=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===r?(i=!0,"".concat(e,"=").concat(n)):t})).filter((function(t){return t}));return i||o.push("".concat(r,"=").concat(n)),"#".concat(o.join("&"))}return"#".concat(n)}},{key:"_getCurrentHash",value:function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var t=this._map;if(!t)return!1;var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(t){return isNaN(t)}))){var n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}]),e}();function ci(t,e){var n=t.getCenter(),r=Math.round(100*t.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=t.getBearing(),u=t.getPitch(),c=e?"/".concat(a,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(a);return(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/".concat(Math.round(u))),c}var hi={linearity:.3,easing:t.bezier(0,0,.3,1)},fi=t.extend({deceleration:2500,maxSpeed:1400},hi),pi=t.extend({deceleration:20,maxSpeed:1400},hi),di=t.extend({deceleration:1e3,maxSpeed:360},hi),vi=t.extend({deceleration:1e3,maxSpeed:90},hi),yi=function(){function e(t){p(this,e),this._map=t,this.clear()}return d(e,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}},{key:"_drainInertiaBuffer",value:function(){for(var e=this._inertiaBuffer,n=t.exported.now();e.length>0&&n-e[0].time>160;)e.shift()}},{key:"_onMoveEnd",value:function(e){if(!this._map._prefersReducedMotion()&&(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2))){var n,r={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},i=f(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var o=n.value.settings;r.zoom+=o.zoomDelta||0,r.bearing+=o.bearingDelta||0,r.pitch+=o.pitchDelta||0,o.panDelta&&r.pan._add(o.panDelta),o.around&&(r.around=o.around),o.pinchAround&&(r.pinchAround=o.pinchAround)}}catch(d){i.e(d)}finally{i.f()}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var l=mi(r.pan.mag(),a,t.extend({},fi,e||{}));s.offset=r.pan.mult(l.amount/r.pan.mag()),s.center=this._map.transform.center,gi(s,l)}if(r.zoom){var u=mi(r.zoom,a,pi);s.zoom=this._map.transform.zoom+u.amount,gi(s,u)}if(r.bearing){var c=mi(r.bearing,a,di);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),gi(s,c)}if(r.pitch){var h=mi(r.pitch,a,vi);s.pitch=this._map.transform.pitch+h.amount,gi(s,h)}if(s.zoom||s.bearing){var p=void 0===r.pinchAround?r.around:r.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),e}();function gi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function mi(e,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}var _i=function(e){v(r,e);var n=y(r);function r(e,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p(this,r);var l=M(i.getCanvasContainer(),o),u=i.unproject(l);return(a=n.call(this,e,t.extend({point:l,lngLat:u,originalEvent:o},s)))._defaultPrevented=!1,a.target=i,a}return d(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(t.Event),xi=function(e){v(r,e);var n=y(r);function r(e,i,o){var a;p(this,r);var s="touchend"===e?o.changedTouches:o.touches,l=I(i.getCanvasContainer(),s),u=l.map((function(t){return i.unproject(t)})),c=l.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.Point(0,0));return(a=n.call(this,e,{points:l,point:c,lngLats:u,lngLat:i.unproject(c),originalEvent:o}))._defaultPrevented=!1,a}return d(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(t.Event),bi=function(t){v(n,t);var e=y(n);function n(t,r,i){var o;return p(this,n),(o=e.call(this,t,{originalEvent:i}))._defaultPrevented=!1,o}return d(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(t.Event),wi=function(){function e(t,n){p(this,e),this._map=t,this._clickTolerance=n.clickTolerance}return d(e,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(t){return this._firePreventable(new bi(t.type,this._map,t))}},{key:"mousedown",value:function(t,e){return this._mousedownPos=e,this._firePreventable(new _i(t.type,this._map,t))}},{key:"mouseup",value:function(t){this._map.fire(new _i(t.type,this._map,t))}},{key:"preclick",value:function(e){var n=t.extend({},e);n.type="preclick",this._map.fire(new _i(n.type,this._map,n))}},{key:"click",value:function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new _i(t.type,this._map,t)))}},{key:"dblclick",value:function(t){return this._firePreventable(new _i(t.type,this._map,t))}},{key:"mouseover",value:function(t){this._map.fire(new _i(t.type,this._map,t))}},{key:"mouseout",value:function(t){this._map.fire(new _i(t.type,this._map,t))}},{key:"touchstart",value:function(t){return this._firePreventable(new xi(t.type,this._map,t))}},{key:"touchmove",value:function(t){this._map.fire(new xi(t.type,this._map,t))}},{key:"touchend",value:function(t){this._map.fire(new xi(t.type,this._map,t))}},{key:"touchcancel",value:function(t){this._map.fire(new xi(t.type,this._map,t))}},{key:"_firePreventable",value:function(t){if(this._map.fire(t),t.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),ki=function(){function t(e){p(this,t),this._map=e}return d(t,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(t){this._map.fire(new _i(t.type,this._map,t))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new _i(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Ei=function(){function e(t,n){p(this,e),this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}return d(e,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(k(),this._startPos=this._lastPos=e,this._active=!0)}},{key:"mousemoveWindow",value:function(t,e){var n=this;if(this._active){var r=e,i=this._startPos,o=this._lastPos;if(!(!i||!o||o.equals(r)||!this._box&&r.dist(i)<this._clickTolerance)){this._lastPos=r,this._box||(this._box=m("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var a=Math.min(i.x,r.x),s=Math.max(i.x,r.x),l=Math.min(i.y,r.y),u=Math.max(i.y,r.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(a,"px,").concat(l,"px)"),n._box.style.width=s-a+"px",n._box.style.height=u-l+"px")}))}}}},{key:"mouseupWindow",value:function(e,n){var r=this;if(this._active){var i=this._startPos,o=n;if(i&&0===e.button){if(this.reset(),T(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(i,o,r._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",e)}}}},{key:"keydown",value:function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),E(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}]),e}();function Si(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}var Ti=function(){function e(t){p(this,e),this.reset(),this.numTouches=t.numTouches}return d(e,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){var n,r=new t.Point(0,0),i=f(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r._add(o)}}catch(a){i.e(a)}finally{i.f()}return r.div(e.length)}(n),this.touches=Si(r,n)))}},{key:"touchmove",value:function(t,e,n){if(!this.aborted&&this.centroid){var r=Si(n,e);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),e}(),Mi=function(){function t(e){p(this,t),this.singleTap=new Ti(e),this.numTaps=e.numTaps,this.reset()}return d(t,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(t,e,n){this.singleTap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.singleTap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),t}(),Ii=function(){function t(){p(this,t),this._zoomIn=new Mi({numTouches:1,numTaps:2}),this._zoomOut=new Mi({numTouches:2,numTaps:1}),this.reset()}return d(t,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Ci={0:1,2:2},Pi=function(){function t(e){p(this,t),this.reset(),this._clickTolerance=e.clickTolerance||1}return d(t,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(t,e){return!1}},{key:"_move",value:function(t,e){return{}}},{key:"mousedown",value:function(t,e){if(!this._lastPoint){var n=C(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){var n=Ci[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}},{key:"mouseupWindow",value:function(t){this._lastPoint&&C(t)===this._eventButton&&(this._moved&&T(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Ai=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"mousedown",value:function(t,e){a(s(n.prototype),"mousedown",this).call(this,t,e),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(t,e){return 0===e&&!t.ctrlKey}},{key:"_move",value:function(t,e){return{around:e,panDelta:e.sub(t)}}}]),n}(Pi),Li=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_correctButton",value:function(t,e){return 0===e&&t.ctrlKey||2===e}},{key:"_move",value:function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(Pi),Di=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"_correctButton",value:function(t,e){return 0===e&&t.ctrlKey||2===e}},{key:"_move",value:function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(Pi),Ri=function(){function e(n,r){p(this,e),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return d(e,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}},{key:"touchstart",value:function(t,e,n){return this._calculateTransform(t,e,n)}},{key:"touchmove",value:function(e,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,r)}}},{key:"touchend",value:function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(e,n,r){r.length>0&&(this._active=!0);var i=Si(r,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var l in i){var u=i[l],c=this._touches[l];c&&(o._add(u),a._add(u.sub(c)),s++,i[l]=u)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var h=a.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=m("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var t=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){t._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),t._alertContainer.setAttribute("role","null")}),500)}}]),e}(),Oi=function(){function t(){p(this,t),this.reset()}return d(t,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(t){}},{key:"_move",value:function(t,e,n){return{}}},{key:"touchstart",value:function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}},{key:"touchmove",value:function(t,e,n){var r=this._firstTwoTouches;if(r){t.preventDefault();var i=h(r,2),o=i[0],a=i[1],s=zi(n,e,o),l=zi(n,e,a);if(s&&l){var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,t)}}}},{key:"touchend",value:function(t,e,n){if(this._firstTwoTouches){var r=h(this._firstTwoTouches,2),i=r[0],o=r[1],a=zi(n,e,i),s=zi(n,e,o);a&&s||(this._active&&T(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}();function zi(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Ni(t,e){return Math.log(t/e)/Math.LN2}var Fi=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(t){this._startDistance=this._distance=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ni(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ni(this._distance,n),pinchAround:e}}}]),n}(Oi);function Bi(t,e){return 180*t.angleWith(e)/Math.PI}var ji=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Bi(this._vector,n),pinchAround:e}}},{key:"_isBelowThreshold",value:function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;var r=Bi(t,n);return Math.abs(r)<e}}]),n}(Oi);function Ui(t){return Math.abs(t.y)>Math.abs(t.x)}var Vi=function(e){v(r,e);var n=y(r);function r(t){var e;return p(this,r),(e=n.call(this))._map=t,e}return d(r,[{key:"reset",value:function(){a(s(r.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(t){this._lastPoints=t,Ui(t[0].sub(t[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,n,r){var i=this._lastPoints;if(i){var o=e[0].sub(i[0]),a=e[1].sub(i[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return Ui(t)&&Ui(e)&&o}}}]),r}(Oi),Gi={panStep:100,bearingStep:15,pitchStep:10},qi=function(){function t(){p(this,t);var e=Gi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}return d(t,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Zi,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),t}();function Zi(t){return t*(2-t)}var Wi=4.000244140625,Xi=function(){function e(n,r){p(this,e),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return d(e,[{key:"setZoomRate",value:function(t){this._defaultZoomRate=t}},{key:"setWheelZoomRate",value:function(t){this._wheelZoomRate=t}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(e){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Wi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}}},{key:"_onTimeout",value:function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}},{key:"_start",value:function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var e=M(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;"wheel"===this._type&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);var r=function(){return n._terrainEnabled()&&e._aroundCoord?n.computeZoomRelativeTo(e._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Wi?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==o&&(o=1/o);var a=r(),s=Math.pow(2,a),l="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(l*o))),"wheel"===this._type&&(this._startZoom=a,this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:r(),h=this._startZoom,f=this._easing,p=!1;if("wheel"===this._type&&h&&f){var d=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),v=f(d);u=t.number(h,c,v),d<1?this._frameId||(this._frameId=!0):p=!0}else u=c,p=!0;return this._active=!0,p&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!p,zoomDelta:u-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.exported.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=m("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var t=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){t._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),t._alertContainer.setAttribute("role","null")}),200)}}]),e}(),Hi=function(){function t(e,n){p(this,t),this._clickZoom=e,this._tapZoom=n}return d(t,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),t}(),Yi=function(){function t(){p(this,t),this.reset()}return d(t,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Ki=function(){function t(){p(this,t),this._tap=new Mi({numTouches:1,numTaps:1}),this.reset()}return d(t,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}},{key:"touchmove",value:function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Ji=function(){function t(e,n,r){p(this,t),this._el=e,this._mousePan=n,this._touchPan=r}return d(t,[{key:"enable",value:function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),t}(),Qi=function(){function t(e,n,r){p(this,t),this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return d(t,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),t}(),$i=function(){function t(e,n,r,i){p(this,t),this._el=e,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return d(t,[{key:"enable",value:function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),t}(),to=function(t){return t.zoom||t.drag||t.pitch||t.rotate},eo=function(t){v(n,t);var e=y(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n)}(t.Event),no=function(){function e(){p(this,e),this.constants=[1,1,.01],this.radius=0}return d(e,[{key:"setup",value:function(e,n){var r=t.sub([],n,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);var n=t.scale$2([],e,this.radius);if(n[2]>0){var r=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),o=t.add([],n,t.scale$2([],t.sub([],t.add([],i,r),n),2));n[0]=o[0],n[1]=o[1]}return n}}]),e}();function ro(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var io=function(){function e(n,r){p(this,e),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yi(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new no,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];var o,a=f(this._listeners);try{for(a.s();!(o=a.n()).done;){var s=h(o.value,3),l=s[0],u=s[1],c=s[2];l.addEventListener(u,l===t.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(d){a.e(d)}finally{a.f()}}return d(e,[{key:"destroy",value:function(){var e,n=f(this._listeners);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,3),i=r[0],o=r[1],a=r[2];i.removeEventListener(o,i===t.window.document?this.handleWindowEvent:this.handleEvent,a)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new wi(e,t));var r=e.boxZoom=new Ei(e,t);this._add("boxZoom",r);var i=new Ii,o=new Yi;e.doubleClickZoom=new Hi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new Ki;this._add("tapDragZoom",a);var s=e.touchPitch=new Vi(e);this._add("touchPitch",s);var l=new Li(t),u=new Di(t);e.dragRotate=new Qi(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Ai(t),h=new Ri(e,t);e.dragPan=new Ji(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new ji,p=new Fi;e.touchZoomRotate=new $i(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ki(e));var d=e.scrollZoom=new Xi(e,this);this._add("scrollZoom",d,["mousePan"]);var v=e.keyboard=new qi;this._add("keyboard",v);for(var y=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<g.length;y++){var m=g[y];t.interactive&&t[m]&&e[m].enable(t[m])}}},{key:"_add",value:function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}},{key:"stop",value:function(t){if(!this._updatingCamera){var e,n=f(this._handlers);try{for(n.s();!(e=n.n()).done;)e.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}},{key:"isActive",value:function(){var t,e=f(this._handlers);try{for(e.s();!(t=e.n()).done;)if(t.value.handler.isActive())return!0}catch(n){e.e(n)}finally{e.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!to(this._eventsInProgress)||this.isZooming()}},{key:"_isDragging",value:function(){return!!this._eventsInProgress.drag}},{key:"_blockedByActive",value:function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(t){this.handleEvent(t,"".concat(t.type,"Window"))}},{key:"_getMapTouches",value:function(t){var e,n=[],r=f(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._el.contains(i.target)&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"handleEvent",value:function(t,e){this._updatingCamera=!0;var n,r="renderFrame"===t.type,i=r?void 0:t,o={needsRenderFrame:!1},a={},s={},l=t.touches?this._getMapTouches(t.touches):void 0,u=l?I(this._el,l):r?void 0:M(this._el,t),c=f(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,p=h.handlerName,d=h.handler,v=h.allowed;if(d.isEnabled()){var y=void 0;this._blockedByActive(s,v,p)?d.reset():d[e||t.type]&&(y=d[e||t.type](t,u,l),this.mergeHandlerResult(o,a,y,p,i),y&&y.needsRenderFrame&&this._triggerRenderFrame()),(y||d.isActive())&&(s[p]=d)}}}catch(x){c.e(x)}finally{c.f()}var g={};for(var m in this._previousActiveHandlers)s[m]||(g[m]=i);this._previousActiveHandlers=s,(Object.keys(g).length||ro(o))&&(this._changes.push([o,a,g]),this._triggerRenderFrame()),(Object.keys(s).length||ro(o))&&this._map._stop(!0),this._updatingCamera=!1;var _=o.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(e,n,r,i,o){if(r){t.extend(e,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}}},{key:"_applyChanges",value:function(){var e,n={},r={},i={},o=f(this._changes);try{for(o.s();!(e=o.n()).done;){var a=h(e.value,3),s=a[0],l=a[1],u=a[2];s.panDelta&&(n.panDelta=(n.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),t.extend(r,l),t.extend(i,u)}}catch(c){o.e(c)}finally{o.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(e,n,r){var i=this,o=this._map,a=o.transform,s=function(t){return[t.x,t.y,t.z]};if(function(t){var e=i._eventsInProgress.drag;return e&&!i._handlersById[e.handlerName].isActive()}()&&!ro(e)){var l=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",l!==a.zoom&&this._map._update(!0)}if(a._isCameraConstrained&&o._stop(!0),ro(e)){var u=e.panDelta,c=e.zoomDelta,h=e.bearingDelta,f=e.pitchDelta,p=e.around,d=e.aroundCoord,v=e.pinchAround;a._isCameraConstrained&&(c>0&&(c=0),a._isCameraConstrained=!1),void 0!==v&&(p=v),(c||function(t){return n[t]&&!i._eventsInProgress[t]}("drag"))&&p&&(this._dragOrigin=s(a.pointCoordinate3D(p)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",o._stop(!0),p=p||o.transform.centerPoint,h&&(a.bearing+=h),f&&(a.pitch+=f),a._updateCameraState();var y=[0,0,0];if(u)if("mercator"===a.projection.name){var g=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(p).dir),m=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(p.sub(u)).dir);y[0]=m[0]-g[0],y[1]=m[1]-g[1]}else{var _=a.pointCoordinate(p);if("globe"===a.projection.name){u=u.rotate(-a.angle);var x=a._pixelsPerMercatorPixel/a.worldSize;y[0]=-u.x*t.mercatorScale(t.latFromMercatorY(_.y))*x,y[1]=-u.y*t.mercatorScale(a.center.lat)*x}else{var b=a.pointCoordinate(p.sub(u));_&&b&&(y[0]=b.x-_.x,y[1]=b.y-_.y)}}var w=a.zoom,k=[0,0,0];if(c){var E=s(d||a.pointCoordinate3D(p)),S={dir:t.normalize([],t.sub([],E,a._camera.position))};if(S.dir[2]<0){var T=a.zoomDeltaToMovement(E,c);t.scale$2(k,S.dir,T)}}var M=t.add(y,y,k);a._translateCameraConstrained(M),c&&Math.abs(a.zoom-w)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}else this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(e,n,r){var i=this,o=to(this._eventsInProgress),a=to(e),s={};for(var l in e){var u=e[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=e[l]}for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var h in a&&this._fireEvent("move",a.originalEvent),e){var f=e[h].originalEvent;this._fireEvent(h,f)}var p,d={};for(var v in this._eventsInProgress){var y=this._eventsInProgress[v],g=y.handlerName,m=y.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[v],p=n[g]||m,d["".concat(v,"end")]=p)}for(var _ in d)this._fireEvent(_,d[_]);var x=to(this._eventsInProgress);if(r&&(o||a)&&!x){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};b?(w(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:p})):(this._map.fire(new t.Event("moveend",{originalEvent:p})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){t._frameId=void 0,t.handleEvent(new eo("renderFrame",{timeStamp:e})),t._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),e}(),oo="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",ao=function(e){v(r,e);var n=y(r);function r(e,o){var a;return p(this,r),(a=n.call(this))._moving=!1,a._zooming=!1,a.transform=e,a._bearingSnap=o.bearingSnap,a._respectPrefersReducedMotion=!1!==o.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],i(a)),a}return d(r,[{key:"getCenter",value:function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"panBy",value:function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}},{key:"panTo",value:function(e,n,r){return this.easeTo(t.extend({center:e},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"zoomTo",value:function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}},{key:"zoomIn",value:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}},{key:"zoomOut",value:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(t,e){return this.jumpTo({bearing:t},e),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,e){return this.jumpTo({padding:t},e),this}},{key:"rotateTo",value:function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}},{key:"resetNorth",value:function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}},{key:"resetNorthPitch",value:function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(t,e){return this.jumpTo({pitch:t},e),this}},{key:"cameraForBounds",value:function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0,i=n&&n.pitch||0,o=e.getNorthWest(),a=e.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}},{key:"_extendCameraOptions",value:function(e){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var r=e.padding;e.padding={top:r,bottom:r,right:r,left:r}}return e.padding=t.extend(n,e.padding),e}},{key:"_minimumAABBFrustumDistance",value:function(t,e){var n=e.max[0]-e.min[0],r=e.max[1]-e.min[1];return n/r>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):r/(2*Math.tan(.5*t.fovY)*t.aspect)}},{key:"_cameraForBoundsOnGlobe",value:function(e,n,r,i,o,a){var s=e.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;var u=t.LngLat.convert(n),c=t.LngLat.convert(r),h=.5*(u.lat+c.lat),f=.5*(u.lng+c.lng),p=t.latLngToECEF(h,f),d=t.normalize([],p),v=t.normalize([],t.cross([],d,[0,1,0])),y=t.cross([],v,d),g=[v[0],v[1],v[2],0,y[0],y[1],y[2],0,d[0],d[1],d[2],0,0,0,0,1],m=[p,t.latLngToECEF(u.lat,u.lng),t.latLngToECEF(c.lat,u.lng),t.latLngToECEF(c.lat,c.lng),t.latLngToECEF(u.lat,c.lng),t.latLngToECEF(h,u.lng),t.latLngToECEF(h,c.lng),t.latLngToECEF(u.lat,f),t.latLngToECEF(c.lat,f)],_=t.Aabb.fromPoints(m.map((function(e){return[t.dot(v,e),t.dot(y,e),t.dot(d,e)]}))),x=t.transformMat4([],_.center,g);0===t.squaredLength(x)&&t.set(x,0,0,1),t.normalize(x,x),t.scale$2(x,x,t.GLOBE_RADIUS),s.center=t.ecefToLatLng(x);var b=s.getWorldToCameraMatrix(),w=t.invert(new Float64Array(16),b);_=t.Aabb.applyTransform(_,t.multiply([],b,g)),t.transformMat4(x,x,b);var k=.5*(_.max[2]-_.min[2]),E=this._minimumAABBFrustumDistance(s,_),S=t.scale$2([],[0,0,1],k),T=t.add(S,x,S),M=E+(0===s.pitch?0:t.distance(x,T)),I=s.globeCenterInViewSpace,C=t.sub([],x,[I[0],I[1],I[2]]);t.normalize(C,C),t.scale$2(C,C,M);var P=t.add([],x,C);t.transformMat4(P,P,w);var A=t.earthRadius/t.GLOBE_RADIUS,L=t.length(P),D=t.mercatorZfromAltitude(Math.max(L*A-t.earthRadius,Number.EPSILON),0),R=Math.min(s.zoomFromMercatorZAdjusted(D),l.maxZoom);return R>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=R,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:R,bearing:i,pitch:o}}},{key:"queryTerrainElevation",value:function(e,n){var r=this.transform.elevation;return r?(n=t.extend({},{exaggerated:!0},n),r.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}},{key:"_cameraForBounds",value:function(e,n,r,i,o,a){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,r,i,o,a);var s=e.clone(),l=this._extendCameraOptions(a),u=s.padding;s.bearing=i,s.pitch=o;var c=t.LngLat.convert(n),h=t.LngLat.convert(r),f=new t.LngLat(c.lng,h.lat),p=new t.LngLat(h.lng,c.lat),d=s.project(c),v=s.project(h),y=this.queryTerrainElevation(c),g=this.queryTerrainElevation(h),m=this.queryTerrainElevation(f),_=this.queryTerrainElevation(p),x=[[d.x,d.y,Math.min(y||0,g||0,m||0,_||0)],[v.x,v.y,Math.max(y||0,g||0,m||0,_||0)]],b=t.Aabb.fromPoints(x),w=s.getWorldToCameraMatrix(),k=t.invert(new Float64Array(16),w);b=t.Aabb.applyTransform(b,w);var E=t.sub([],b.max,b.min),S=u.left||0,T=u.right||0,M=u.bottom||0,I=u.top||0,C=l.padding,P=C.left,A=C.right,L=C.top,D=C.bottom,R=.5*(S+T),O=.5*(I+M),z=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(S+T+P+A))/E[0],(s.height-(M+I+D+L))/E[1])),l.maxZoom),N=s.scale/s.zoomScale(z);b=new t.Aabb([b.min[0]-(P+R)*N,b.min[1]-(D+O)*N,b.min[2]],[b.max[0]+(A+R)*N,b.max[1]+(L+O)*N,b.max[2]]);var F=.5*E[2],B=this._minimumAABBFrustumDistance(s,b),j=[0,0,1,0];t.transformMat4$1(j,j,w),t.normalize$2(j,j);var U=t.scale$2([],j,B+F),V=t.add([],b.center,U),G=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new t.Point(l.offset.x,l.offset.y):t.Point.convert(l.offset)).rotate(-t.degToRad(i));b.center[0]-=G.x*N,b.center[1]+=G.y*N,t.transformMat4(b.center,b.center,k),t.transformMat4(V,V,k);var q=[b.center[0],b.center[1],V[2]*s.pixelsPerMeter];t.scale$2(q,q,1/s.worldSize);var Z=t.lngFromMercatorX(q[0]),W=t.latFromMercatorY(q[1]),X=Math.min(s._zoomFromMercatorZ(q[2]),l.maxZoom),H=new t.LngLat(Z,W);return s.mercatorFromTransition&&X<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=X,this._cameraForBounds(s,n,r,i,o,a)):{center:H,zoom:X,bearing:i,pitch:o}}},{key:"fitBounds",value:function(t,e,n){var r=this.cameraForBounds(t,e);return this._fitInternal(r,e,n)}},{key:"fitScreenCoordinates",value:function(e,n,r,i,o){var a=t.Point.convert(e),s=t.Point.convert(n),l=new t.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),u=new t.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;var c=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(u),f=this.transform.pointLocation3D(new t.Point(l.x,u.y)),p=this.transform.pointLocation3D(new t.Point(u.x,l.y)),d=[Math.min(c.lng,h.lng,f.lng,p.lng),Math.min(c.lat,h.lat,f.lat,p.lat)],v=[Math.max(c.lng,h.lng,f.lng,p.lng),Math.max(c.lat,h.lat,f.lat,p.lat)],y=i&&i.pitch?i.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,d,v,r,y,i);return this._fitInternal(g,i,o)}},{key:"_fitInternal",value:function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(e,n){this.stop();var r=e.preloadOnly?this.transform.clone():this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),e.preloadOnly?(this._preloadTiles(r),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||t.warnOnce(oo),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(e,n){var r=this.transform;if(!r.projection.supportsFreeCamera)return t.warnOnce(oo),this;this.stop();var i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(e);var s=i!==r.zoom,l=o!==r.pitch,u=a!==r.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),u&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}},{key:"easeTo",value:function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||this._prefersReducedMotion(e))&&(e.duration=0);var i,o,a,s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=this.getPadding(),f="zoom"in e?+e.zoom:l,p="bearing"in e?this._normalizeBearing(e.bearing,u):u,d="pitch"in e?+e.pitch:c,v="padding"in e?e.padding:s.padding,y=t.Point.convert(e.offset);if("globe"===s.projection.name){var g=t.MercatorCoordinate.fromLngLat(s.center),m=y.rotate(-s.angle);g.x+=m.x/s.worldSize,g.y+=m.y/s.worldSize;var _=g.toLngLat(),x=t.LngLat.convert(e.center||_);this._normalizeCenter(x),i=s.centerPoint.add(m),o=new t.Point(g.x,g.y).mult(s.worldSize),a=new t.Point(t.mercatorXfromLng(x.lng),t.mercatorYfromLat(x.lat)).mult(s.worldSize).sub(o)}else{i=s.centerPoint.add(y);var b=s.pointLocation(i),w=t.LngLat.convert(e.center||b);this._normalizeCenter(w),o=s.project(b),a=s.project(w).sub(o)}var k,E,S=s.zoomScale(f-l);e.around&&(k=t.LngLat.convert(e.around),E=s.locationPoint(k));var T=this._zooming||f!==l,M=this._rotating||u!==p,I=this._pitching||d!==c,C=!s.isPaddingEqual(v),P=function(s){return function(g){if(T&&(s.zoom=t.number(l,f,g)),M&&(s.bearing=t.number(u,p,g)),I&&(s.pitch=t.number(c,d,g)),C&&(s.interpolatePadding(h,v,g),i=s.centerPoint.add(y)),k)s.setLocationAtPoint(k,E);else{var m=s.zoomScale(s.zoom-l),_=f>l?Math.min(2,S):Math.max(.5,S),x=Math.pow(_,1-g),b=s.unproject(o.add(a.mult(g*x)).mult(m));s.setLocationAtPoint(s.renderWorldCopies?b.wrap():b,i)}return e.preloadOnly||r._fireMoveEvents(n),s}};if(e.preloadOnly){var A=this._emulate(P,e.duration,s);return this._preloadTiles(A),this}var L={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=T,this._rotating=M,this._pitching=I,this._padding=C,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,L),this._ease(P(s),(function(t){s.recenterOnTerrain(),r._afterEase(n,t)}),e),this}},{key:"_prepareEase",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}},{key:"_fireMoveEvents",value:function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}},{key:"_afterEase",value:function(e,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}}},{key:"flyTo",value:function(e,n){var r=this;if(this._prefersReducedMotion(e)){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,f="pitch"in e?+e.pitch:l,p="padding"in e?e.padding:o.padding,d=o.zoomScale(c-a),v=t.Point.convert(e.offset),y=o.centerPoint.add(v),g=o.pointLocation(y),m=t.LngLat.convert(e.center||g);this._normalizeCenter(m);var _=o.project(g),x=o.project(m).sub(_),b=e.curve,w=Math.max(o.width,o.height),k=w/d,E=x.mag();if("minZoom"in e){var S=t.clamp(Math.min(e.minZoom,a,c),o.minZoom,o.maxZoom),T=w/o.zoomScale(S-a);b=Math.sqrt(T/E*2)}var M=b*b;function I(t){var e=(k*k-w*w+(t?-1:1)*M*M*E*E)/(2*(t?k:w)*M*E);return Math.log(Math.sqrt(e*e+1)-e)}function C(t){return(Math.exp(t)-Math.exp(-t))/2}function P(t){return(Math.exp(t)+Math.exp(-t))/2}var A=I(0),L=function(t){return P(A)/P(A+b*t)},D=function(t){return w*((P(A)*(C(e=A+b*t)/P(e))-C(A))/M)/E;var e},R=(I(1)-A)/b;if(Math.abs(E)<1e-6||!isFinite(R)){if(Math.abs(w-k)<1e-6)return this.easeTo(e,n);var O=k<w?-1:1;R=Math.abs(Math.log(k/w))/b,D=function(){return 0},L=function(t){return Math.exp(O*b*t)}}e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);var z=s!==h,N=f!==l,F=!o.isPaddingEqual(p),B=function(i){return function(o){var d=o*R,g=1/L(d);i.zoom=1===o?c:a+i.scaleZoom(g),z&&(i.bearing=t.number(s,h,o)),N&&(i.pitch=t.number(l,f,o)),F&&(i.interpolatePadding(u,p,o),y=i.centerPoint.add(v));var b=1===o?m:i.unproject(_.add(x.mult(D(d))).mult(g));return i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,y),i._updateCameraOnTerrain(),e.preloadOnly||r._fireMoveEvents(n),i}};if(e.preloadOnly){var j=this._emulate(B,e.duration,o);return this._preloadTiles(j),this}return this._zooming=!0,this._rotating=z,this._pitching=N,this._padding=F,this._prepareEase(n,!1),this._ease(B(o),(function(){return r._afterEase(n)}),e),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}},{key:"_normalizeCenter",value:function(t){var e=this.transform;if(e.renderWorldCopies&&!e.maxBounds){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}},{key:"_prefersReducedMotion",value:function(e){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(e&&e.essential)}},{key:"_emulate",value:function(t,e,n){for(var r=Math.ceil(15*e/1e3),i=[],o=t(n.clone()),a=0;a<=r;a++){var s=o(a/r);i.push(s.clone())}return i}}]),r}(t.Evented),so=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.options=n,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return d(e,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=m("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=m("button","mapboxgl-ctrl-attrib-button",this._container),m("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=m("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(t,e){var n=this._map._getUIString("AttributionControl.".concat(e));t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce((function(t,e,r){return e.value&&(t+="".concat(e.key,"=").concat(e.value).concat(r<n.length-1?"&":"")),t}),"?");e.href="".concat(t.config.FEEDBACK_URL,"/").concat(r,"#").concat(ci(this._map,!0)),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}},{key:"_updateData",value:function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length})),t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[].concat(c(this.options.customAttribution),c(t)):t.unshift(this.options.customAttribution));var a=t.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),e}(),lo=function(){function e(){p(this,e),t.bindAll(["_updateLogo","_updateCompact"],this)}return d(e,[{key:"onAdd",value:function(t){this._map=t,this._container=m("div","mapboxgl-ctrl");var e=m("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(var e in t){var n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}]),e}(),uo=function(){function t(){p(this,t),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return d(t,[{key:"add",value:function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}},{key:"remove",value:function(t){var e,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=f(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.id===t)return void(o.cancelled=!0)}}catch(a){i.e(a)}finally{i.f()}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._currentlyRunning=this._queue;this._queue=[];var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(t),this._cleared))break}}catch(o){r.e(o)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),t}();function co(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),s=r.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?e=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var u=r.locationPoint(e);if(u.x>=0&&u.y>=0&&u.x<=r.width&&u.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}var ho={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},fo=function(e){v(r,e);var n=y(r);function r(e,o){var a;if(p(this,r),a=n.call(this),(e instanceof t.window.HTMLElement||o)&&(e=t.extend({element:e},o)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(a)),a._anchor=e&&e.anchor||"center",a._color=e&&e.color||"#3FB1CE",a._scale=e&&e.scale||1,a._draggable=e&&e.draggable||!1,a._clickTolerance=e&&e.clickTolerance||0,a._isDragging=!1,a._state="inactive",a._rotation=e&&e.rotation||0,a._rotationAlignment=e&&e.rotationAlignment||"auto",a._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",a._updateMoving=function(){return a._update(!0)},a._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)a._element=e.element,a._offset=t.Point.convert(e&&e.offset||[0,0]);else{a._defaultMarker=!0,a._element=m("div");var s=41,u=27,c=_("svg",{display:"block",height:s*a._scale+"px",width:u*a._scale+"px",viewBox:"0 0 ".concat(u," ").concat(s)},a._element),h=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},h),_("stop",{offset:"100%","stop-opacity":.05},h),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:a._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),a._offset=t.Point.convert(e&&e.offset||[0,-14])}a._element.hasAttribute("aria-label")||a._element.setAttribute("aria-label","Map marker"),a._element.classList.add("mapboxgl-marker"),a._element.addEventListener("dragstart",(function(t){t.preventDefault()})),a._element.addEventListener("mousedown",(function(t){t.preventDefault()}));var f=a._element.classList;for(var d in ho)f.remove("mapboxgl-marker-anchor-".concat(d));return f.add("mapboxgl-marker-anchor-".concat(a._anchor)),a._popup=null,l(a)}return d(r,[{key:"addTo",value:function(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var t=this._map,e=this._pos;if(!t||!e)return!1;var n=t.unproject(e),r=t.getFreeCameraOptions();if(!r.position)return!1;var i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var e=this._map;if(e){var n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)this._clearFadeTimer();else{var r,i=e.unproject(n);e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?r=0:(r=1-e._queryFogOpacity(i),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var t=this._pos;if(t&&this._map){var e=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(t.x,"px,").concat(t.y,"px)\n            ").concat(ho[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(e.x,"px,").concat(e.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var e=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!e||"map"!==r)return"";if(!n._showingGlobe()){var i=n.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var o=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),a=e.sub(t.globeCenterToScreenPoint(n.transform)),s=Math.abs(a.x)+Math.abs(a.y);if(0===s)return"";var l=o/s;return"rotateX(".concat(-a.y*l,"deg) rotateY(").concat(a.x*l,"deg)")}},{key:"_calculateZTransform",value:function(){var e=this._pos,n=this._map;if(!n||!e)return"";var r=0,i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){var o=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),a=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(o);r=t.radToDeg(Math.atan2(a.y,a.x))-90}else r=-n.getBearing();else if("horizon"===i){var s=t.smoothstep(4,6,n.getZoom()),l=t.globeCenterToScreenPoint(n.transform);l.y+=s*n.transform.height;var u=e.sub(l),c=t.radToDeg(Math.atan2(u.y,u.x));r=(c>90?c-270:c+90)*(1-s)}return(r+=this._rotation)?"rotateZ(".concat(r,"deg)"):""}},{key:"_update",value:function(e){var n=this;t.window.cancelAnimationFrame(this._updateFrameId);var r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=co(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!n._fadeTimer&&(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=t.Point.convert(e),this._update(),this}},{key:"_onMove",value:function(e){var n=this._map;if(n){var r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){var o=this._clickTolerance||n._clickTolerance;if(e.point.dist(r)<o)return;this._isDragging=!0}this._pos=e.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(t){var e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}},{key:"setDraggable",value:function(t){this._draggable=!!t;var e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(t){return this._rotation=t||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(t){return this._rotationAlignment=t||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(t){return this._pitchAlignment=t||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}},{key:"setOccludedOpacity",value:function(t){return this._occludedOpacity=t||.2,this._update(),this}},{key:"getOccludedOpacity",value:function(){return this._occludedOpacity}}]),r}(t.Evented),po={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.Point(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof e){var r=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.Point(0,e);case"top-left":return new t.Point(r,r);case"top-right":return new t.Point(-r,r);case"bottom":return new t.Point(0,-e);case"bottom-left":return new t.Point(r,-r);case"bottom-right":return new t.Point(-r,-r);case"left":return new t.Point(e,0);case"right":return new t.Point(-e,0)}return new t.Point(0,0)}return e instanceof t.Point||Array.isArray(e)?t.Point.convert(e):t.Point.convert(e[n]||[0,0])}var go=function(){function e(t){p(this,e),this.jumpTo(t)}return d(e,[{key:"getValue",value:function(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;var n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(t){return t>=this._startTime&&t<=this._endTime}},{key:"jumpTo",value:function(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}},{key:"easeTo",value:function(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}]),e}(),mo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},_o={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},xo={showCompass:!0,showZoom:!0,visualizePitch:!1},bo=function(){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this._clickTolerance=10,this.element=r,this.mouseRotate=new Li({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new Di({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}return d(e,[{key:"down",value:function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),k()}},{key:"move",value:function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){var o=this.mousePitch.mousemoveWindow(t,e),a=o&&o.pitchDelta;a&&n.setPitch(n.getPitch()+a)}}},{key:"off",value:function(){var t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){E(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),M(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(t){this.move(t,M(this.element,t))}},{key:"mouseup",value:function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}},{key:"touchstart",value:function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=I(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=I(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),e}(),wo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ko={maxWidth:100,unit:"metric"},Eo={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},So={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:function(e){v(c,e);var o=y(c);function c(e){var n;if(p(this,c),t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},_o,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=o.call(this,new si(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e))._interactive=e.interactive,n._minTileCacheSize=e.minTileCacheSize,n._maxTileCacheSize=e.maxTileCacheSize,n._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=e.preserveDrawingBuffer,n._antialias=e.antialias,n._useWebGL2=e.useWebGL2,n._trackResize=e.trackResize,n._bearingSnap=e.bearingSnap,n._refreshExpiredTiles=e.refreshExpiredTiles,n._fadeDuration=e.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=e.crossSourceCollisions,n._collectResourceTiming=e.collectResourceTiming,n._optimizeForTerrain=e.optimizeForTerrain,n._language=n._parseLanguage(e.language),n._worldview=e.worldview,n._renderTaskQueue=new uo,n._domRenderTaskQueue=new uo,n._controls=[],n._markers=[],n._popups=[],n._mapId=t.uniqueId(),n._locale=t.extend({},mo,e.locale),n._clickTolerance=e.clickTolerance,n._cooperativeGestures=e.cooperativeGestures,n._performanceMetricsCollection=e.performanceMetricsCollection,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new go(0),n._interactionRange=[1/0,-1/0],n._visibilityHidden=0,n._useExplicitProjection=!1,n._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),n._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(n._container=t.window.document.getElementById(e.container),!n._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=e.container}if(n._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&n.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",n._onWindowOnline,!1),t.window.addEventListener("resize",n._onWindowResize,!1),t.window.addEventListener("orientationchange",n._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1),t.window.addEventListener("visibilitychange",n._onVisibilityChange,!1)),n.handlers=new io(i(n),e),n._localFontFamily=e.localFontFamily,n._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&n.setStyle(e.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),e.projection&&n.setProjection(e.projection),n._hash=e.hash&&new ui("string"==typeof e.hash&&e.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(n.resize(),n.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),n.resize(),e.attributionControl&&n.addControl(new so({customAttribution:e.customAttribution})),n._logoControl=new lo,n.addControl(n._logoControl,e.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event("".concat(e.dataType,"data"),e))})),n.on("dataloading",(function(e){n.fire(new t.Event("".concat(e.dataType,"dataloading"),e))})),l(n)}return d(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}},{key:"hasControl",value:function(t){return this._controls.indexOf(t)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}},{key:"setMinZoom",value:function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"_parseLanguage",value:function(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((function(e){return"auto"===e?t.window.navigator.language:e})):e}},{key:"setLanguage",value:function(t){var e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();var n,r=f(this._controls);try{for(r.s();!(n=r.n()).done;){var i=n.value;i._setLanguage&&i._setLanguage(this._language)}}catch(o){r.e(o)}finally{r.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var e,n=this.transform,r=n.projection.name;"globe"===r&&n.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(n.setMercatorFromTransition(),e=!0):"mercator"===r&&n.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(n.setProjection({name:"globe"}),e=!0),e&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(t,e){return this._updateProjection(t||e||{name:"mercator"})}},{key:"_updateProjection",value:function(e){var n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){for(var r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}},{key:"project",value:function(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}},{key:"unproject",value:function(e){return this.transform.pointLocation3D(t.Point.convert(e))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_isDragging",value:function(){return this.handlers&&this.handlers._isDragging()||!1}},{key:"_createDelegatedListener",value:function(t,e,n){var i=this;if("mouseenter"===t||"mouseover"===t){var o=!1,a=function(r){var a=e.filter((function(t){return i.getLayer(t)})),s=a.length?i.queryRenderedFeatures(r.point,{layers:a}):[];s.length?o||(o=!0,n.call(i,new _i(t,i,r.originalEvent,{features:s}))):o=!1},s=function(){o=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:a,mouseout:s}}}if("mouseleave"===t||"mouseout"===t){var l=!1,u=function(r){var o=e.filter((function(t){return i.getLayer(t)}));(o.length?i.queryRenderedFeatures(r.point,{layers:o}):[]).length?l=!0:l&&(l=!1,n.call(i,new _i(t,i,r.originalEvent)))},c=function(e){l&&(l=!1,n.call(i,new _i(t,i,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:u,mouseout:c}}}var h=function(t){var r=e.filter((function(t){return i.getLayer(t)})),o=r.length?i.queryRenderedFeatures(t.point,{layers:r}):[];o.length&&(t.features=o,n.call(i,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:r({},t,h)}}},{key:"on",value:function(t,e,n){if(void 0===n)return a(s(c.prototype),"on",this).call(this,t,e);Array.isArray(e)||(e=[e]);var r=this._createDelegatedListener(t,e,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(t,e,n){if(void 0===n)return a(s(c.prototype),"once",this).call(this,t,e);Array.isArray(e)||(e=[e]);var r=this._createDelegatedListener(t,e,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(t,e,n){var r=this;if(void 0===n)return a(s(c.prototype),"off",this).call(this,t,e);e=new Set(Array.isArray(e)?e:[e]);var i=function(t,e){if(t.size!==e.size)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.has(i))return!1}}catch(o){r.e(o)}finally{r.f()}return!0},o=this._delegatedListeners?this._delegatedListeners[t]:void 0;return o&&function(t){for(var o=0;o<t.length;o++){var a=t[o];if(a.listener===n&&i(a.layers,e)){for(var s in a.delegates)r.off(s,a.delegates[s]);return t.splice(o,1),r}}}(o),this}},{key:"queryRenderedFeatures",value:function(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(t,e){return this.style.querySourceFeatures(t,e)}},{key:"isPointOnSurface",value:function(e){var n=this.transform.projection.name;return"globe"!==n&&"mercator"!==n&&t.warnOnce("".concat(n," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(t.Point.convert(e))}},{key:"setStyle",value:function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}},{key:"_getUIString",value:function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}},{key:"_updateStyle",value:function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new hn(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,(function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}},{key:"_updateDiff",value:function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(u){t.warnOnce("Unable to perform style diff: ".concat(u.message||u.error||u,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}},{key:"isSourceLoaded",value:function(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}},{key:"areTilesLoaded",value:function(){var t=this.style&&this.style._sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}},{key:"removeSource",value:function(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(t){return this.style.getSource(t)}},{key:"addImage",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,o=void 0===i?1:i,a=r.sdf,s=void 0!==a&&a,l=r.stretchX,u=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){var h=t.exported.getImageData(n),f=h.width,p=h.height,d=h.data;this.style.addImage(e,{data:new t.RGBAImage({width:f,height:p},d),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var v=n.width,y=n.height,g=n;this.style.addImage(e,{data:new t.RGBAImage({width:v,height:y},new Uint8Array(g.data)),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,e)}}},{key:"updateImage",value:function(e,n){var r=this.style.getImage(e);if(r){var i=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,o=i.width,a=i.height;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,r)):this.fire(new t.ErrorEvent(new Error("The width and height of the updated image (".concat(o,", ").concat(a,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(t){this.style.removeImage(t)}},{key:"loadImage",value:function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),(function(e,r){n(e,r instanceof t.window.HTMLImageElement?t.exported.getImageData(r):r)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}},{key:"moveLayer",value:function(t,e){return this.style.moveLayer(t,e),this._update(!0)}},{key:"removeLayer",value:function(t){return this.style.removeLayer(t),this._update(!0)}},{key:"getLayer",value:function(t){return this.style.getLayer(t)}},{key:"setLayerZoomRange",value:function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}},{key:"setFilter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}},{key:"getFilter",value:function(t){return this.style.getFilter(t)}},{key:"setPaintProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(t,e){return this.style.getPaintProperty(t,e)}},{key:"setLayoutProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(t,e){return this.style.getLayoutProperty(t,e)}},{key:"setLight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}},{key:"setFeatureState",value:function(t,e){return this.style.setFeatureState(t,e),this._update()}},{key:"removeFeatureState",value:function(t,e){return this.style.removeFeatureState(t,e),this._update()}},{key:"getFeatureState",value:function(t){return this.style.getFeatureState(t)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var e,n,r,i=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300,a=this._container;a&&(!n||!r);){var s=t.window.getComputedStyle(a).transform;s&&"none"!==s&&((e=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==e[0]&&"1"!==e[0]&&(n=e[0]),e[3]&&"0"!==e[3]&&"1"!==e[3]&&(r=e[3])),a=a.parentElement}this._containerWidth=n?Math.abs(i/n):i,this._containerHeight=r?Math.abs(o/r):o}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=m("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=m("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=m("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=m("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){r[t]=m("div","mapboxgl-ctrl-".concat(t),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(e,n){var r=t.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(e),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(t){this._markers.push(t)}},{key:"_removeMarker",value:function(t){var e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}},{key:"_addPopup",value:function(t){this._popups.push(t)}},{key:"_removePopup",value:function(t){var e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}},{key:"_setupPainter",value:function(){var e=this,r=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",r),o=i||this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);o?(this._useWebGL2&&!i&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(o,!0),this.painter=new Hr(o,this.transform,!!i),this.on("data",(function(t){"source"===t.dataType&&e.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(o)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}},{key:"_contextRestored",value:function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}},{key:"_onMapScroll",value:function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(t){return this._update(),this._renderTaskQueue.add(t)}},{key:"_cancelRenderFrame",value:function(t){this._renderTaskQueue.remove(t)}},{key:"_requestDomTask",value:function(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}},{key:"_render",value:function(e){var n,r=this,i=this.painter.context.extTimerQuery,o=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),!this._removed){this._updateProjectionTransition();var a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=this.transform.pitch,u=t.exported.now(),c=new t.EvaluationParameters(s,{now:u,fadeDuration:a,pitch:l,transition:this.style.getTransition()});this.style.update(c)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var h=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),h=this._updateAverageElevation(o),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):h=this._updateAverageElevation(o),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){var f=t.exported.now()-o;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:f,gpuTime:e})),t.window.performance.mark("frame-gpu",{startTime:o,detail:{gpuTime:e}})}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}if(this.listens("gpu-timing-deferred-render")){var d=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var e=r.painter.queryGpuTimeDeferredRender(d);r.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:e}))}),50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty||h;if(v||this._repaint)this.triggerRepaint();else{var y=!this.isMoving()&&this.loaded();if(y&&(h=this._updateAverageElevation(o,!0)),h)this.triggerRepaint();else if(this._triggerFrame(!1),y&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}}},{key:"_forceMarkerAndPopupUpdate",value:function(t){var e,n=f(this._markers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update()}}catch(s){n.e(s)}finally{n.f()}var i,o=f(this._popups);try{for(o.s();!(i=o.n()).done;){var a=i.value;!t||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}}catch(s){o.e(s)}finally{o.f()}}},{key:"_updateAverageElevation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(t){return e.transform.averageElevation=t,e._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((n||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){var i=this.transform.averageElevation,o=this.transform.sampleAverageElevation(),a=!1;this.transform.elevation&&(a=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(o)?o=0:this._averageElevationLastSampledAt=t;var s=Math.abs(i-o);if(s>1){if(this._isInitialLoad||a)return this._averageElevation.jumpTo(o),r(o);this._averageElevation.easeTo(o,t,300)}else if(s>1e-4)return this._averageElevation.jumpTo(o),r(o)}return!!this._averageElevation.isEasing(t)&&r(this._averageElevation.getValue(t))}},{key:"_authenticate",value:function(){var e=this;t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===t.AUTH_ERR_MSG||401===n.status)){var r=e.painter.context.gl;t.storeAuthState(r,!1),e._logoControl instanceof lo&&e._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),e._silenceAuthErrors||e.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){var t=this._isDragging();this.painter.updateTerrain(this.style,t)}},{key:"_calculateSpeedIndex",value:function(){var t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}},{key:"_canvasPixelComparison",value:function(t,e,n){for(var r=n[1]-n[0],i=t.length/4,o=0;o<e.length;o++){for(var a=e[o],s=0,l=0;l<a.length;l+=4)a[l]===t[l]&&a[l+1]===t[l+1]&&a[l+2]===t[l+2]&&a[l+3]===t[l+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var e,n=f(this._controls);try{for(n.s();!(e=n.n()).done;)e.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(e){var n=this;this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((function(t){var e=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,e&&n._render(t)})))}},{key:"_preloadTiles",value:function(e){var n=this,r=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(r,(function(t,n){return t._preloadTiles(e,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(t){this._trackResize&&this.resize({originalEvent:t})._update()}},{key:"_onVisibilityChange",value:function(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(t){this._showPadding!==t&&(this._showPadding=t,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(t){this._vertices=t,this._update()}},{key:"showTileAABBs",get:function(){return!!this._showTileAABBs},set:function(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}},{key:"_setCacheLimits",value:function(e,n){t.setCacheLimits(e,n)}},{key:"version",get:function(){return t.version}}]),c}(ao),NavigationControl:function(){function e(n){var r=this;p(this,e),this.options=t.extend({},xo,n),this._container=m("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){r._map&&r._map.zoomIn({},{originalEvent:t})})),m("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){r._map&&r._map.zoomOut({},{originalEvent:t})})),m("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){var e=r._map;e&&(r.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=m("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return d(e,[{key:"_updateZoomButtons",value:function(){var t=this._map;if(t){var e=t.getZoom(),n=e===t.getMaxZoom(),r=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}}},{key:"_rotateCompassArrow",value:function(){var t=this,e=this._map;if(e){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(e.transform.pitch,"deg) rotateZ(").concat(e.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(e.transform.angle*(180/Math.PI),"deg)");e._requestDomTask((function(){t._compassIcon&&(t._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bo(t,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(t,e){var n=m("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}},{key:"_setButtonTitle",value:function(t,e){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(e));t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}}}]),e}(),GeolocateControl:function(e){v(r,e);var n=y(r);function r(e){var o;return p(this,r),(o=n.call(this)).options=t.extend({geolocation:t.window.navigator.geolocation},wo,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(o)),o._updateMarkerRotationThrottled=li(o._updateMarkerRotation,20),o._numberOfWatches=0,o}return d(r,[{key:"onAdd",value:function(t){return this._map=t,this._container=m("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(e){var n=this,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){return r("denied"!==t.state)})).catch((function(){return r()})):r()}},{key:"_isOutOfMapMaxBounds",value:function(t){var e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}},{key:"_updateCamera",value:function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}},{key:"_updateMarker",value:function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(e){var n=this;if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=m("button","mapboxgl-ctrl-geolocate",this._container),m("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m("div","mapboxgl-user-location"),this._dotElement.appendChild(m("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(m("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=m("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))}}},{key:"_onDeviceOrientation",value:function(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var e=this,n=function(){t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",e._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"===t&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(t.Evented),AttributionControl:so,ScaleControl:function(){function e(n){p(this,e),this.options=t.extend({},ko,n),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}return d(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,r=e._containerWidth/2-t/2,i=e.unproject([r,n]),o=e.unproject([r+t,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){var s=3.2808*a;s>5280?this._setScale(t,s/5280,"mile"):this._setScale(t,s,"foot")}else"nautical"===this.options.unit?this._setScale(t,a/1852,"nautical-mile"):a>=1e3?this._setScale(t,a/1e3,"kilometer"):this._setScale(t,a,"meter")}},{key:"_setScale",value:function(t,e,n){var r=this;this._map._requestDomTask((function(){var i=function(t){var e=Math.pow(10,"".concat(Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(e),o=i/e;r._container.innerHTML=r._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(r._language,{style:"unit",unitDisplay:"short",unit:n}).format(i):"".concat(i,"&nbsp;").concat(Eo[n]),r._container.style.width=t*o+"px"}))}},{key:"onAdd",value:function(t){return this._map=t,this._language=t.getLanguage(),this._container=m("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(t){this._language=t,this._update()}},{key:"setUnit",value:function(t){this.options.unit=t,this._update()}}]),e}(),FullscreenControl:function(){function e(n){p(this,e),this._fullscreen=!1,n&&n.container&&(n.container instanceof t.window.HTMLElement?this._container=n.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return d(e,[{key:"onAdd",value:function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=m("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var e=this._fullscreenButton=m("button","mapboxgl-ctrl-fullscreen",this._controlContainer);m("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),e}(),Popup:function(e){v(r,e);var n=y(r);function r(e){var o;return p(this,r),(o=n.call(this)).options=t.extend(Object.create(po),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(o)),o._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[]),o}return d(r,[{key:"addTo",value:function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(e){return this.setDOMContent(t.window.document.createTextNode(e))}},{key:"setHTML",value:function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(t){return this.options.maxWidth=t,this._update(),this}},{key:"setDOMContent",value:function(t){var e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=m("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){var n=this._closeButton=m("button","mapboxgl-popup-close-button",e);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(t){return this._classList.add(t),this._updateClassList(),this}},{key:"removeClassName",value:function(t){return this._classList.delete(t),this._updateClassList(),this}},{key:"setOffset",value:function(t){return this.options.offset=t,this._update(),this}},{key:"toggleClassName",value:function(t){var e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}},{key:"_onMouseEvent",value:function(t){this._update(t.point)}},{key:"_getAnchor",value:function(t){if(this.options.anchor)return this.options.anchor;var e=this._map,n=this._container,r=this._pos;if(!e||!n||!r)return"bottom";var i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>e.transform.width-i/2;if(r.y+t<o)return a?"top-left":s?"top-right":"top";if(r.y>e.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var t=this._container;if(t){var e=c(this._classList);e.push("mapboxgl-popup"),this._anchor&&e.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}}},{key:"_update",value:function(e){var n=this,r=this._map,i=this._content;if(r&&(this._lngLat||this._trackPointer)&&i){var o=this._container;if(o||(o=this._container=m("div","mapboxgl-popup",r.getContainer()),this._tip=m("div","mapboxgl-popup-tip",o),o.appendChild(i)),this.options.maxWidth&&o.style.maxWidth!==this.options.maxWidth&&(o.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=co(this._lngLat,this._pos,r.transform)),!this._trackPointer||e){var a=this._pos=this._trackPointer&&e?e:r.project(this._lngLat),s=yo(this.options.offset),l=this._anchor=this._getAnchor(s.y),u=yo(this.options.offset,l),c=a.add(u).round();r._requestDomTask((function(){n._container&&l&&(n._container.style.transform="".concat(ho[l]," translate(").concat(c.x,"px,").concat(c.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){var h=t.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(vo);t&&t.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(t){this._container&&(this._container.style.opacity="".concat(t)),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}}]),r}(t.Evented),Marker:fo,Style:hn,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:$r,Evented:t.Evented,config:t.config,prewarm:function(){Qt().acquire(Kt)},clearPrewarmedResources:function(){var t=Yt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Kt),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Jt.workerCount},set workerCount(t){Jt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return So})),n}()},1725:function(t){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(s[u]=o[u]);if(e){a=e(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},2592:function(t){"use strict";var e=function(t){return t!==t};t.exports=function(t,n){return 0===t&&0===n?1/t===1/n:t===n||!(!e(t)||!e(n))}},3454:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(2592),a=n(3355),s=n(3118),l=i(a(),Object);r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},3355:function(t,e,n){"use strict";var r=n(2592);t.exports=function(){return"function"===typeof Object.is?Object.is:r}},3118:function(t,e,n){"use strict";var r=n(3355),i=n(9396);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},1949:function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(7635),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===o.call(t),r=a(t),s=e&&"[object String]"===o.call(t),f=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=u&&n;if(s&&t.length>0&&!i.call(t,0))for(var v=0;v<t.length;++v)f.push(String(v));if(r&&t.length>0)for(var y=0;y<t.length;++y)f.push(String(y));else for(var g in t)d&&"prototype"===g||!i.call(t,g)||f.push(String(g));if(l)for(var m=function(t){if("undefined"===typeof window||!p)return h(t);try{return h(t)}catch(e){return!1}}(t),_=0;_<c.length;++_)m&&"constructor"===c[_]||!i.call(t,c[_])||f.push(c[_]);return f}}t.exports=r},4892:function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(7635),o=Object.keys,a=o?function(t){return o(t)}:n(1949),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},7635:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},5164:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=(r-n)/2,l=0,u=s-1;l<s;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],f=e[n+2*u+0],p=e[n+2*u+1];h>o!==p>o&&i<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},5021:function(t,e,n){var r=n(5164),i=n(1850);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},1850:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,l=0,u=s-1;l<s;u=l++){var c=e[l+n][0],h=e[l+n][1],f=e[u+n][0],p=e[u+n][1];h>o!==p>o&&i<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},9056:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,a=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=i.right,e.right=i.left,e}function a(t,e,n,i){var a=new r(t,e);if(null===n)return a.left=a.right=null,a;var s=i(t,(n=o(t,n,i)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(t,e,n){var r=null,i=null;if(e){var a=n((e=o(t,e,n)).key,t);0===a?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function l(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}function u(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&u(t.left,o,!1,r,i),t.right&&u(t.right,o,!0,r,i)}}var c=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=o(t,this._root,i),s=i(t,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return p(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&y(t,e,0,r-1,i),null===this._root)this._root=h(t,e,0,r),this._size=r;else{var o=v(this.toList(),f(t,e),i);r=this._size+r,this._root=d({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),o=i.left,u=i.right;r(t,e)<0?u=a(e,n,u,r):o=a(e,n,o,r),this._root=l(o,u,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function h(t,e,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],l=e[a],u=new r(s,l);return u.left=h(t,e,n,a),u.right=h(t,e,a+1,i),u}return null}function f(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}function p(t){for(var e=t,n=[],i=!1,o=new r(null,null),a=o;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:i=!0;return a.next=null,o.next}function d(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=d(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=d(t,i+1,n),a}return null}function v(t,e,n){for(var i=new r(null,null),o=i,a=t,s=e;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),i.next}function y(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}y(t,e,n,s,i),y(t,e,s+1,r,i)}}var g=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},m=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var x=_*_,b=function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new k,this.yRounder=new k}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),k=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===b(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===b(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),E=new w,S=function(t,e){return t.x*e.y-t.y*e.x},T=function(t,e){return t.x*e.x+t.y*e.y},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=S(r,i);return b(o,0)},I=function(t){return Math.sqrt(T(t,t))},C=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return S(i,r)/I(i)/I(r)},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return T(i,r)/I(i)/I(r)},A=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},L=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},D=function(t,e,n,r){if(0===e.x)return L(n,r,t.x);if(0===r.x)return L(t,e,n.x);if(0===e.y)return A(n,r,t.y);if(0===r.y)return A(t,e,n.y);var i=S(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=S(o,e)/i,s=S(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},R=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:z.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:C(e.point,t.point,i.point),cosine:P(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),e}(),O=0,z=function(){function e(n,r,i,o){t(this,e),this.id=++O,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var v=t.comparePoint(e.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(i!==o){var y=l-a,g=i-n,m=u-s,_=o-r;if(y>g&&m<_)return 1;if(y<g&&m>_)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=m(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=g(e,a)&&0===this.comparePoint(a),u=g(n,i)&&0===t.comparePoint(i),c=g(e,s)&&0===this.comparePoint(s),h=g(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&c)return null;if(h)return o;if(c)return s;var f=D(i,this.vector(),a,t.vector());return null===f?null:g(r,f)?E.round(f.x,f.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new R(t,!0),o=new R(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return R.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)u.push(d);else{-1===c.indexOf(d)&&c.push(d);var v=u.indexOf(p.poly);-1!==v&&u.splice(v,1)}}for(var y=0,g=u.length;y<g;y++){var m=u[y].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(W.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===W.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(W.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=R.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new R(i,!0),new R(o,!1),[r],[a])}}]),e}(),N=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=E.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=E.round(n[s][0],n[s][1]);u.x===a.x&&u.y===a.y||(this.segments.push(z.fromRing(a,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),a=u)}o.x===a.x&&o.y===a.y||this.segments.push(z.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),F=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new N(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new N(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new F(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),j=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,h=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var f=s.getAvailableLinkedEvents();if(0===f.length){var p=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){l=f[0].otherSE;break}for(var v=null,y=0,g=h.length;y<g;y++)if(h[y].point===s.point){v=y;break}if(null===v){h.push({index:u.length,point:s.point});var m=s.getLeftmostComparator(a);l=f.sort(m)[0].otherSE;break}var _=h.splice(v)[0],x=u.splice(_.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()))}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==M(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===M(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=u;f!=c;f+=l)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];R.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),U=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),V=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new U(i));else{var o=i.enclosingRing();o.poly||e.push(new U(o)),o.poly.addInterior(i)}}return e}}]),e}(),G=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.compare;t(this,e),this.queue=n,this.tree=new c(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var u=a.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),h=0,f=c.length;h<f;h++)n.push(c[h])}var p=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var v=this._splitSafely(s,d),y=0,g=v.length;y<g;y++)n.push(v[y])}if(null!==l||null!==p){var m=null;m=null===l?p:null===p||R.comparePoints(l,p)<=0?l:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),x=0,b=_.length;x<b;x++)n.push(_[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var k=this._splitSafely(a,w),E=0,S=k.length;E<S;E++)n.push(k[E]);if(!s.isAnEndpoint(w))for(var T=this._splitSafely(s,w),M=0,I=T.length;M<I;M++)n.push(T[M])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),q="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Z="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,W=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){W.type=t,E.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(W.numMultiPolys=r.length,"difference"===W.type)for(var a=r[0],s=1;s<r.length;)null!==m(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===W.type)for(var l=0,u=r.length;l<u;l++)for(var h=r[l],f=l+1,p=r.length;f<p;f++)if(null===m(h.bbox,r[f].bbox))return[];for(var d=new c(R.compare),v=0,y=r.length;v<y;v++)for(var g=r[v].getSweepEvents(),_=0,x=g.length;_<x;_++)if(d.insert(g[_]),d.size>q)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new G(d),w=d.size,k=d.pop();k;){var S=k.key;if(d.size===w){var T=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(T.id," ")+"[".concat(T.leftSE.point.x,", ").concat(T.leftSE.point.y,"] -> ")+"[".concat(T.rightSE.point.x,", ").concat(T.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>q)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>Z)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=b.process(S),I=0,C=M.length;I<C;I++){var P=M[I];void 0===P.consumedBy&&d.insert(P)}w=d.size,k=d.pop()}E.reset();var A=j.factory(b.segments);return new V(A).getGeom()}}]),e}()),X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("union",t,n)},H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("intersection",t,n)},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("xor",t,n)},K=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("difference",t,n)};return{union:X,intersection:H,xor:Y,difference:K}}()},1977:function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(5287);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function v(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!v(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],v(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!v(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],v(t,a=e.leaf?n(o):o)){if(e.leaf||d(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,l=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;a||s.leaf||!d(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=y(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=y([])).leaf=!1,i.height=r;var l,u,c,h,f=Math.ceil(o/s),p=f*Math.ceil(Math.sqrt(s));for(g(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(g(t,l,c=Math.min(l+p-1,n),f,this.compareMinY),u=l;u<=c;u+=f)h=Math.min(u+f-1,c),i.children.push(this._build(t,u,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,f,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(c=f=1/0,i=0,o=e.children.length;i<o;i++)l=h(a=e.children[i]),p=t,d=a,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<f?(f=u,c=l<c?l:c,s=a):u===f&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),l(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,l,u,c,f;for(u=c=1/0,r=e;r<=n-e;r++)a=p(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),l=h(i)+h(o),a<u?(u=a,f=r,c=l<c?l:c):a===u&&l<c&&(c=l,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,u=s(t,0,e,a),c=s(t,n-e,n,a),h=f(u)+f(c);for(i=e;i<n-e;i++)o=t.children[i],l(u,t.leaf?a(o):o),h+=f(u);for(i=n-e-1;i>=e;i--)o=t.children[i],l(c,t.leaf?a(o):o),h+=f(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5287:function(t){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=t[r],p=i,d=o;for(n(t,i,r),a(t[o],f)>0&&n(t,i,o);p<d;){for(n(t,p,d),p++,d--;a(t[p],f)<0;)p++;for(;a(t[d],f)>0;)d--}0===a(t[i],f)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},4463:function(t,e,n){"use strict";var r=n(2791),i=n(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},d={};function v(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new v(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new v(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new v(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new v(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new v(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new v(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new v(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new v(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new v(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function m(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(d,t)||!h.call(p,t)&&(f.test(t)?d[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,m);y[e]=new v(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,m);y[e]=new v(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,m);y[e]=new v(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var z,N=Object.assign;function F(t){if(void 0===z)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);z=e&&e[1]||""}return"\n"+z+t}var B=!1;function j(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function U(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case w:return"Portal";case S:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case M:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case I:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case A:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case L:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function G(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function q(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function Z(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=Z(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function H(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function Q(t,e){J(t,e);var n=q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&H(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function ot(t,e){var n=q(e.value),r=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function ft(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function vt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function yt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=vt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(pt).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var gt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,kt=null,Et=null;function St(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=bi(e),wt(t.stateNode,t.type,e))}}function Tt(t){kt?Et?Et.push(t):Et=[t]:kt=t}function Mt(){if(kt){var t=kt,e=Et;if(Et=kt=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function It(t,e){return t(e)}function Ct(){}var Pt=!1;function At(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return It(t,e,n)}finally{Pt=!1,(null!==kt||null!==Et)&&(Ct(),Mt())}}function Lt(t,e){var n=t.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Dt=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ct){Dt=!1}function Ot(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var zt=!1,Nt=null,Ft=!1,Bt=null,jt={onError:function(t){zt=!0,Nt=t}};function Ut(t,e,n,r,i,o,a,s,l){zt=!1,Nt=null,Ot.apply(jt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Gt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function qt(t){if(Vt(t)!==t)throw Error(o(188))}function Zt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qt(i),t;if(a===r)return qt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Ht=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Jt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,$t=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ve(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ye(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ge(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function me(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,ke,Ee,Se,Te=!1,Me=[],Ie=null,Ce=null,Pe=null,Ae=new Map,Le=new Map,De=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oe(t,e){switch(t){case"focusin":case"focusout":Ie=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Le.delete(e.pointerId)}}function ze(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ne(t){var e=mi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Gt(n)))return t.blockedOn=e,void Se(t.priority,(function(){ke(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function Be(t,e,n){Fe(t)&&n.delete(e)}function je(){Te=!1,null!==Ie&&Fe(Ie)&&(Ie=null),null!==Ce&&Fe(Ce)&&(Ce=null),null!==Pe&&Fe(Pe)&&(Pe=null),Ae.forEach(Be),Le.forEach(Be)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,je)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Me.length){Ue(Me[0],t);for(var n=1;n<Me.length;n++){var r=Me[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ie&&Ue(Ie,t),null!==Ce&&Ue(Ce,t),null!==Pe&&Ue(Pe,t),Ae.forEach(e),Le.forEach(e),n=0;n<De.length;n++)(r=De[n]).blockedOn===t&&(r.blockedOn=null);for(;0<De.length&&null===(n=De[0]).blockedOn;)Ne(n),null===n.blockedOn&&De.shift()}var Ge=x.ReactCurrentBatchConfig,qe=!0;function Ze(t,e,n,r){var i=_e,o=Ge.transition;Ge.transition=null;try{_e=1,Xe(t,e,n,r)}finally{_e=i,Ge.transition=o}}function We(t,e,n,r){var i=_e,o=Ge.transition;Ge.transition=null;try{_e=4,Xe(t,e,n,r)}finally{_e=i,Ge.transition=o}}function Xe(t,e,n,r){if(qe){var i=Ye(t,e,n,r);if(null===i)qr(t,e,r,He,n),Oe(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ie=ze(Ie,t,e,n,r,i),!0;case"dragenter":return Ce=ze(Ce,t,e,n,r,i),!0;case"mouseover":return Pe=ze(Pe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ae.set(o,ze(Ae.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Le.set(o,ze(Le.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Oe(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&be(o),null===(o=Ye(t,e,n,r))&&qr(t,e,r,He,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(t,e,r,null,n)}}var He=null;function Ye(t,e,n,r){if(He=null,null!==(t=mi(t=bt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Gt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return He=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Je=null,Qe=null,$e=null;function tn(){if($e)return $e;var t,e,n=Qe,r=n.length,i="value"in Je?Je.value:Je.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return $e=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=N({},un,{view:0,detail:0}),fn=on(hn),pn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),dn=on(pn),vn=on(N({},pn,{dataTransfer:0})),yn=on(N({},hn,{relatedTarget:0})),gn=on(N({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=N({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=on(mn),xn=on(N({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function Sn(){return En}var Tn=N({},hn,{key:function(t){if(t.key){var e=bn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Mn=on(Tn),In=on(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=on(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=on(N({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=N({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(An),Dn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var zn=c&&"TextEvent"in window&&!On,Nn=c&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Bn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Gn[t.type]:"textarea"===e}function Zn(t,e,n,r){Tt(r),0<(e=Wr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Xn=null;function Hn(t){Fr(t,0)}function Yn(t){if(X(xi(t)))return t}function Kn(t,e){if("change"===t)return e}var Jn=!1;if(c){var Qn;if(c){var $n="oninput"in document;if(!$n){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),$n="function"===typeof tr.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(t){if("value"===t.propertyName&&Yn(Xn)){var e=[];Zn(e,Xn,t,bt(t)),At(Hn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Xn)}function or(t,e){if("click"===t)return Yn(e)}function ar(t,e){if("input"===t||"change"===t)return Yn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fr(){for(var t=window,e=H();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=H((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dr(t){var e=fr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,gr=null,mr=null,_r=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==yr||yr!==H(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&lr(mr,r)||(mr=r,0<(r=Wr(gr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yr)))}function br(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Er={};function Sr(t){if(kr[t])return kr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Er)return kr[t]=n[e];return t}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Sr("animationend"),Mr=Sr("animationiteration"),Ir=Sr("animationstart"),Cr=Sr("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Pr.set(t,e),l(e,[t])}for(var Dr=0;Dr<Ar.length;Dr++){var Rr=Ar[Dr];Lr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Mr,"onAnimationIteration"),Lr(Ir,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Cr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Nr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,u){if(Ut.apply(this,arguments),zt){if(!zt)throw Error(o(198));var c=Nt;zt=!1,Nt=null,Ft||(Ft=!0,Bt=c)}}(r,e,void 0,t),t.currentTarget=null}function Fr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,s,u),o=l}}}if(Ft)throw t=Bt,Ft=!1,Bt=null,t}function Br(t,e){var n=e[vi];void 0===n&&(n=e[vi]=new Set);var r=t+"__bubble";n.has(r)||(Gr(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),Gr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,a.forEach((function(e){"selectionchange"!==e&&(zr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,jr("selectionchange",!1,e))}}function Gr(t,e,n,r){switch(Ke(e)){case 1:var i=Ze;break;case 4:i=We;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=mi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}At((function(){var r=o,i=bt(n),a=[];t:{var s=Pr.get(t);if(void 0!==s){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Tr:case Mr:case Ir:l=gn;break;case Cr:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,d=r;null!==d;){var v=(p=d).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=Lt(d,f))&&c.push(Zr(d,v,p)))),h)break;d=d.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===xt||!(u=n.relatedTarget||n.fromElement)||!mi(u)&&!u[di])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?mi(u):null)&&(u!==(h=Vt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dn,v="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=In,v="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==l?s:xi(l),p=null==u?s:xi(u),(s=new c(v,d+"leave",l,n,i)).target=h,s.relatedTarget=p,v=null,mi(i)===r&&((c=new c(f,d+"enter",u,n,i)).target=p,c.relatedTarget=h,v=c),h=v,l&&u)t:{for(f=u,d=0,p=c=l;p;p=Xr(p))d++;for(p=0,v=f;v;v=Xr(v))p++;for(;0<d-p;)c=Xr(c),d--;for(;0<p-d;)f=Xr(f),p--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break t;c=Xr(c),f=Xr(f)}c=null}else c=null;null!==l&&Hr(a,s,l,c,!1),null!==u&&null!==h&&Hr(a,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Kn;else if(qn(s))if(Jn)y=ar;else{y=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=or);switch(y&&(y=y(t,r))?Zn(a,y,n,i):(g&&g(t,s,r),"focusout"===t&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&tt(s,"number",s.value)),g=r?xi(r):window,t){case"focusin":(qn(g)||"true"===g.contentEditable)&&(yr=g,gr=r,mr=null);break;case"focusout":mr=gr=yr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(a,n,i)}var m;if(Rn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Vn?jn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(m=tn()):(Qe="value"in(Je=i)?Je.value:Je.textContent,Vn=!0)),0<(g=Wr(r,_)).length&&(_=new xn(_,t,null,n,i),a.push({event:_,listeners:g}),m?_.data=m:null!==(m=Un(n))&&(_.data=m))),(m=zn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Bn=!0,Fn);case"textInput":return(t=e.data)===Fn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&jn(t,e)?(t=tn(),$e=Qe=Je=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}Fr(a,e)}))}function Zr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Lt(t,n))&&r.unshift(Zr(t,o,i)),null!=(o=Lt(t,e))&&r.push(Zr(t,o,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Hr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Lt(n,o))&&a.unshift(Zr(n,l,s)):i||null!=(l=Lt(n,o))&&a.push(Zr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(t){return("string"===typeof t?t:""+t).replace(Yr,"\n").replace(Kr,"")}function Qr(t,e,n){if(e=Jr(e),Jr(t)!==e&&n)throw Error(o(425))}function $r(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,di="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function mi(t){var e=t[fi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[di]||n[fi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[fi])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[fi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function bi(t){return t[pi]||null}var wi=[],ki=-1;function Ei(t){return{current:t}}function Si(t){0>ki||(t.current=wi[ki],wi[ki]=null,ki--)}function Ti(t,e){ki++,wi[ki]=t.current,t.current=e}var Mi={},Ii=Ei(Mi),Ci=Ei(!1),Pi=Mi;function Ai(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Li(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Di(){Si(Ci),Si(Ii)}function Ri(t,e,n){if(Ii.current!==Mi)throw Error(o(168));Ti(Ii,e),Ti(Ci,n)}function Oi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,G(t)||"Unknown",i));return N({},n,r)}function zi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,Pi=Ii.current,Ti(Ii,t),Ti(Ci,Ci.current),!0}function Ni(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Oi(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Si(Ci),Si(Ii),Ti(Ii,t)):Si(Ci),Ti(Ci,n)}var Fi=null,Bi=!1,ji=!1;function Ui(t){null===Fi?Fi=[t]:Fi.push(t)}function Vi(){if(!ji&&null!==Fi){ji=!0;var t=0,e=_e;try{var n=Fi;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(t+1)),Xt($t,Vi),i}finally{_e=e,ji=!1}}return null}var Gi=[],qi=0,Zi=null,Wi=0,Xi=[],Hi=0,Yi=null,Ki=1,Ji="";function Qi(t,e){Gi[qi++]=Wi,Gi[qi++]=Zi,Zi=t,Wi=e}function $i(t,e,n){Xi[Hi++]=Ki,Xi[Hi++]=Ji,Xi[Hi++]=Yi,Yi=t;var r=Ki;t=Ji;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-ae(e)+i|n<<i|r,Ji=o+t}else Ki=1<<o|n<<i|r,Ji=t}function to(t){null!==t.return&&(Qi(t,1),$i(t,1,0))}function eo(t){for(;t===Zi;)Zi=Gi[--qi],Gi[qi]=null,Wi=Gi[--qi],Gi[qi]=null;for(;t===Yi;)Yi=Xi[--Hi],Xi[Hi]=null,Ji=Xi[--Hi],Xi[Hi]=null,Ki=Xi[--Hi],Xi[Hi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yi?{id:Ki,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)ao(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ui(t.nextSibling)}function po(){ro=no=null,io=!1}function vo(t){null===oo?oo=[t]:oo.push(t)}var yo=x.ReactCurrentBatchConfig;function go(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var mo=Ei(null),_o=null,xo=null,bo=null;function wo(){bo=xo=_o=null}function ko(t){var e=mo.current;Si(mo),t._currentValue=e}function Eo(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function So(t,e){_o=t,bo=xo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xs=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(bo!==t)if(t={context:t,memoizedValue:e,next:null},null===xo){if(null===_o)throw Error(o(308));xo=t,_o.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return e}var Mo=null;function Io(t){null===Mo?Mo=[t]:Mo.push(t)}function Co(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Io(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(t,n)}return null===(i=r.interleaved)?(e.next=e,Io(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(t,n)}function zo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}function No(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fo(t,e,n,r){var i=t.updateQueue;Ao=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var d=t,v=s;switch(f=e,p=n,v.tag){case 1:if("function"===typeof(d=v.payload)){h=d.call(p,h,f);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(f="function"===typeof(d=v.payload)?d.call(p,h,f):d)||void 0===f)break t;h=N({},h,f);break t;case 2:Ao=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Nl|=a,t.lanes=a,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Uo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Oo(t,o,i))&&(ru(e,t,i,r),zo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Oo(t,o,i))&&(ru(e,t,i,r),zo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),r=nu(t),i=Ro(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Oo(t,i,r))&&(ru(e,t,r,n),zo(e,t,r))}};function Go(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(t,e,n){var r=!1,i=Mi,o=e.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Li(e)?Pi:Ii.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ai(t,i):Mi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Zo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=jo,Lo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Li(e)?Pi:Ii.current,i.context=Ai(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Fo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===jo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Ho(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yo(t){return(0,t._init)(t._payload)}function Ko(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ru(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Fu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===k?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&Yo(o)===e.type)?((r=i(e,n.props)).ref=Xo(t,e,n),r.return=t,r):((r=Ou(n.type,n.key,n.props,null,t.mode,r)).ref=Xo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=zu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Ou(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case w:return(e=Bu(e,t.mode,n)).return=t,e;case L:return f(t,(0,e._init)(e._payload),n)}if(et(e)||O(e))return(e=zu(e,t.mode,n,null)).return=t,e;Ho(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(t,e,n,r):null;case w:return n.key===i?c(t,e,n,r):null;case L:return p(t,e,(i=n._init)(n._payload),r)}if(et(n)||O(n))return null!==i?null:h(t,e,n,r,null);Ho(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case L:return d(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||O(r))return h(e,t=t.get(n)||null,r,i,null);Ho(e,r)}return null}function v(i,o,s,l){for(var u=null,c=null,h=o,v=o=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var g=p(i,h,s[v],l);if(null===g){null===h&&(h=y);break}t&&h&&null===g.alternate&&e(i,h),o=a(g,o,v),null===c?u=g:c.sibling=g,c=g,h=y}if(v===s.length)return n(i,h),io&&Qi(i,v),u;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],l))&&(o=a(h,o,v),null===c?u=h:c.sibling=h,c=h);return io&&Qi(i,v),u}for(h=r(i,h);v<s.length;v++)null!==(y=d(h,i,v,s[v],l))&&(t&&null!==y.alternate&&h.delete(null===y.key?v:y.key),o=a(y,o,v),null===c?u=y:c.sibling=y,c=y);return t&&h.forEach((function(t){return e(i,t)})),io&&Qi(i,v),u}function y(i,s,l,u){var c=O(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,v=s,y=s=0,g=null,m=l.next();null!==v&&!m.done;y++,m=l.next()){v.index>y?(g=v,v=null):g=v.sibling;var _=p(i,v,m.value,u);if(null===_){null===v&&(v=g);break}t&&v&&null===_.alternate&&e(i,v),s=a(_,s,y),null===h?c=_:h.sibling=_,h=_,v=g}if(m.done)return n(i,v),io&&Qi(i,y),c;if(null===v){for(;!m.done;y++,m=l.next())null!==(m=f(i,m.value,u))&&(s=a(m,s,y),null===h?c=m:h.sibling=m,h=m);return io&&Qi(i,y),c}for(v=r(i,v);!m.done;y++,m=l.next())null!==(m=d(v,i,y,m.value,u))&&(t&&null!==m.alternate&&v.delete(null===m.key?y:m.key),s=a(m,s,y),null===h?c=m:h.sibling=m,h=m);return t&&v.forEach((function(t){return e(i,t)})),io&&Qi(i,y),c}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===k){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===L&&Yo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===k?((o=zu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Ou(a.type,a.key,a.props,null,r.mode,l)).ref=Xo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Bu(a,r.mode,l)).return=r,r=o}return s(r);case L:return t(r,o,(c=a._init)(a._payload),l)}if(et(a))return v(r,o,a,l);if(O(a))return y(r,o,a,l);Ho(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Jo=Ko(!0),Qo=Ko(!1),$o={},ta=Ei($o),ea=Ei($o),na=Ei($o);function ra(t){if(t===$o)throw Error(o(174));return t}function ia(t,e){switch(Ti(na,e),Ti(ea,t),Ti(ta,$o),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Si(ta),Ti(ta,e)}function oa(){Si(ta),Si(ea),Si(na)}function aa(t){ra(na.current);var e=ra(ta.current),n=lt(e,t.type);e!==n&&(Ti(ea,t),Ti(ta,n))}function sa(t){ea.current===t&&(Si(ta),Si(ea))}var la=Ei(0);function ua(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=[];function ha(){for(var t=0;t<ca.length;t++)ca[t]._workInProgressVersionPrimary=null;ca.length=0}var fa=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,da=0,va=null,ya=null,ga=null,ma=!1,_a=!1,xa=0,ba=0;function wa(){throw Error(o(321))}function ka(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Ea(t,e,n,r,i,a){if(da=a,va=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),_a){a=0;do{if(_a=!1,xa=0,25<=a)throw Error(o(301));a+=1,ga=ya=null,e.updateQueue=null,fa.current=us,t=n(r,i)}while(_a)}if(fa.current=as,e=null!==ya&&null!==ya.next,da=0,ga=ya=va=null,ma=!1,e)throw Error(o(300));return t}function Sa(){var t=0!==xa;return xa=0,t}function Ta(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?va.memoizedState=ga=t:ga=ga.next=t,ga}function Ma(){if(null===ya){var t=va.alternate;t=null!==t?t.memoizedState:null}else t=ya.next;var e=null===ga?va.memoizedState:ga.next;if(null!==e)ga=e,ya=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ya=t).memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},null===ga?va.memoizedState=ga=t:ga=ga.next=t}return ga}function Ia(t,e){return"function"===typeof e?e(t):e}function Ca(t){var e=Ma(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ya,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((da&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,va.lanes|=h,Nl|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,e.memoizedState)||(xs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,va.lanes|=a,Nl|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pa(t){var e=Ma(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(xs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function La(t,e){var n=va,r=Ma(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,xs=!0),r=r.queue,qa(Oa.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ba(9,Ra.bind(null,n,r,i,e),void 0,null),null===Pl)throw Error(o(349));0!==(30&da)||Da(n,e,i)}return i}function Da(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=va.updateQueue)?(e={lastEffect:null,stores:null},va.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ra(t,e,n,r){e.value=n,e.getSnapshot=r,za(e)&&Na(t)}function Oa(t,e,n){return n((function(){za(e)&&Na(t)}))}function za(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Na(t){var e=Po(t,1);null!==e&&ru(e,t,1,-1)}function Fa(t){var e=Ta();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,va,t),[e.memoizedState,t]}function Ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=va.updateQueue)?(e={lastEffect:null,stores:null},va.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ja(){return Ma().memoizedState}function Ua(t,e,n,r){var i=Ta();va.flags|=t,i.memoizedState=Ba(1|e,n,void 0,void 0===r?null:r)}function Va(t,e,n,r){var i=Ma();r=void 0===r?null:r;var o=void 0;if(null!==ya){var a=ya.memoizedState;if(o=a.destroy,null!==r&&ka(r,a.deps))return void(i.memoizedState=Ba(e,n,o,r))}va.flags|=t,i.memoizedState=Ba(1|e,n,o,r)}function Ga(t,e){return Ua(8390656,8,t,e)}function qa(t,e){return Va(2048,8,t,e)}function Za(t,e){return Va(4,2,t,e)}function Wa(t,e){return Va(4,4,t,e)}function Xa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ha(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Va(4,4,Xa.bind(null,e,t),n)}function Ya(){}function Ka(t,e){var n=Ma();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ka(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ja(t,e){var n=Ma();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ka(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qa(t,e,n){return 0===(21&da)?(t.baseState&&(t.baseState=!1,xs=!0),t.memoizedState=n):(sr(n,e)||(n=ve(),va.lanes|=n,Nl|=n,t.baseState=!0),e)}function $a(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=pa.transition;pa.transition={};try{t(!1),e()}finally{_e=n,pa.transition=r}}function ts(){return Ma().memoizedState}function es(t,e,n){var r=nu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=Co(t,e,n,r))){ru(n,t,r,eu()),os(n,e,r)}}function ns(t,e,n){var r=nu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,Io(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=Co(t,e,i,r))&&(ru(n,t,r,i=eu()),os(n,e,r))}}function rs(t){var e=t.alternate;return t===va||null!==e&&e===va}function is(t,e){_a=ma=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}var as={readContext:To,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:To,useCallback:function(t,e){return Ta().memoizedState=[t,void 0===e?null:e],t},useContext:To,useEffect:Ga,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ua(4194308,4,Xa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var n=Ta();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ta();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,va,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ta().memoizedState=t},useState:Fa,useDebugValue:Ya,useDeferredValue:function(t){return Ta().memoizedState=t},useTransition:function(){var t=Fa(!1),e=t[0];return t=$a.bind(null,t[1]),Ta().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=va,i=Ta();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Pl)throw Error(o(349));0!==(30&da)||Da(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ga(Oa.bind(null,r,a,t),[t]),r.flags|=2048,Ba(9,Ra.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ta(),e=Pl.identifierPrefix;if(io){var n=Ji;e=":"+e+"R"+(n=(Ki&~(1<<32-ae(Ki)-1)).toString(32)+n),0<(n=xa++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ba++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:To,useCallback:Ka,useContext:To,useEffect:qa,useImperativeHandle:Ha,useInsertionEffect:Za,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ca,useRef:ja,useState:function(){return Ca(Ia)},useDebugValue:Ya,useDeferredValue:function(t){return Qa(Ma(),ya.memoizedState,t)},useTransition:function(){return[Ca(Ia)[0],Ma().memoizedState]},useMutableSource:Aa,useSyncExternalStore:La,useId:ts,unstable_isNewReconciler:!1},us={readContext:To,useCallback:Ka,useContext:To,useEffect:qa,useImperativeHandle:Ha,useInsertionEffect:Za,useLayoutEffect:Wa,useMemo:Ja,useReducer:Pa,useRef:ja,useState:function(){return Pa(Ia)},useDebugValue:Ya,useDeferredValue:function(t){var e=Ma();return null===ya?e.memoizedState=t:Qa(e,ya.memoizedState,t)},useTransition:function(){return[Pa(Ia)[0],Ma().memoizedState]},useMutableSource:Aa,useSyncExternalStore:La,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function fs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zl||(Zl=!0,Wl=r),fs(0,e)},n}function vs(t,e,n){(n=Ro(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,e),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ys(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ps;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tu.bind(null,t,e,n),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ms(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,Oo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _s=x.ReactCurrentOwner,xs=!1;function bs(t,e,n,r){e.child=null===t?Qo(e,null,n,r):Jo(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var o=e.ref;return So(e,i),r=Ea(t,e,n,r,o,i),n=Sa(),null===t||xs?(io&&n&&to(e),e.flags|=1,bs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zs(t,e,i))}function ks(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Du(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ou(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Es(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Zs(t,e,i)}return e.flags|=1,(t=Ru(o,r)).ref=e.ref,t.return=e,e.child=t}function Es(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(xs=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Zs(t,e,i);0!==(131072&t.flags)&&(xs=!0)}}return Ms(t,e,n,r,i)}function Ss(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ti(Rl,Dl),Dl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Rl,Dl),Dl|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ti(Rl,Dl),Dl|=r;return bs(t,e,i,n),e.child}function Ts(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ms(t,e,n,r,i){var o=Li(n)?Pi:Ii.current;return o=Ai(e,o),So(e,i),n=Ea(t,e,n,r,o,i),r=Sa(),null===t||xs?(io&&r&&to(e),e.flags|=1,bs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zs(t,e,i))}function Is(t,e,n,r,i){if(Li(n)){var o=!0;zi(e)}else o=!1;if(So(e,i),null===e.stateNode)qs(t,e),qo(e,n,r),Wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=To(u):u=Ai(e,u=Li(n)?Pi:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Zo(e,a,r,u),Ao=!1;var f=e.memoizedState;a.state=f,Fo(e,r,a,i),l=e.memoizedState,s!==r||f!==l||Ci.current||Ao?("function"===typeof c&&(Uo(e,n,c,r),l=e.memoizedState),(s=Ao||Go(e,n,s,r,f,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Do(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:go(e.type,s),a.props=u,h=e.pendingProps,f=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Ai(e,l=Li(n)?Pi:Ii.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==l)&&Zo(e,a,r,l),Ao=!1,f=e.memoizedState,a.state=f,Fo(e,r,a,i);var d=e.memoizedState;s!==h||f!==d||Ci.current||Ao?("function"===typeof p&&(Uo(e,n,p,r),d=e.memoizedState),(u=Ao||Go(e,n,u,r,f,d,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Cs(t,e,n,r,o,i)}function Cs(t,e,n,r,i,o){Ts(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Ni(e,n,!1),Zs(t,e,o);r=e.stateNode,_s.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Jo(e,t.child,null,o),e.child=Jo(e,null,s,o)):bs(t,e,s,o),e.memoizedState=r.state,i&&Ni(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ia(t,e.containerInfo)}function As(t,e,n,r,i){return po(),vo(i),e.flags|=256,bs(t,e,n,r),e.child}var Ls,Ds,Rs,Os,zs={dehydrated:null,treeContext:null,retryLane:0};function Ns(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fs(t,e,n){var r,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ti(la,1&a),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nu(l,i,0,null),t=zu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ns(n),e.memoizedState=zs,t):Bs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,js(t,e,s,r=hs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Nu({mode:"visible",children:r.children},i,0,null),(a=zu(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&Jo(e,t.child,null,s),e.child.memoizedState=Ns(s),e.memoizedState=zs,a);if(0===(1&e.mode))return js(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(t,e,s,r=hs(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),xs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(t,i),ru(r,t,i,-1))}return yu(),js(t,e,s,r=hs(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Iu.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Xi[Hi++]=Ki,Xi[Hi++]=Ji,Xi[Hi++]=Yi,Ki=t.id,Ji=t.overflow,Yi=e),e=Bs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Ru(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ru(r,s):(s=zu(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=zs,i}return t=(s=t.child).sibling,i=Ru(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bs(t,e){return(e=Nu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function js(t,e,n,r){return null!==r&&vo(r),Jo(e,t.child,null,n),(t=Bs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Us(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Eo(t.return,e,n)}function Vs(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bs(t,e,r.children,n),0!==(2&(r=la.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Us(t,n,e);else if(19===t.tag)Us(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ti(la,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ua(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vs(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ua(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vs(e,!0,n,null,o);break;case"together":Vs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Nl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ru(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ru(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ws(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hs(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Li(e.type)&&Di(),Xs(e),null;case 3:return r=e.stateNode,oa(),Si(Ci),Si(Ii),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),Ds(t,e),Xs(e),null;case 5:sa(e);var i=ra(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Rs(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Xs(e),null}if(t=ra(ta.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[fi]=e,r[pi]=a,t=0!==(1&e.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":K(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":it(r,a),Br("invalid",r)}for(var l in mt(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),$(r,a,!0);break;case"textarea":W(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[fi]=e,t[pi]=r,Ls(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":Br("cancel",t),Br("close",t),i=r;break;case"iframe":case"object":case"embed":Br("load",t),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],t);i=r;break;case"source":Br("error",t),i=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),i=r;break;case"details":Br("toggle",t),i=r;break;case"input":K(t,r),i=Y(t,r),Br("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),Br("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Br("invalid",t)}for(a in mt(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?yt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&ft(t,c):"number"===typeof c&&ft(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",t):null!=c&&_(t,a,c,l))}switch(n){case"input":W(t),$(t,r,!1);break;case"textarea":W(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Os(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ta.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[fi]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=e,e.stateNode=r}return Xs(e),null;case 13:if(Si(la),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Ol&&(Ol=3):yu())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return oa(),Ds(t,e),null===t&&Vr(e.stateNode.containerInfo),Xs(e),null;case 10:return ko(e.type._context),Xs(e),null;case 19:if(Si(la),null===(a=e.memoizedState))return Xs(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ua(t))){for(e.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ti(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Gl&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ua(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Xs(e),null}else 2*Jt()-a.renderingStartTime>Gl&&1073741824!==n&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=la.current,Ti(la,r?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return fu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Dl)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ys(t,e){switch(eo(e),e.tag){case 1:return Li(e.type)&&Di(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Si(Ci),Si(Ii),ha(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Si(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Si(la),null;case 4:return oa(),null;case 10:return ko(e.type._context),null;case 22:case 23:return fu(),null;default:return null}}Ls=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Rs=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(ta.current);var o,a=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),a=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=$r)}for(c in mt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Os=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ks=!1,Js=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Su(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[fi],delete e[pi],delete e[vi],delete e[yi],delete e[gi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$r));else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,fl=!1;function pl(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Js||tl(n,e);case 6:var r=hl,i=fl;hl=null,pl(t,e,n),fl=i,null!==(hl=r)&&(fl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(hl,n.stateNode));break;case 4:r=hl,i=fl,hl=n.stateNode.containerInfo,fl=!0,pl(t,e,n),hl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),i=i.next}while(i!==r)}pl(t,e,n);break;case 1:if(!Js&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,e,s)}pl(t,e,n);break;case 21:pl(t,e,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pl(t,e,n),Js=r):pl(t,e,n);break;default:pl(t,e,n)}}function vl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qs),e.forEach((function(e){var r=Cu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function yl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));dl(a,s,i),hl=null,fl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yl(e,t),ml(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(y){Su(t,t.return,y)}try{rl(5,t,t.return)}catch(y){Su(t,t.return,y)}}break;case 1:yl(e,t),ml(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(e,t),ml(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{ft(i,"")}catch(y){Su(t,t.return,y)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),_t(l,s);var c=_t(l,a);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];"style"===h?yt(i,f):"dangerouslySetInnerHTML"===h?ht(i,f):"children"===h?ft(i,f):_(i,h,f,c)}switch(l){case"input":Q(i,a);break;case"textarea":ot(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;null!=d?nt(i,!!a.multiple,d,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(y){Su(t,t.return,y)}}break;case 6:if(yl(e,t),ml(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){Su(t,t.return,y)}}break;case 3:if(yl(e,t),ml(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(y){Su(t,t.return,y)}break;case 4:default:yl(e,t),ml(t);break;case 13:yl(e,t),ml(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Jt())),4&r&&vl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Js=(c=Js)||h,yl(e,t),Js=c):yl(e,t),ml(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for($s=t,h=t.child;null!==h;){for(f=$s=h;null!==$s;){switch(d=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:tl(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Su(r,n,y)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){wl(f);continue}}null!==d?(d.return=p,$s=d):wl(f)}h=h.sibling}t:for(h=null,f=t;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=vt("display",s))}catch(y){Su(t,t.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Su(t,t.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===t)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;null===f.sibling;){if(null===f.return||f.return===t)break t;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yl(e,t),ml(t),4&r&&vl(t);case 21:}}function ml(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ft(i,""),r.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Su(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){$s=t,xl(t,e,n)}function xl(t,e,n){for(var r=0!==(1&t.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ks;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Ks;var u=Js;if(Ks=a,(Js=l)&&!u)for($s=i;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,$s=l):kl(i);for(;null!==o;)$s=o,xl(o,e,n),o=o.sibling;$s=i,Ks=s,Js=u}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):bl(t)}}function bl(t){for(;null!==$s;){var e=$s;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Js||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Js)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:go(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Bo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Ve(f)}}}break;default:throw Error(o(163))}Js||512&e.flags&&ol(e)}catch(p){Su(e,e.return,p)}}if(e===t){$s=null;break}if(null!==(n=e.sibling)){n.return=e.return,$s=n;break}$s=e.return}}function wl(t){for(;null!==$s;){var e=$s;if(e===t){$s=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$s=n;break}$s=e.return}}function kl(t){for(;null!==$s;){var e=$s;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Su(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Su(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Su(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Su(e,a,l)}}}catch(l){Su(e,e.return,l)}if(e===t){$s=null;break}var s=e.sibling;if(null!==s){s.return=e.return,$s=s;break}$s=e.return}}var El,Sl=Math.ceil,Tl=x.ReactCurrentDispatcher,Ml=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,Cl=0,Pl=null,Al=null,Ll=0,Dl=0,Rl=Ei(0),Ol=0,zl=null,Nl=0,Fl=0,Bl=0,jl=null,Ul=null,Vl=0,Gl=1/0,ql=null,Zl=!1,Wl=null,Xl=null,Hl=!1,Yl=null,Kl=0,Jl=0,Ql=null,$l=-1,tu=0;function eu(){return 0!==(6&Cl)?Jt():-1!==$l?$l:$l=Jt()}function nu(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Ll?Ll&-Ll:null!==yo.transition?(0===tu&&(tu=ve()),tu):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ru(t,e,n,r){if(50<Jl)throw Jl=0,Ql=null,Error(o(185));ge(t,n,r),0!==(2&Cl)&&t===Pl||(t===Pl&&(0===(2&Cl)&&(Fl|=n),4===Ol&&lu(t,Ll)),iu(t,r),1===n&&0===Cl&&0===(1&e.mode)&&(Gl=Jt()+500,Bi&&Vi()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=fe(t,t===Pl?Ll:0);if(0===r)null!==n&&Ht(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Ht(n),1===e)0===t.tag?function(t){Bi=!0,Ui(t)}(uu.bind(null,t)):Ui(uu.bind(null,t)),ai((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(xe(r)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Pu(n,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ou(t,e){if($l=-1,tu=0,0!==(6&Cl))throw Error(o(327));var n=t.callbackNode;if(ku()&&t.callbackNode!==n)return null;var r=fe(t,t===Pl?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gu(t,r);else{e=r;var i=Cl;Cl|=2;var a=vu();for(Pl===t&&Ll===e||(ql=null,Gl=Jt()+500,pu(t,e));;)try{_u();break}catch(l){du(t,l)}wo(),Tl.current=a,Cl=i,null!==Al?e=0:(Pl=null,Ll=0,e=Ol)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(r=i,e=au(t,i))),1===e)throw n=zl,pu(t,0),lu(t,r),iu(t,Jt()),n;if(6===e)lu(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gu(t,r))&&(0!==(a=de(t))&&(r=a,e=au(t,a))),1===e))throw n=zl,pu(t,0),lu(t,r),iu(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wu(t,Ul,ql);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=Vl+500-Jt())){if(0!==fe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wu.bind(null,t,Ul,ql),e);break}wu(t,Ul,ql);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){t.timeoutHandle=ri(wu.bind(null,t,Ul,ql),r);break}wu(t,Ul,ql);break;default:throw Error(o(329))}}}return iu(t,Jt()),t.callbackNode===n?ou.bind(null,t):null}function au(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(pu(t,e).flags|=256),2!==(t=gu(t,e))&&(e=Ul,Ul=n,null!==e&&su(e)),t}function su(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lu(t,e){for(e&=~Bl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function uu(t){if(0!==(6&Cl))throw Error(o(327));ku();var e=fe(t,0);if(0===(1&e))return iu(t,Jt()),null;var n=gu(t,e);if(0!==t.tag&&2===n){var r=de(t);0!==r&&(e=r,n=au(t,r))}if(1===n)throw n=zl,pu(t,0),lu(t,e),iu(t,Jt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Ul,ql),iu(t,Jt()),null}function cu(t,e){var n=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=n)&&(Gl=Jt()+500,Bi&&Vi())}}function hu(t){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&ku();var e=Cl;Cl|=1;var n=Il.transition,r=_e;try{if(Il.transition=null,_e=1,t)return t()}finally{_e=r,Il.transition=n,0===(6&(Cl=e))&&Vi()}}function fu(){Dl=Rl.current,Si(Rl)}function pu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:oa(),Si(Ci),Si(Ii),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Si(la);break;case 10:ko(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Pl=t,Al=t=Ru(t.current,null),Ll=Dl=e,Ol=0,zl=null,Bl=Fl=Nl=0,Ul=jl=null,null!==Mo){for(e=0;e<Mo.length;e++)if(null!==(r=(n=Mo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Mo=null}return t}function du(t,e){for(;;){var n=Al;try{if(wo(),fa.current=as,ma){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ma=!1}if(da=0,ga=ya=va=null,_a=!1,xa=0,Ml.current=null,null===n||null===n.return){Ol=1,zl=e,Al=null;break}t:{var a=t,s=n.return,l=n,u=e;if(e=Ll,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=gs(s);if(null!==d){d.flags&=-257,ms(d,s,l,0,e),1&d.mode&&ys(a,c,e),u=c;var v=(e=d).updateQueue;if(null===v){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break t}if(0===(1&e)){ys(a,c,e),yu();break t}u=Error(o(426))}else if(io&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ms(g,s,l,0,e),vo(cs(u,l));break t}}a=u=cs(u,l),4!==Ol&&(Ol=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,No(a,ds(0,u,e));break t;case 1:l=u;var m=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof m.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Xl||!Xl.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e,No(a,vs(a,l,e));break t}}a=a.return}while(null!==a)}bu(n)}catch(x){e=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function vu(){var t=Tl.current;return Tl.current=as,null===t?as:t}function yu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Nl)&&0===(268435455&Fl)||lu(Pl,Ll)}function gu(t,e){var n=Cl;Cl|=2;var r=vu();for(Pl===t&&Ll===e||(ql=null,pu(t,e));;)try{mu();break}catch(i){du(t,i)}if(wo(),Cl=n,Tl.current=r,null!==Al)throw Error(o(261));return Pl=null,Ll=0,Ol}function mu(){for(;null!==Al;)xu(Al)}function _u(){for(;null!==Al&&!Yt();)xu(Al)}function xu(t){var e=El(t.alternate,t,Dl);t.memoizedProps=t.pendingProps,null===e?bu(t):Al=e,Ml.current=null}function bu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Hs(n,e,Dl)))return void(Al=n)}else{if(null!==(n=Ys(n,e)))return n.flags&=32767,void(Al=n);if(null===t)return Ol=6,void(Al=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Al=e);Al=e=t}while(null!==e);0===Ol&&(Ol=5)}function wu(t,e,n){var r=_e,i=Il.transition;try{Il.transition=null,_e=1,function(t,e,n,r){do{ku()}while(null!==Yl);if(0!==(6&Cl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Pl&&(Al=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Pu(ee,(function(){return ku(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var s=_e;_e=1;var l=Cl;Cl|=4,Ml.current=null,function(t,e){if(ti=qe,pr(t=fr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break t}var s=0,l=-1,u=-1,c=0,h=0,f=t,p=null;e:for(;;){for(var d;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(d=f.firstChild);)p=f,f=d;for(;;){if(f===t)break e;if(p===n&&++c===i&&(l=s),p===a&&++h===r&&(u=s),null!==(d=f.nextSibling))break;p=(f=p).parentNode}f=d}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},qe=!1,$s=e;null!==$s;)if(t=(e=$s).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$s=t;else for(;null!==$s;){e=$s;try{var v=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,g=v.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:go(e.type,y),g);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(b){Su(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,$s=t;break}$s=e.return}v=nl,nl=!1}(t,n),gl(n,t),dr(ei),qe=!!ti,ei=ti=null,t.current=n,_l(n,t,i),Kt(),Cl=l,_e=s,Il.transition=a}else t.current=n;if(Hl&&(Hl=!1,Yl=t,Kl=i),a=t.pendingLanes,0===a&&(Xl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,Jt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,t=Wl,Wl=null,t;0!==(1&Kl)&&0!==t.tag&&ku(),a=t.pendingLanes,0!==(1&a)?t===Ql?Jl++:(Jl=0,Ql=t):Jl=0,Vi()}(t,e,n,r)}finally{Il.transition=i,_e=r}return null}function ku(){if(null!==Yl){var t=xe(Kl),e=Il.transition,n=_e;try{if(Il.transition=null,_e=16>t?16:t,null===Yl)var r=!1;else{if(t=Yl,Yl=null,Kl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,$s=t.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($s=c;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var p=(h=$s).sibling,d=h.return;if(al(h),h===c){$s=null;break}if(null!==p){p.return=d,$s=p;break}$s=d}}}var v=a.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else t:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,$s=m;break t}$s=a.return}}var _=t.current;for($s=_;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else t:for(s=_;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Su(l,l.return,w)}if(l===s){$s=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,$s=b;break t}$s=l.return}}if(Cl=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{_e=n,Il.transition=e}}return!1}function Eu(t,e,n){t=Oo(t,e=ds(0,e=cs(n,e),1),1),e=eu(),null!==t&&(ge(t,1,e),iu(t,e))}function Su(t,e,n){if(3===t.tag)Eu(t,t,n);else for(;null!==e;){if(3===e.tag){Eu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){e=Oo(e,t=vs(e,t=cs(n,t),1),1),t=eu(),null!==e&&(ge(e,1,t),iu(e,t));break}}e=e.return}}function Tu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Ll&n)===n&&(4===Ol||3===Ol&&(130023424&Ll)===Ll&&500>Jt()-Vl?pu(t,0):Bl|=n),iu(t,e)}function Mu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Po(t,e))&&(ge(t,e,n),iu(t,n))}function Iu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Mu(t,n)}function Cu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Mu(t,n)}function Pu(t,e){return Xt(t,e)}function Au(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(t,e,n,r){return new Au(t,e,n,r)}function Du(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ru(t,e){var n=t.alternate;return null===n?((n=Lu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Du(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case k:return zu(n.children,i,a,e);case E:s=8,i|=8;break;case S:return(t=Lu(12,n,e,2|i)).elementType=S,t.lanes=a,t;case C:return(t=Lu(13,n,e,i)).elementType=C,t.lanes=a,t;case P:return(t=Lu(19,n,e,i)).elementType=P,t.lanes=a,t;case D:return Nu(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case M:s=9;break t;case I:s=11;break t;case A:s=14;break t;case L:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Lu(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function zu(t,e,n,r){return(t=Lu(7,t,r,e)).lanes=n,t}function Nu(t,e,n,r){return(t=Lu(22,t,r,e)).elementType=D,t.lanes=n,t.stateNode={isHidden:!1},t}function Fu(t,e,n){return(t=Lu(6,t,null,e)).lanes=n,t}function Bu(t,e,n){return(e=Lu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ju(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ye(0),this.expirationTimes=ye(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ye(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,o,a,s,l){return t=new ju(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Lu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),t}function Vu(t){if(!t)return Mi;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Li(n))return Oi(t,n,e)}return e}function Gu(t,e,n,r,i,o,a,s,l){return(t=Uu(n,r,!0,t,0,o,0,s,l)).context=Vu(null),n=t.current,(o=Ro(r=eu(),i=nu(n))).callback=void 0!==e&&null!==e?e:null,Oo(n,o,i),t.current.lanes=i,ge(t,i,r),iu(t,r),t}function qu(t,e,n,r){var i=e.current,o=eu(),a=nu(i);return n=Vu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Oo(i,e,a))&&(ru(t,i,a,o),zo(t,i,a)),a}function Zu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xu(t,e){Wu(t,e),(t=t.alternate)&&Wu(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ci.current)xs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xs=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),po();break;case 5:aa(e);break;case 1:Li(e.type)&&zi(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ti(mo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ti(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fs(t,e,n):(Ti(la,1&la.current),null!==(t=Zs(t,e,n))?t.sibling:null);Ti(la,1&la.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Gs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(la,la.current),r)break;return null;case 22:case 23:return e.lanes=0,Ss(t,e,n)}return Zs(t,e,n)}(t,e,n);xs=0!==(131072&t.flags)}else xs=!1,io&&0!==(1048576&e.flags)&&$i(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qs(t,e),t=e.pendingProps;var i=Ai(e,Ii.current);So(e,n),i=Ea(null,e,r,t,i,n);var a=Sa();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Li(r)?(a=!0,zi(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Wo(e,r,t,n),e=Cs(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),bs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(qs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Du(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===I)return 11;if(t===A)return 14}return 2}(r),t=go(r,t),i){case 0:e=Ms(null,e,r,t,n);break t;case 1:e=Is(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=ks(null,e,r,go(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:go(r,i),n);case 1:return r=e.type,i=e.pendingProps,Is(t,e,r,i=e.elementType===r?i:go(r,i),n);case 3:t:{if(Ps(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Do(t,e),Fo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=As(t,e,r,n,i=cs(Error(o(423)),e));break t}if(r!==i){e=As(t,e,r,n,i=cs(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Qo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Zs(t,e,n);break t}bs(t,e,r,n)}e=e.child}return e;case 5:return aa(e),null===t&&uo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),Ts(t,e),bs(t,e,s,n),e.child;case 6:return null===t&&uo(e),null;case 13:return Fs(t,e,n);case 4:return ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Jo(e,null,r,n):bs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:go(r,i),n);case 7:return bs(t,e,e.pendingProps,n),e.child;case 8:case 12:return bs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ti(mo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ci.current){e=Zs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Ro(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Eo(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,So(e,n),r=r(i=To(i)),e.flags|=1,bs(t,e,r,n),e.child;case 14:return i=go(r=e.type,e.pendingProps),ks(t,e,r,i=go(r.type,i),n);case 15:return Es(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),qs(t,e),e.tag=1,Li(r)?(t=!0,zi(e)):t=!1,So(e,n),qo(e,r,i),Wo(e,r,i,n),Cs(null,e,r,!0,t,n);case 19:return Gs(t,e,n);case 22:return Ss(t,e,n)}throw Error(o(156,e.tag))};var Hu="function"===typeof reportError?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $u(){}function tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Zu(a);s.call(t)}}qu(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Zu(a);o.call(t)}}var a=Gu(e,r,t,0,null,!1,0,"",$u);return t._reactRootContainer=a,t[di]=a.current,Vr(8===t.nodeType?t.parentNode:t),hu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Zu(l);s.call(t)}}var l=Uu(t,0,!1,null,0,!1,0,"",$u);return t._reactRootContainer=l,t[di]=l.current,Vr(8===t.nodeType?t.parentNode:t),hu((function(){qu(e,l,n,r)})),l}(n,e,t,i,r);return Zu(a)}Ku.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));qu(t,e,null,null)},Ku.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){qu(null,t,null,null)})),e[di]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<De.length&&0!==e&&e<De[n].priority;n++);De.splice(n,0,t),0===n&&Ne(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(me(e,1|n),iu(e,Jt()),0===(6&Cl)&&(Gl=Jt()+500,Vi()))}break;case 13:hu((function(){var e=Po(t,1);if(null!==e){var n=eu();ru(e,t,1,n)}})),Xu(t,1)}},we=function(t){if(13===t.tag){var e=Po(t,134217728);if(null!==e)ru(e,t,134217728,eu());Xu(t,134217728)}},ke=function(t){if(13===t.tag){var e=nu(t),n=Po(t,e);if(null!==n)ru(n,t,e,eu());Xu(t,e)}},Ee=function(){return _e},Se=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},wt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bi(r);if(!i)throw Error(o(90));X(r),Q(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},It=cu,Ct=hu;var ec={usingClientEntryPoint:!1,Events:[_i,xi,bi,Tt,Mt,cu]},nc={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Zt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Ju(t))throw Error(o(299));var n=!1,r="",i=Hu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,0,n,0,r,i),t[di]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Yu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Zt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!Qu(e))throw Error(o(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Hu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Gu(e,null,t,1,null!=n?n:null,i,0,a,s),t[di]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ku(e)},e.render=function(t,e,n){if(!Qu(e))throw Error(o(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(o(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qu(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},6374:function(t,e,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function g(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||d}function m(){}function _(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||d}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=g.prototype;var x=_.prototype=new m;x.constructor=_,v(x,g.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:k.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var M=/\/+/g;function I(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+I(l,0):o,b(a)?(i="",null!=t&&(i=t.replace(M,"$&/")+"/"),C(a,e,i,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",b(t))for(var u=0;u<t.length;u++){var c=o+I(s=t[u],u);l+=C(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=C(s=s.value,e,i,c=o+I(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var r=[],i=0;return C(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function A(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var L={current:null},D={transition:null},R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=i,e.Profiler=a,e.PureComponent=_,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=v({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=k.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return L.current.useCallback(t,e)},e.useContext=function(t){return L.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return L.current.useDeferredValue(t)},e.useEffect=function(t,e){return L.current.useEffect(t,e)},e.useId=function(){return L.current.useId()},e.useImperativeHandle=function(t,e,n){return L.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return L.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return L.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return L.current.useMemo(t,e)},e.useReducer=function(t,e,n){return L.current.useReducer(t,e,n)},e.useRef=function(t){return L.current.useRef(t)},e.useState=function(t){return L.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return L.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return L.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},5844:function(t,e,n){"use strict";var r=n(4583).functionsHaveConfigurableNames(),i=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},r&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},3535:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(5844),a=n(1334),s=n(7888),l=i(a());r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},1334:function(t,e,n){"use strict";var r=n(5844),i=n(9396).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof RegExp.prototype.dotAll&&"boolean"===typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},7888:function(t,e,n){"use strict";var r=n(9396).supportsDescriptors,i=n(1334),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(u),n=o(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,p=3,d=!1,v=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function b(t){if(y=!1,x(t),!v)if(null!==r(u))v=!0,D(w);else{var e=r(c);null!==e&&R(b,e.startTime-t)}}function w(t,n){v=!1,y&&(y=!1,m(T),T=-1),d=!0;var o=p;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||t&&!C());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var s=a(f.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),x(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&R(b,h.startTime-n),l=!1}return l}finally{f=null,p=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,S=null,T=-1,M=5,I=-1;function C(){return!(e.unstable_now()-I<M)}function P(){if(null!==S){var t=e.unstable_now();I=t;var n=!0;try{n=S(!0,t)}finally{n?k():(E=!1,S=null)}}else E=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,L=A.port2;A.port1.onmessage=P,k=function(){L.postMessage(null)}}else k=function(){g(P,0)};function D(t){S=t,E||(E=!0,k())}function R(t,n){T=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){v||d||(v=!0,D(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(y?(m(T),T=-1):y=!0,R(b,o-a))):(t.sortIndex=s,n(u,t),v||d||(v=!0,D(w))),t},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},1848:function(t){"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},3556:function(t,e,n){"use strict";var r=n(1848),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],a=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*a)];s&&l.join("_");for(r.push(l);r.length<e;){for(var u=[],c=r.length,h=0,f=[],p=0;p<a;p++){for(var d=1/0,v=0;v<c;v++){var y=n(t[p],r[v]);y<=d&&(d=y)}u[p]=d}for(var g=0;g<a;g++)h+=u[g];for(var m=0;m<a;m++)f[m]={i:m,v:t[m],pr:u[m]/h,cs:0};f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr;for(var _=1;_<a;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var x=Math.random(),b=0;b<a-1&&f[b++].cs<x;);r.push(f[b-1].v)}return r}}},6530:function(t,e,n){"use strict";var r=n(1848),i=n(3556),o=r.eudist,a=(r.mandist,r.dist,i.kmrand),s=i.kmpp;function l(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],u=[],c=[],h=[],f=!1,p=r||1e4,d=t.length,v=t[0].length,y=v>0,g=[];if(n)i="kmrand"==n?a(t,e):"kmpp"==n?s(t,e):n;else for(var m={};i.length<e;){var _=Math.floor(Math.random()*d);m[_]||(m[_]=!0,i.push(t[_]))}do{l(e,0,g);for(var x=0;x<d;x++){for(var b=1/0,w=0,k=0;k<e;k++){(h=y?o(t[x],i[k]):Math.abs(t[x]-i[k]))<=b&&(b=h,w=k)}c[x]=w,g[w]++}for(var E=[],S=(u=[],0);S<e;S++)E[S]=y?l(v,0,E[S]):0,u[S]=i[S];if(y){for(var T=0;T<e;T++)i[T]=[];for(var M=0;M<d;M++)for(var I=E[c[M]],C=t[M],P=0;P<v;P++)I[P]+=C[P];f=!0;for(var A=0;A<e;A++){for(var L=i[A],D=E[A],R=u[A],O=g[A],z=0;z<v;z++)L[z]=D[z]/O||0;if(f)for(var N=0;N<v;N++)if(R[N]!=L[N]){f=!1;break}}}else{for(var F=0;F<d;F++){E[c[F]]+=t[F]}for(var B=0;B<e;B++)i[B]=E[B]/g[B]||0;f=!0;for(var j=0;j<e;j++)if(u[j]!=i[j]){f=!1;break}}f=f||--p<=0}while(!f);return{it:1e4-p,k:e,idxs:c,centroids:i}}},4613:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var r=n(5671),i=n(3144),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,r.Z)(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}return(0,i.Z)(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}}]),t}();function a(t,e){return t<e?-1:t>e?1:0}},4035:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Rt:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function v(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var g=function(){};g.prototype.interfaces_=function(){return[]},g.prototype.getClass=function(){return g},g.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},x={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,x);var b=function(){},w=function(){},k=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!g.equalsWithTolerance(this.x,e.x,n)&&!!g.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new m("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return g.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[b,w,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return T},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return _.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(E,S);var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};T.prototype.compare=function(t,e){var n=t,r=e,i=T.compare(n.x,r.x);if(0!==i)return i;var o=T.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(n.z,r.z)},T.prototype.interfaces_=function(){return[k]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var M=function(){};M.prototype.create=function(){},M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M};var I=function(){},C={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I},I.toLocationSymbol=function(t){switch(t){case I.EXTERIOR:return"e";case I.BOUNDARY:return"b";case I.INTERIOR:return"i";case I.NONE:return"-"}throw new m("Unknown location value: "+t)},C.INTERIOR.get=function(){return 0},C.BOUNDARY.get=function(){return 1},C.EXTERIOR.get=function(){return 2},C.NONE.get=function(){return-1},Object.defineProperties(I,C);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},A=function(){},L={LOG_10:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/A.LOG_10},A.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},A.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},A.wrap=function(t,e){return t<0?e- -t%e:t%e},A.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},A.average=function(t,e){return(t+e)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(A,L);var D=function(t){this.str=t};D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var O=function(){};O.isWhitespace=function(t){return t<=32&&t>=0||127===t},O.toUpperCase=function(t){return t.toUpperCase()};var z=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},N={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};z.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},z.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=z.magnitude(n._hi),i=z.TEN.pow(r);(n=n.divide(i)).gt(z.TEN)?(n=n.divide(z.TEN),r+=1):n.lt(z.ONE)&&(n=n.multiply(z.TEN),r-=1);for(var o=r+1,a=new D,s=z.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(z.valueOf(u)).multiply(z.TEN),c&&n.selfAdd(z.TEN);var f=!0,p=z.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=r,a.toString()},z.prototype.sqr=function(){return this.multiply(this)},z.prototype.doubleValue=function(){return this._hi+this._lo},z.prototype.subtract=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},z.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},z.prototype.isZero=function(){return 0===this._hi&&0===this._lo},z.prototype.selfSubtract=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},z.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},z.prototype.min=function(t){return this.le(t)?this:t},z.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=z.SPLIT*l)-(i=u-l))*(a=(h=z.SPLIT*n)-(a=h-n))-(c=l*n)+i*(s=n-a)+(o=l-i)*a+o*s,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},z.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},z.prototype.divide=function(){if(arguments[0]instanceof z){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=z.SPLIT*o)-(e=a-o)),l=e*(r=(l=z.SPLIT*t._hi)-(r=l-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new z(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?z.createNaN():z.copy(this).selfDivide(u,0)}},z.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},z.prototype.pow=function(t){if(0===t)return z.valueOf(1);var e=new z(this),n=z.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},z.prototype.ceil=function(){if(this.isNaN())return z.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new z(t,e)},z.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},z.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},z.prototype.setValue=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},z.prototype.max=function(t){return this.ge(t)?this:t},z.prototype.sqrt=function(){if(this.isZero())return z.valueOf(0);if(this.isNegative())return z.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=z.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},z.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,f=null,p=null,d=null,v=null,y=null;p=this._hi+l,h=this._lo+u,d=p-(v=p-this._hi),f=h-(y=h-this._lo);var g=(c=p+(v=(d=l-v+(this._hi-d))+h))+(v=(f=u-y+(this._lo-f))+(v+(p-c))),m=v+(c-g);return this._hi=g,this._lo=m,this}},z.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null;i=(l=z.SPLIT*this._hi)-this._hi,u=z.SPLIT*n,i=l-i,o=this._hi-i,a=u-n;var c=(l=this._hi*n)+(u=i*(a=u-a)-l+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},z.prototype.selfSqr=function(){return this.selfMultiply(this)},z.prototype.floor=function(){if(this.isNaN())return z.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new z(t,e)},z.prototype.negate=function(){return this.isNaN()?this:new z(-this._hi,-this._lo)},z.prototype.clone=function(){},z.prototype.multiply=function(){if(arguments[0]instanceof z){var t=arguments[0];return t.isNaN()?z.createNaN():z.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?z.createNaN():z.copy(this).selfMultiply(e,0)}},z.prototype.isNaN=function(){return _.isNaN(this._hi)},z.prototype.intValue=function(){return Math.trunc(this._hi)},z.prototype.toString=function(){var t=z.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},z.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+z.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+z.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},z.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=z.SPLIT*i)-(t=o-i)),n=(s=z.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new z(l,i-l+o)},z.prototype.toSciNotation=function(){if(this.isZero())return z.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=z.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},z.prototype.abs=function(){return this.isNaN()?z.NaN:this.isNegative()?this.negate():new z(this)},z.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},z.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},z.prototype.add=function(){if(arguments[0]instanceof z){var t=arguments[0];return z.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return z.copy(this).selfAdd(e)}},z.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof z){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},z.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},z.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},z.prototype.trunc=function(){return this.isNaN()?z.NaN:this.isPositive()?this.floor():this.ceil()},z.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},z.prototype.interfaces_=function(){return[e,b,w]},z.prototype.getClass=function(){return z},z.sqr=function(t){return z.valueOf(t).selfMultiply(t)},z.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return z.parse(t)}if("number"==typeof arguments[0])return new z(arguments[0])},z.sqrt=function(t){return z.valueOf(t).sqrt()},z.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new z,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,O.isDigit(u)){var c=u-"0";o.selfMultiply(z.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=R.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(p>0){var d=z.TEN.pow(p);f=o.divide(d)}else if(p<0){var v=z.TEN.pow(-p);f=o.multiply(v)}return r?f.negate():f},z.createNaN=function(){return new z(_.NaN,_.NaN)},z.copy=function(t){return new z(t)},z.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},z.stringOfChar=function(t,e){for(var n=new D,r=0;r<e;r++)n.append(t);return n.toString()},N.PI.get=function(){return new z(3.141592653589793,12246467991473532e-32)},N.TWO_PI.get=function(){return new z(6.283185307179586,24492935982947064e-32)},N.PI_2.get=function(){return new z(1.5707963267948966,6123233995736766e-32)},N.E.get=function(){return new z(2.718281828459045,14456468917292502e-32)},N.NaN.get=function(){return new z(_.NaN,_.NaN)},N.EPS.get=function(){return 123259516440783e-46},N.SPLIT.get=function(){return 134217729},N.MAX_PRINT_DIGITS.get=function(){return 32},N.TEN.get=function(){return z.valueOf(10)},N.ONE.get=function(){return z.valueOf(1)},N.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},N.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(z,N);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var r=F.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=z.valueOf(e.x).selfAdd(-t.x),o=z.valueOf(e.y).selfAdd(-t.y),a=z.valueOf(n.x).selfAdd(-e.x),s=z.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,r){var i=z.valueOf(r.y).selfSubtract(n.y).selfMultiply(z.valueOf(e.x).selfSubtract(t.x)),o=z.valueOf(r.x).selfSubtract(n.x).selfMultiply(z.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=z.valueOf(r.x).selfSubtract(n.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),l=z.valueOf(r.y).selfSubtract(n.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=z.valueOf(t.x).selfAdd(z.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=z.valueOf(e.x).selfSubtract(t.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),f=z.valueOf(e.y).selfSubtract(t.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=z.valueOf(n.y).selfAdd(z.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new E(c,d)},F.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return F.signum(a);r=i+o}else{if(!(i<0))return F.signum(a);if(o>=0)return F.signum(a);r=-i-o}var s=F.DP_SAFE_EPSILON*r;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var j=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},j.prototype.setOrdinate=function(t,e,n){},j.prototype.size=function(){},j.prototype.getOrdinate=function(t,e){},j.prototype.getCoordinate=function(){},j.prototype.getCoordinateCopy=function(t){},j.prototype.getDimension=function(){},j.prototype.getX=function(t){},j.prototype.clone=function(){},j.prototype.expandEnvelope=function(t){},j.prototype.copy=function(){},j.prototype.getY=function(t){},j.prototype.toCoordinateArray=function(){},j.prototype.interfaces_=function(){return[w]},j.prototype.getClass=function(){return j},Object.defineProperties(j,U);var V=function(){},G=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),q=function(){};q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var Z=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],v=h.y-f.y,y=f.x-h.x,g=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=y*x-_*g,this.y=m*g-v*x,this.w=v*_-m*y}};Z.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new G;return t},Z.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new G;return t},Z.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},Z.prototype.interfaces_=function(){return[]},Z.prototype.getClass=function(){return Z},Z.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(f)||_.isInfinite(f))throw new G;return new E(h,f)};var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},X={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new W(e,r,n,i)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},W.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},W.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[b,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l)&&!(c<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(u>l)&&!(c<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,X);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(t){this.geometryFactory=t||new ge};Y.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],J[n]&&(e=J[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Y.prototype.write=function(t){return this.extractGeometry(t)},Y.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(H.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(H.trimParens,"$1"),n=J.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new Y(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,W.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Z.intersection(t,n,r,i)}catch(a){if(!(a instanceof G))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=F.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),a=new E(n),s=new E(r),l=new E;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=W.intersects(e,n,r),a=W.intersects(e,n,i),s=W.intersects(r,i,e),l=W.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!W.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),l=st.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===a?this._intPt[0]=new E(i):0===s?this._intPt[0]=new E(e):0===l&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ot.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==I.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof E&&P(arguments[1],j)){for(var t=arguments[1],e=new at(arguments[0]),n=new E,r=new E,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var l=o[s],u=o[s-1];if(a.countSegment(l,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],j)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new E,u=new E,c=new E;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(W.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?A.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==I.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=st.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return st.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return st.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,lt);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[w,b,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,ht);var ft=function(){};ft.interfaces_=function(){return[ut]},ft.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},vt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},vt.Mod2BoundaryNodeRule.get=function(){return yt},vt.EndPointBoundaryNodeRule.get=function(){return gt},vt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},vt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},vt.MOD2_BOUNDARY_RULE.get=function(){return new yt},vt.ENDPOINT_BOUNDARY_RULE.get=function(){return new gt},vt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},vt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},vt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,vt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var gt=function(){};gt.prototype.isInBoundary=function(t){return t>0},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var xt=function(){};xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(r.prototype=new Error).name="NoSuchElementException";var kt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Et(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Et=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),St=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],v=arguments[1],y=arguments[2],g=arguments[3],m=1;y>g&&(m=-1);for(var _=y;_!==g;_+=m)this.add(d[_],v);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(kt),Tt=function(){},Mt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Mt.ForwardComparator.get=function(){return It},Mt.BidirectionalComparator.get=function(){return Ct},Mt.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Tt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tt.indexOf(r,e)<0)return r}return null},Tt.scroll=function(t,e){var n=Tt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tt.intersection=function(t,e){for(var n=new St,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new St(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new E(r[i+l])},Tt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tt.envelope=function(t){for(var e=new W,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tt.extract=function(t,e,n){e=A.clamp(e,0,t.length);var r=(n=A.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tt,Mt);var It=function(){};It.prototype.compare=function(t,e){return Tt.compare(t,e)},It.prototype.interfaces_=function(){return[k]},It.prototype.getClass=function(){return It};var Ct=function(){};Ct.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tt.compare(n,r);return Tt.isEqualReversed(n,r)?0:i},Ct.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tt.increasingDirection(n),o=Tt.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},Ct.prototype.interfaces_=function(){return[k]},Ct.prototype.getClass=function(){return Ct};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var At=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){};var Lt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Rt=0;(h.prototype=new At).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===u(s(s(t)))){var e=c(s(s(t)));1===a(e)?(l(s(t),Rt),l(e,Rt),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=u(s(s(t)));1===a(n)?(l(s(t),Rt),l(n,Rt),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Rt},h.prototype.values=function(){var t=new kt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Lt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Ot=function(){};Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},f.prototype=new o,(p.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new zt(this)};var zt=function(t){this.treeSet_=t,this.position_=0};zt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},zt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},zt.prototype.remove=function(){throw new i};var Nt=function(){};Nt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Nt.asList=function(t){for(var e=new kt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new m("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(O.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var jt=function(){};jt.prototype.filter=function(t){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Vt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Nt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Nt.asList(this._geometries)),n=new p(Nt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=i.getGeometryN(s),c=l.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(P(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],jt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ut)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Gt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ot]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vt),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Yt?this.boundaryLineString(this._geom):this._geom instanceof Gt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new kt;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Zt,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){return 1===arguments.length?new qt(arguments[0]).getBoundary():2===arguments.length?new qt(arguments[0],arguments[1]).getBoundary():void 0};var Zt=function(){this.count=null};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Wt=function(){},Xt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Wt.split=function(t,e){for(var n=e.length,r=new kt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},Wt.toString=function(){if(1===arguments.length){var t=arguments[0];return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Xt.NEWLINE.get=function(){return q.getProperty("line.separator")},Xt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Xt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,j.X)===t.getOrdinate(e-1,j.X)&&t.getOrdinate(0,j.Y)===t.getOrdinate(e-1,j.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!_.isNaN(a)||!_.isNaN(s)))return!1}return!0},Ht.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ht.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ht.copy(e,i-1,r,o,1);return r},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ht.swap(t,r,e-r)},Ht.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ht.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,n,r+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new D;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,j.X)===e.getOrdinate(n-1,j.X)&&e.getOrdinate(0,j.Y)===e.getOrdinate(n-1,j.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ht.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ht.copy(e,0,r,o,1);return r};var Yt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],jt)||P(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ot]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Jt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var t=new W;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],jt)||P(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var $t=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o===(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Nt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tt.minCoordinate(e.getCoordinates());Tt.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),f=i.getInteriorRingN(c),p=h.compareToSameClass(f,r);if(0!==p)return p;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){if(P(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,jt))t.filter(this);else if(P(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vt),ee=function(t){function e(e,n){e instanceof E&&n instanceof ge&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Yt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new kt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Jt||t instanceof Yt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new kt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Gt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new kt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Yt?e.createLineString(n):t instanceof Jt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Yt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(P(arguments[0],j)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new E}},ue={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case j.X:this._coordinates[t].x=n;break;case j.Y:this._coordinates[t].y=n;break;case j.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case j.X:return this._coordinates[t].x;case j.Y:return this._coordinates[t].y;case j.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[j,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(P(arguments[0],j))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ce.prototype.interfaces_=function(){return[M,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new kt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Lt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ve){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,b]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var ve=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ve.prototype.readResolve=function(){return ve.nameToTypeMap.get(this._name)},ve.prototype.toString=function(){return this._name},ve.prototype.interfaces_=function(){return[e]},ve.prototype.getClass=function(){return ve},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new fe},Object.defineProperties(ve,ye),pe.Type=ve,pe.FIXED=new ve("FIXED"),pe.FLOATING=new ve("FLOATING"),pe.FLOATING_SINGLE=new ve("FLOATING SINGLE");var ge=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],M)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ge.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},ge.prototype.createLineString=function(t){return t?t instanceof Array?new Yt(this.getCoordinateSequenceFactory().create(t),this):P(t,j)?new Yt(t,this):void 0:new Yt(this.getCoordinateSequenceFactory().create([]),this)},ge.prototype.createMultiLineString=function(){return 0===arguments.length?new Gt(null,this):1===arguments.length?new Gt(arguments[0],this):void 0},ge.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ge.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(ge.toPolygonArray(t));if(s instanceof Yt)return this.createMultiLineString(ge.toLineStringArray(t));if(s instanceof Jt)return this.createMultiPoint(ge.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ge.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ge.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],j))return new Jt(arguments[0],this)}},ge.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ge.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(P(arguments[0],j)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},ge.prototype.getSRID=function(){return this._SRID},ge.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ge.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ge.prototype.getPrecisionModel=function(){return this._precisionModel},ge.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],j))return new ee(arguments[0],this)}},ge.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ge.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],j)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Ht.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ge.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ge.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ge,me);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new ge};xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!be[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=be.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(be.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},ke=function(t){this.geometryFactory=t||new ge,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};ke.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},ke.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ee=function(){this.parser=new xe(this.geometryFactory)};Ee.prototype.write=function(t){return this.parser.write(t)};var Se=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.opposite=function(t){return t===Se.LEFT?Se.RIGHT:t===Se.RIGHT?Se.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Se,Te),(v.prototype=new Error).name="EmptyStackException",(y.prototype=new wt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new v;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new v;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Me=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Me.prototype.getCoordinate=function(){return this._minCoord},Me.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Me.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Me.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Se.LEFT;return n[e].y<n[e+1].y&&(r=Se.RIGHT),r},Me.prototype.getEdge=function(){return this._orientedDe},Me.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Me.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Me.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Ie=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Ce=function(){this.array_=[]};Ce.prototype.addLast=function(t){this.array_.push(t)},Ce.prototype.removeFirst=function(){return this.array_.shift()},Ce.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new kt,this._nodes=new kt,this._rightMostCoord=null,this._env=null,this._finder=new Me};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ie("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Se.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Se.RIGHT)>=1&&e.getDepth(Se.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Lt,n=new Ce,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Se.LEFT,t.getDepth(Se.RIGHT)),e.setDepth(Se.RIGHT,t.getDepth(Se.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[b]},Pe.prototype.getClass=function(){return Pe};var Ae=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Se.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Se.ON]=o,this.location[Se.LEFT]=a,this.location[Se.RIGHT]=s}};Ae.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ae.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==I.NONE)return!1;return!0},Ae.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===I.NONE&&(this.location[e]=t)},Ae.prototype.isLine=function(){return 1===this.location.length},Ae.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Se.ON]=this.location[Se.ON],e[Se.LEFT]=I.NONE,e[Se.RIGHT]=I.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===I.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ae.prototype.getLocations=function(){return this.location},Ae.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=t},Ae.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(I.toLocationSymbol(this.location[Se.LEFT])),t.append(I.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&t.append(I.toLocationSymbol(this.location[Se.RIGHT])),t.toString()},Ae.prototype.setLocations=function(t,e,n){this.location[Se.ON]=t,this.location[Se.LEFT]=e,this.location[Se.RIGHT]=n},Ae.prototype.get=function(t){return t<this.location.length?this.location[t]:I.NONE},Ae.prototype.isArea=function(){return this.location.length>1},Ae.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===I.NONE)return!0;return!1},Ae.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Se.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ae.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(I.NONE)},Ae.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ae.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var Le=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ae(e),this.elt[1]=new Ae(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ae(n.elt[0]),this.elt[1]=new Ae(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ae(I.NONE),this.elt[1]=new Ae(I.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Ae(o,a,s),this.elt[1]=new Ae(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Ae(I.NONE,I.NONE,I.NONE),this.elt[1]=new Ae(I.NONE,I.NONE,I.NONE),this.elt[l].setLocations(u,c,h)}};Le.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Le.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Le.prototype.isNull=function(t){return this.elt[t].isNull()},Le.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Le.prototype.isLine=function(t){return this.elt[t].isLine()},Le.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ae(t.elt[e]):this.elt[e].merge(t.elt[e])},Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Le.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Se.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Le.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Le.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Le.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Le.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Se.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Le.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Le.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Le.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ae(this.elt[t].location[0]))},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.toLineLabel=function(t){for(var e=new Le(I.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new kt,this._pts=new kt,this._label=new Le(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new kt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ie("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ie("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Se.RIGHT);if(n===I.NONE)return null;if(this._label.getLocation(e)===I.NONE)return this._label.setLocation(e,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Oe=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new kt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),ze=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ze.prototype.setVisited=function(t){this._isVisited=t},ze.prototype.setInResult=function(t){this._isInResult=t},ze.prototype.isCovered=function(){return this._isCovered},ze.prototype.isCoveredSet=function(){return this._isCoveredSet},ze.prototype.setLabel=function(t){this._label=t},ze.prototype.getLabel=function(){return this._label},ze.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ze.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ze.prototype.isInResult=function(){return this._isInResult},ze.prototype.isVisited=function(){return this._isVisited},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Ne=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Le(0,I.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=I.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==I.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Le(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Le)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===I.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=I.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case I.BOUNDARY:n=I.INTERIOR;break;case I.INTERIOR:default:n=I.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Fe=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Ne){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new kt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===I.BOUNDARY&&e.add(r)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},je={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},je.NE.get=function(){return 0},je.NW.get=function(){return 1},je.SW.get=function(){return 2},je.SE.get=function(){return 3},Object.defineProperties(Be,je);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[b]},Ue.prototype.getClass=function(){return Ue};var Ve=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ie("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Se.LEFT)===I.INTERIOR&&this._label.getLocation(e,Se.RIGHT)===I.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Se.LEFT]+"/"+this._depth[Se.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Se.LEFT&&(r=-1);var i=Se.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===I.EXTERIOR&&e===I.INTERIOR?1:t===I.INTERIOR&&e===I.EXTERIOR?-1:0},e}(Ue),Ge=function(){};Ge.prototype.createNode=function(t){return new Ne(t,null)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var qe=function(){if(this._edges=new kt,this._nodes=null,this._edgeEndList=new kt,0===arguments.length)this._nodes=new Fe(new Ge);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof Ne){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===I.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ve(n,!0),i=new Ve(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ze=function(){this._geometryFactory=null,this._shellList=new kt;var t=arguments[0];this._geometryFactory=t};Ze.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ze.prototype.computePolygons=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ze.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ie("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ze.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new kt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ze.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ze.prototype.buildMaximalEdgeRings=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Oe(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ze.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ze.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ze.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&st.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Ze.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ze.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new kt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var We=function(){};We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xe.prototype.getItem=function(){return this._item},Xe.prototype.getBounds=function(){return this._bounds},Xe.prototype.interfaces_=function(){return[We,e]},Xe.prototype.getClass=function(){return Xe};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new kt,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ye=function(){};Ye.prototype.visitItem=function(t){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ke=function(){};Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Je=function(){if(this._childBoundables=new kt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[We,e]},Je.prototype.getClass=function(){return Je},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Qe);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Nt.sort(n,e):Nt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$e.singletonList=function(t){var e=new kt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Je};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new kt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Je?t+=this.size(n):n instanceof Xe&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xe&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new kt:t}if(1===arguments.length){for(var e=arguments[0],n=new kt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Je){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xe?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xe(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Je?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Xe),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new kt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Je?this.query(i,l,o):l instanceof Xe?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var u=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),f=0;f<h.size();f++){var p=h.get(f);this.getIntersectsOp().intersects(p.getBounds(),u)&&(p instanceof Je?this.query(u,p,c):p instanceof Xe?c.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Je&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Je){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new kt;n.add(this.createNode(e));var r=new kt(t);$e.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new kt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new kt;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new kt(t);$e.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new He;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),f=h.getDistance();if(f>=l)break;h.isLeaves()?(l=f,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Xe(arguments[0],arguments[1]),v=new tn(this.getRoot(),d,p);return this.nearestNeighbour(v)[0]}},n.prototype.interfaces_=function(){return[Ke,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[k]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[k]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new W(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[b]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new St;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new kt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new E(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[fn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new E(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return Q.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var vn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},yn={serialVersionUID:{configurable:!0}};vn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},vn.prototype.orientationIndex=function(){if(arguments[0]instanceof vn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},vn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},vn.prototype.isVertical=function(){return this.p0.x===this.p1.x},vn.prototype.equals=function(t){if(!(t instanceof vn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},vn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},vn.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof vn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new vn(a,s)}},vn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},vn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},vn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},vn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},vn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},vn.prototype.midPoint=function(){return vn.midPoint(this.p0,this.p1)},vn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},vn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},vn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},vn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},vn.prototype.getLength=function(){return this.p0.distance(this.p1)},vn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},vn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},vn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},vn.prototype.lineIntersection=function(t){try{return Z.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof G))throw t}return null},vn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},vn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new E(n-l,r+s)},vn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},vn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},vn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},vn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},vn.prototype.distance=function(){if(arguments[0]instanceof vn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},vn.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},vn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},vn.prototype.interfaces_=function(){return[b,e]},vn.prototype.getClass=function(){return vn},vn.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(vn,yn);var gn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new vn,this._overlapSeg2=new vn};gn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new W(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new kt;n.add(new R(e));do{var r=_n.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new kt,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new mn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xn=function(){};xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new kt,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new kn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return kn},Object.defineProperties(e,n),e}(bn),kn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gn),En=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Sn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};En.prototype.getEndCapStyle=function(){return this._endCapStyle},En.prototype.isSingleSided=function(){return this._isSingleSided},En.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=En.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=En.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==En.JOIN_ROUND&&(this._quadrantSegments=En.DEFAULT_QUADRANT_SEGMENTS)},En.prototype.getJoinStyle=function(){return this._joinStyle},En.prototype.setJoinStyle=function(t){this._joinStyle=t},En.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},En.prototype.getSimplifyFactor=function(){return this._simplifyFactor},En.prototype.getQuadrantSegments=function(){return this._quadrantSegments},En.prototype.setEndCapStyle=function(t){this._endCapStyle=t},En.prototype.getMitreLimit=function(){return this._mitreLimit},En.prototype.setMitreLimit=function(t){this._mitreLimit=t},En.prototype.setSingleSided=function(t){this._isSingleSided=t},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sn.CAP_ROUND.get=function(){return 1},Sn.CAP_FLAT.get=function(){return 2},Sn.CAP_SQUARE.get=function(){return 3},Sn.JOIN_ROUND.get=function(){return 1},Sn.JOIN_MITRE.get=function(){return 2},Sn.JOIN_BEVEL.get=function(){return 3},Sn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(En,Sn);var Tn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Mn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Tn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Tn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Tn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Tn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Tn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Tn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Tn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Tn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tn.DELETE;)e++;return e},Tn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Tn.prototype.collapseLine=function(){for(var t=new St,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.simplify=function(t,e){return new Tn(t).simplify(e)},Mn.INIT.get=function(){return 0},Mn.DELETE.get=function(){return 1},Mn.KEEP.get=function(){return 1},Mn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tn,Mn);var In=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new kt},Cn={COORDINATE_ARRAY_TYPE:{configurable:!0}};In.prototype.getCoordinates=function(){return this._ptList.toArray(In.COORDINATE_ARRAY_TYPE)},In.prototype.setPrecisionModel=function(t){this._precisionModel=t},In.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},In.prototype.revere=function(){},In.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},In.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},In.prototype.toString=function(){return(new ge).createLineString(this.getCoordinates()).toString()},In.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},In.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},Cn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(In,Cn);var Pn=function(){},An={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},An.PI_TIMES_2.get=function(){return 2*Math.PI},An.PI_OVER_2.get=function(){return Math.PI/2},An.PI_OVER_4.get=function(){return Math.PI/4},An.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},An.CLOCKWISE.get=function(){return st.CLOCKWISE},An.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,An);var Ln=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new vn,this._seg1=new vn,this._offset0=new vn,this._offset1=new vn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===En.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ln.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Se.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Se.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ln.prototype.addLineEndCap=function(t,e){var n=new vn(t,e),r=new vn;this.computeOffsetSegment(n,Se.LEFT,this._distance,r);var i=new vn;this.computeOffsetSegment(n,Se.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case En.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case En.CAP_SQUARE:var l=new E;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new E(r.p1.x+l.x,r.p1.y+l.y),c=new E(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Ln.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ln.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Z.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof G))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ln.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Ln.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===En.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===En.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ln.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ln.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ln.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ln.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ln.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ln.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),l=Pn.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),f=i.y+u*Math.sin(l),p=new E(h,f),d=new vn(i,p),v=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Se.LEFT?(this._segList.addPt(v),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(v))},Ln.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Se.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Ln.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new E;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Ln.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ln.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ln.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ln.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new In,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ln.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===En.JOIN_BEVEL||this._bufParams.getJoinStyle()===En.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Ln.prototype.closeRing=function(){this._segList.closeRing()},Ln.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ln,Dn);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tt.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Tn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Se.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Se.RIGHT&&(r=-r);var i=Tn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Tn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Se.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Tn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Se.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:e.createCircle(t);break;case En.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Se.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Ln(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var On=function(){this._subgraphs=null,this._seg=new vn,this._cga=new st;var t=arguments[0];this._subgraphs=t},zn={DepthSegment:{configurable:!0}};On.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new kt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof E&&arguments[1]instanceof Ve){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Se.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Se.RIGHT));var h=new Nn(this._seg,c);s.add(h)}}else if(P(arguments[2],wt)&&arguments[0]instanceof E&&P(arguments[1],wt))for(var f=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var v=d.next();v.isForward()&&this.findStabbedSegments(f,v,p)}},On.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},zn.DepthSegment.get=function(){return Nn},Object.defineProperties(On,zn);var Nn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new vn(t),this._leftDepth=e};Nn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Nn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Nn.prototype.toString=function(){return this._upwardSeg.toString()},Nn.prototype.interfaces_=function(){return[b]},Nn.prototype.getClass=function(){return Nn};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,r){return t*r-e*n},Fn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Fn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Fn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*Fn.det(o,a,s,l),c=Fn.det(a,o*o+a*a,l,s*s+l*l),h=Fn.det(o,o*o+a*a,s,s*s+l*l);return new E(r-c/u,i+h/u)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Z(t.x+n/2,t.y+r/2,1),o=new Z(t.x-r+n/2,t.y+n+r/2,1);return new Z(i,o)},Fn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new E(t.x+i*o,t.y+i*a)},Fn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2},Fn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Fn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new E(s,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new kt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Se.LEFT;this._distance<0&&(e=-this._distance,n=Se.RIGHT);var r=t.getExteriorRing(),i=Tt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,I.EXTERIOR,I.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Se.opposite(n),I.INTERIOR,I.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Le(0,I.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Se.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Yt?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof te||t instanceof Gt||t instanceof ne||t instanceof Vt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var jn=function(){};jn.prototype.locate=function(t){},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[bt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof Vt)};var Vn=function(){this._geom=null;var t=arguments[0];this._geom=t};Vn.prototype.locate=function(t){return Vn.locate(t,this._geom)},Vn.prototype.interfaces_=function(){return[jn]},Vn.prototype.getClass=function(){return Vn},Vn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Vn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Vn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Vn.isPointInRing(t,i))return!1}return!0},Vn.containsPoint=function(t,e){if(e instanceof $t)return Vn.containsPointInPolygon(t,e);if(e instanceof Vt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&Vn.containsPoint(t,r))return!0}return!1},Vn.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:Vn.containsPoint(t,e)?I.INTERIOR:I.EXTERIOR};var Gn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]};Gn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Gn.prototype.propagateSideLabels=function(t){for(var e=I.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Se.LEFT)!==I.NONE&&(e=r.getLocation(t,Se.LEFT))}if(e===I.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Se.ON)===I.NONE&&s.setLocation(t,Se.ON,i),s.isArea(t)){var l=s.getLocation(t,Se.LEFT),u=s.getLocation(t,Se.RIGHT);if(u!==I.NONE){if(u!==i)throw new Ie("side location conflict",a.getCoordinate());l===I.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else et.isTrue(s.getLocation(t,Se.LEFT)===I.NONE,"found single null side"),s.setLocation(t,Se.RIGHT,i),s.setLocation(t,Se.LEFT,i)}}},Gn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Gn.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Gn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Se.LEFT);et.isTrue(r!==I.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Se.LEFT),l=a.getLocation(t,Se.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},Gn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Gn.prototype.iterator=function(){return this.getEdges().iterator()},Gn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new kt(this._edgeMap.values())),this._edgeList},Gn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===I.NONE&&(this._ptInAreaLocation[t]=Vn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Gn.prototype.toString=function(){var t=new D;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Gn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Gn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===I.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=I.NONE;if(e[l])u=I.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},Gn.prototype.getDegree=function(){return this._edgeMap.size()},Gn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ie("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new kt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Se.LEFT),r=t.getDepth(Se.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ie("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Se.RIGHT,a),a=l.getDepth(Se.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=I.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=I.INTERIOR;break}if(r.isInResult()){t=I.EXTERIOR;break}}}if(t===I.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===I.INTERIOR):(a.isInResult()&&(i=I.EXTERIOR),s.isInResult()&&(i=I.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Le(I.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==I.INTERIOR&&o!==I.BOUNDARY||this._label.setLocation(i,I.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gn),Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Ne(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ge),Wn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wn.prototype.compareTo=function(t){var e=t;return Wn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wn.prototype.interfaces_=function(){return[b]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(t){return 1===Tt.increasingDirection(t)},Wn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Xn=function(){this._edges=new kt,this._ocaMap=new h};Xn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(t){return this._edges.get(t)},Xn.prototype.findEqualEdge=function(t){var e=new Wn(t.getCoordinates());return this._ocaMap.get(e)},Xn.prototype.add=function(t){this._edges.add(t);var e=new Wn(t.getCoordinates());this._ocaMap.put(e,t)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,r){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Yn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yn.prototype.getLineIntersector=function(){return this._li},Yn.prototype.hasProperIntersection=function(){return this._hasProper},Yn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yn.prototype.hasIntersection=function(){return this._hasIntersection},Yn.prototype.isDone=function(){return!1},Yn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yn.prototype.interfaces_=function(){return[Hn]},Yn.prototype.getClass=function(){return Yn},Yn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};Kn.prototype.getSegmentIndex=function(){return this.segmentIndex},Kn.prototype.getCoordinate=function(){return this.coord},Kn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kn.prototype.getDistance=function(){return this.dist},Kn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kn.prototype.interfaces_=function(){return[b]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Jn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Jn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Le(this.edge._label))},Jn.prototype.add=function(t,e,n){var r=new Kn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new kt;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),v=Math.trunc((s+l)/2);i<d&&(s<v&&this.computeIntersectsForChain(i,d,a,s,v,u),v<l&&this.computeIntersectsForChain(i,d,a,v,l,u)),d<o&&(s<v&&this.computeIntersectsForChain(d,o,a,s,v,u),v<l&&this.computeIntersectsForChain(d,o,a,v,l,u))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Se.RIGHT]-this._depth[t][Se.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?I.EXTERIOR:I.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==I.EXTERIOR&&r!==I.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===I.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===I.EXTERIOR?0:t===I.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Le.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new D;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Se.ON),e.getLocation(1,Se.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Se.LEFT),e.getLocation(1,Se.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Se.RIGHT),e.getLocation(1,Se.RIGHT),2))},e}(ze),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new kt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new On(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new kt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new qe(new Zn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ze(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Le(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Se.LEFT),n=t.getLocation(0,Se.RIGHT);return e===I.INTERIOR&&n===I.EXTERIOR?1:e===I.EXTERIOR&&n===I.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ge,n=new kt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],xt)){for(var t=arguments[0],e=new kt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new E(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[xn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],v=c.getCoordinates()[h+1],y=f.getCoordinates()[p],g=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,v,y,g),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,v)||this.hasInteriorIntersection(this._li,y,g)))throw new $("found non-noded intersection at "+d+"-"+v+" and "+y+"-"+g)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ge},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,lr);var ur=function(){this.tempEnv1=new W,this.selectedSegment=new vn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new fr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ye]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return fr},Object.defineProperties(cr,hr);var fr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),pr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new kt};pr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Hn]},pr.prototype.getClass=function(){return pr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof V))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new pr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(P(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[xn]},dr.prototype.getClass=function(){return dr};var vr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new En,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};vr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new pe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},vr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=vr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ie))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=vr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pe(r);this.bufferFixedPrecision(i)}},vr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},vr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},vr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},vr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},vr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new vr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new vr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof En&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new vr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new vr(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},vr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=A.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return En.CAP_ROUND},yr.CAP_BUTT.get=function(){return En.CAP_FLAT},yr.CAP_FLAT.get=function(){return En.CAP_FLAT},yr.CAP_SQUARE.get=function(){return En.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(vr,yr);var gr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};gr.prototype.getCoordinates=function(){return this._pt},gr.prototype.getCoordinate=function(t){return this._pt[t]},gr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},gr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},gr.prototype.getDistance=function(){return this._distance},gr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof gr&&arguments[0]instanceof Yt&&arguments[1]instanceof E)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new vn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof gr&&arguments[0]instanceof $t&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1],l=arguments[2];mr.computeDistance(a.getExteriorRing(),s,l);for(var u=0;u<a.getNumInteriorRing();u++)mr.computeDistance(a.getInteriorRingN(u),s,l)}else if(arguments[2]instanceof gr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var c=arguments[0],h=arguments[1],f=arguments[2];if(c instanceof Yt)mr.computeDistance(c,h,f);else if(c instanceof $t)mr.computeDistance(c,h,f);else if(c instanceof Vt)for(var p=c,d=0;d<p.getNumGeometries();d++){var v=p.getGeometryN(d);mr.computeDistance(v,h,f)}else f.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof gr&&arguments[0]instanceof vn&&arguments[1]instanceof E){var y=arguments[1],g=arguments[2],m=arguments[0].closestPoint(y);g.setMinimum(m,y)}};var _r=function(t){this._maxPtDist=new gr,this._inputGeom=t||null},xr={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new br(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},xr.MaxPointDistanceFilter.get=function(){return br},xr.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,xr);var br=function(t){this._maxPtDist=new gr,this._minPtDist=new gr,this._geom=t||null};br.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},br.prototype.getMaxPointDistance=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[pt]},br.prototype.getClass=function(){return br};var wr=function(t){this._maxPtDist=new gr,this._minPtDist=new gr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var kr=function(t){this._comps=t||null};kr.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},kr.prototype.interfaces_=function(){return[jt]},kr.prototype.getClass=function(){return kr},kr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return kr.getPolygons(t,new kt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Vt&&e.apply(new kr(n)),n}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Yt&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[ut]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,n))}},Er.getLines=function(){if(1===arguments.length){var t=arguments[0];return Er.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],xt)&&P(arguments[1],xt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Er.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new kt;return i.apply(new Er(a,o)),a}if(arguments[0]instanceof ct&&P(arguments[1],xt)){var s=arguments[0],l=arguments[1];return s instanceof Yt?l.add(s):s.apply(new Er(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],xt)&&P(arguments[1],xt)){for(var u=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();Er.getLines(f,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&P(arguments[1],xt)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Er(p,d)),p}}};var Sr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Sr.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return I.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===I.EXTERIOR)return I.EXTERIOR;if(r===I.BOUNDARY)return I.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===I.INTERIOR)return I.EXTERIOR;if(a===I.BOUNDARY)return I.BOUNDARY}return I.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Yt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return I.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?st.isOnLine(s,u)?I.INTERIOR:I.EXTERIOR:I.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof Jt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?I.INTERIOR:I.EXTERIOR}},Sr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):I.EXTERIOR},Sr.prototype.intersects=function(t,e){return this.locate(t,e)!==I.EXTERIOR},Sr.prototype.updateLocationInfo=function(t){t===I.INTERIOR&&(this._isIn=!0),t===I.BOUNDARY&&this._numBoundaries++},Sr.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Yt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vt)for(var l=new Un(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Sr.prototype.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:e instanceof Yt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?I.BOUNDARY:this._numBoundaries>0||this._isIn?I.INTERIOR:I.EXTERIOR)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Tr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Mr={INSIDE_AREA:{configurable:!0}};Tr.prototype.isInsideArea=function(){return this._segIndex===Tr.INSIDE_AREA},Tr.prototype.getCoordinate=function(){return this._pt},Tr.prototype.getGeometryComponent=function(){return this._component},Tr.prototype.getSegmentIndex=function(){return this._segIndex},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Mr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tr,Mr);var Ir=function(t){this._pts=t||null};Ir.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Ir.prototype.interfaces_=function(){return[jt]},Ir.prototype.getClass=function(){return Ir},Ir.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?$e.singletonList(t):Ir.getPoints(t,new kt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof Vt&&e.apply(new Ir(n)),n}};var Cr=function(){this._locations=null;var t=arguments[0];this._locations=t};Cr.prototype.filter=function(t){(t instanceof Jt||t instanceof Yt||t instanceof $t)&&this._locations.add(new Tr(t,0,t.getCoordinate()))},Cr.prototype.interfaces_=function(){return[jt]},Cr.prototype.getClass=function(){return Cr},Cr.getLocations=function(t){var e=new kt;return t.apply(new Cr(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=kr.getPolygons(this._geom[e]);if(i.size()>0){var o=Cr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tr&&arguments[1]instanceof $t){var f=arguments[0],p=arguments[1],d=arguments[2],v=f.getCoordinate();if(I.EXTERIOR!==this._ptLocator.locate(v,p))return this._minDistance=0,d[0]=f,d[1]=new Tr(p,v),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),n=Er.getLines(this._geom[1]),r=Ir.getPoints(this._geom[0]),i=Ir.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new vn(r[o],r[o+1]).closestPoint(i);n[0]=new Tr(t,o,s),n[1]=new Tr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Yt){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),f=u.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var v=st.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(v<this._minDistance){this._minDistance=v;var y=new vn(h[p],h[p+1]),g=new vn(f[d],f[d+1]),m=y.closestPoints(g);c[0]=new Tr(l,p,m[0]),c[1]=new Tr(u,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tr(i,0,i.getCoordinate()),n[1]=new Tr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Ar=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};Ar.prototype.getCoordinates=function(){return this._pt},Ar.prototype.getCoordinate=function(t){return this._pt[t]},Ar.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Ar.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Ar.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Ar.prototype.getDistance=function(){return this._distance},Ar.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar};var Lr=function(){};Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.computeDistance=function(){if(arguments[2]instanceof Ar&&arguments[0]instanceof Yt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new vn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Ar&&arguments[0]instanceof $t&&arguments[1]instanceof E){var s=arguments[0],l=arguments[1],u=arguments[2];Lr.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Lr.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Ar&&arguments[0]instanceof ct&&arguments[1]instanceof E){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Yt)Lr.computeDistance(h,f,p);else if(h instanceof $t)Lr.computeDistance(h,f,p);else if(h instanceof Vt)for(var d=h,v=0;v<d.getNumGeometries();v++){var y=d.getGeometryN(v);Lr.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Ar&&arguments[0]instanceof vn&&arguments[1]instanceof E){var g=arguments[1],m=arguments[2],_=arguments[0].closestPoint(g);m.setMinimum(_,g)}};var Dr=function(){this._g0=null,this._g1=null,this._ptDist=new Ar,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dr.prototype.computeOrientedDistance=function(t,e,n){var r=new Or(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new zr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(){if(2===arguments.length)return new Dr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Or},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return zr},Object.defineProperties(Dr,Rr);var Or=function(){this._maxPtDist=new Ar,this._minPtDist=new Ar,this._euclideanDist=new Lr,this._geom=null;var t=arguments[0];this._geom=t};Or.prototype.filter=function(t){this._minPtDist.initialize(),Lr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Or.prototype.getMaxPointDistance=function(){return this._maxPtDist},Or.prototype.interfaces_=function(){return[pt]},Or.prototype.getClass=function(){return Or};var zr=function(){this._maxPtDist=new Ar,this._minPtDist=new Ar,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};zr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new E(s,l);this._minPtDist.initialize(),Lr.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},zr.prototype.isDone=function(){return!1},zr.prototype.isGeometryChanged=function(){return!1},zr.prototype.getMaxPointDistance=function(){return this._maxPtDist},zr.prototype.interfaces_=function(){return[Ut]},zr.prototype.getClass=function(){return zr};var Nr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Nr.prototype.checkMaximumDistance=function(t,e,n){var r=new Dr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},Nr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Nr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Nr.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Nr.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof Vt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Nr.prototype.getErrorIndicator=function(){return this._errorIndicator},Nr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},Nr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Nr.prototype.getErrorLocation=function(){return this._errorLocation},Nr.prototype.getPolygonLines=function(t){for(var e=new kt,n=new Er(e),r=kr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Nr.prototype.getErrorMessage=function(){return this._errMsg},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Fr.VERBOSE.get=function(){return!1},Fr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Nr,Fr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new W(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Nr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},jr.VERBOSE.get=function(){return!1},jr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,jr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Q.toLineString(new le(this._pts))},Ur.prototype.interfaces_=function(){return[fn]},Ur.prototype.getClass=function(){return Ur};var Vr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new kt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vr.prototype.getIntersectionSegments=function(){return this._intSegments},Vr.prototype.count=function(){return this._intersectionCount},Vr.prototype.getIntersections=function(){return this._intersections},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vr.prototype.interfaces_=function(){return[Hn]},Vr.prototype.getClass=function(){return Vr},Vr.createAllIntersectionsFinder=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e},Vr.createAnyIntersectionFinder=function(t){return new Vr(t)},Vr.createIntersectionCounter=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Gr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Gr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Gr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Gr.prototype.isValid=function(){return this.execute(),this._isValid},Gr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Gr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ie(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Gr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.computeIntersections=function(t){var e=new Gr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qr=function t(){this._nv=null;var e=arguments[0];this._nv=new Gr(t.toSegmentStrings(e))};qr.prototype.checkValid=function(){this._nv.checkValid()},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.toSegmentStrings=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},qr.checkValid=function(t){new qr(t).checkValid()};var Zr=function(t){this._mapOp=t};Zr.prototype.map=function(t){for(var e=new kt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ge.toGeometryArray(e))},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.map=function(t,e){return new Zr(e).map(t)};var Wr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new kt,this._resultLineList=new kt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(r,e)&&e===Ti.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Xr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new kt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Ti.INTERSECTION)){var r=n.getLabel();Ti.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Hr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new kt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new kt;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Hr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hr.prototype.getInputGeometry=function(){return this._inputGeom},Hr.prototype.transformMultiLineString=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformMultiPoint=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformMultiPolygon=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.copy=function(t){return t.copy()},Hr.prototype.transformGeometryCollection=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ge.toGeometryArray(n)):this._factory.buildGeometry(n)},Hr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Yt)return this.transformLineString(t,null);if(t instanceof Gt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Vt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Hr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Yr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new vn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Yt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Yr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Yr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Yr.prototype.snapTo=function(t){var e=new St(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Yr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kr=function(t){this._srcGeom=t||null},Jr={SNAP_PRECISION_FACTOR:{configurable:!0}};Kr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qr(e,n).transform(this._srcGeom)},Kr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Qt)&&(i=r.buffer(0)),i},Kr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kr.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kr(t);r[0]=i.snapTo(e,n);var o=new Kr(e);return r[1]=o.snapTo(r[0],n),r},Kr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Kr.computeOverlaySnapTolerance(i),Kr.computeOverlaySnapTolerance(o))}},Kr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kr.SNAP_PRECISION_FACTOR},Kr.snapToSelf=function(t,e,n){return new Kr(t).snapToSelf(e,n)},Jr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kr,Jr);var Qr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Yr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),$r=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$r.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},$r.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$r.signExpBits(this._commonBits),this._isFirst=!1,null):$r.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$r.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$r.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$r.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$r.signExpBits=function(t){return t>>52},$r.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$r.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($r.getBit(t,r)!==$r.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new $r,this._commonBitsY=new $r};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Kr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Kr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ti.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ti.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ti.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ti.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ti.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ti.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ti.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ti.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[b]},si.prototype.getClass=function(){return si},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(si,li);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new kt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&P(arguments[0],wt)&&P(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),fi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return Q.toLineString(new E(this._min,0),new E(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},pi.NodeComparator.get=function(){return di},Object.defineProperties(fi,pi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[k]},di.prototype.getClass=function(){return di};var vi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),gi=function(){this._leaves=new kt,this._root=null,this._level=0};gi.prototype.buildTree=function(){$e.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,n=new kt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},gi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new vi(t,e,n))},gi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},gi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},gi.prototype.printNode=function(t){q.out.println(Q.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},gi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},gi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var mi=function(){this._items=new kt};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Ye]},mi.prototype.getClass=function(){return mi};var _i=function(){this._index=null;var t=arguments[0];if(!P(t,Qt))throw new m("Argument must be Polygonal");this._index=new wi(t)},xi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new bi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[jn]},_i.prototype.getClass=function(){return _i},xi.SegmentVisitor.get=function(){return bi},xi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,xi);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[Ye]},bi.prototype.getClass=function(){return bi};var wi=function(){this._index=new gi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new vn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var ki=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;I.NONE,r.getLocation(t,Se.ON)===I.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,I.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,I.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),I.EXTERIOR,I.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,I.INTERIOR,I.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],I.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],I.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Le(this._argIndex,I.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===I.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Le(this._argIndex,I.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],I.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Le(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Yt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Gt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Vt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?I.BOUNDARY:I.INTERIOR},e}(qe),Ei=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ki(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,e,r),this._arg[1]=new ki(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,i,a),this._arg[1]=new ki(1,o,a)}};Ei.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ei.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Si=function(){};Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.map=function(){if(arguments[0]instanceof ct&&P(arguments[1],Si.MapOp)){for(var t=arguments[0],e=arguments[1],n=new kt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],xt)&&P(arguments[1],Si.MapOp)){for(var o=arguments[0],a=arguments[1],s=new kt,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Si.MapOp=function(){};var Ti=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Sr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new kt,this._resultLineList=new kt,this._resultPointList=new kt,this._graph=new qe(new Zn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new kt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==I.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new kt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new kt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ze(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Se.RIGHT),i.getLocation(1,Se.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Se.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Se.LEFT,r.getLocation(i,Se.LEFT)),et.isTrue(!r.isNull(i,Se.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Se.RIGHT,r.getLocation(i,Se.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ei);Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n)},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Zr.map(t,{interfaces_:function(){return[Si.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.INTERSECTION)},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},Ti.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(r,i);break;case Ti.UNION:o=Math.max(r,i);break;case Ti.DIFFERENCE:o=r;break;case Ti.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ti.createEmptyResult=function(t,e,n,r){var i=null;switch(Ti.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.DIFFERENCE))},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ti.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===I.BOUNDARY&&(i=I.INTERIOR),o===I.BOUNDARY&&(o=I.INTERIOR),a){case Ti.INTERSECTION:return i===I.INTERIOR&&o===I.INTERIOR;case Ti.UNION:return i===I.INTERIOR||o===I.INTERIOR;case Ti.DIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR;case Ti.SYMDIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR||i!==I.INTERIOR&&o===I.INTERIOR}return!1}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4;var Mi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Sr,this._seg=new vn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Mi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Mi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?I.BOUNDARY:this._ptLocator.locate(t,this._g)},Mi.prototype.extractLinework=function(t){var e=new Ii;t.apply(e);var n=e.getLinework(),r=ge.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Ii=function(){this._linework=null,this._linework=new kt};Ii.prototype.getLinework=function(){return this._linework},Ii.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ii.prototype.interfaces_=function(){return[jt]},Ii.prototype.getClass=function(){return Ii};var Ci=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ci.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ci.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ci.prototype.getPoints=function(t){for(var e=new kt,n=Er.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ci.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new E(u-l,c+s);r.add(h)}if(this._doRight){var f=new E(u+l,c-s);r.add(f)}},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new kt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Mi(this._geom[0],this._boundaryDistanceTolerance),new Mi(this._geom[1],this._boundaryDistanceTolerance),new Mi(this._geom[2],this._boundaryDistanceTolerance)]},Ai={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+I.toLocationSymbol(e[0])+" B:"+I.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+I.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,I.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new Ci(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=Ti.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===I.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kr.computeSizeBasedSnapTolerance(t),Kr.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Ai.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Ai);var Li=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Li.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Li.prototype.combine=function(){for(var t=new kt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.combine=function(){if(1===arguments.length)return new Li(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Li(Li.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Li(Li.createList(n,r,i)).combine()}},Li.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Li.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new kt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new kt;return a.add(r),a.add(i),a.add(o),a}};var Di=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new kt)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Di.prototype.reduceToGeometries=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,wt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Di.prototype.extractByEnvelope=function(t,e,n){for(var r=new kt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Di.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Li.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Di.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Di.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Di.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Di.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Di.getGeometry(e,n),Di.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Di.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Di.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Di.prototype.unionActual=function(t,e){return Di.restrictToPolygons(t.union(e))},Di.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Di.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new kt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Li.combine(r)},Di.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.restrictToPolygons=function(t){if(P(t,Qt))return t;var e=kr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ge.toPolygonArray(e))},Di.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Di.union=function(t){return new Di(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Di,Ri);var Oi=function(){};Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.UNION)},t.GeoJSONReader=ke,t.GeoJSONWriter=Ee,t.OverlayOp=Ti,t.UnionOp=Oi,t.BufferOp=vr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9437:function(t,e,n){"use strict";function r(){return new Worker(n.p+"static/js/mapbox-gl-csp-worker.9ab40586.worker.js")}n.d(e,{Z:function(){return r}})},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var r=n(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},3515:function(t,e,n){var r=n(6015),i=n(9617);function o(e,n,a){return i()?(t.exports=o=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t,e,n){var r=n(4062);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4704:function(t,e,n){var r=n(6116);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},6389:function(t,e,n){var r=n(3808),i=n(9617),o=n(4993);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},8416:function(t,e,n){var r=n(4062);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},1588:function(t,e,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},3808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},6035:function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},4993:function(t,e,n){var r=n(8698).default,i=n(6115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var r=n(5372),i=n(8872),o=n(6116),a=n(2218);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},1753:function(t,e,n){var r=n(3808);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},1589:function(t,e,n){var r=n(5372),i=n(9498),o=n(6116),a=n(2218);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(3405),i=n(9498),o=n(6116),a=n(2281);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},5036:function(t,e,n){var r=n(8698).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4062:function(t,e,n){var r=n(8698).default,i=n(5036);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var r=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},3496:function(t,e,n){var r=n(3808),i=n(6015),o=n(6035),a=n(3515);function s(e){var n="function"===typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},5671:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},3144:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(9142);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(0,r.Z)(i.key),i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},9142:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1002);function i(t){var e=function(t,e){if("object"!==(0,r.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===(0,r.Z)(e)?e:String(e)}},1002:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:function(){return r}})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return r[t]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",function(){"use strict";var t=n(2791),e=n(1250),r=n(9142);function i(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s=n(1002);function l(){l=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(P){c=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new M(i||[]);return r(a,"_invoke",{value:k(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var p={};function d(){}function v(){}function y(){}var g={};c(g,o,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(I([])));_&&_!==e&&n.call(_,o)&&(g=_);var x=y.prototype=d.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(r,o,a,l){var u=f(t[r],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==(0,s.Z)(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,a,l)}),(function(t){i("throw",t,a,l)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,l)}))}l(u.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,r(x,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(x),c(x,u,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function u(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)}))}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=n(5483),v=n.n(d),y=Math.sqrt(50),g=Math.sqrt(10),m=Math.sqrt(2);function _(t,e,n){var r,i,o,a=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(a)),l=a/Math.pow(10,s),u=l>=y?10:l>=g?5:l>=m?2:1;return s<0?(o=Math.pow(10,-s)/u,(r=Math.round(t*o))/o<t&&++r,(i=Math.round(e*o))/o>e&&--i,o=-o):(o=Math.pow(10,s)*u,(r=Math.round(t/o))*o<t&&++r,(i=Math.round(e/o))*o>e&&--i),i<r&&.5<=n&&n<2?_(t,e,2*n):[r,i,o]}function x(t,e,n){return _(t=+t,e=+e,n=+n)[2]}function b(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function w(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function k(t){var e,n,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{var a=i+o>>>1;n(t[a],r)<0?i=a+1:o=a}while(i<o)}return i}return 2!==t.length?(e=b,n=function(e,n){return b(t(e),n)},r=function(e,n){return t(e)-n}):(e=t===b||t===w?t:E,n=t,r=t),{left:i,center:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{var a=i+o>>>1;n(t[a],r)<=0?i=a+1:o=a}while(i<o)}return i}}}function E(){return 0}var S=k(b),T=S.right,M=(S.left,k((function(t){return null===t?NaN:+t})).center,T);function I(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function C(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function P(){}var A=.7,L=1/A,D="\\s*([+-]?\\d+)\\s*",R="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",O="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z=/^#([0-9a-f]{3,8})$/,N=new RegExp("^rgb\\(".concat(D,",").concat(D,",").concat(D,"\\)$")),F=new RegExp("^rgb\\(".concat(O,",").concat(O,",").concat(O,"\\)$")),B=new RegExp("^rgba\\(".concat(D,",").concat(D,",").concat(D,",").concat(R,"\\)$")),j=new RegExp("^rgba\\(".concat(O,",").concat(O,",").concat(O,",").concat(R,"\\)$")),U=new RegExp("^hsl\\(".concat(R,",").concat(O,",").concat(O,"\\)$")),V=new RegExp("^hsla\\(".concat(R,",").concat(O,",").concat(O,",").concat(R,"\\)$")),G={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function q(){return this.rgb().formatHex()}function Z(){return this.rgb().formatRgb()}function W(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=z.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?X(e):3===n?new K(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?H(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?H(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=N.exec(t))?new K(e[1],e[2],e[3],1):(e=F.exec(t))?new K(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=B.exec(t))?H(e[1],e[2],e[3],e[4]):(e=j.exec(t))?H(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=U.exec(t))?nt(e[1],e[2]/100,e[3]/100,1):(e=V.exec(t))?nt(e[1],e[2]/100,e[3]/100,e[4]):G.hasOwnProperty(t)?X(G[t]):"transparent"===t?new K(NaN,NaN,NaN,0):null}function X(t){return new K(t>>16&255,t>>8&255,255&t,1)}function H(t,e,n,r){return r<=0&&(t=e=n=NaN),new K(t,e,n,r)}function Y(t,e,n,r){return 1===arguments.length?((i=t)instanceof P||(i=W(i)),i?new K((i=i.rgb()).r,i.g,i.b,i.opacity):new K):new K(t,e,n,null==r?1:r);var i}function K(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function J(){return"#".concat(et(this.r)).concat(et(this.g)).concat(et(this.b))}function Q(){var t=$(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(tt(this.r),", ").concat(tt(this.g),", ").concat(tt(this.b)).concat(1===t?")":", ".concat(t,")"))}function $(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function et(t){return((t=tt(t))<16?"0":"")+t.toString(16)}function nt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new it(t,e,n,r)}function rt(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);if(t instanceof P||(t=W(t)),!t)return new it;if(t instanceof it)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new it(a,s,l,t.opacity)}function it(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ot(t){return(t=(t||0)%360)<0?t+360:t}function at(t){return Math.max(0,Math.min(1,t||0))}function st(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function lt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}I(P,W,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:q,formatHex:q,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return rt(this).formatHsl()},formatRgb:Z,toString:Z}),I(K,Y,C(P,{brighter:function(t){return t=null==t?L:Math.pow(L,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?A:Math.pow(A,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new K(tt(this.r),tt(this.g),tt(this.b),$(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J,formatHex:J,formatHex8:function(){return"#".concat(et(this.r)).concat(et(this.g)).concat(et(this.b)).concat(et(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Q,toString:Q})),I(it,(function(t,e,n,r){return 1===arguments.length?rt(t):new it(t,e,n,null==r?1:r)}),C(P,{brighter:function(t){return t=null==t?L:Math.pow(L,t),new it(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?A:Math.pow(A,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new K(st(t>=240?t-240:t+120,i,r),st(t,i,r),st(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new it(ot(this.h),at(this.s),at(this.l),$(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=$(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(ot(this.h),", ").concat(100*at(this.s),"%, ").concat(100*at(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var ut=function(t){return function(){return t}};function ct(t,e){return function(n){return t+n*e}}function ht(t){return 1===(t=+t)?ft:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ut(isNaN(e)?n:e)}}function ft(t,e){var n=e-t;return n?ct(t,n):ut(isNaN(t)?e:t)}var pt=function t(e){var n=ht(e);function r(t,e){var r=n((t=Y(t)).r,(e=Y(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ft(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function dt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Y(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}dt((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return lt((n-r/e)*e,a,i,o,s)}})),dt((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return lt((n-r/e)*e,i,o,a,s)}}));function vt(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=kt(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function yt(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function gt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mt(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=kt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var _t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xt=new RegExp(_t.source,"g");function bt(t,e){var n,r,i,o=_t.lastIndex=xt.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=_t.exec(t))&&(r=xt.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:gt(n,r)})),o=xt.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function wt(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function kt(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?ut(e):("number"===i?gt:"string"===i?(n=W(e))?(e=n,pt):bt:e instanceof W?pt:e instanceof Date?yt:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?vt:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?mt:gt:wt))(t,e)}function Et(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function St(t){return+t}var Tt=[0,1];function Mt(t){return t}function It(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ct(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=It(i,r),o=n(a,o)):(r=It(r,i),o=n(o,a)),function(t){return o(r(t))}}function Pt(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=It(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=M(t,e,1,r)-1;return o[n](i[n](e))}}function At(){var t,e,n,r,i,o,a=Tt,s=Tt,l=kt,u=Mt;function c(){var t=Math.min(a.length,s.length);return u!==Mt&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?Pt:Ct,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=r(s,a.map(t),gt)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,St),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=Et,c()},h.clamp=function(t){return arguments.length?(u=!!t||Mt,c()):u!==Mt},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function Lt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Dt,Rt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ot(t){if(!(e=Rt.exec(t)))throw new Error("invalid format: "+t);var e;return new zt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function zt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Nt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ft(t){return(t=Nt(Math.abs(t)))?t[1]:NaN}function Bt(t,e){var n=Nt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ot.prototype=zt.prototype,zt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var jt={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Bt(100*t,e)},r:Bt,s:function(t,e){var n=Nt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Dt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Nt(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ut(t){return t}var Vt,Gt,qt,Zt=Array.prototype.map,Wt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Xt(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Ut:(e=Zt.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Ut:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Zt.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ot(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,v=t.comma,y=t.precision,g=t.trim,m=t.type;"n"===m?(v=!0,m="g"):jt[m]||(void 0===y&&(y=12),g=!0,m="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===f?o:/[%p]/.test(m)?l:"",b=jt[m],w=/[defgprs%]/.test(m);function k(t){var i,o,l,f=_,k=x;if("c"===m)k=b(t)+k,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0===+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:u:"-"===h||"("===h?"":h)+f,k=("s"===m?Wt[8+Dt/3]:"")+k+(E&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){k=(46===l?a+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!p&&(t=r(t,1/0));var S=f.length+t.length+k.length,T=S<d?new Array(d-S+1).join(e):"";switch(v&&p&&(t=r(T+t,T.length?d-k.length:1/0),T=""),n){case"<":t=f+t+k+T;break;case"=":t=f+T+t+k;break;case"^":t=T.slice(0,S=T.length>>1)+f+t+k+T.slice(S);break;default:t=T+f+t+k}return s(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return t+""},k}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ot(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ft(e)/3))),i=Math.pow(10,-r),o=Wt[8+r/3];return function(t){return n(i*t)+o}}}}function Ht(t,e,n,r){var i,o=function(t,e,n){n=+n;var r=(e=+e)<(t=+t),i=r?x(e,t,n):x(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Ot(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ft(e)/3)))-Ft(Math.abs(t)))}(o,a))||(r.precision=i),qt(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ft(e)-Ft(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Ft(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Gt(r)}function Yt(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];var r=e<t,i=p(r?_(e,t,n):_(t,e,n),3),o=i[0],a=i[1],s=i[2];if(!(a>=o))return[];var l=a-o+1,u=new Array(l);if(r)if(s<0)for(var c=0;c<l;++c)u[c]=(a-c)/-s;else for(var h=0;h<l;++h)u[h]=(a-h)*s;else if(s<0)for(var f=0;f<l;++f)u[f]=(o+f)/-s;else for(var d=0;d<l;++d)u[d]=(o+d)*s;return u}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Ht(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=x(l,u,n))===r)return o[a]=l,o[s]=u,e(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return t},t}function Kt(){var t=At()(Mt,Mt);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}(t,Kt())},Lt.apply(t,arguments),Yt(t)}Vt=Xt({thousands:",",grouping:[3],currency:["$",""]}),Gt=Vt.format,qt=Vt.formatPrefix;function Jt(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Qt(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ne(t[0])||!ne(t[1]))throw new Error("coordinates must contain numbers");return Jt({type:"Point",coordinates:t},e,n)}function $t(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Jt({type:"Polygon",coordinates:t},e,n)}function te(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Jt({type:"LineString",coordinates:t},e,n)}function ee(t,e,n){return void 0===n&&(n={}),Jt({type:"MultiPoint",coordinates:t},e,n)}function ne(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function re(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,v="Feature"===p,y=d?t.features.length:1,g=0;g<y;g++){s=(c=!!(u=d?t.features[g].geometry:v?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var m=0;m<s;m++){var _=0,x=0;if(null!==(a=c?u.geometries[m]:u)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,f,g,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,g,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],f,g,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(x=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],f,g,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===re(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ie(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function oe(t,e){ie(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Jt(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(Jt({type:a,coordinates:u},r),n,l))return!1}}))}function ae(t){var e=[1/0,1/0,-1/0,-1/0];return re(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ae.default=ae;var se=ae;n(1725);n(4161);function le(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r,i=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(r=e).type?r.geometry:r,a=o.type,s=e.bbox,l=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(l=[l]);for(var u=!1,c=0;c<l.length&&!u;c++)if(ue(i,l[c][0],n.ignoreBoundary)){for(var h=!1,f=1;f<l[c].length&&!h;)ue(i,l[c][f],!n.ignoreBoundary)&&(h=!0),f++;h||(u=!0)}return u}function ue(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)===0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!==u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}Object.prototype.hasOwnProperty;var ce=new ArrayBuffer(16);new Float64Array(ce),new Uint32Array(ce);n(1977);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();var he=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return $t([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}(se(t))};var fe=function(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return re(t,(function(t){n+=t[0],r+=t[1],i++}),!0),Qt([n/i,r/i],e.properties)};n(7089);n(9234);var pe=Math.PI/180,de=180/Math.PI,ve=function(t,e){this.lon=t,this.lat=e,this.x=pe*t,this.y=pe*e};ve.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ve.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ve(e,t)};var ye=function(){this.coords=[],this.length=0};ye.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ge=function(t){this.properties=t||{},this.geometries=[]};ge.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ge.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var me=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ve(t.x,t.y),this.end=new ve(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};me.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=de*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[de*Math.atan2(i,r),a]},me.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],v=n[p][0],y=Math.abs(v-d);y>f&&(v>c&&d<h||d>c&&v<h)?s=!0:y>l&&(l=y)}var g=[];if(s&&l<u){var m=[];g.push(m);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var b=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),k=parseFloat(n[_][0]),E=parseFloat(n[_][1]);if(b>-180&&b<h&&180===k&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b>c&&b<180&&-180===k&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b<h&&k>c){var S=b;b=k,k=S;var T=w;w=E,E=T}if(b>c&&k<h&&(k+=360),b<=180&&k>=180&&b<k){var M=(180-b)/(k-b),I=M*E+(1-M)*w;m.push([n[_-1][0]>c?180:-180,I]),(m=[]).push([n[_-1][0]>c?-180:180,I]),g.push(m)}else m=[],g.push(m);m.push([x,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var C=[];g.push(C);for(var P=0;P<n.length;++P)C.push([n[P][0],n[P][1]])}for(var A=new ge(this.properties),L=0;L<g.length;++L){var D=new ye;A.geometries.push(D);for(var R=g[L],O=0;O<R.length;++O)D.move_to(R[O])}return A};n(3663);var _e=[],xe=[],be=[],we=[],ke=[],Ee=[],Se=[],Te=[],Me=[],Ie=[],Ce=[],Pe=[],Ae=[],Le=[],De=[],Re=[],Oe=[],ze=[],Ne=[],Fe=[],Be=[],je=[],Ue=[],Ve=[];Se[85]=Ie[85]=-1,Te[85]=Ce[85]=0,Me[85]=Pe[85]=1,Ne[85]=je[85]=1,Fe[85]=Ue[85]=0,Be[85]=Ve[85]=1,_e[85]=we[85]=0,xe[85]=ke[85]=-1,be[85]=De[85]=0,Re[85]=Ae[85]=0,Oe[85]=Le[85]=1,Ee[85]=ze[85]=1,je[1]=je[169]=0,Ue[1]=Ue[169]=-1,Ve[1]=Ve[169]=0,Ae[1]=Ae[169]=-1,Le[1]=Le[169]=0,De[1]=De[169]=0,Ie[4]=Ie[166]=0,Ce[4]=Ce[166]=-1,Pe[4]=Pe[166]=1,Re[4]=Re[166]=1,Oe[4]=Oe[166]=0,ze[4]=ze[166]=0,Se[16]=Se[154]=0,Te[16]=Te[154]=1,Me[16]=Me[154]=1,we[16]=we[154]=1,ke[16]=ke[154]=0,Ee[16]=Ee[154]=1,Ne[64]=Ne[106]=0,Fe[64]=Fe[106]=1,Be[64]=Be[106]=0,_e[64]=_e[106]=-1,xe[64]=xe[106]=0,be[64]=be[106]=1,Ne[2]=Ne[168]=0,Fe[2]=Fe[168]=-1,Be[2]=Be[168]=1,je[2]=je[168]=0,Ue[2]=Ue[168]=-1,Ve[2]=Ve[168]=0,Ae[2]=Ae[168]=-1,Le[2]=Le[168]=0,De[2]=De[168]=0,Re[2]=Re[168]=-1,Oe[2]=Oe[168]=0,ze[2]=ze[168]=1,Se[8]=Se[162]=0,Te[8]=Te[162]=-1,Me[8]=Me[162]=0,Ie[8]=Ie[162]=0,Ce[8]=Ce[162]=-1,Pe[8]=Pe[162]=1,Ae[8]=Ae[162]=1,Le[8]=Le[162]=0,De[8]=De[162]=1,Re[8]=Re[162]=1,Oe[8]=Oe[162]=0,ze[8]=ze[162]=0,Se[32]=Se[138]=0,Te[32]=Te[138]=1,Me[32]=Me[138]=1,Ie[32]=Ie[138]=0,Ce[32]=Ce[138]=1,Pe[32]=Pe[138]=0,_e[32]=_e[138]=1,xe[32]=xe[138]=0,be[32]=be[138]=0,we[32]=we[138]=1,ke[32]=ke[138]=0,Ee[32]=Ee[138]=1,je[128]=je[42]=0,Ue[128]=Ue[42]=1,Ve[128]=Ve[42]=1,Ne[128]=Ne[42]=0,Fe[128]=Fe[42]=1,Be[128]=Be[42]=0,_e[128]=_e[42]=-1,xe[128]=xe[42]=0,be[128]=be[42]=1,we[128]=we[42]=-1,ke[128]=ke[42]=0,Ee[128]=Ee[42]=0,Ie[5]=Ie[165]=-1,Ce[5]=Ce[165]=0,Pe[5]=Pe[165]=0,je[5]=je[165]=1,Ue[5]=Ue[165]=0,Ve[5]=Ve[165]=0,Re[20]=Re[150]=0,Oe[20]=Oe[150]=1,ze[20]=ze[150]=1,we[20]=we[150]=0,ke[20]=ke[150]=-1,Ee[20]=Ee[150]=1,Se[80]=Se[90]=-1,Te[80]=Te[90]=0,Me[80]=Me[90]=1,Ne[80]=Ne[90]=1,Fe[80]=Fe[90]=0,Be[80]=Be[90]=1,Ae[65]=Ae[105]=0,Le[65]=Le[105]=1,De[65]=De[105]=0,_e[65]=_e[105]=0,xe[65]=xe[105]=-1,be[65]=be[105]=0,Se[160]=Se[10]=-1,Te[160]=Te[10]=0,Me[160]=Me[10]=1,Ie[160]=Ie[10]=-1,Ce[160]=Ce[10]=0,Pe[160]=Pe[10]=0,je[160]=je[10]=1,Ue[160]=Ue[10]=0,Ve[160]=Ve[10]=0,Ne[160]=Ne[10]=1,Fe[160]=Fe[10]=0,Be[160]=Be[10]=1,Re[130]=Re[40]=0,Oe[130]=Oe[40]=1,ze[130]=ze[40]=1,Ae[130]=Ae[40]=0,Le[130]=Le[40]=1,De[130]=De[40]=0,_e[130]=_e[40]=0,xe[130]=xe[40]=-1,be[130]=be[40]=0,we[130]=we[40]=0,ke[130]=ke[40]=-1,Ee[130]=Ee[40]=1,Ie[37]=Ie[133]=0,Ce[37]=Ce[133]=1,Pe[37]=Pe[133]=1,je[37]=je[133]=0,Ue[37]=Ue[133]=1,Ve[37]=Ve[133]=0,_e[37]=_e[133]=-1,xe[37]=xe[133]=0,be[37]=be[133]=0,we[37]=we[133]=1,ke[37]=ke[133]=0,Ee[37]=Ee[133]=0,Re[148]=Re[22]=-1,Oe[148]=Oe[22]=0,ze[148]=ze[22]=0,je[148]=je[22]=0,Ue[148]=Ue[22]=-1,Ve[148]=Ve[22]=1,Ne[148]=Ne[22]=0,Fe[148]=Fe[22]=1,Be[148]=Be[22]=1,we[148]=we[22]=-1,ke[148]=ke[22]=0,Ee[148]=Ee[22]=1,Se[82]=Se[88]=0,Te[82]=Te[88]=-1,Me[82]=Me[88]=1,Re[82]=Re[88]=1,Oe[82]=Oe[88]=0,ze[82]=ze[88]=1,Ae[82]=Ae[88]=-1,Le[82]=Le[88]=0,De[82]=De[88]=1,Ne[82]=Ne[88]=0,Fe[82]=Fe[88]=-1,Be[82]=Be[88]=0,Se[73]=Se[97]=0,Te[73]=Te[97]=1,Me[73]=Me[97]=0,Ie[73]=Ie[97]=0,Ce[73]=Ce[97]=-1,Pe[73]=Pe[97]=0,Ae[73]=Ae[97]=1,Le[73]=Le[97]=0,De[73]=De[97]=0,_e[73]=_e[97]=1,xe[73]=xe[97]=0,be[73]=be[97]=1,Se[145]=Se[25]=0,Te[145]=Te[25]=-1,Me[145]=Me[25]=0,Ae[145]=Ae[25]=1,Le[145]=Le[25]=0,De[145]=De[25]=1,je[145]=je[25]=0,Ue[145]=Ue[25]=1,Ve[145]=Ve[25]=1,we[145]=we[25]=-1,ke[145]=ke[25]=0,Ee[145]=Ee[25]=0,Ie[70]=Ie[100]=0,Ce[70]=Ce[100]=1,Pe[70]=Pe[100]=0,Re[70]=Re[100]=-1,Oe[70]=Oe[100]=0,ze[70]=ze[100]=1,Ne[70]=Ne[100]=0,Fe[70]=Fe[100]=-1,Be[70]=Be[100]=1,_e[70]=_e[100]=1,xe[70]=xe[100]=0,be[70]=be[100]=0,Ie[101]=Ie[69]=0,Ce[101]=Ce[69]=1,Pe[101]=Pe[69]=0,_e[101]=_e[69]=1,xe[101]=xe[69]=0,be[101]=be[69]=0,je[149]=je[21]=0,Ue[149]=Ue[21]=1,Ve[149]=Ve[21]=1,we[149]=we[21]=-1,ke[149]=ke[21]=0,Ee[149]=Ee[21]=0,Re[86]=Re[84]=-1,Oe[86]=Oe[84]=0,ze[86]=ze[84]=1,Ne[86]=Ne[84]=0,Fe[86]=Fe[84]=-1,Be[86]=Be[84]=1,Se[89]=Se[81]=0,Te[89]=Te[81]=-1,Me[89]=Me[81]=0,Ae[89]=Ae[81]=1,Le[89]=Le[81]=0,De[89]=De[81]=1,Se[96]=Se[74]=0,Te[96]=Te[74]=1,Me[96]=Me[74]=0,Ie[96]=Ie[74]=-1,Ce[96]=Ce[74]=0,Pe[96]=Pe[74]=1,Ne[96]=Ne[74]=1,Fe[96]=Fe[74]=0,Be[96]=Be[74]=0,_e[96]=_e[74]=1,xe[96]=xe[74]=0,be[96]=be[74]=1,Se[24]=Se[146]=0,Te[24]=Te[146]=-1,Me[24]=Me[146]=1,Re[24]=Re[146]=1,Oe[24]=Oe[146]=0,ze[24]=ze[146]=1,Ae[24]=Ae[146]=0,Le[24]=Le[146]=1,De[24]=De[146]=1,we[24]=we[146]=0,ke[24]=ke[146]=-1,Ee[24]=Ee[146]=0,Ie[6]=Ie[164]=-1,Ce[6]=Ce[164]=0,Pe[6]=Pe[164]=1,Re[6]=Re[164]=-1,Oe[6]=Oe[164]=0,ze[6]=ze[164]=0,je[6]=je[164]=0,Ue[6]=Ue[164]=-1,Ve[6]=Ve[164]=1,Ne[6]=Ne[164]=1,Fe[6]=Fe[164]=0,Be[6]=Be[164]=0,Ae[129]=Ae[41]=0,Le[129]=Le[41]=1,De[129]=De[41]=1,je[129]=je[41]=0,Ue[129]=Ue[41]=1,Ve[129]=Ve[41]=0,_e[129]=_e[41]=-1,xe[129]=xe[41]=0,be[129]=be[41]=0,we[129]=we[41]=0,ke[129]=ke[41]=-1,Ee[129]=Ee[41]=0,Re[66]=Re[104]=0,Oe[66]=Oe[104]=1,ze[66]=ze[104]=0,Ae[66]=Ae[104]=-1,Le[66]=Le[104]=0,De[66]=De[104]=1,Ne[66]=Ne[104]=0,Fe[66]=Fe[104]=-1,Be[66]=Be[104]=0,_e[66]=_e[104]=0,xe[66]=xe[104]=-1,be[66]=be[104]=1,Se[144]=Se[26]=-1,Te[144]=Te[26]=0,Me[144]=Me[26]=0,je[144]=je[26]=1,Ue[144]=Ue[26]=0,Ve[144]=Ve[26]=1,Ne[144]=Ne[26]=0,Fe[144]=Fe[26]=1,Be[144]=Be[26]=1,we[144]=we[26]=-1,ke[144]=ke[26]=0,Ee[144]=Ee[26]=1,Ie[36]=Ie[134]=0,Ce[36]=Ce[134]=1,Pe[36]=Pe[134]=1,Re[36]=Re[134]=0,Oe[36]=Oe[134]=1,ze[36]=ze[134]=0,_e[36]=_e[134]=0,xe[36]=xe[134]=-1,be[36]=be[134]=1,we[36]=we[134]=1,ke[36]=ke[134]=0,Ee[36]=Ee[134]=0,Se[9]=Se[161]=-1,Te[9]=Te[161]=0,Me[9]=Me[161]=0,Ie[9]=Ie[161]=0,Ce[9]=Ce[161]=-1,Pe[9]=Pe[161]=0,Ae[9]=Ae[161]=1,Le[9]=Le[161]=0,De[9]=De[161]=0,je[9]=je[161]=1,Ue[9]=Ue[161]=0,Ve[9]=Ve[161]=1,Se[136]=0,Te[136]=1,Me[136]=1,Ie[136]=0,Ce[136]=1,Pe[136]=0,Re[136]=-1,Oe[136]=0,ze[136]=1,Ae[136]=-1,Le[136]=0,De[136]=0,je[136]=0,Ue[136]=-1,Ve[136]=0,Ne[136]=0,Fe[136]=-1,Be[136]=1,_e[136]=1,xe[136]=0,be[136]=0,we[136]=1,ke[136]=0,Ee[136]=1,Se[34]=0,Te[34]=-1,Me[34]=0,Ie[34]=0,Ce[34]=-1,Pe[34]=1,Re[34]=1,Oe[34]=0,ze[34]=0,Ae[34]=1,Le[34]=0,De[34]=1,je[34]=0,Ue[34]=1,Ve[34]=1,Ne[34]=0,Fe[34]=1,Be[34]=0,_e[34]=-1,xe[34]=0,be[34]=1,we[34]=-1,ke[34]=0,Ee[34]=0,Se[35]=0,Te[35]=1,Me[35]=1,Ie[35]=0,Ce[35]=-1,Pe[35]=1,Re[35]=1,Oe[35]=0,ze[35]=0,Ae[35]=-1,Le[35]=0,De[35]=0,je[35]=0,Ue[35]=-1,Ve[35]=0,Ne[35]=0,Fe[35]=1,Be[35]=0,_e[35]=-1,xe[35]=0,be[35]=1,we[35]=1,ke[35]=0,Ee[35]=1,Se[153]=0,Te[153]=1,Me[153]=1,Ae[153]=-1,Le[153]=0,De[153]=0,je[153]=0,Ue[153]=-1,Ve[153]=0,we[153]=1,ke[153]=0,Ee[153]=1,Ie[102]=0,Ce[102]=-1,Pe[102]=1,Re[102]=1,Oe[102]=0,ze[102]=0,Ne[102]=0,Fe[102]=1,Be[102]=0,_e[102]=-1,xe[102]=0,be[102]=1,Se[155]=0,Te[155]=-1,Me[155]=0,Ae[155]=1,Le[155]=0,De[155]=1,je[155]=0,Ue[155]=1,Ve[155]=1,we[155]=-1,ke[155]=0,Ee[155]=0,Ie[103]=0,Ce[103]=1,Pe[103]=0,Re[103]=-1,Oe[103]=0,ze[103]=1,Ne[103]=0,Fe[103]=-1,Be[103]=1,_e[103]=1,xe[103]=0,be[103]=0,Se[152]=0,Te[152]=1,Me[152]=1,Re[152]=-1,Oe[152]=0,ze[152]=1,Ae[152]=-1,Le[152]=0,De[152]=0,je[152]=0,Ue[152]=-1,Ve[152]=0,Ne[152]=0,Fe[152]=-1,Be[152]=1,we[152]=1,ke[152]=0,Ee[152]=1,Se[156]=0,Te[156]=-1,Me[156]=1,Re[156]=1,Oe[156]=0,ze[156]=1,Ae[156]=-1,Le[156]=0,De[156]=0,je[156]=0,Ue[156]=-1,Ve[156]=0,Ne[156]=0,Fe[156]=1,Be[156]=1,we[156]=-1,ke[156]=0,Ee[156]=1,Se[137]=0,Te[137]=1,Me[137]=1,Ie[137]=0,Ce[137]=1,Pe[137]=0,Ae[137]=-1,Le[137]=0,De[137]=0,je[137]=0,Ue[137]=-1,Ve[137]=0,_e[137]=1,xe[137]=0,be[137]=0,we[137]=1,ke[137]=0,Ee[137]=1,Se[139]=0,Te[139]=1,Me[139]=1,Ie[139]=0,Ce[139]=-1,Pe[139]=0,Ae[139]=1,Le[139]=0,De[139]=0,je[139]=0,Ue[139]=1,Ve[139]=0,_e[139]=-1,xe[139]=0,be[139]=0,we[139]=1,ke[139]=0,Ee[139]=1,Se[98]=0,Te[98]=-1,Me[98]=0,Ie[98]=0,Ce[98]=-1,Pe[98]=1,Re[98]=1,Oe[98]=0,ze[98]=0,Ae[98]=1,Le[98]=0,De[98]=1,Ne[98]=0,Fe[98]=1,Be[98]=0,_e[98]=-1,xe[98]=0,be[98]=1,Se[99]=0,Te[99]=1,Me[99]=0,Ie[99]=0,Ce[99]=-1,Pe[99]=1,Re[99]=1,Oe[99]=0,ze[99]=0,Ae[99]=-1,Le[99]=0,De[99]=1,Ne[99]=0,Fe[99]=-1,Be[99]=0,_e[99]=1,xe[99]=0,be[99]=1,Ie[38]=0,Ce[38]=-1,Pe[38]=1,Re[38]=1,Oe[38]=0,ze[38]=0,je[38]=0,Ue[38]=1,Ve[38]=1,Ne[38]=0,Fe[38]=1,Be[38]=0,_e[38]=-1,xe[38]=0,be[38]=1,we[38]=-1,ke[38]=0,Ee[38]=0,Ie[39]=0,Ce[39]=1,Pe[39]=1,Re[39]=-1,Oe[39]=0,ze[39]=0,je[39]=0,Ue[39]=-1,Ve[39]=1,Ne[39]=0,Fe[39]=1,Be[39]=0,_e[39]=-1,xe[39]=0,be[39]=1,we[39]=1,ke[39]=0,Ee[39]=0;var Ge=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},qe=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ze=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},We=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Xe=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},He=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ye=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ke=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Je=[],Qe=[],$e=[],tn=[],en=[],nn=[],rn=[],on=[];tn[1]=en[1]=18,tn[169]=en[169]=18,$e[4]=Qe[4]=12,$e[166]=Qe[166]=12,Je[16]=on[16]=4,Je[154]=on[154]=4,nn[64]=rn[64]=22,nn[106]=rn[106]=22,$e[2]=nn[2]=17,tn[2]=en[2]=18,$e[168]=nn[168]=17,tn[168]=en[168]=18,Je[8]=tn[8]=9,Qe[8]=$e[8]=12,Je[162]=tn[162]=9,Qe[162]=$e[162]=12,Je[32]=on[32]=4,Qe[32]=rn[32]=1,Je[138]=on[138]=4,Qe[138]=rn[138]=1,en[128]=on[128]=21,nn[128]=rn[128]=22,en[42]=on[42]=21,nn[42]=rn[42]=22,Qe[5]=en[5]=14,Qe[165]=en[165]=14,$e[20]=on[20]=6,$e[150]=on[150]=6,Je[80]=nn[80]=11,Je[90]=nn[90]=11,tn[65]=rn[65]=3,tn[105]=rn[105]=3,Je[160]=nn[160]=11,Qe[160]=en[160]=14,Je[10]=nn[10]=11,Qe[10]=en[10]=14,$e[130]=on[130]=6,tn[130]=rn[130]=3,$e[40]=on[40]=6,tn[40]=rn[40]=3,Qe[101]=rn[101]=1,Qe[69]=rn[69]=1,en[149]=on[149]=21,en[21]=on[21]=21,$e[86]=nn[86]=17,$e[84]=nn[84]=17,Je[89]=tn[89]=9,Je[81]=tn[81]=9,Je[96]=rn[96]=0,Qe[96]=nn[96]=15,Je[74]=rn[74]=0,Qe[74]=nn[74]=15,Je[24]=$e[24]=8,tn[24]=on[24]=7,Je[146]=$e[146]=8,tn[146]=on[146]=7,Qe[6]=nn[6]=15,$e[6]=en[6]=16,Qe[164]=nn[164]=15,$e[164]=en[164]=16,tn[129]=on[129]=7,en[129]=rn[129]=20,tn[41]=on[41]=7,en[41]=rn[41]=20,$e[66]=rn[66]=2,tn[66]=nn[66]=19,$e[104]=rn[104]=2,tn[104]=nn[104]=19,Je[144]=en[144]=10,nn[144]=on[144]=23,Je[26]=en[26]=10,nn[26]=on[26]=23,Qe[36]=on[36]=5,$e[36]=rn[36]=2,Qe[134]=on[134]=5,$e[134]=rn[134]=2,Je[9]=en[9]=10,Qe[9]=tn[9]=13,Je[161]=en[161]=10,Qe[161]=tn[161]=13,Qe[37]=on[37]=5,en[37]=rn[37]=20,Qe[133]=on[133]=5,en[133]=rn[133]=20,$e[148]=en[148]=16,nn[148]=on[148]=23,$e[22]=en[22]=16,nn[22]=on[22]=23,Je[82]=$e[82]=8,tn[82]=nn[82]=19,Je[88]=$e[88]=8,tn[88]=nn[88]=19,Je[73]=rn[73]=0,Qe[73]=tn[73]=13,Je[97]=rn[97]=0,Qe[97]=tn[97]=13,Je[145]=tn[145]=9,en[145]=on[145]=21,Je[25]=tn[25]=9,en[25]=on[25]=21,Qe[70]=rn[70]=1,$e[70]=nn[70]=17,Qe[100]=rn[100]=1,$e[100]=nn[100]=17,Je[34]=tn[34]=9,Qe[34]=$e[34]=12,en[34]=on[34]=21,nn[34]=rn[34]=22,Je[136]=on[136]=4,Qe[136]=rn[136]=1,$e[136]=nn[136]=17,tn[136]=en[136]=18,Je[35]=on[35]=4,Qe[35]=$e[35]=12,tn[35]=en[35]=18,nn[35]=rn[35]=22,Je[153]=on[153]=4,tn[153]=en[153]=18,Qe[102]=$e[102]=12,nn[102]=rn[102]=22,Je[155]=tn[155]=9,en[155]=on[155]=23,Qe[103]=rn[103]=1,$e[103]=nn[103]=17,Je[152]=on[152]=4,$e[152]=nn[152]=17,tn[152]=en[152]=18,Je[156]=$e[156]=8,tn[156]=en[156]=18,nn[156]=on[156]=23,Je[137]=on[137]=4,Qe[137]=rn[137]=1,tn[137]=en[137]=18,Je[139]=on[139]=4,Qe[139]=tn[139]=13,en[139]=rn[139]=20,Je[98]=tn[98]=9,Qe[98]=$e[98]=12,nn[98]=rn[98]=22,Je[99]=rn[99]=0,Qe[99]=$e[99]=12,tn[99]=nn[99]=19,Qe[38]=$e[38]=12,en[38]=on[38]=21,nn[38]=rn[38]=22,Qe[39]=on[39]=5,$e[39]=en[39]=16,nn[39]=rn[39]=22;var an=[];an[1]=an[169]=Ge,an[4]=an[166]=qe,an[16]=an[154]=Ze,an[64]=an[106]=We,an[168]=an[2]=Xe,an[162]=an[8]=He,an[138]=an[32]=Ye,an[42]=an[128]=Ke,an[5]=an[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},an[20]=an[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},an[80]=an[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},an[65]=an[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},an[160]=an[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},an[130]=an[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},an[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},an[101]=an[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},an[149]=an[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},an[86]=an[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},an[89]=an[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},an[96]=an[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},an[24]=an[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},an[6]=an[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},an[129]=an[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},an[66]=an[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},an[144]=an[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},an[36]=an[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},an[9]=an[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},an[37]=an[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},an[148]=an[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},an[82]=an[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},an[73]=an[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},an[145]=an[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},an[70]=an[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},an[34]=function(t){return[Ke(t),He(t)]},an[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},an[136]=function(t){return[Ye(t),Xe(t)]},an[153]=function(t){return[Ze(t),Ge(t)]},an[102]=function(t){return[qe(t),We(t)]},an[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},an[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},an[152]=function(t){return[Ze(t),Xe(t)]},an[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},an[137]=function(t){return[Ye(t),Ge(t)]},an[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},an[98]=function(t){return[He(t),We(t)]},an[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},an[38]=function(t){return[qe(t),Ke(t)]},an[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function sn(t,e,n){var r,i=e[0]-t[0],o=e[1]-t[1],a=n[0]-e[0],s=n[1]-e[1];return((r=i*s-a*o)>0)-(r<0)||+r}function ln(t,e){return e.geometry.coordinates[0].every((function(e){return le(Qt(e),t)}))}var un=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=sn(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),cn=un,hn=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return te([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return sn(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),fn=hn,pn=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=sn(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return ee(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=$t([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=he(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(o,i)&&ln(o,i)){for(var a=t.map((function(t){return t.from.coordinates})),s=void 0,l=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(s=t)},u=0,c=a;u<c.length;u++){l(c[u])}s&&e.inside(Qt(s))&&(r&&!ln(n,o)||(r=e))}})),r},t.prototype.inside=function(t){return le(t,this.toPolygon())},t}(),dn=pn;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return oe(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),function(t,e,n,r){var i=n;re(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r)}(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=cn.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new cn(t)),n},t.prototype.addEdge=function(t,e){var n=new fn(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;"undefined"===typeof t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new dn;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();n(4042);n(5107);n(6530);function vn(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var yn={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||yn.heuristics.manhattan,o=r.closest||!1,a=new _n((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return vn(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?vn(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function gn(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new mn(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function mn(t,e,n){this.x=t,this.y=e,this.weight=n}function _n(t){this.content=[],this.scoreFunction=t}gn.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)yn.cleanNode(this.nodes[t])},gn.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)yn.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},gn.prototype.markDirty=function(t){this.dirtyNodes.push(t)},gn.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},gn.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},mn.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},mn.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},mn.prototype.isWall=function(){return 0===this.weight},_n.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};function xn(){this._=null}function bn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function wn(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function kn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function En(t){for(;t.L;)t=t.L;return t}xn.prototype={constructor:xn,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=En(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(wn(this,n),n=(t=n).U),n.C=!1,r.C=!0,kn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(kn(this,n),n=(t=n).U),n.C=!1,r.C=!0,wn(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?En(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,wn(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,kn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,wn(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,kn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,wn(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,kn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Sn=xn;function Tn(t,e,n,r){var i=[null,null],o=Kn.push(i)-1;return i.left=t,i.right=e,n&&In(i,t,e,n),r&&In(i,e,t,r),Hn[t.index].halfedges.push(o),Hn[e.index].halfedges.push(o),i}function Mn(t,e,n){var r=[e,n];return r.left=t,r}function In(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Cn(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,f=s[0]-l,p=s[1]-u;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*p]),h<1&&(t[1]=[l+h*f,u+h*p]),!0)}}}}}function Pn(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],p=c[0],d=c[1],v=(h+p)/2,y=(f+d)/2;if(d===f){if(v<e||v>=r)return;if(h>p){if(l){if(l[1]>=i)return}else l=[v,n];o=[v,i]}else{if(l){if(l[1]<n)return}else l=[v,i];o=[v,n]}}else if(s=y-(a=(h-p)/(d-f))*v,a<-1||a>1)if(h>p){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function An(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ln(t,e){return e[+(e.left!==t.site)]}function Dn(t,e){return e[+(e.left===t.site)]}var Rn,On=[];function zn(){bn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Nn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(l*h-u*c);if(!(f>=-Qn)){var p=l*l+u*u,d=c*c+h*h,v=(h*p-u*d)/f,y=(l*d-c*p)/f,g=On.pop()||new zn;g.arc=t,g.site=i,g.x=v+a,g.y=(g.cy=y+s)+Math.sqrt(v*v+y*y),t.circle=g;for(var m=null,_=Yn._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Yn.insert(m,g),m||(Rn=g)}}}}function Fn(t){var e=t.circle;e&&(e.P||(Rn=e.N),Yn.remove(e),On.push(e),bn(e),t.circle=null)}var Bn=[];function jn(){bn(this),this.edge=this.site=this.circle=null}function Un(t){var e=Bn.pop()||new jn;return e.site=t,e}function Vn(t){Fn(t),Xn.remove(t),Bn.push(t),bn(t)}function Gn(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Vn(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Jn&&Math.abs(r-l.circle.cy)<Jn;)o=l.P,s.unshift(l),Vn(l),l=o;s.unshift(l),Fn(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Jn&&Math.abs(r-u.circle.cy)<Jn;)a=u.N,s.push(u),Vn(u),u=a;s.push(u),Fn(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],In(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Tn(l.site,u.site,null,i),Nn(l),Nn(u)}function qn(t){for(var e,n,r,i,o=t[0],a=t[1],s=Xn._;s;)if((r=Zn(s,a)-o)>Jn)s=s.L;else{if(!((i=o-Wn(s,a))>Jn)){r>-Jn?(e=s.P,n=s):i>-Jn?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Hn[t.index]={site:t,halfedges:[]}}(t);var l=Un(t);if(Xn.insert(e,l),e||n){if(e===n)return Fn(e),n=Un(e.site),Xn.insert(l,n),l.edge=n.edge=Tn(e.site,l.site),Nn(e),void Nn(n);if(n){Fn(e),Fn(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,p=t[1]-h,d=n.site,v=d[0]-c,y=d[1]-h,g=2*(f*y-p*v),m=f*f+p*p,_=v*v+y*y,x=[(y*m-p*_)/g+c,(f*_-v*m)/g+h];In(n.edge,u,d,x),l.edge=Tn(u,t,null,x),n.edge=Tn(t,d,null,x),Nn(e),Nn(n)}else l.edge=Tn(e.site,l.site)}}function Zn(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Wn(t,e){var n=t.N;if(n)return Zn(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Xn,Hn,Yn,Kn,Jn=1e-6,Qn=1e-12;function $n(t,e){return e[1]-t[1]||e[0]-t[0]}function tr(t,e){var n,r,i,o=t.sort($n).pop();for(Kn=[],Hn=new Array(t.length),Xn=new Sn,Yn=new Sn;;)if(i=Rn,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(qn(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Gn(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Hn.length;i<o;++i)if((t=Hn[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=An(t,Kn[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=Kn.length;o--;)Pn(i=Kn[o],t,e,n,r)&&Cn(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Jn||Math.abs(i[0][1]-i[1][1])>Jn)||delete Kn[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,v,y=Hn.length,g=!0;for(i=0;i<y;++i)if(o=Hn[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)Kn[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(p=Dn(o,Kn[l[s]]))[0],v=p[1],h=(c=Ln(o,Kn[l[++s%u]]))[0],f=c[1],(Math.abs(d-h)>Jn||Math.abs(v-f)>Jn)&&(l.splice(s,0,Kn.push(Mn(a,p,Math.abs(d-t)<Jn&&r-v>Jn?[t,Math.abs(h-t)<Jn?f:r]:Math.abs(v-r)<Jn&&n-d>Jn?[Math.abs(f-r)<Jn?h:n,r]:Math.abs(d-n)<Jn&&v-e>Jn?[n,Math.abs(h-n)<Jn?f:e]:Math.abs(v-e)<Jn&&d-t>Jn?[Math.abs(f-e)<Jn?h:t,e]:null))-1),++u);u&&(g=!1)}if(g){var m,_,x,b=1/0;for(i=0,g=null;i<y;++i)(o=Hn[i])&&(x=(m=(a=o.site)[0]-t)*m+(_=a[1]-e)*_)<b&&(b=x,g=o);if(g){var w=[t,e],k=[t,r],E=[n,r],S=[n,e];g.halfedges.push(Kn.push(Mn(a=g.site,w,k))-1,Kn.push(Mn(a,k,E))-1,Kn.push(Mn(a,E,S))-1,Kn.push(Mn(a,S,w))-1)}}for(i=0;i<y;++i)(o=Hn[i])&&(o.halfedges.length||delete Hn[i])}(a,s,l,u)}this.edges=Kn,this.cells=Hn,Xn=Yn=Kn=Hn=null}tr.prototype={constructor:tr,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ln(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,l,u,c=n.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)a=p,p=(f=e[i[h]]).left===c?f.right:f.left,a&&p&&r<a.index&&r<p.index&&(l=a,u=p,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&t.push([c.data,a.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};n(9056);n(4035);function er(){return new nr}function nr(){this.reset()}nr.prototype={constructor:nr,reset:function(){this.s=this.t=0},add:function(t){ir(rr,t,this.t),ir(this,rr.s,this.s),this.s?this.t+=rr.t:this.s=rr.t},valueOf:function(){return this.s}};var rr=new nr;function ir(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var or=1e-6,ar=Math.PI,sr=ar/2,lr=ar/4,ur=2*ar,cr=ar/180,hr=Math.abs,fr=Math.atan,pr=Math.atan2,dr=Math.cos,vr=(Math.ceil,Math.exp),yr=(Math.floor,Math.log),gr=(Math.pow,Math.sin),mr=(Math.sign,Math.sqrt),_r=Math.tan;function xr(t){return t>1?sr:t<-1?-sr:Math.asin(t)}function br(){}er(),er();function wr(t){var e=t[0],n=t[1],r=dr(n);return[r*dr(e),r*gr(e),gr(n)]}function kr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Er(t){var e=mr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}er();function Sr(t,e){return[t>ar?t-ur:t<-ar?t+ur:t,e]}function Tr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Mr(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,r=t[0],a=t[e];if(a,hr(r[0]-c[0])<or&&hr(u[1]-c[1])<or){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],r[1]);i.lineEnd()}else{var u,c;s.push(new Tr(r,t,null,!0)),l.push(n.o=new Tr(r,null,n,!1)),s.push(new Tr(a,t,null,!1)),l.push(n.o=new Tr(a,null,n,!0))}}})),s.length){for(l.sort(e),Ir(s),Ir(l),0,l.length;o<a;++o)l[o].e=!n;for(var u,c,h=s[0];;){for(var f=h,p=!0;f.v;)if(f.n===h)return;f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(0,u.length;o<a;++o)i.point(u[o][0],c[1]);else r(f.x,f.n.x,1,i);f.n}else{if(p)for(f.p.z,u.length-1;o>=0;--o)i.point(u[o][0],c[1]);else r(f.x,f.p.x,-1,i);f.p}f.o.z,!p}while(!f.v);i.lineEnd()}}}function Ir(t){if(t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=t[r],n.p=i,n;i.n=t[0],n.p=i}}function Cr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Sr.invert=Sr;var Pr=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Cr(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Cr),Ar=(Pr.right,Pr.left,Array.prototype);Ar.slice,Ar.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Lr=er();function Dr(t,e){var n=e[0],r=e[1],i=[gr(n),-dr(n),0],o=0,a=0;Lr.reset();for(var s=0,l=t.length;s<l;++s)if(t[s].length)for(var u,c,h=u[c-1],f=h[0],p=h[1]/2+lr,d=gr(p),v=dr(p),y=0;y<c;m,x,b,g){var g=u[y],m=g[0],_=g[1]/2+lr,x=gr(_),b=dr(_),w=m-f,k=w>=0?1:-1,E=k*w,S=E>ar,T=d*x;if(Lr.add(pr(T*k*gr(E),v*b+T*dr(E))),S?w+k*ur:w,S^f>=n^m>=n){var M=kr(wr(h),wr(g));Er(M);var I=kr(i,M);Er(I);var C=(S^w>=0?-1:1)*xr(I[2]);(r>C||r===C&&(M[0]||M[1]))&&(S^w>=0?1:-1)}}return(o<-or||o<or&&Lr<-or)^1&a}er();er(),er();er();function Rr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Or(t){return t.length>1}function zr(t,e){return(t.x[0]<0?t[1]-sr-or:sr-t[1])-(e.x[0]<0?e[1]-sr-or:sr-e[1])}Rr(4.5);function Nr(t){return function(e){var n=new Fr;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Fr(){}Fr.prototype={constructor:Fr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};dr(30*cr);Nr({point:function(t,e){this.stream.point(t*cr,e*cr)}});function Br(t){return function(e,n){var r=dr(e),i=dr(n),o=t(r*i);return[o*i*gr(e),o*gr(n)]}}function jr(t){return function(e,n){var r=mr(e*e+n*n),i=t(r),o=gr(i),a=dr(i);return[pr(e*o,r*a),xr(r&&n*o/r)]}}var Ur=Br((function(t){return mr(2/(1+t))}));Ur.invert=jr((function(t){return 2*xr(t/2)}));var Vr=Br((function(t){return(t=(e=t)>1?0:e<-1?ar:Math.acos(e))&&t/gr(t);var e}));function Gr(t,e){return[t,yr(_r((sr+e)/2))]}function qr(t,e){return[t,e]}function Zr(t,e){var n=dr(e),r=dr(t)*n;return[n*gr(t)/r,gr(e)/r]}function Wr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Xr(t,e){return[dr(e)*gr(t),gr(e)]}function Hr(t,e){var n=dr(e),r=1+dr(t)*n;return[n*gr(t)/r,gr(e)/r]}function Yr(t,e){return[yr(_r((sr+e)/2)),-t]}Vr.invert=jr((function(t){return t})),Gr.invert=function(t,e){return[t,2*fr(vr(e))-sr]},qr.invert=qr,Zr.invert=jr(fr),Wr.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(hr(n)>or&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Xr.invert=jr(xr),Hr.invert=jr((function(t){return 2*fr(t)})),Yr.invert=function(t,e){return[-e,2*fr(vr(t))-sr]};function Kr(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jr=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"shape_area":"0.000111871946192","objectid":"4","shape_leng":"0.0435665270921","location_id":"4","zone":"Alphabet City","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97177410965318,40.72582128133706],[-73.97179142961485,40.72581422114911],[-73.97181650587731,40.72581496675257],[-73.97185935830923,40.72558296903031],[-73.97187437695213,40.72550311607975],[-73.97188490951473,40.725424405065766],[-73.97191120732053,40.72529037069992],[-73.97193374501082,40.72517629035117],[-73.97193975456328,40.725158038610054],[-73.97196154778591,40.725039978810884],[-73.97200511841213,40.72484148970817],[-73.97203666966882,40.724684070020096],[-73.97206595867397,40.72455915832874],[-73.97207196960339,40.724536350858095],[-73.97208098151926,40.72449756793038],[-73.97208400057282,40.72446790554567],[-73.97209751290906,40.72442341523472],[-73.97215609001734,40.7241701782781],[-73.97216585996632,40.724131963273145],[-73.9722169237619,40.723930054646765],[-73.97223344676958,40.723846779926305],[-73.97226499868246,40.72371445733361],[-73.97232507731592,40.723463499327295],[-73.97236115744644,40.72331206047645],[-73.97239945748277,40.72314881636663],[-73.97251011180381,40.7226968860067],[-73.97288971396678,40.721088297219346],[-73.9730466728251,40.72043622983333],[-73.97312959090407,40.72009119241493],[-73.9732107544226,40.7197848577304],[-73.97332646360798,40.7193611047339],[-73.97347975574512,40.71886142911286],[-73.97464720799998,40.718842349999896],[-73.97468687499985,40.71884170199993],[-73.97474239999998,40.71884079399995],[-73.97485919999995,40.71885547999994],[-73.97491298899988,40.718862442999864],[-73.97497644799995,40.71887065199991],[-73.97509520199993,40.71888074599987],[-73.97545167499995,40.71894655899996],[-73.97551012699985,40.71895861299991],[-73.97609249599991,40.71907870199988],[-73.97635525199995,40.71913288399984],[-73.97648182399995,40.719159627999915],[-73.97674495699998,40.71921523399993],[-73.97722379199992,40.71930977499993],[-73.978031227,40.71963834799988],[-73.97875234999982,40.71993370599993],[-73.97966021699982,40.72021282999992],[-73.98130824199984,40.7207087859999],[-73.98216615299982,40.72096885499996],[-73.98300308699991,40.721222680999894],[-73.9838238729998,40.72147287199987],[-73.98377990999991,40.72153595399992],[-73.98344363599992,40.722018506999895],[-73.9829641439999,40.72267132499997],[-73.98252449499985,40.72327797699997],[-73.9820824239999,40.72388204399992],[-73.98163663899999,40.72449348099987],[-73.9812112959998,40.72507279999992],[-73.98076713900005,40.725685594999916],[-73.9803329819999,40.72628033599989],[-73.97990650199998,40.72686577299988],[-73.97946913000003,40.727467676999936],[-73.97899861999981,40.72810574699989],[-73.97853582899992,40.728746084999905],[-73.97805542899995,40.72938308599991],[-73.97802697999985,40.729433059999984],[-73.97739386799988,40.72916504799993],[-73.97690436400002,40.72895782399994],[-73.976269971,40.7286892589999],[-73.97615204099999,40.728645209999854],[-73.9761329,40.72863827199994],[-73.97580243799992,40.72851847999988],[-73.97569651100005,40.728475052999926],[-73.97329796799995,40.72742800799989],[-73.97205015299988,40.72688094599988],[-73.97197685099988,40.72683035599993],[-73.97191244199995,40.72679100899989],[-73.97185671300005,40.7267586849999],[-73.97179602099986,40.72671367999989],[-73.97162697285862,40.72662845299843],[-73.97166972701174,40.7263923271543],[-73.97169587451613,40.72624182930235],[-73.97171894361502,40.72612199325951],[-73.97173843379353,40.725999667555534],[-73.97176755410212,40.725833303454564],[-73.97177410965318,40.72582128133706]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000607235737749","objectid":"24","shape_leng":"0.0469999619287","location_id":"24","zone":"Bloomingdale","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95953658899997,40.7987185259999],[-73.96004456499999,40.79804123499991],[-73.96147779999993,40.79865415599994],[-73.96286980099991,40.799239676999946],[-73.96571144299992,40.80043806999988],[-73.96775900399992,40.80130351599994],[-73.96787379699998,40.80135169799993],[-73.96798415999996,40.80139826599985],[-73.96858360799983,40.80163546999991],[-73.97004742199995,40.80226500999991],[-73.97021594799989,40.80233585099994],[-73.97027400499987,40.802359035999885],[-73.97032589799987,40.80238456099995],[-73.97150381000002,40.80283773599996],[-73.97250022199995,40.80321661299997],[-73.97257779799996,40.803247183999915],[-73.9726574479999,40.803276513999926],[-73.97279907800002,40.803329158999894],[-73.97287179090726,40.803356187573904],[-73.97255429829633,40.80379863465013],[-73.97217237241792,40.80431907695909],[-73.97205095521862,40.80453037600999],[-73.9719529243853,40.804619709051586],[-73.97181849483539,40.80471754320449],[-73.97179980150743,40.80478561548601],[-73.97171200727101,40.80493169127652],[-73.9716204956932,40.80504229439937],[-73.97161113391445,40.80509618747434],[-73.97144210961531,40.80533442683979],[-73.9712908330033,40.805528707533185],[-73.97110765876137,40.805790139589654],[-73.97098767999995,40.805742902999974],[-73.97084148399995,40.80568534399987],[-73.97076362299994,40.80565737299987],[-73.97069326499995,40.80563026799993],[-73.96978722000001,40.80530049699997],[-73.96860707399988,40.804870949999895],[-73.96855913399985,40.80485358399993],[-73.96849506699984,40.80483226999993],[-73.96804849299988,40.804683699999906],[-73.96680327299997,40.804207560999906],[-73.96670106899995,40.80416847599993],[-73.96659731599986,40.804122764999946],[-73.96386126299988,40.80297203799993],[-73.96107793999975,40.801800357999866],[-73.95964685399987,40.80115642299993],[-73.95848111500001,40.800670477999894],[-73.95817297099987,40.800582540999876],[-73.95833304999988,40.80036505399989],[-73.95861879299989,40.79997702599996],[-73.95907669099992,40.79935223299986],[-73.95953658899997,40.7987185259999]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000415116236727","objectid":"12","shape_leng":"0.0366613013579","location_id":"12","zone":"Battery Park","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.01565756599994,40.704833087999944],[-74.01539758699995,40.704800148999894],[-74.01527219799995,40.70483003699998],[-74.01516257,40.704805094999884],[-74.01496125199992,40.70475979699995],[-74.01489542099996,40.70469751799991],[-74.01478059499995,40.70467411299992],[-74.0146670989999,40.704647212999916],[-74.01451712299998,40.704605674999854],[-74.014370312,40.70455803799994],[-74.01428922899998,40.70454907499989],[-74.01427065899998,40.70452022899989],[-74.01425861399994,40.70448944299991],[-74.01425342599994,40.70445756399993],[-74.01425523899994,40.70442547199991],[-74.014391769,40.70359878299993],[-74.01442983199998,40.70315064799989],[-74.014192151,40.70275671099996],[-74.01389890399994,40.70227066999996],[-74.01379120799997,40.70130547599995],[-74.01378191199989,40.70122215499992],[-74.01377528899992,40.7011827129999],[-74.01376867799992,40.7011432629999],[-74.01415893499998,40.701096289999896],[-74.01395152778244,40.70099098222994],[-74.0140919838548,40.70055161832718],[-74.01410490300086,40.70051082838692],[-74.01409144949483,40.70050833672693],[-74.01412821190817,40.70039328205465],[-74.0141372638859,40.7003949552103],[-74.01414860637784,40.70032057172371],[-74.01417467279443,40.70026089129383],[-74.014220631955,40.700111491868306],[-74.01430981311289,40.70012129606874],[-74.01430981586151,40.70013410151565],[-74.01417787931776,40.70054147355369],[-74.01416495763299,40.70053905203082],[-74.014152387873,40.70057786578352],[-74.01428920741124,40.700644144765086],[-74.01430157023238,40.70063221177271],[-74.0142965168929,40.700629186523706],[-74.01431530264765,40.70061103797418],[-74.01431796468076,40.70061249730781],[-74.01436783583218,40.7005461226675],[-74.01444813150715,40.700447372399886],[-74.01455999973689,40.70030978677959],[-74.01457513332028,40.700316916331225],[-74.01458425440417,40.70030846895508],[-74.01458234409432,40.70028387552862],[-74.01463294333476,40.700197430412395],[-74.01467119992019,40.700210401699714],[-74.01466717213702,40.70023938090731],[-74.01465386124688,40.700242641175116],[-74.01460863003733,40.70030970824581],[-74.01460825448504,40.70032365711382],[-74.01455219325993,40.70038298075156],[-74.01449342549978,40.70044516925066],[-74.01449246893418,40.700454669002845],[-74.01448492126369,40.70046115359205],[-74.01447857931363,40.70046208215578],[-74.01440947394667,40.70055133141232],[-74.01439689988958,40.70056348189321],[-74.01439480693733,40.70057047909727],[-74.01432384363005,40.700661304127145],[-74.01464323234902,40.70081730432509],[-74.01472424834412,40.70071429389424],[-74.01477142439134,40.70066365190685],[-74.01481236514043,40.70061084993609],[-74.01485926659423,40.70055544464552],[-74.01493032611235,40.70047926986344],[-74.01499883053579,40.7004061205765],[-74.0150681826931,40.70031825755493],[-74.0150983227013,40.70033426552348],[-74.01503579735073,40.70042083101055],[-74.01502271060043,40.70041953605862],[-74.0150085051725,40.70043770992608],[-74.01499314575906,40.700436847319885],[-74.01496757071692,40.70046541487965],[-74.01497495555579,40.70047017772347],[-74.01494881182721,40.70049441360121],[-74.01494255505821,40.700506103291325],[-74.01492322289359,40.70051519147152],[-74.0149175465081,40.70052557571269],[-74.01492379463954,40.700530338707146],[-74.01493687947055,40.70052297938124],[-74.01494199155965,40.700523843325755],[-74.0148859896547,40.700580114435745],[-74.01482004284685,40.700660619780244],[-74.01472681782191,40.700774015849596],[-74.01470265033873,40.700799116025635],[-74.014673656285,40.70083460953097],[-74.01481072560155,40.700903831982195],[-74.01482834225268,40.70089474286969],[-74.01502113661684,40.700992504013406],[-74.0151423181209,40.700842892354245],[-74.01567778184732,40.70125602102743],[-74.01579351711148,40.701346905807576],[-74.01591034233417,40.7014609484439],[-74.01611609060468,40.701630801625356],[-74.01613890635998,40.70164601710269],[-74.0162444906067,40.70175272143678],[-74.01639205370195,40.701897701008235],[-74.01651515260784,40.70201729867141],[-74.01653258703746,40.70203653968305],[-74.01681859599911,40.70233857508047],[-74.01689657041247,40.70242187995947],[-74.01700396789508,40.702554535627506],[-74.01713705889382,40.702711340267676],[-74.01714508062653,40.70270534997616],[-74.01725182133946,40.70283555726377],[-74.01724571591123,40.70283845773918],[-74.01729346221033,40.70288743870684],[-74.01731837763397,40.702918871771594],[-74.01739839332275,40.703019140804905],[-74.01744003546047,40.70307751454187],[-74.01749381162765,40.703154843460084],[-74.01754038297949,40.70323616042989],[-74.01757548561497,40.703307503056024],[-74.0175964796706,40.70336138730909],[-74.01761681217123,40.70342324846539],[-74.01762601904944,40.703422761227074],[-74.0176479750685,40.70349459987955],[-74.01766045074616,40.70354997909756],[-74.01766881307267,40.70359131346763],[-74.01767132020255,40.70360642738378],[-74.01768310568107,40.70371113122529],[-74.01767264581422,40.70371179104597],[-74.01767689629425,40.70377050363851],[-74.0176742874818,40.70383436757153],[-74.01766578442252,40.703899233718545],[-74.01765792483437,40.70393266178636],[-74.01764306532696,40.70398897346139],[-74.01765378898192,40.70399838081256],[-74.01765461989744,40.70400968256976],[-74.01764390293607,40.70402224590195],[-74.01763399890548,40.70402475178324],[-74.01762657963023,40.70402350082161],[-74.01757035703022,40.70418388099316],[-74.01713123899995,40.70428253499989],[-74.01684600699993,40.70463488599989],[-74.01675906699995,40.70474228299986],[-74.01668714699993,40.70474394199987],[-74.01668613099999,40.70479933799992],[-74.01662761199991,40.704799430999856],[-74.01652040399995,40.7047997179999],[-74.01637519799986,40.704838484999925],[-74.01629888499991,40.70484641499997],[-74.01621736899986,40.70485302699991],[-74.01587396199992,40.70488211299991],[-74.01565582199999,40.704882633999915],[-74.01565756599994,40.704833087999944]]]]}},{"type":"Feature","properties":{"shape_area":"0.000149358592917","objectid":"13","shape_leng":"0.0502813228631","location_id":"13","zone":"Battery Park City","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.01244109299991,40.7190576729999],[-74.01281566799992,40.71735629799987],[-74.01286663199994,40.71717610099995],[-74.0130514639999,40.71645477099989],[-74.01323384899992,40.715656187999855],[-74.0133512149999,40.71523331199993],[-74.01347524299993,40.715110710999895],[-74.01359239999995,40.71449431599993],[-74.01375388499997,40.71369055499988],[-74.01404744699995,40.7124378149999],[-74.01417753399997,40.71188266599997],[-74.0142689369999,40.711467815999924],[-74.01445559399995,40.71090715299987],[-74.01466507099994,40.71042693799993],[-74.01482432799997,40.70982336799991],[-74.01487257099997,40.70968487399991],[-74.01495415399995,40.70943269199994],[-74.01534330799996,40.70849681699987],[-74.01559220199994,40.70788324299987],[-74.015643777,40.70775609899987],[-74.01568829399997,40.70766382499988],[-74.01571815199996,40.707585310999924],[-74.01584985499994,40.70724726799988],[-74.01586395999995,40.70720018299993],[-74.01588574099995,40.707142175999934],[-74.01590498299998,40.70709269499987],[-74.01593869399987,40.70700757399988],[-74.0160596679999,40.70670512999994],[-74.01619519599998,40.70625848499991],[-74.01625159599989,40.706072613999886],[-74.01640305499988,40.70566620199991],[-74.01662217899997,40.70509448299993],[-74.01665417299996,40.7049638209999],[-74.01668613099999,40.70479933799992],[-74.01668714699993,40.70474394199987],[-74.01675906699995,40.70474228299986],[-74.01684600699993,40.70463488599989],[-74.01713123899995,40.70428253499989],[-74.01757035703022,40.70418388099316],[-74.017794545203,40.704234898101326],[-74.01785585682941,40.704078847615584],[-74.01775054986874,40.70405488289344],[-74.01779139303439,40.70395091258355],[-74.01781758697946,40.70393792249663],[-74.01783782825967,40.70396266613854],[-74.01780821746945,40.70403196447961],[-74.01791229326216,40.704054497150985],[-74.01794269363918,40.703973176576255],[-74.01795473982617,40.703975785608584],[-74.01784441106724,40.7042420399379],[-74.01844770243774,40.70416216823156],[-74.01866830837966,40.70443524062125],[-74.01865606299125,40.704440968684594],[-74.01751639597092,40.70458084479339],[-74.01748086152578,40.704667487696156],[-74.01753166144591,40.70467109085019],[-74.01754791723492,40.70466387515681],[-74.01755808298708,40.70466593603326],[-74.01757026976702,40.704662836429215],[-74.01757365505411,40.70466799608357],[-74.01756688836934,40.7046715987825],[-74.01759804780863,40.704684480713354],[-74.0176342910399,40.704678910417414],[-74.01767567049036,40.704680875362584],[-74.01768666268582,40.7046739859631],[-74.01771834047513,40.704679887260674],[-74.01773321304685,40.704671520004936],[-74.01774937712388,40.704675451888505],[-74.01776552858085,40.70467249656345],[-74.01776682871572,40.70466511126367],[-74.01778363303417,40.70467101601078],[-74.01779785539696,40.70466707943758],[-74.0178062672323,40.70466216121492],[-74.01782889269187,40.70466510166719],[-74.01783988433819,40.704661165086556],[-74.01790194580029,40.70465180844167],[-74.01791034926417,40.70465919223342],[-74.01794138637455,40.70465573717841],[-74.01794397538687,40.704648361727315],[-74.01796918021806,40.704647367374776],[-74.01797888053436,40.704640971684036],[-74.01798922454327,40.704646877912715],[-74.01799827820122,40.704649829833414],[-74.01800797806544,40.70463851001487],[-74.01802414308348,40.704645890908516],[-74.01804288218334,40.70462817432251],[-74.01805387593451,40.70462964047163],[-74.01806504689,40.704635960523234],[-74.01811296129115,40.70455372748718],[-74.01886287526735,40.70471961588463],[-74.01888746649365,40.70472914883739],[-74.0189257238241,40.70477376257028],[-74.01934155704531,40.706070538204024],[-74.01934254624483,40.706093673029706],[-74.0192224228398,40.70657308872602],[-74.019122759634,40.70697581433742],[-74.01910255488421,40.70700043764153],[-74.01909155084701,40.7070044731845],[-74.01906617140139,40.707013770621415],[-74.01903338019694,40.7070131908761],[-74.01895359463364,40.70699676946555],[-74.01894579167332,40.707017770941384],[-74.01893740557156,40.70703420689672],[-74.01892660443798,40.70704425778585],[-74.01890921570659,40.7070643424512],[-74.01888462028889,40.70708580553678],[-74.01885943006913,40.70710041568372],[-74.01882943775024,40.70711548664006],[-74.01879644936784,40.70712781984765],[-74.0187610576787,40.70713786652502],[-74.01872626987436,40.70714335568639],[-74.01868966870465,40.70714244375395],[-74.0186554807563,40.70714153912503],[-74.01863058372689,40.707139715269285],[-74.0185807840372,40.70712374810273],[-74.01854718475336,40.707107770264166],[-74.0185711739943,40.70707992238871],[-74.01860717601117,40.7070954409752],[-74.01863417023104,40.7071031988087],[-74.01864437101163,40.707105475860516],[-74.01864796262215,40.70708173802993],[-74.01868695379919,40.70708400923754],[-74.01872115249107,40.70708172614977],[-74.01875054622958,40.70707989330999],[-74.01876194037423,40.70707578586693],[-74.01874993323987,40.707049762489504],[-74.01877393087639,40.70704428278758],[-74.01879432757899,40.70703241167227],[-74.01882011914348,40.70701597288301],[-74.01883870432944,40.70699496965149],[-74.01884829724429,40.7069830904102],[-74.01884889814508,40.70697031235022],[-74.01881110035015,40.7069662117742],[-74.01879851485624,40.706982188376166],[-74.01877571598486,40.70699725864645],[-74.01874212416382,40.70700776337878],[-74.01872292981695,40.70700685750043],[-74.0186947319076,40.707010967669895],[-74.01867853372192,40.70701873300245],[-74.0186479447413,40.70701781957846],[-74.01862814488057,40.70701097846493],[-74.01861254498962,40.70699728514591],[-74.0186047441128,40.706989064177236],[-74.01860294181306,40.7069749179781],[-74.01859153053353,40.70695939491845],[-74.01857952850992,40.706949814809064],[-74.01857172609165,40.70693839792395],[-74.01856933191749,40.70692059520576],[-74.01856452356972,40.706906440109286],[-74.01854892759579,40.70690827067913],[-74.01853513269664,40.70691832201406],[-74.01853033752076,40.706950732410355],[-74.01840649088626,40.70725787215848],[-74.01821726389763,40.70774220647172],[-74.01821699384473,40.707751309768305],[-74.01819029259642,40.70782162610999],[-74.01865557049648,40.70792394888326],[-74.01864689079073,40.70794681354695],[-74.0188006306842,40.707980621637354],[-74.0188319588392,40.70799916729172],[-74.01883395951482,40.70800221914011],[-74.01885347760366,40.70802201228401],[-74.01885500911972,40.70804753444736],[-74.01874689830457,40.70848058025358],[-74.01863142468959,40.70894110005421],[-74.01846882134515,40.7095895710087],[-74.01834136609794,40.71010647694362],[-74.01826409180671,40.71040899662683],[-74.01814480361767,40.71088865018895],[-74.01811057789173,40.711029628214455],[-74.01804609687574,40.71134450148706],[-74.01797853231488,40.71175631920802],[-74.01792224257028,40.712039242700754],[-74.01787333422654,40.71231514445642],[-74.01777014254499,40.71283457478915],[-74.01775292705896,40.712848327555946],[-74.01773183836696,40.71284931234666],[-74.01772021563546,40.71284473093366],[-74.01772148946118,40.71278414511305],[-74.01780037888389,40.71234512415861],[-74.01662424425285,40.71215731899531],[-74.01654463812528,40.71245603793092],[-74.01659227582768,40.71254817107679],[-74.01661817655314,40.71264976356907],[-74.01661840078299,40.71275615002967],[-74.0165914952051,40.712861563719784],[-74.0165554889345,40.712929095504386],[-74.01654112171721,40.71295556481935],[-74.01647724204135,40.713029493073954],[-74.01639169485804,40.713099997950714],[-74.01632006627581,40.71340798247826],[-74.01654114686625,40.713441052742326],[-74.01691068695474,40.713496328512925],[-74.01754443334657,40.71361122266428],[-74.01756811041477,40.713523703477954],[-74.01757889322138,40.71344274342788],[-74.01764810719082,40.71320618595165],[-74.01765509447189,40.71316106266698],[-74.01767041664046,40.71306920796514],[-74.01767270851062,40.713065996274715],[-74.01767565436691,40.713063109815586],[-74.01767917626104,40.71306062496484],[-74.01768318100166,40.71305860747276],[-74.0176875626216,40.71305711072315],[-74.01769220518092,40.713056174320755],[-74.0176969858353,40.7130558230432],[-74.01770177808676,40.71305606618535],[-74.01770610821879,40.713056814196534],[-74.01771024196847,40.71305804785403],[-74.017714085846,40.71305973925727],[-74.01771755291756,40.713061850152904],[-74.01772056477111,40.7130643328008],[-74.01772305328981,40.7130671310526],[-74.01772496219284,40.71307018162274],[-74.01770687258355,40.713169282968664],[-74.01761833310017,40.7136543239355],[-74.01753721790737,40.714097542247806],[-74.01740871360494,40.71480680040797],[-74.01738223187851,40.71494446127923],[-74.01726421509528,40.71559268236992],[-74.01712122293634,40.716371793579704],[-74.01698274294627,40.71713064366816],[-74.0168629737726,40.717786954287845],[-74.01671018605829,40.71862417605798],[-74.0166941909593,40.718648843354394],[-74.01665946969602,40.71866602122465],[-74.01662996338182,40.71866536845022],[-74.01594695204268,40.718575548906266],[-74.01594382984199,40.7185892550442],[-74.01566883666864,40.718554489265706],[-74.01567062060764,40.718537748736196],[-74.01555087754495,40.71852193318384],[-74.01500060682406,40.71844923605504],[-74.01499619731617,40.71847300131666],[-74.0149898133956,40.718507347327694],[-74.01498333230728,40.71852379143297],[-74.01497036258002,40.718535850864214],[-74.01494515549334,40.718543535077174],[-74.01470270021802,40.71851615488417],[-74.01321322719183,40.718315719895806],[-74.01306805492322,40.71892219382553],[-74.013072377692,40.718938618670066],[-74.01303068113208,40.71913145590955],[-74.01270167899996,40.71909177499987],[-74.01255468899996,40.71906986299999],[-74.01244109299991,40.7190576729999]]]]}},{"type":"Feature","properties":{"shape_area":"0.000143093037737","objectid":"41","shape_leng":"0.052793109453","location_id":"41","zone":"Central Harlem","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.94773985499985,40.80959972099989],[-73.94506102999992,40.808474499999875],[-73.94499360699993,40.808446183999955],[-73.94491601899982,40.80841350399989],[-73.9417714019999,40.80708899999997],[-73.9422631119999,40.80641573799991],[-73.94275367199994,40.80574401299986],[-73.94430194599991,40.80639082499993],[-73.94478208199993,40.80576125599991],[-73.94523965199991,40.80513601399989],[-73.9456926129999,40.804514948999916],[-73.94613131,40.80387735799992],[-73.94459751299998,40.80322814499992],[-73.94475976499989,40.803003040999954],[-73.94505128000003,40.80259859899995],[-73.94550863900001,40.80197023099991],[-73.9459678969998,40.801342394999935],[-73.94646133899998,40.80066530499988],[-73.94697366799987,40.79996170299987],[-73.94728018299999,40.799541788999896],[-73.94732771499984,40.79947667099992],[-73.94737599799991,40.799410523999924],[-73.94741996199991,40.79935029499992],[-73.94771056,40.79895218099991],[-73.94775716499986,40.79888833199987],[-73.94781663099997,40.798806862999925],[-73.94784679099992,40.798765542999945],[-73.94805130199998,40.79848535999989],[-73.94810108999994,40.7984171479999],[-73.94815384299983,40.79834487599987],[-73.9482064149998,40.79827285099987],[-73.94831125500004,40.79812921799992],[-73.94879165299982,40.797477127999905],[-73.94909695599983,40.79705785599993],[-73.94922045699984,40.796909858999896],[-73.94960357199982,40.797050270999925],[-73.95237419099993,40.79820977099995],[-73.95245200999996,40.79824023099996],[-73.95253597599994,40.798274645999896],[-73.95516503099992,40.79938223299992],[-73.95521824499984,40.799404657999894],[-73.95528884999997,40.79943440199994],[-73.95536651699993,40.799466425999846],[-73.95786499299992,40.8005152719999],[-73.95817297099987,40.800582540999876],[-73.95848111500001,40.800670477999894],[-73.95964685399987,40.80115642299993],[-73.95914741099993,40.80184375999991],[-73.95868839399998,40.80246979399986],[-73.95824878299987,40.80310648599989],[-73.958203008,40.803894270999905],[-73.95825482599987,40.804713877999916],[-73.95818167299996,40.80559679099991],[-73.95772176,40.8062909889999],[-73.95726581599985,40.80691617099996],[-73.95680543899995,40.807545708999946],[-73.95634493700001,40.80817335399992],[-73.95588417599986,40.808802248999875],[-73.95542974899983,40.80942915299993],[-73.954966572,40.81006455499988],[-73.9535757779999,40.8094766979999],[-73.9532765489999,40.80987960399989],[-73.95307869999975,40.81009408499988],[-73.9525912579999,40.81076533299994],[-73.9521012519999,40.811442853999935],[-73.95067975599989,40.8108429639999],[-73.94792306799984,40.809676921999944],[-73.94783875999985,40.8096412609999],[-73.94773985499985,40.80959972099989]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000913594688556","objectid":"45","shape_leng":"0.0459068626235","location_id":"45","zone":"Chinatown","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99750445299988,40.71406913199994],[-73.99744448599988,40.71406687299986],[-73.99647830999992,40.7141072639999],[-73.99484048899991,40.71420935199993],[-73.99472479499984,40.71421571299988],[-73.99465684999993,40.714219446999884],[-73.99450033499993,40.71423116399996],[-73.99434786700003,40.71424791599986],[-73.99431855699987,40.71425088499997],[-73.99414039099992,40.71426893199987],[-73.99395033499991,40.71429083199993],[-73.99301588399996,40.71435562499989],[-73.99282173499992,40.71436522999988],[-73.99256242199989,40.714388076999974],[-73.99246827699984,40.71385682499988],[-73.9924556359999,40.71376288199985],[-73.99239157000001,40.71319080999998],[-73.99226747499985,40.712467556999925],[-73.99225369399991,40.712354325999854],[-73.99224319399994,40.71226805499987],[-73.99221855999997,40.71206565499991],[-73.99220577900002,40.71196063499989],[-73.99218322399993,40.71177531099993],[-73.99216806999992,40.71171189899994],[-73.99215484499997,40.71165655599985],[-73.99213550299994,40.71157561499989],[-73.99202215999982,40.71110129999989],[-73.99200166199995,40.7110155229999],[-73.99197674899987,40.71091126599987],[-73.99191690599989,40.710597505999885],[-73.99177662699996,40.709819039999914],[-73.99183817499984,40.709810551999965],[-73.9919070979999,40.70980199399987],[-73.99204746299989,40.70977574499992],[-73.99200595899985,40.70969647899993],[-73.99197509100001,40.70964553499988],[-73.9919434659999,40.70958905299992],[-73.99192047499996,40.70955429399989],[-73.99190824271031,40.709532926643355],[-73.99203926968342,40.709516919162766],[-73.99209131635959,40.70950822240118],[-73.9921486897014,40.70949860910412],[-73.99236116139895,40.70946436881143],[-73.99284846748641,40.70938187763877],[-73.99374012862212,40.709246120435395],[-73.99400820164024,40.709237479918954],[-73.99414063200335,40.709233267399895],[-73.9943782354393,40.70919263919896],[-73.9945789996373,40.709130972909996],[-73.99517577369818,40.709034293810255],[-73.99580385653569,40.70894601390752],[-73.99601898395763,40.70891622384743],[-73.99666400996595,40.70882690451765],[-73.99728287195568,40.708731619842865],[-73.99808351186982,40.708509615367085],[-73.99828602320575,40.70842993146763],[-73.9985275858529,40.70833152790837],[-73.9985611462062,40.70831528323355],[-73.99872197955054,40.708237452896164],[-73.99875396570859,40.708223651529806],[-73.99880846276638,40.708200134992666],[-73.99882158420985,40.70817548117486],[-73.99888130863874,40.708136633919786],[-73.99898340963244,40.708092653316136],[-73.99905276738558,40.70803254536376],[-73.99913434918955,40.707982397448504],[-73.99919451154427,40.707947376675726],[-73.99928731099999,40.708016602999926],[-73.99936195599989,40.70807228699991],[-73.99939955100004,40.70810033799996],[-73.99944281399992,40.70813655699987],[-73.99956273399984,40.70823648299993],[-73.99981193899987,40.70844261499993],[-73.9999293639999,40.708536817999864],[-74.00000765599991,40.70859961999992],[-74.000123591,40.70868451899993],[-74.00019103100001,40.70873391299988],[-74.00026566699995,40.70879294899988],[-74.00055004999997,40.70901791699988],[-74.00134439899988,40.70964629299989],[-74.00147140299997,40.709746553999885],[-74.00155908199999,40.70981710799992],[-74.00173688999996,40.70996016999992],[-74.00223869799997,40.710363931999886],[-74.0025796699999,40.71063789699985],[-74.0033244169999,40.71123748299989],[-74.00336407499992,40.71126941399996],[-74.00366118299998,40.711487282999954],[-74.00382358799995,40.71155186199991],[-74.00418143899992,40.71168714199992],[-74.00442860399994,40.71178622599991],[-74.00490674599992,40.711972278999966],[-74.00499805099996,40.71201189699988],[-74.00510989999995,40.71205559399987],[-74.00518548699988,40.71207123299992],[-74.00522812799994,40.71207345199987],[-74.00538198399992,40.7120767429999],[-74.00543986599992,40.71207853299993],[-74.00573499299995,40.71197868799989],[-74.0058917509999,40.71200715999988],[-74.00574044699991,40.71208875699989],[-74.00558932999998,40.712170053999905],[-74.00543047899994,40.712203694999914],[-74.00527561999998,40.71224943999993],[-74.00512712599996,40.71230677299997],[-74.00498716699994,40.712374856999894],[-74.00485768099996,40.7124525409999],[-74.00470652299994,40.71257401499987],[-74.00429113899996,40.71290782599993],[-74.00421405399993,40.712980742999896],[-74.00405900799997,40.713134789999884],[-74.00360280399998,40.71364542999989],[-74.00321983099997,40.714036236999895],[-74.00272286199994,40.71438970899991],[-74.002453932,40.71478981999997],[-74.00211455799992,40.715158909999936],[-74.00168306199991,40.71574412299987],[-74.00081842499998,40.71692970799994],[-74.00027443699997,40.71761940199987],[-73.999956209,40.71801709499989],[-73.99931241699989,40.71755024199989],[-73.99858925599978,40.717099511999905],[-73.99776285999995,40.71681392799996],[-73.99698375299992,40.716540542999894],[-73.99605872699998,40.7162316399999],[-73.99614929199988,40.716084840999955],[-73.99622493199992,40.71599579099993],[-73.99653128199989,40.715491390999894],[-73.99680607099992,40.71503695599991],[-73.99709223399998,40.71461839799991],[-73.99750445299988,40.71406913199994]]]]}},{"type":"Feature","properties":{"shape_area":"0.000263896952605","objectid":"42","shape_leng":"0.0927092274616","location_id":"42","zone":"Central Harlem North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.93436121591056,40.83620061961779],[-73.93445239398683,40.83598096007491],[-73.93456051826952,40.83586608172803],[-73.934754664506,40.835589300341795],[-73.93475368707831,40.83556982111418],[-73.93480514039254,40.835427472645925],[-73.93481898168233,40.83539825039474],[-73.93483181137556,40.83538552549233],[-73.93484813571942,40.83535143220742],[-73.934869850678,40.835332715131045],[-73.9348946004199,40.83525404312232],[-73.93491533578629,40.835230821938744],[-73.93493620828455,40.83508021765153],[-73.9349422585534,40.835026875417256],[-73.93495859566912,40.83488277904472],[-73.9349794120861,40.834789121453554],[-73.93498833140688,40.83474865789363],[-73.9349508717845,40.83470667336768],[-73.93495775984093,40.83468276036335],[-73.93496523015544,40.83465684795366],[-73.93496624164149,40.83462912364824],[-73.93497316061179,40.83462163504156],[-73.93497219073525,40.83460814479754],[-73.93499389736655,40.834597666183],[-73.93503060323974,40.834392365341266],[-73.93503612427708,40.834298320343365],[-73.93503124118601,40.834248862849485],[-73.93504212490862,40.8342113992345],[-73.93507644502887,40.83392404328713],[-73.93506958098223,40.833887317502196],[-73.93508341363356,40.83386559692961],[-73.93509687471914,40.833715356792226],[-73.93509690469148,40.83368463190985],[-73.9351038425559,40.83365765691793],[-73.9351124510007,40.83342573907346],[-73.93511743048032,40.83337703478394],[-73.93512041704221,40.83335380357006],[-73.93513225848749,40.83334482290501],[-73.93512636041858,40.833326080356336],[-73.93512935500891,40.83329460947995],[-73.93512443552818,40.83328111868773],[-73.93513826819031,40.83326014425818],[-73.93513729127831,40.833241413188574],[-73.93513040300608,40.83322866727349],[-73.93512154973673,40.83320169277661],[-73.93512352949845,40.833189699006276],[-73.93511565892264,40.83317620588328],[-73.93513243602646,40.83316272562037],[-73.93513935847737,40.83315149100028],[-73.93512752379401,40.8331424888091],[-73.93512465984583,40.83305106902925],[-73.93512171853354,40.83302859034758],[-73.93511580946044,40.833021842172855],[-73.93511187882297,40.833003100729265],[-73.9351197936551,40.83298362817418],[-73.93511783020558,40.83296713902453],[-73.93512376770067,40.83294541299676],[-73.93512085547357,40.83290419576853],[-73.93513170518379,40.83290269767366],[-73.93514455114395,40.83288472203645],[-73.93516725294582,40.832874992778436],[-73.93516480840945,40.832852883264295],[-73.93515659173339,40.83268240673983],[-73.93512878131628,40.83236353447693],[-73.93511398341515,40.83236577683715],[-73.93507789246162,40.83194162361134],[-73.93509565184875,40.831942381267105],[-73.93508783728582,40.83185919835002],[-73.93506824974095,40.831704067625786],[-73.93502275465511,40.83131999954982],[-73.9349850562146,40.83102735335789],[-73.93493515655025,40.83060244471324],[-73.9348935333237,40.83028656383779],[-73.93483087208486,40.82980843705177],[-73.9347988190574,40.82979230914966],[-73.93480080676927,40.82977283325494],[-73.934789962788,40.82976832407678],[-73.93479293827892,40.82975634075214],[-73.9347811108578,40.82974059366992],[-73.93477028229685,40.829720361694214],[-73.93475944294418,40.82970012100012],[-73.93476343288322,40.82965740394861],[-73.9347437259127,40.82963716812018],[-73.9347393083093,40.82960906144653],[-73.93474919492763,40.82959708136341],[-73.9347373734992,40.829574589425214],[-73.93472260127821,40.829550600495594],[-73.93472557699917,40.82952736927089],[-73.9347147602574,40.829495144079715],[-73.93470100252401,40.82944043080001],[-73.93469412707354,40.82941645571865],[-73.93471288560669,40.829400725944666],[-73.93470504902284,40.82934077469047],[-73.93469321669625,40.82932877360132],[-73.93467597101821,40.82931340221053],[-73.93466228987826,40.82918075994596],[-73.93468302702506,40.82916578733352],[-73.93470769402485,40.82915830979219],[-73.93470080780727,40.82913207413399],[-73.9346810792479,40.82913355828133],[-73.93467714880197,40.82911632854789],[-73.93467025222023,40.82911257042637],[-73.93465447618146,40.829097576961054],[-73.93464959243231,40.82904811940698],[-73.9346619319834,40.829038760294466],[-73.93466295225556,40.829014033814005],[-73.93466495971363,40.82897356682644],[-73.93465611022576,40.82894283638618],[-73.93465515536495,40.82891285858112],[-73.93463641852115,40.82890686014907],[-73.93461640343897,40.82869365579325],[-73.93461171264791,40.82868983525945],[-73.93460260323826,40.82868240123771],[-73.93460883576694,40.82866118868204],[-73.93461052506869,40.82865543619221],[-73.93460804993313,40.828653363018134],[-73.93460065845267,40.82864718271558],[-73.93459873640637,40.82860072400894],[-73.93460192118351,40.8285925492986],[-73.9346115955321,40.82856775518621],[-73.93460917445479,40.828521674968194],[-73.93461017716503,40.828502936290256],[-73.93461219000993,40.82845722914913],[-73.93460433489878,40.8284280027947],[-73.93460731363069,40.82840102556366],[-73.93460043185567,40.8283822824143],[-73.93460834555331,40.82836355753901],[-73.93459750565471,40.82834482035353],[-73.93460048488097,40.82832833398502],[-73.93459360040826,40.82830135116011],[-73.9345867414778,40.828259384992435],[-73.93459562914452,40.82825114985734],[-73.93458676210527,40.82823840277646],[-73.9345917047489,40.82822716755991],[-73.93459763971535,40.82820843167856],[-73.9345887726724,40.828195693979055],[-73.93458684240736,40.828156719571446],[-73.93456513010244,40.82816270444937],[-73.93455810179871,40.82811740277773],[-73.93454586266023,40.82804816146417],[-73.9345423063815,40.828026870313025],[-73.93453258880513,40.82796855886425],[-73.93452175638055,40.827907800091346],[-73.9345389813406,40.82790347267067],[-73.9345318309276,40.8278494020435],[-73.93452076528098,40.82776568965099],[-73.93451590672413,40.82772893075849],[-73.93442396339046,40.82704289397221],[-73.93448291058755,40.82703709277872],[-73.93446426549498,40.82684220519355],[-73.93442844400506,40.82646785059143],[-73.93436717955333,40.82582759866106],[-73.93435643452145,40.82582093714441],[-73.93432574289118,40.82523259029446],[-73.93429530732782,40.824649231222814],[-73.9342937167057,40.824496386917176],[-73.93427285440853,40.824438952751265],[-73.9342464289508,40.82416688303727],[-73.9342183480328,40.82379904579008],[-73.93416594530665,40.82307858087102],[-73.9341465766699,40.82302903205036],[-73.93414604382117,40.823020619180404],[-73.93413373625334,40.82280065597675],[-73.9341212616508,40.822647252741746],[-73.93411752612668,40.82252433268852],[-73.9341023336634,40.82220121691681],[-73.93409986738209,40.82213991284364],[-73.93409843799957,40.8221042273439],[-73.93409112517361,40.821996037990196],[-73.93407944723481,40.82180557579632],[-73.9340743435484,40.8217170991102],[-73.93407734095152,40.82169456177003],[-73.93407005522698,40.821559320934185],[-73.93404447476462,40.82117670357439],[-73.93404599779073,40.821133876520214],[-73.93403560443167,40.820952547282424],[-73.93402662334591,40.82081680975282],[-73.93400389615688,40.82039784018416],[-73.93400066445355,40.82033825378207],[-73.9339827694626,40.82000029618647],[-73.93398644004239,40.8199684386757],[-73.9339720967025,40.8197302031345],[-73.93382990021335,40.81972042397129],[-73.93383051181283,40.81959745323817],[-73.93383064085585,40.819571464086366],[-73.93383089287107,40.819521063761556],[-73.93411671299988,40.81954705299995],[-73.93431276899999,40.81962986599991],[-73.93440039999986,40.81966778299991],[-73.93439036800001,40.81958743499993],[-73.934381129,40.81932807599992],[-73.93429487799989,40.81890498699992],[-73.93423576099998,40.81864931899987],[-73.93408481999981,40.8179308619999],[-73.93407463999996,40.81782651399992],[-73.93412816799999,40.81773396299989],[-73.934235195,40.81755488099992],[-73.93445400100002,40.81718852899996],[-73.93463790299994,40.81690804799997],[-73.93487343800004,40.816527846999904],[-73.93575548199986,40.81532558399993],[-73.93613554399997,40.81478812699993],[-73.936209578,40.81467384999995],[-73.93668813299989,40.81404324299995],[-73.93714398399993,40.81342104099985],[-73.93763499299979,40.81274779999994],[-73.9381355239999,40.81206561899996],[-73.93820642699984,40.81196760499992],[-73.93830924999986,40.81182546399992],[-73.93838748499988,40.811718443999894],[-73.93863753299985,40.81137638799993],[-73.93874394499981,40.81123082099992],[-73.93901753299998,40.81085655699991],[-73.93740733700004,40.810175610999885],[-73.93580780199986,40.809497637999876],[-73.93586263399992,40.80943020299987],[-73.93625935999997,40.80885560799991],[-73.93671827500005,40.80822047899988],[-73.93718011799989,40.80759899999989],[-73.937634394,40.8069746069999],[-73.9380866689998,40.80635301199987],[-73.93854407899988,40.80572965299991],[-73.93869430499996,40.80579102899988],[-73.94015793699995,40.80640908999991],[-73.9417714019999,40.80708899999997],[-73.94491601899982,40.80841350399989],[-73.94499360699993,40.808446183999955],[-73.94506102999992,40.808474499999875],[-73.94773985499985,40.80959972099989],[-73.94783875999985,40.8096412609999],[-73.94792306799984,40.809676921999944],[-73.95067975599989,40.8108429639999],[-73.9521012519999,40.811442853999935],[-73.95150537299989,40.812007684999905],[-73.95098203399994,40.81252162999989],[-73.95092724899993,40.812575428999914],[-73.95035019299995,40.813159388999914],[-73.94986218999995,40.813799979999935],[-73.94962668099991,40.81410004999989],[-73.94962653799998,40.81410023899991],[-73.94962639600001,40.81410043599993],[-73.949405505,40.814407408999976],[-73.94919960099985,40.81472085399986],[-73.94900927799986,40.81503994299992],[-73.94883491299987,40.815363980999955],[-73.94867681799998,40.815692285999916],[-73.94835601499989,40.81637430599994],[-73.94800732899995,40.81711650899995],[-73.94766641299987,40.817855508999905],[-73.94734953999983,40.81853499799996],[-73.94703623199983,40.81920837199988],[-73.94671831999985,40.81989426799995],[-73.94640289799987,40.820572041999945],[-73.94607828700005,40.82126321599991],[-73.94515456999994,40.82087626499993],[-73.94460364599989,40.82146198099991],[-73.94404986399994,40.82205159199989],[-73.9435059449999,40.82262775299988],[-73.94292366900005,40.8232605869999],[-73.94242953999996,40.8239091569999],[-73.94195569699997,40.82455443999992],[-73.94150312699996,40.82517136699994],[-73.94104840899992,40.825792629999896],[-73.94059472699999,40.82641360399988],[-73.9401395379999,40.82703868999988],[-73.93968952899993,40.827656573999896],[-73.93924885599988,40.828296350999906],[-73.93896034899993,40.82898632999993],[-73.93864026699997,40.82973887399988],[-73.93899743399992,40.82988885299995],[-73.93962569899988,40.83015583699997],[-73.9401708989999,40.83038439099996],[-73.94007905799988,40.83046395799989],[-73.93998939900003,40.830730965999855],[-73.93996368699993,40.83082053399987],[-73.93996366299984,40.8308206059999],[-73.93992395099986,40.83090805999994],[-73.93992389199987,40.83090817699985],[-73.93992383299992,40.83090827699993],[-73.93987063299991,40.83099179699991],[-73.9398705739998,40.83099188599995],[-73.93987049099984,40.83099197699988],[-73.93980498999994,40.83106978999995],[-73.93980484699993,40.831069960999905],[-73.9398046819999,40.83107011299992],[-73.93972831499984,40.83114089899995],[-73.93960982599997,40.83125089499988],[-73.93960970799996,40.83125100199988],[-73.93960960099984,40.83125111899992],[-73.93950338699985,40.83136945999996],[-73.939410835,40.8314949949999],[-73.93941078799995,40.83149507599994],[-73.93933313199983,40.83162629999988],[-73.9392711939998,40.83176165699991],[-73.93927116899984,40.83176171999991],[-73.93927114599992,40.83176179299993],[-73.93922536500001,40.83189966099992],[-73.93913480799989,40.832097594999915],[-73.93902897299996,40.83229149799995],[-73.93894859799995,40.832417335999914],[-73.93890834499989,40.832480356999945],[-73.9387736029999,40.83266321199991],[-73.93868316299985,40.832800788999904],[-73.93862894999997,40.83285794199988],[-73.93857474799998,40.832915085999936],[-73.93838508999997,40.83311350299995],[-73.93795718299988,40.83345441799987],[-73.93729666499993,40.833977743999945],[-73.93705905900006,40.83416598899989],[-73.93700641599989,40.834193109999894],[-73.93649557199993,40.83456879599991],[-73.93572624299988,40.83515634699995],[-73.93530788100004,40.835477723999915],[-73.93506336299993,40.83567765899993],[-73.93496274099988,40.83575993399989],[-73.93485740300004,40.83598502599991],[-73.9347988639999,40.836110115999944],[-73.93474569399996,40.836092093999916],[-73.93467393099985,40.836064902999915],[-73.93460027799988,40.83609686799992],[-73.93436121591056,40.83620061961779]]]]}},{"type":"Feature","properties":{"shape_area":"0.000379662912054","objectid":"43","shape_leng":"0.0997386183576","location_id":"43","zone":"Central Park","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97255352299985,40.76489773199991],[-73.97301487199995,40.76427887899991],[-73.9736358469999,40.76456991299992],[-73.9741922899999,40.764806527999916],[-73.97623388799995,40.765674630999854],[-73.97836113000002,40.766573710999886],[-73.97907658799991,40.76687608599993],[-73.98136213699995,40.76783673899992],[-73.98131853299991,40.76789900199987],[-73.9812909039998,40.76796936299995],[-73.98129086899992,40.76796945299993],[-73.98129085699999,40.76796955199996],[-73.98128253299977,40.76804427399991],[-73.98129467599998,40.7681188019999],[-73.98132588999982,40.76818837999983],[-73.98137263399991,40.768249315999924],[-73.98145320300002,40.76832036999991],[-73.98145334499989,40.768320494999934],[-73.98145349899993,40.768320602999935],[-73.98154591499996,40.76838333899988],[-73.98154597399994,40.76838337499988],[-73.98164804599995,40.76843632199994],[-73.9810229009999,40.76927283399994],[-73.980563707,40.769905324999904],[-73.98011181599992,40.770528368999884],[-73.97965233399994,40.77115532699992],[-73.97919214499984,40.77178126499997],[-73.978722468,40.77241889799995],[-73.97828220099997,40.77303187899987],[-73.97782639399986,40.77365619199991],[-73.97737084999984,40.77428100699992],[-73.97691168299995,40.774909123999905],[-73.97645763799984,40.77553235199985],[-73.97595517399988,40.7762197549999],[-73.9754606719999,40.776898502999884],[-73.97499744000005,40.77753254599988],[-73.97453231499993,40.77816778499996],[-73.97406668299993,40.77880541699987],[-73.97357117499988,40.779477861999936],[-73.97172305599985,40.78202147599997],[-73.97122292299984,40.78270625599991],[-73.97076013099995,40.783340137999865],[-73.97030068199992,40.783975413999904],[-73.96983225599998,40.784610910999916],[-73.96933573299991,40.78529327999992],[-73.96884378999985,40.785967388999964],[-73.96838479399985,40.786595696999896],[-73.9679269639999,40.78722157099988],[-73.96744908399992,40.78786072099995],[-73.96700977099991,40.788476789999905],[-73.96655226699976,40.78910715299992],[-73.96609500599993,40.78973438899991],[-73.96563269799995,40.79036540399989],[-73.96517705600003,40.79099034099997],[-73.96468540699995,40.791664026999904],[-73.96417598599989,40.792362044999884],[-73.96371096499993,40.79301293399991],[-73.96280590599986,40.79423581299993],[-73.96235980199994,40.79485206099987],[-73.96189985499994,40.795479269999916],[-73.96144060699996,40.796110826999964],[-73.96097971799988,40.796738643999916],[-73.96052271699993,40.79736846899988],[-73.96004456499999,40.79804123499991],[-73.95953658899997,40.7987185259999],[-73.95907669099992,40.79935223299986],[-73.95861879299989,40.79997702599996],[-73.95833304999988,40.80036505399989],[-73.95817297099987,40.800582540999876],[-73.95786499299992,40.8005152719999],[-73.95536651699993,40.799466425999846],[-73.95528884999997,40.79943440199994],[-73.95521824499984,40.799404657999894],[-73.95516503099992,40.79938223299992],[-73.95253597599994,40.798274645999896],[-73.95245200999996,40.79824023099996],[-73.95237419099993,40.79820977099995],[-73.94960357199982,40.797050270999925],[-73.94922045699984,40.796909858999896],[-73.94940516399991,40.79663170399987],[-73.94969538299988,40.79621687199993],[-73.95015821299991,40.79558773199993],[-73.95061371799994,40.79496557399992],[-73.95111102399997,40.79428503499988],[-73.95160265399991,40.793607804999965],[-73.95207222299993,40.792966160999896],[-73.95252222700002,40.79234762199997],[-73.95298394599986,40.79172143299998],[-73.95343832999994,40.791085367999926],[-73.95388917099996,40.790470498999866],[-73.95439919199988,40.78977490899994],[-73.95481723799992,40.789204743999974],[-73.95527481200001,40.78858337899986],[-73.9557773589999,40.78791392399995],[-73.95626130899994,40.78722287599987],[-73.95671863099989,40.786600792999934],[-73.95716853699999,40.785982893999865],[-73.95763599400006,40.78534345799993],[-73.95809563799989,40.78471746199995],[-73.9585581369999,40.78409759899993],[-73.95900363199986,40.783467289999855],[-73.95946905999989,40.78283332099994],[-73.95992094300001,40.78221294399991],[-73.96041638899996,40.78153163299988],[-73.96091849500006,40.78085062899991],[-73.961368727,40.78022974899989],[-73.96183836899999,40.77958419199989],[-73.96230361500002,40.77894704099987],[-73.9627671559999,40.778313040999876],[-73.96322991899993,40.7776770469999],[-73.96372602699994,40.77700571799989],[-73.9637612389999,40.77695096899987],[-73.96422820200003,40.776310308999946],[-73.96468735799992,40.77567708199995],[-73.96514745399985,40.775044231999864],[-73.96560968599992,40.77440720099987],[-73.96607448999993,40.7737729889999],[-73.96653616999981,40.7731403689999],[-73.96703947599987,40.772461218999865],[-73.96753398399983,40.77177618399991],[-73.96799327799991,40.77114722999993],[-73.96844155899997,40.77051632699992],[-73.96890454699994,40.76990083199992],[-73.96936484599993,40.76927065699993],[-73.96982455299987,40.76864600899992],[-73.97028165499981,40.768025031999905],[-73.97072777399985,40.76739372199989],[-73.97118812999996,40.766766592999915],[-73.97164774299996,40.76614246799993],[-73.97209852400005,40.76551725099991],[-73.97255352299985,40.76489773199991]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000942538425377","objectid":"48","shape_leng":"0.0437467441431","location_id":"48","zone":"Clinton East","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99117738199989,40.75532984899993],[-73.99163271299996,40.75470680499996],[-73.99446824699999,40.75590886199993],[-73.99500601599988,40.756136713999865],[-73.99511286399995,40.756175773999864],[-73.99577488199998,40.75645451499986],[-73.99730671499998,40.757110506999894],[-73.997233738,40.7572095429999],[-73.99692177899989,40.757637581999894],[-73.99685244899985,40.75773270899988],[-73.996800897,40.757789159999945],[-73.99663529299984,40.75801292199992],[-73.99640941599995,40.75833915899992],[-73.99594236599988,40.75898097899996],[-73.99547450199992,40.7596268569999],[-73.99498358099996,40.760300161999986],[-73.9945259329999,40.760927044999924],[-73.99406959,40.761552584999926],[-73.99360930599991,40.76218343599989],[-73.99315623899986,40.76280636099991],[-73.9927014349998,40.76343080599987],[-73.99224402800002,40.764056778999894],[-73.99178834099983,40.76468386799991],[-73.99133264599988,40.765309269999925],[-73.99087599499985,40.7659342209999],[-73.99042167999981,40.766561257999854],[-73.98996382699985,40.7671874749999],[-73.98950498200001,40.76781538199989],[-73.98905077199991,40.768440091999906],[-73.98855898599986,40.7691158169999],[-73.98806289599996,40.769790799999925],[-73.98521720299992,40.76859462999991],[-73.98236545099999,40.7673921529999],[-73.98287713499988,40.766715594999866],[-73.98336657899995,40.766045241999926],[-73.98382185700001,40.76541847499991],[-73.98428230099987,40.76479181499995],[-73.98473393799985,40.76416910499991],[-73.98519152199997,40.76354367499996],[-73.98564677799999,40.76291487399988],[-73.98610406199981,40.76228995299988],[-73.98656138499996,40.76166012199991],[-73.98701514599995,40.76103736699991],[-73.987475247,40.76040478699993],[-73.98792640699999,40.75979027699988],[-73.98839044599993,40.75916418599997],[-73.98884253899993,40.75853349899993],[-73.98929727499991,40.75790663699991],[-73.98979085399995,40.75723313199991],[-73.99027621399986,40.756567564999926],[-73.99072636299991,40.75595040599996],[-73.99117738199989,40.75532984899993]]]]}},{"type":"Feature","properties":{"shape_area":"0.000173249283326","objectid":"50","shape_leng":"0.0557479867536","location_id":"50","zone":"Clinton West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99667705784736,40.77351005394221],[-73.99434191991617,40.772524781943375],[-73.9942497922864,40.7725264851381],[-73.99416328456306,40.772487191523865],[-73.99383108201548,40.77293178742534],[-73.9937873699999,40.77290384599992],[-73.99372534699988,40.772864197999915],[-73.9935908639999,40.77279007999994],[-73.9935026219999,40.772751632999885],[-73.99387445099994,40.77223816799995],[-73.99378189799992,40.77219909099988],[-73.99365606199987,40.772145961999854],[-73.990913076,40.77098775899989],[-73.99059644699987,40.770854809999946],[-73.98806289599996,40.769790799999925],[-73.98855898599986,40.7691158169999],[-73.98905077199991,40.768440091999906],[-73.98950498199986,40.76781538299985],[-73.98996382699985,40.7671874749999],[-73.99042167999981,40.766561257999854],[-73.99087599499985,40.7659342209999],[-73.99133264599988,40.765309269999925],[-73.9917883399999,40.76468386799994],[-73.99224402800002,40.764056778999894],[-73.9927014349998,40.76343080599987],[-73.99315623899986,40.76280636099991],[-73.99360930599991,40.76218343599989],[-73.99406959,40.761552584999926],[-73.9945259329999,40.760927044999924],[-73.99498358099996,40.760300161999986],[-73.99547450199992,40.7596268569999],[-73.99623223099987,40.7599460319999],[-73.99831474500002,40.76082320899992],[-74.00103587499999,40.76196835199992],[-74.00115054199988,40.762025811999884],[-74.00127796299991,40.76207582499988],[-74.00133748499991,40.76220852199986],[-74.00153309083484,40.76264459806374],[-74.00375735018837,40.763582241820245],[-74.00361214797076,40.76377704395488],[-74.00138603698596,40.76285009500188],[-74.0009730802201,40.763420271725614],[-74.00314976988996,40.764332888184576],[-74.00294809515721,40.76461683643389],[-74.00306161234062,40.76466578265338],[-74.00313458336218,40.76464959820679],[-74.00316194577034,40.764612610454556],[-74.00322275585351,40.76463803767021],[-74.00315587058185,40.764730509880025],[-74.00314652967363,40.764736281391826],[-74.00313606019984,40.76474079644635],[-74.00312475155104,40.76474393024101],[-74.00311291631381,40.76474559615368],[-74.00310088163066,40.7647457481358],[-74.00308898015679,40.764744381986716],[-74.00106364220507,40.76388820826289],[-74.00073105253733,40.76375528636147],[-73.99992712367724,40.76340652847929],[-73.99963853555366,40.76356907099079],[-73.99962263458193,40.763559081210495],[-73.99951767096813,40.76370627918036],[-73.99944642217294,40.76380619457846],[-73.99943330724624,40.76382391019702],[-73.99915098087908,40.76420525958266],[-74.00227436642368,40.76552518109951],[-74.00228802371483,40.76556154429785],[-74.00205713831559,40.76587739041855],[-74.00202454330339,40.76589326657038],[-73.99919997246725,40.764701914982496],[-73.9991083256454,40.76466249985752],[-73.99888473174974,40.76456937704858],[-73.99857638530527,40.76499860727085],[-73.99859978707626,40.76507334028592],[-73.99863487876338,40.765085794737736],[-73.99866530473436,40.765104480747205],[-73.99868637477196,40.7651373942677],[-73.99869573037279,40.7651747656796],[-73.99868870694561,40.765208570449786],[-73.99866764711366,40.76523703534287],[-73.99863371556073,40.76526016874122],[-73.99858924105146,40.765276178806765],[-73.99848276468678,40.76529753698438],[-73.9984383037147,40.76531621383388],[-73.99840202518257,40.76535090908762],[-73.99827090308345,40.76555223341328],[-73.99828160709528,40.765567775437326],[-74.00154217871193,40.76694470253266],[-74.00157335385272,40.766977192210646],[-74.00156180575469,40.766996499368275],[-74.00139437159504,40.76723004773296],[-74.0013643461298,40.76724936447365],[-74.00131469635994,40.76725112004994],[-74.00129391014984,40.767241458241585],[-73.99815678438965,40.7658940353741],[-73.99814818647361,40.76590560707495],[-73.9980667590535,40.76587188113573],[-73.99772134825697,40.76634912055583],[-73.99737808447954,40.766823386379585],[-74.00062837395299,40.76820311105873],[-74.00065016786206,40.768220374289214],[-74.00064950530414,40.7682452361056],[-74.00045489336712,40.768504195177414],[-74.000417653932,40.76851247996449],[-74.00038586489072,40.76850419542925],[-73.99715588949206,40.76712869617279],[-73.99681598463503,40.76760062185919],[-73.9964571540504,40.768098815795625],[-73.999728191901,40.769473506633716],[-73.99973590247859,40.76950617733153],[-73.99955518930786,40.769750807740046],[-73.99951552161598,40.76976756583779],[-73.99947253734007,40.76976421496914],[-73.99707176039315,40.76873264357681],[-73.99702628821062,40.76879551562383],[-73.99715035477142,40.7688473877134],[-73.99701071413831,40.76902879065363],[-73.99689311312365,40.76897962881938],[-73.9965712643956,40.769424568273905],[-73.9990268283291,40.7704632729821],[-73.9987620691431,40.770825056709214],[-73.99631327022085,40.76979883633644],[-73.99588004351683,40.77040057901225],[-73.99601693196188,40.77045484888618],[-73.99590077425023,40.770613123500894],[-73.99576733283615,40.770554596456435],[-73.99542474436292,40.77103161516796],[-73.99575648212907,40.77116066846575],[-73.99570859069954,40.77122581253301],[-73.99579774020464,40.77128256276402],[-73.99581687579034,40.77125651641555],[-73.9959128360384,40.771297855623835],[-73.99592803670667,40.77127510283766],[-73.99600175749052,40.77130746533058],[-73.99589990100937,40.771450298582096],[-73.99589260894868,40.77144708752727],[-73.99585437252816,40.77149918074849],[-73.99579117748758,40.7714755188204],[-73.99582805886249,40.77142166722245],[-73.99572993314403,40.7713788187938],[-73.99575123412814,40.77135428277978],[-73.99562982240303,40.771325292628056],[-73.99562306904355,40.771336957512865],[-73.99530566365368,40.77119600490955],[-73.99512395556874,40.77145073826707],[-73.99499014482059,40.77144070980649],[-73.99495733353699,40.77144919069773],[-73.99493501658995,40.77146814657798],[-73.99492385794417,40.771485605937436],[-73.99492582120642,40.77151604240548],[-73.99500915438713,40.771607339944175],[-73.99497830771192,40.77164524947328],[-73.99497688494725,40.77165877492328],[-73.99711218538603,40.77255323669952],[-73.99690946902788,40.77283294565996],[-73.99477407930827,40.77192954753019],[-73.99444501293378,40.77237712658827],[-73.99545514995584,40.772802675029084],[-73.99554492520829,40.77267481382618],[-73.99644894667618,40.77305684199677],[-73.99635558854986,40.77317889215508],[-73.9962297200193,40.77312897504538],[-73.99614329133087,40.77324754156346],[-73.99656159477641,40.773410941950964],[-73.99668544431172,40.77350368804627],[-73.99667705784736,40.77351005394221]]]]}},{"type":"Feature","properties":{"shape_area":"0.000111073378655","objectid":"68","shape_leng":"0.0493373795569","location_id":"68","zone":"East Chelsea","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00201937799989,40.740444088999894],[-74.00252381399994,40.739752643999886],[-74.00310733899988,40.73999752099994],[-74.00515808199998,40.74085808099991],[-74.00536591799992,40.74094529499997],[-74.00697077699994,40.7416271269999],[-74.00779116099989,40.74197084499985],[-74.00820401899988,40.74214751799986],[-74.00789568799995,40.74257005099985],[-74.00770461499994,40.74283381299992],[-74.00723774599994,40.743470231999865],[-74.00696604399992,40.74384701399987],[-74.00681149999996,40.74406132399992],[-74.00638477199996,40.74464590299987],[-74.00595977599997,40.745230984999935],[-74.00553403999999,40.74581556899989],[-74.0051071349999,40.74640277299988],[-74.00465274299988,40.74702295299991],[-74.004168307,40.7476892929999],[-74.0039029229999,40.74805366099988],[-74.00368344599993,40.74835499999994],[-74.00323561099998,40.748974254999936],[-74.00316116799988,40.749076422999906],[-74.00312806199996,40.74912185999996],[-74.00278526999995,40.74959231999986],[-74.002458683,40.75003580599991],[-74.002431475,40.7500727519999],[-74.00233168599986,40.75020825799992],[-74.00188266699993,40.7508279309999],[-74.00142970699987,40.75144572099988],[-74.000974548,40.75205466499991],[-74.00086139300001,40.75221483899993],[-74.00052667499992,40.75268862399987],[-74.00001529900001,40.75339158699997],[-73.99992459199981,40.75351627999993],[-73.99963228999997,40.75391808599989],[-73.99914292099987,40.754584933999865],[-73.99866067199993,40.75525176199991],[-73.99820870599997,40.75586865599991],[-73.99775836599989,40.75648752899987],[-73.99730671499998,40.757110506999894],[-73.99577488199998,40.75645451499986],[-73.99511286399995,40.756175773999864],[-73.99500601599988,40.756136713999865],[-73.99446824699999,40.75590886199993],[-73.99163271299996,40.75470680499996],[-73.99207900099996,40.75409111599987],[-73.99252855999994,40.75347391299987],[-73.99297937799993,40.75285340299992],[-73.99346417699985,40.752190054999886],[-73.99394825699984,40.75152222199995],[-73.99437946899982,40.75093038999993],[-73.99484363799989,40.75029330899991],[-73.99529821499979,40.74967168299992],[-73.99574855499995,40.749052195999866],[-73.99619655499993,40.74843932799997],[-73.99664704399989,40.74782272899996],[-73.99709902899994,40.74720510199991],[-73.99755164599995,40.74658089999985],[-73.99800822000003,40.74595130199988],[-73.99848652399989,40.745294163999894],[-73.99897237399988,40.74463005499994],[-73.99942208999991,40.74400957299992],[-73.9998482359998,40.743425018999915],[-74.0002751799999,40.74283879799987],[-74.00070275499993,40.7422536109999],[-74.00112917399991,40.74166809799989],[-74.00155531499993,40.741080025999935],[-74.00201937799989,40.740444088999894]]]]}},{"type":"Feature","properties":{"shape_area":"0.000107893068218","objectid":"79","shape_leng":"0.0426249113144","location_id":"79","zone":"East Village","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98377990999991,40.72153595399992],[-73.9838238729998,40.72147287199987],[-73.98467780299995,40.72173060499992],[-73.98551686199984,40.72198522499987],[-73.98628574000003,40.722241919999874],[-73.98713584799998,40.72246981099991],[-73.98786491500006,40.72269708899991],[-73.98854361399987,40.722903617999904],[-73.98863862799996,40.72293371999991],[-73.98875683199988,40.72297036599986],[-73.98939218099996,40.723174057999884],[-73.99027361600001,40.72342601799987],[-73.99102410399988,40.72364943199991],[-73.99127307099994,40.7237298129999],[-73.99135472799998,40.723754618999855],[-73.99250385799984,40.72410592499995],[-73.99260322199994,40.72413644999988],[-73.99257987399992,40.724201554999915],[-73.99232642199998,40.72490823199993],[-73.99220971099992,40.72523128999992],[-73.9920616679999,40.72564244299993],[-73.99179379299984,40.72639145899994],[-73.99154832699986,40.72708947099994],[-73.99136388099987,40.72755978299991],[-73.99135869199992,40.72778246999996],[-73.99112256699988,40.72856796599994],[-73.99093053499995,40.729142295999914],[-73.99075728499993,40.7297408309999],[-73.99072530399991,40.729878686999896],[-73.99050558599988,40.73056495699996],[-73.99039009999987,40.731288523999865],[-73.99021190999987,40.731996333999895],[-73.99002687699983,40.73275628399994],[-73.98986852099996,40.73352711499992],[-73.98990295999991,40.7344347899999],[-73.98877931699997,40.733965399999924],[-73.98718049699994,40.73329214799988],[-73.98494102799992,40.73234760399986],[-73.98255629299985,40.7313501339999],[-73.98246876199994,40.731314883999914],[-73.98150053399984,40.73091807699994],[-73.98082000799998,40.73063915899997],[-73.98034007599992,40.73044246099994],[-73.97926849199995,40.72998142799986],[-73.97802697999985,40.729433059999984],[-73.97805542899995,40.72938308599991],[-73.97853582999998,40.72874608499993],[-73.97899862099985,40.72810574699991],[-73.979469131,40.72746767699987],[-73.97990650199998,40.72686577299988],[-73.9803329819999,40.72628033599989],[-73.98076713900005,40.725685594999916],[-73.9812112959998,40.72507279999992],[-73.98163663899999,40.72449348099987],[-73.9820824239999,40.72388204399992],[-73.98252449499985,40.72327797699997],[-73.9829641439999,40.72267132499997],[-73.98344363599992,40.722018506999895],[-73.98377990999991,40.72153595399992]]]]}},{"type":"Feature","properties":{"shape_area":"0.000295038418204","objectid":"74","shape_leng":"0.11029093625","location_id":"74","zone":"East Harlem North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.93380589881859,40.816512493247096],[-73.93382900884613,40.81558536018751],[-73.93394608825352,40.815587624739145],[-73.93394609933729,40.815576457564624],[-73.93394170146216,40.81556529841819],[-73.93394905857511,40.815556369558514],[-73.93395054151384,40.81554298000987],[-73.93394173470415,40.81553180845374],[-73.93394175021196,40.81551618496342],[-73.93395205657892,40.81549721872188],[-73.93395353730935,40.815486052389055],[-73.93393445709587,40.81547153450901],[-73.93394623227614,40.815442517976344],[-73.93393892276251,40.81541572428048],[-73.93394921255528,40.81540122322665],[-73.93394628434712,40.81539005487055],[-73.93395659090885,40.81537220417373],[-73.93394853112638,40.81534820251395],[-73.93394855439136,40.81532476149812],[-73.9339485843048,40.815294621684686],[-73.93395302092101,40.81526672687829],[-73.93395452158198,40.81523547202672],[-73.93394426378258,40.81520532581688],[-73.93394870283134,40.81517519791028],[-73.93394725313905,40.815155097995664],[-73.93396344530967,40.815129443023594],[-73.93396788302533,40.815100422954416],[-73.9339635051222,40.81506916406496],[-73.9339694135804,40.81503902711456],[-73.93398565957851,40.81494751042226],[-73.93398936930922,40.81491235703092],[-73.93398203685818,40.81489561278114],[-73.93398352753833,40.81487439749633],[-73.93397473519484,40.81484872821333],[-73.93398210661385,40.814825293078385],[-73.93397332647235,40.81478733186024],[-73.93399097511455,40.81477506811654],[-73.93397776416138,40.814758311119135],[-73.93398954202252,40.81473822765622],[-73.93399543936422,40.81471925787889],[-73.93398075656609,40.81470474252187],[-73.93398224833994,40.81468242057032],[-73.93398523963945,40.814629959140966],[-73.9339764506598,40.81460093082527],[-73.93396620950318,40.814565211251484],[-73.93399121978341,40.814528386434176],[-73.93401476726973,40.81448375262478],[-73.93385652638806,40.81448147441923],[-73.9338623097275,40.81424929682303],[-73.93386383534269,40.81418806900028],[-73.93386510261887,40.814153157955616],[-73.93386927846709,40.81410117481657],[-73.93387232548957,40.8140632642607],[-73.933929846002,40.81334769063374],[-73.93398178986803,40.812814635545315],[-73.93400770204929,40.81260849869726],[-73.93403843917875,40.81234088007091],[-73.93409306691906,40.81196840253071],[-73.93413711416075,40.811712370924496],[-73.93419558749154,40.81139317769285],[-73.93428227801395,40.81082305050867],[-73.93430417398088,40.810481665612656],[-73.93431440507302,40.81032226491122],[-73.93434080971474,40.80992758274954],[-73.93433864584743,40.80956221383131],[-73.9342139101698,40.809059173792676],[-73.93419639195767,40.809031851582375],[-73.9341353262405,40.8087363905142],[-73.93412073484292,40.808656451977456],[-73.93356119311476,40.80760067738665],[-73.93332852361837,40.80731894646301],[-73.93325708526282,40.80723665117303],[-73.93318395639754,40.80715619829966],[-73.93317413539488,40.80714539094985],[-73.93308471749718,40.8070269147021],[-73.9329328832928,40.806871022133876],[-73.93263088267565,40.806552933906765],[-73.932390171191,40.806299141471094],[-73.93154417434337,40.80539778332666],[-73.9314959803404,40.805351225035174],[-73.93147540101658,40.805328196076914],[-73.93146693969662,40.80530609218759],[-73.93144877545446,40.80529779058802],[-73.93143182674825,40.80528212682835],[-73.93140883156653,40.80524712392974],[-73.93139067303517,40.80523330439408],[-73.93130474200962,40.80513197562959],[-73.93126904139163,40.80509097997354],[-73.93115889451225,40.80496753829942],[-73.93112621780075,40.804923329268384],[-73.93111339209408,40.80490502354581],[-73.93109717576777,40.804881877512585],[-73.9310729715702,40.80484779169008],[-73.93103304094328,40.80479528916923],[-73.93102699955034,40.80478331306253],[-73.93097556926416,40.804716534383466],[-73.9309743588213,40.80470640728931],[-73.93095741258308,40.80468797946864],[-73.93093322065235,40.804653894125565],[-73.9309082463483,40.80462041055984],[-73.93082673180042,40.80451111776967],[-73.93080494630988,40.804475197603566],[-73.93071479334765,40.8043568347806],[-73.93070875470727,40.80434209583947],[-73.93069422131265,40.80432735999997],[-73.93068575499123,40.80431170072461],[-73.93063735551432,40.80424722097881],[-73.93063009780597,40.80423156175633],[-73.93060831208301,40.80420853141014],[-73.93057080064615,40.804154183553884],[-73.93057080892787,40.80414497555939],[-73.93054055322638,40.804109049736816],[-73.93044072678737,40.80397594555043],[-73.93040321487011,40.803922524216716],[-73.93035118741409,40.803849751521746],[-73.93033061473649,40.80382119403906],[-73.93030641012538,40.80378803563389],[-73.93027617112581,40.80373645606578],[-73.9302592352763,40.803707901774544],[-73.93018908730323,40.80358540003116],[-73.93018061288154,40.80357619510721],[-73.93005719833698,40.80336412151402],[-73.93001261302975,40.803287498428695],[-73.92996159942555,40.803183595030795],[-73.92996684404639,40.80317620551488],[-73.93003768593684,40.80307629267641],[-73.92993459708443,40.802905224255376],[-73.92991008609906,40.80286455074737],[-73.92988948082964,40.802830357458994],[-73.92978668000165,40.80266074871747],[-73.92969251214573,40.80244028594793],[-73.9295769383949,40.80218002521574],[-73.92952043928469,40.802053479615516],[-73.92945366333494,40.80190736883599],[-73.92943654118756,40.801861711857406],[-73.92935435998545,40.80167125043788],[-73.92933126971816,40.80159885399087],[-73.92930220396845,40.80149580134897],[-73.92927487688024,40.801373190232695],[-73.92920817595964,40.80114752061126],[-73.92911838814219,40.8011130032263],[-73.92903490240303,40.80108090385195],[-73.92902671406671,40.80096986031424],[-73.92902123584638,40.80089557256171],[-73.92901644642036,40.80083071554217],[-73.92900788120616,40.80077234912531],[-73.92899994866313,40.800710097692665],[-73.92898618762995,40.80060212311935],[-73.92895348657567,40.800309368484676],[-73.92893763668584,40.80017084377763],[-73.92890152344123,40.799855215165266],[-73.92891942515779,40.799458186491485],[-73.92894396946946,40.79891158893545],[-73.92897121002336,40.79825886057973],[-73.9290364017962,40.79676259410133],[-73.92927936741167,40.795853139520645],[-73.92930773275864,40.79581025745309],[-73.92953058056904,40.795507798349284],[-73.92968294251123,40.79529623376318],[-73.92974594691611,40.79520874823406],[-73.9298748577827,40.795035156225694],[-73.92984244753445,40.79501503785587],[-73.92985144395278,40.79500140093118],[-73.92980955349977,40.794983166296745],[-73.9298325404253,40.794949061140784],[-73.9298874065193,40.7949672926039],[-73.92990139788401,40.794946824362476],[-73.9299163612059,40.79494911213701],[-73.92993735334552,40.79491878628442],[-73.92992039501047,40.79490967283261],[-73.93006881035544,40.79470082860544],[-73.9301077102813,40.79471299106365],[-73.93019664392844,40.794593224854886],[-73.93041980479964,40.79447087234853],[-73.93111408045347,40.79409650134391],[-73.93142758557968,40.79392798838291],[-73.93165821105735,40.79380174043914],[-73.93179292520253,40.793727962293566],[-73.93187500171737,40.7936819218437],[-73.93201001457182,40.79360548616981],[-73.93207886021688,40.79356650933645],[-73.93235128869077,40.7934138451512],[-73.93250920949691,40.79333190154454],[-73.9325385265489,40.79331668213542],[-73.93267239130893,40.79324823277293],[-73.93287712655086,40.793130251367806],[-73.93310683207811,40.792995328209464],[-73.93324587394584,40.7929142965317],[-73.93327130499016,40.79289947490209],[-73.93348475349612,40.792774284831964],[-73.93372762154044,40.79260172681524],[-73.93388747605492,40.79248981386153],[-73.93406949343559,40.79235873425467],[-73.93427161550181,40.79221786711484],[-73.93433968650804,40.79216855838269],[-73.93450968573121,40.79205197655582],[-73.9347379410771,40.791901569649944],[-73.93505300002766,40.79168720295447],[-73.93508265899982,40.79171004399995],[-73.93513822199999,40.79175283499989],[-73.93519360499981,40.79179799899988],[-73.93524060799987,40.79183387499989],[-73.93529038099987,40.79187313699988],[-73.93542842699998,40.79199687999987],[-73.93555312799995,40.79184222599987],[-73.93679209299992,40.792403928999924],[-73.9377361209998,40.79281580399994],[-73.93819346899994,40.79218819499989],[-73.93864883299987,40.79155775499987],[-73.94103496899987,40.79254666899993],[-73.94327251199996,40.79348810299995],[-73.94281682199988,40.79413407699997],[-73.94234676599999,40.79476079799988],[-73.94187604699994,40.79540586899984],[-73.94232710899988,40.79559310299991],[-73.9424792319999,40.79565624799993],[-73.94275347999998,40.7957700849999],[-73.94287776099992,40.79582167099993],[-73.9434832399999,40.796072993999935],[-73.94415121699986,40.79635931699992],[-73.94421313799992,40.796385857999944],[-73.9449594289999,40.79670574099989],[-73.94509614599993,40.79676348299992],[-73.94522698899986,40.79682013299991],[-73.94556506799988,40.79696479499997],[-73.9456668469999,40.79700834399995],[-73.9467003099999,40.797450543999915],[-73.94722520899997,40.797671685999944],[-73.94831125500004,40.79812921799992],[-73.9482064149998,40.79827285099987],[-73.94815384299983,40.79834487599987],[-73.94810108999994,40.7984171479999],[-73.94805130199998,40.79848535999989],[-73.94784679099992,40.798765542999945],[-73.94781663099997,40.798806862999925],[-73.94775716499986,40.79888833199987],[-73.94771056,40.79895218099991],[-73.94741996199991,40.79935029499992],[-73.94737599799991,40.799410523999924],[-73.94732771499984,40.79947667099992],[-73.94728018299999,40.799541788999896],[-73.94697366799987,40.79996170299987],[-73.94646133899998,40.80066530499988],[-73.9459678969998,40.801342394999935],[-73.94550863900001,40.80197023099991],[-73.94505128000003,40.80259859899995],[-73.94459751299998,40.80322814499992],[-73.94613131,40.80387735799992],[-73.9456926129999,40.804514948999916],[-73.94523965199991,40.80513601399989],[-73.94478208199993,40.80576125599991],[-73.94430194599991,40.80639082499993],[-73.94275367199994,40.80574401299986],[-73.9422631119999,40.80641573799991],[-73.9417714019999,40.80708899999997],[-73.94015793699995,40.80640908999991],[-73.93869430499996,40.80579102899988],[-73.93854407899988,40.80572965299991],[-73.9380866689998,40.80635301199987],[-73.937634394,40.8069746069999],[-73.93718011799989,40.80759899999989],[-73.93671827500005,40.80822047899988],[-73.93625935999997,40.80885560799991],[-73.93586263399992,40.80943020299987],[-73.93580780199986,40.809497637999876],[-73.93740733700004,40.810175610999885],[-73.93901753299998,40.81085655699991],[-73.93874394499981,40.81123082099992],[-73.93863753299989,40.81137638899993],[-73.93838748499988,40.811718443999894],[-73.93830924999986,40.81182546399992],[-73.93820642699984,40.81196760499992],[-73.9381355239999,40.81206561899996],[-73.93763499299979,40.81274779999994],[-73.93714398399993,40.81342104099985],[-73.93668813299989,40.81404324299995],[-73.936209578,40.81467384999995],[-73.93613554399997,40.81478812699993],[-73.93575548199986,40.81532558399993],[-73.93487343800004,40.816527846999904],[-73.93463790299994,40.81690804799997],[-73.93445400100002,40.81718852899996],[-73.934235195,40.81755488099992],[-73.93412816799999,40.81773396299989],[-73.93407463999996,40.81782651399992],[-73.93408481999981,40.8179308619999],[-73.93423576099998,40.81864931899987],[-73.93429487799989,40.81890498699992],[-73.934381129,40.81932807599992],[-73.93439036800001,40.81958743499993],[-73.93440039999986,40.81966778299991],[-73.93431276899999,40.81962986599991],[-73.93411671299988,40.81954705299995],[-73.93383089287107,40.819521063761556],[-73.9338294812938,40.81947330955996],[-73.93382777421705,40.819415494918886],[-73.9338261413771,40.819356429750336],[-73.93380019473052,40.81834975887406],[-73.93379334625767,40.81777660857971],[-73.93378997399186,40.81715137370172],[-73.93380589881859,40.816512493247096]]],[[[-73.92688606022001,40.800840648368855],[-73.9265095488364,40.80065703126224],[-73.9265524180424,40.80060482504616],[-73.92684528429592,40.80073964671283],[-73.92683162740748,40.80076552901468],[-73.92686908679453,40.80078367679929],[-73.92699531303118,40.800636176104284],[-73.92704640297914,40.800651743031324],[-73.92688606022001,40.800840648368855]]],[[[-73.92666565490181,40.80018271401784],[-73.92669572614771,40.800146977076245],[-73.9272477078927,40.800392957368906],[-73.92711464230625,40.80056375622957],[-73.92706696628478,40.80054301212579],[-73.92716933022471,40.80040585369613],[-73.92666565490181,40.80018271401784]]],[[[-73.92672091168967,40.800414210943586],[-73.92653846445016,40.80033389815394],[-73.9265535167681,40.80031517296066],[-73.92674263892977,40.80040349897277],[-73.92673683953086,40.80041147148191],[-73.92672526216784,40.800407339325346],[-73.92672091168967,40.800414210943586]]],[[[-73.92718514789182,40.79734989689012],[-73.9273548544178,40.797316580786315],[-73.92734692252739,40.79729390212043],[-73.92767122620857,40.797217014266245],[-73.92770694127063,40.797298663882124],[-73.92738263624496,40.797377063580484],[-73.92736675660652,40.79734682034476],[-73.9272029978516,40.7973867478999],[-73.92718514789182,40.79734989689012]]]]}},{"type":"Feature","properties":{"shape_area":"0.00024056392715","objectid":"75","shape_leng":"0.0876638997685","location_id":"75","zone":"East Harlem South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.94103496899987,40.79254666899993],[-73.93864883299987,40.79155775499987],[-73.93819346899994,40.79218819499989],[-73.9377361209998,40.79281580399994],[-73.9367920929999,40.792403927999956],[-73.93555312799995,40.79184222599987],[-73.93542842699998,40.79199687999987],[-73.93529038199985,40.79187313699992],[-73.93524060899985,40.79183387499989],[-73.93519360499981,40.79179799899988],[-73.93513822199999,40.79175283499989],[-73.93508265899982,40.79171004399995],[-73.93505300002766,40.79168720295447],[-73.93510685331493,40.79164962938518],[-73.93517135169378,40.791605207031665],[-73.93526809778392,40.791528025800446],[-73.93526500788931,40.791525763481154],[-73.93519039296174,40.79147116012903],[-73.93546762088405,40.79126365205755],[-73.93553896695929,40.79131869365976],[-73.93583106788897,40.791094704870254],[-73.93602391823781,40.79082912812602],[-73.93632010870607,40.79042595764855],[-73.93669302210014,40.78991304915909],[-73.93706168747059,40.78941359021348],[-73.93705304578874,40.78940641675745],[-73.93708104382307,40.78936639571001],[-73.93707246262223,40.78934584188616],[-73.93701479686747,40.78932128118495],[-73.93614073314119,40.78894907341049],[-73.93612836235276,40.788938530059575],[-73.93612689279682,40.78892686798536],[-73.93621859869943,40.78880049757431],[-73.93622751295341,40.78879561294985],[-73.9362430332504,40.78879577415203],[-73.93714965461099,40.78916844905941],[-73.93722890167288,40.78899630803707],[-73.93739788609298,40.78862171984344],[-73.93741675677381,40.788579762018955],[-73.93754989162562,40.78828374452882],[-73.93763482912277,40.788094244814715],[-73.93768669385376,40.787973560579],[-73.9376956302226,40.78795729352048],[-73.93774122176191,40.78785390435086],[-73.93777363255099,40.787783358062626],[-73.9378172269292,40.78768846868085],[-73.93794768976979,40.787477299429206],[-73.93794590851209,40.787469159257824],[-73.93795930775185,40.78745627992995],[-73.93797181801379,40.78743187338253],[-73.93811570089733,40.78718476275645],[-73.93813356192969,40.78716579039842],[-73.93819429625309,40.78709733029971],[-73.93824519951414,40.78704106810817],[-73.93853937331639,40.78671077700018],[-73.93926642644561,40.78588875256448],[-73.9398261969646,40.78525655241547],[-73.93983453997872,40.78525397286172],[-73.93984282390869,40.78525141086653],[-73.93985267603377,40.78524393165021],[-73.93988045560609,40.78523237601269],[-73.93988852061734,40.785223527347014],[-73.9399100328247,40.785211966757934],[-73.93992974399465,40.78520176553125],[-73.93995483679325,40.78518952279442],[-73.93998978019029,40.7851704772902],[-73.94001308386721,40.78515687380644],[-73.94002473252542,40.78515347642582],[-73.94004982707635,40.785138513728796],[-73.94006415729082,40.785131029620125],[-73.94011434323865,40.785103824644665],[-73.9401494727627,40.78508725537949],[-73.94018512931,40.78506620256322],[-73.94020230181276,40.78505918714037],[-73.94022475284191,40.7850451507884],[-73.94023795768307,40.78503713468404],[-73.94026700995506,40.78502210145345],[-73.94036209351322,40.78497198408236],[-73.94045320748533,40.78492287258088],[-73.94053377198207,40.78487877160598],[-73.94055093807704,40.784866742096156],[-73.94058130200887,40.784853708709235],[-73.94059054968368,40.78484668914218],[-73.9406235705765,40.784829650411645],[-73.94067374402164,40.78480359792665],[-73.94071732676325,40.78478054106709],[-73.940721283615,40.78478054310244],[-73.94074901720532,40.784767518202216],[-73.94076750825941,40.7847574951213],[-73.94078868006106,40.784747448788664],[-73.94083088142574,40.784727424556394],[-73.9410249973189,40.78463522248629],[-73.94108573710648,40.7846091665167],[-73.94111082838812,40.784597149183135],[-73.94113723613098,40.78458311400423],[-73.94117288854788,40.784566076962534],[-73.94144612018933,40.78443147385159],[-73.94152576810184,40.784390900969875],[-73.94167454195741,40.78431383063195],[-73.9418544859221,40.78422074667745],[-73.94201431753095,40.784137584897415],[-73.94217918595554,40.78405136339483],[-73.94231388874256,40.78398116626904],[-73.94239128520978,40.78394072618268],[-73.94243451137048,40.783917830322316],[-73.94246970444752,40.783896460947055],[-73.94257225524868,40.783824724155444],[-73.9426044272356,40.78380183093073],[-73.94267379818272,40.78375374314715],[-73.94278137533362,40.783678190096595],[-73.94286783792664,40.78361865580254],[-73.94293520531122,40.78357210608962],[-73.94301663136942,40.78351486545848],[-73.94311516211296,40.783446170629645],[-73.94316141910545,40.78341182999218],[-73.94320565536934,40.783369842987625],[-73.94323985739757,40.78332785169434],[-73.94327003035636,40.78328815517935],[-73.94331027382039,40.783233180946446],[-73.94334749366392,40.783182032998575],[-73.94339679077277,40.783109502846365],[-73.94344105526409,40.78304918212819],[-73.94355143839495,40.782903507985836],[-73.94354420706223,40.78288052416259],[-73.94360760400001,40.78286536999992],[-73.9437600529999,40.782828931999894],[-73.94383256699986,40.78285908899991],[-73.94389324599985,40.782887726999896],[-73.94395460199989,40.782915519999925],[-73.94405439399999,40.78296435799991],[-73.94464666000002,40.78321787299997],[-73.94472264499986,40.78324757199989],[-73.94706938199998,40.78423622699995],[-73.94933170599992,40.78519312699994],[-73.95033804099997,40.78561714999992],[-73.95092733999991,40.78586544699993],[-73.95244615099996,40.786502485999925],[-73.95255145499999,40.78654858099986],[-73.95266136699996,40.78659501999991],[-73.95416383099995,40.78722686099993],[-73.9557773589999,40.78791392399995],[-73.95527481199989,40.78858337999988],[-73.95481723799992,40.789204743999974],[-73.95439919199988,40.78977490899994],[-73.95388917099996,40.790470498999866],[-73.95343832999994,40.791085367999926],[-73.95298394599986,40.79172143299998],[-73.95252222700002,40.79234762199997],[-73.95207222299993,40.792966160999896],[-73.95160265399991,40.793607804999965],[-73.95111102399997,40.79428503499988],[-73.95061371799994,40.79496557399992],[-73.95015821299991,40.79558773199993],[-73.94969538299988,40.79621687199993],[-73.94940516399991,40.79663170399987],[-73.94922045699984,40.796909858999896],[-73.94909695599983,40.79705785599993],[-73.94879165299982,40.797477127999905],[-73.94831125500004,40.79812921799992],[-73.94722520899997,40.797671685999944],[-73.9467003099999,40.797450543999915],[-73.9456668469999,40.79700834399995],[-73.94556506799988,40.79696479499997],[-73.94522698899986,40.79682013299991],[-73.94509614699999,40.79676348299994],[-73.9449594289999,40.79670574099989],[-73.94421313799992,40.796385857999944],[-73.94415121699986,40.79635931699992],[-73.9434832399999,40.796072993999935],[-73.94287776199995,40.7958216709999],[-73.94275347999998,40.7957700849999],[-73.9424792319999,40.79565624799993],[-73.94232710899988,40.79559310299991],[-73.94187604699994,40.79540586899984],[-73.94234676599999,40.79476079799988],[-73.94281682199988,40.79413407699997],[-73.94327251199996,40.79348810299995],[-73.94103496899987,40.79254666899993]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000672050210692","objectid":"87","shape_leng":"0.0369015496117","location_id":"87","zone":"Financial District North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00372234899996,40.70693234399989],[-74.00360537999994,40.70678059299992],[-74.00316110499998,40.70623201399992],[-74.00306957,40.70614280299989],[-74.00302615299988,40.70610867499988],[-74.00299474599991,40.70608024599991],[-74.00295417200002,40.706027114999934],[-74.00256965079724,40.705523579761746],[-74.00268512768783,40.70544924811862],[-74.00236285311735,40.705158966692586],[-74.00241573476919,40.705129311282505],[-74.00238385458334,40.705101270250836],[-74.00197070397937,40.7047378684872],[-74.00197014837809,40.70473115920231],[-74.00217184941894,40.70460659646368],[-74.00218562331561,40.70460701887393],[-74.00233344621154,40.70474813530699],[-74.00233393075767,40.70474260740424],[-74.00242059318661,40.70468033460376],[-74.00243071075859,40.704677858004395],[-74.00248839829254,40.70472677235117],[-74.00248790148628,40.70473376109163],[-74.00239832748949,40.70479492514084],[-74.00238670740669,40.70479566367449],[-74.00332307270776,40.70562859522001],[-74.00358262337747,40.70546112883118],[-74.00363187169316,40.70542980675177],[-74.00360802644228,40.70540778137037],[-74.00355934714837,40.70543833815811],[-74.00287843069457,40.704831357989754],[-74.00297246475286,40.70476649244255],[-74.00358383172679,40.70530161130755],[-74.00364968772803,40.705377950512094],[-74.00362197523796,40.70539889998434],[-74.00364446183858,40.7054216846388],[-74.0038332753225,40.705303243026385],[-74.00394758957431,40.705402871900304],[-74.00438344417219,40.7051132598548],[-74.00426687037424,40.70501166020209],[-74.00458622952459,40.70479945067928],[-74.00459003883661,40.70478775294496],[-74.00349632042315,40.70379676926777],[-74.00351016434425,40.70378808825903],[-74.00371987043046,40.70365448194469],[-74.00396975693849,40.70388164511805],[-74.00480628900739,40.704642069051246],[-74.00484062824778,40.704639779526524],[-74.00492037826484,40.70459100497329],[-74.00518805067318,40.70442053569055],[-74.00511107204132,40.704350605261986],[-74.00508460380267,40.70436635582887],[-74.00492580498366,40.70421180838466],[-74.00500393507072,40.704165312544475],[-74.00516296842157,40.7043200932367],[-74.00513867768034,40.70433455643975],[-74.00521160900396,40.70440553223528],[-74.00526035829189,40.704374488410075],[-74.0053502722475,40.704310079961495],[-74.00418492090171,40.703248066176315],[-74.0041813014302,40.703250361430186],[-74.0041574215416,40.703231632087295],[-74.00416265161378,40.703227768889136],[-74.00420723493835,40.70319937375785],[-74.00411763228837,40.70311193702744],[-74.004272587521,40.703015666411495],[-74.00429788566103,40.70301726836962],[-74.00432634521925,40.703044544245884],[-74.00434743166828,40.70304694729882],[-74.00436534740585,40.70307021681555],[-74.00438643514063,40.703088667959605],[-74.00441805325255,40.703116735258334],[-74.00444124738806,40.7031375983676],[-74.00448447402036,40.70317690392736],[-74.00462520935534,40.70330003518527],[-74.00462626412609,40.703314479168114],[-74.00465050979112,40.70332972316352],[-74.00466632025643,40.70334817446862],[-74.00467686257008,40.70334817404076],[-74.00474855169037,40.703419564148824],[-74.0048022288324,40.703484006775255],[-74.00483652285266,40.70351292639169],[-74.00498836312711,40.703637436151816],[-74.0050337744232,40.7036749205554],[-74.0051030445178,40.703731143473874],[-74.00520771937106,40.70382133725155],[-74.00527929789541,40.703875218096265],[-74.00534891537728,40.70392373409765],[-74.00535945878063,40.70391972568758],[-74.0053963553808,40.703942183324386],[-74.00538791847218,40.703949405145195],[-74.00559242542961,40.70408256373169],[-74.00560507496257,40.704084966963464],[-74.00563775955965,40.70410583053918],[-74.00566330640648,40.7041042444782],[-74.00589012878147,40.70395873810608],[-74.00601862724882,40.70387315289086],[-74.00614010577931,40.70397866027172],[-74.00634162385867,40.70384853368275],[-74.00643225275432,40.703790361046245],[-74.00659591913875,40.703685902451845],[-74.00634518899977,40.70348864644175],[-74.00632434161025,40.70346987449464],[-74.00591217944537,40.70309876190139],[-74.00588747266426,40.70307651522389],[-74.0054838408244,40.70271432213405],[-74.00552682615245,40.70268528761711],[-74.00550531272066,40.70266684658551],[-74.00547130861277,40.70268982908357],[-74.00543599763346,40.70265955541134],[-74.00542728826254,40.70266543619403],[-74.00530412596079,40.70255986563306],[-74.00549427805105,40.70243138195556],[-74.00550166067457,40.70243086779703],[-74.00561361797617,40.70253024203234],[-74.00560163196401,40.70253805976986],[-74.00560905264517,40.70255281855374],[-74.0055947948583,40.70256802032948],[-74.00559935100472,40.702580167839244],[-74.00559022977765,40.702585814283836],[-74.00559194611431,40.702598835921144],[-74.00558509547798,40.702604050202375],[-74.00558909594902,40.70261273059688],[-74.0055354613817,40.70264552110693],[-74.0055577199881,40.702664394651975],[-74.00567522249852,40.70258407270014],[-74.005984303395,40.70286001804111],[-74.00623870508527,40.70307978930158],[-74.00636372730409,40.70318779225254],[-74.00649425191104,40.70330054817178],[-74.00654880812648,40.70336761508583],[-74.00655720878507,40.70336314833331],[-74.0067554158402,40.703541489476805],[-74.00678502191047,40.70356812790527],[-74.00699466002446,40.70344118856669],[-74.00722046663674,40.7033019773033],[-74.007519052838,40.703121820237115],[-74.00752714979265,40.70311498141609],[-74.00760498189766,40.70299314132919],[-74.00763657899991,40.70300436799989],[-74.0077967509999,40.70306351499989],[-74.00782878499996,40.703086421999934],[-74.00785483099992,40.7031077899999],[-74.00797948599994,40.703188755999875],[-74.00854172499996,40.70369761199989],[-74.00898541299989,40.704079159999864],[-74.00907940599997,40.70416904299988],[-74.00945463899993,40.70452785699992],[-74.00974639299996,40.704775247999905],[-74.00998418599995,40.70514773299991],[-74.00999520599994,40.70533123899991],[-74.0098658089999,40.70579642699993],[-74.01118994199994,40.706278727999916],[-74.01187330299993,40.706551406999864],[-74.01240001199992,40.70678480799992],[-74.01250773999998,40.706767065999934],[-74.01194691399999,40.707451531999915],[-74.01170249899995,40.70775571299986],[-74.01124834999997,40.708304700999854],[-74.01118228399991,40.7083855739999],[-74.0110119849999,40.70859402199989],[-74.01084638199993,40.708797544999925],[-74.01054246499999,40.70915414799992],[-74.00998739199997,40.70980567299989],[-74.00954277299994,40.71032749299993],[-74.00947357899994,40.71041254299995],[-74.00906264799988,40.71088670399993],[-74.00774466599994,40.71022077299992],[-74.00705335899995,40.70987195099989],[-74.00643549199992,40.7095573209999],[-74.00551253,40.709093407999866],[-74.0052621729999,40.70892071099991],[-74.00505672899992,40.708788768999995],[-74.00478782699994,40.708401892999895],[-74.00432857299997,40.70782349599988],[-74.00405660199985,40.707436780999934],[-74.00392127499991,40.70723974499993],[-74.00372234899996,40.70693234399989]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000572999455414","objectid":"88","shape_leng":"0.0352046035327","location_id":"88","zone":"Financial District South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00974639299996,40.704775247999905],[-74.00945463899993,40.70452785699992],[-74.00898541299989,40.704079159999864],[-74.00854172499996,40.70369761199989],[-74.00797948599993,40.70318875499992],[-74.0078548309999,40.70310778899988],[-74.00782878499996,40.703086421999934],[-74.0077967509999,40.70306351499989],[-74.00763657899991,40.70300436799989],[-74.00760498189766,40.70299314132919],[-74.00764555180645,40.702928174389456],[-74.00765095550902,40.702919839105135],[-74.00765840854532,40.70290916746316],[-74.00770527479769,40.70288182540726],[-74.00770614970409,40.70287516162004],[-74.00796578643664,40.702718157070166],[-74.00837395801629,40.70246975865777],[-74.009127727589,40.7020083244217],[-74.00915955533813,40.70199730764996],[-74.00930907655483,40.701954603022514],[-74.00869964313567,40.701139867542174],[-74.00775549150644,40.70154800167175],[-74.00759136204225,40.70132808104814],[-74.00853611510763,40.70091969574509],[-74.0083492755909,40.7006693483882],[-74.00862036163882,40.70055216421584],[-74.00960052263278,40.701865481917835],[-74.01026710345066,40.701698668814146],[-74.01083741653544,40.70155334480756],[-74.01116664151876,40.70147720220832],[-74.01109588602684,40.70127499934889],[-74.01111949092332,40.701268748305765],[-74.01112667396997,40.70127499637674],[-74.01128983905525,40.701249982244285],[-74.0112097577877,40.701044583273756],[-74.01112868539599,40.70106489745045],[-74.0110783797454,40.70095712031517],[-74.0110670856897,40.70091494089484],[-74.01110886351543,40.700901420606286],[-74.01109514358389,40.7008665271816],[-74.01109514108846,40.70085153299264],[-74.01108063438,40.70085194885256],[-74.01105929378232,40.700811562771484],[-74.01106312665488,40.700802819827345],[-74.01104287442345,40.70075743496105],[-74.011021525765,40.70074120110609],[-74.01103575886044,40.700731617687474],[-74.01102699993733,40.700712878931306],[-74.01101386500967,40.70071163747197],[-74.01100072817277,40.70069081961717],[-74.01101659417203,40.70068415386645],[-74.01101221338783,40.70066874613638],[-74.01099990958122,40.70067374615791],[-74.01097965965197,40.70064584911186],[-74.01099825777675,40.700635024239574],[-74.01097034745736,40.700575484207576],[-74.01094845841567,40.70057631454651],[-74.01093752366046,40.7005671573749],[-74.01093861016889,40.7005563341749],[-74.01096049734583,40.70053884409263],[-74.0109344927399,40.700487624779925],[-74.01092027169814,40.70049262380238],[-74.01090112139876,40.70046223399991],[-74.01092026515036,40.700452650129954],[-74.01081026034738,40.70023406243366],[-74.01082511780585,40.70020930486715],[-74.01083751798708,40.70020722317945],[-74.01093093205073,40.700415152334415],[-74.01100364429968,40.70058110994409],[-74.01104377249544,40.70068284521962],[-74.01107427475965,40.70074833789611],[-74.01110436404349,40.7008106494294],[-74.01113362222915,40.70086787440551],[-74.01115033556829,40.70089840010094],[-74.0113583629136,40.70085195863629],[-74.01130318921149,40.70064784403637],[-74.0112981643226,40.70059888503188],[-74.01130986410945,40.70057980119102],[-74.01133409410409,40.700568353682264],[-74.01136082267426,40.700565810999194],[-74.0113817187564,40.70057025711792],[-74.01139508123386,40.70059060767383],[-74.01143269912247,40.70067454111621],[-74.011469474374,40.70074892825803],[-74.011502911437,40.70081505897416],[-74.0117292681748,40.70077011805964],[-74.01170009248334,40.700721538635975],[-74.011682753977,40.70069334506205],[-74.01166539833068,40.700637560590245],[-74.01163149614032,40.70055539174732],[-74.01161019835872,40.70049300642146],[-74.01161413587107,40.70047261846256],[-74.01163147918638,40.7004582182481],[-74.01167798034295,40.7004618152074],[-74.01170321011998,40.70048100238686],[-74.01172605835686,40.70047860442191],[-74.01175129264924,40.70053078758623],[-74.0117773082774,40.70057097487754],[-74.01182619233424,40.70066634278202],[-74.01183407601519,40.70068613447613],[-74.01184827026111,40.700729925805916],[-74.01185378549594,40.70073892145015],[-74.01199159781133,40.70070483146649],[-74.01208668214687,40.70068130873922],[-74.01208509377949,40.700664514803854],[-74.0120693217167,40.7005997333441],[-74.01203856797002,40.70052895630967],[-74.0119767064249,40.7003784242992],[-74.01190488098494,40.700226930002],[-74.01185672556994,40.70010710340836],[-74.01193096316563,40.70005120965431],[-74.01196196116912,40.700037545595485],[-74.01204027930196,40.70004809164556],[-74.01208842091677,40.70008658368941],[-74.01212759506136,40.70014308650679],[-74.01215779158525,40.70021137864816],[-74.01217247961002,40.700233115597726],[-74.01223694549927,40.70032127784431],[-74.01225490284888,40.70036473434146],[-74.01231855974255,40.70048828759264],[-74.01236222440257,40.70057582996201],[-74.01239160032279,40.70062052809406],[-74.01259392327508,40.70057083347242],[-74.01259064684221,40.70051185050812],[-74.01255471870927,40.700359730657794],[-74.01252899955233,40.700252320356995],[-74.01251593564186,40.700184648480175],[-74.01251511280113,40.70015049211081],[-74.01254202780153,40.7001349741483],[-74.01261382087365,40.7001082658111],[-74.0126480885809,40.70011508828302],[-74.01268072728439,40.700146755381404],[-74.0127349915856,40.70021877320353],[-74.01279619139247,40.70030009988461],[-74.01283454933404,40.700352874734435],[-74.01286637756563,40.70040751337169],[-74.01288188403379,40.70044165988615],[-74.01290474249377,40.70049691216282],[-74.01290881793962,40.7005236116935],[-74.01300205335563,40.70051602896807],[-74.01310747847366,40.70050745218069],[-74.01311155389506,40.700472053044614],[-74.01311153191459,40.70036029060313],[-74.01309395831619,40.70022369323981],[-74.01307843485947,40.70010324258431],[-74.01302495705559,40.699882830206],[-74.0130118926586,40.69981825663123],[-74.01302085702764,40.699793419367936],[-74.01304370092431,40.69977478473583],[-74.01311303826309,40.69977416588525],[-74.01314078965082,40.69980333792552],[-74.01315384897737,40.69984494048546],[-74.01316691626799,40.699931244337535],[-74.01317753563323,40.70001754746251],[-74.01318571684631,40.70010323034394],[-74.01320084197312,40.700239827976105],[-74.01320736787193,40.700275216518826],[-74.01322288016905,40.700333586085506],[-74.0132734948308,40.7004968702278],[-74.01348560832729,40.700478222908394],[-74.01348068493706,40.70035777106837],[-74.01348311536108,40.700263388116326],[-74.01350349660855,40.700176459528265],[-74.01353285018102,40.70010816142329],[-74.01358669315087,40.70007959034501],[-74.01361029865362,40.7000842982948],[-74.01367479307396,40.70012582122538],[-74.01366274984949,40.70013665651763],[-74.01364265243346,40.70016178290469],[-74.01361182284573,40.700245174325296],[-74.01357049004972,40.70023220268694],[-74.01356130915947,40.7002951220791],[-74.01353310202802,40.700297124122834],[-74.01353047798223,40.700311100173295],[-74.01356131218263,40.70031009779258],[-74.01356034122136,40.70036653321863],[-74.01352950894581,40.70037352406205],[-74.01353147488012,40.70038201609179],[-74.01356297105794,40.700380013103185],[-74.01355970574456,40.70043893421369],[-74.0135236177836,40.700441937789115],[-74.01352295909443,40.70046041520351],[-74.01358070009412,40.70045691424641],[-74.0135854179925,40.70050191287805],[-74.01355283214755,40.70050335758483],[-74.01357712861271,40.70064368123795],[-74.01351039646312,40.70065037107601],[-74.01355826979739,40.70093987091524],[-74.01395152778244,40.70099098222994],[-74.01415893499998,40.701096289999896],[-74.01376867899998,40.7011432629999],[-74.01377528899992,40.7011827129999],[-74.01378191199989,40.70122215499992],[-74.01379120799997,40.70130547599995],[-74.01389890399994,40.70227066999996],[-74.014192151,40.70275671099996],[-74.01442983199998,40.70315064799989],[-74.014391769,40.70359878299993],[-74.01425523899994,40.70442547199991],[-74.01425342599994,40.70445756399993],[-74.01425861399994,40.70448944299991],[-74.01427065899998,40.70452022899989],[-74.01428922899998,40.70454907499989],[-74.01419226999991,40.7045704039999],[-74.01326979499997,40.704553495999974],[-74.01332610899988,40.7050307879999],[-74.01335309799998,40.70519857699985],[-74.01335946199991,40.70536865599994],[-74.01334484799995,40.70553882699991],[-74.01330942899993,40.70570683099988],[-74.01325396399993,40.70587051399992],[-74.01250773999998,40.706767065999934],[-74.01240001199992,40.70678480799992],[-74.01187330299997,40.70655140599994],[-74.01118994199994,40.706278727999916],[-74.0098658089999,40.70579642699993],[-74.00999520599994,40.70533123899991],[-74.00998418599995,40.70514773299991],[-74.00974639299996,40.704775247999905]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000553132476305","objectid":"90","shape_leng":"0.0307591620819","location_id":"90","zone":"Flatiron","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.9963368949999,40.73804374699991],[-73.99683993899998,40.73736088899995],[-73.99968392199985,40.73855224899989],[-74.00252381499989,40.73975264399995],[-74.00201937799989,40.740444088999894],[-74.00155531499993,40.741080025999935],[-74.00112917499989,40.741668097999884],[-74.00070275499993,40.7422536109999],[-74.0002751799999,40.74283879799987],[-73.9998482359998,40.743425018999915],[-73.99942208999991,40.74400957299992],[-73.99897237399988,40.74463005499994],[-73.99848652499992,40.74529416399991],[-73.99800822000003,40.74595130199988],[-73.99755164599995,40.74658089999985],[-73.99709902899994,40.74720510199991],[-73.99426258599996,40.74600398099987],[-73.99141858599994,40.74480268199988],[-73.9918710239999,40.74418556999993],[-73.99206647199993,40.74391620299988],[-73.99231888499988,40.74356832299989],[-73.99280340900002,40.74291001999997],[-73.99329166800001,40.74223330099994],[-73.99373928799994,40.74161720799987],[-73.99416492399986,40.7410309369999],[-73.99459264899987,40.74044198099993],[-73.99501798599992,40.73986001099995],[-73.99544664199995,40.7392721329999],[-73.99587409499989,40.73868594599992],[-73.9963368949999,40.73804374699991]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000764293209892","objectid":"125","shape_leng":"0.0497322121757","location_id":"125","zone":"Hudson Sq","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00269315099992,40.728314054999906],[-74.00214891499996,40.728035366999904],[-74.00221100999997,40.727961316999874],[-74.00251324499993,40.727600926999855],[-74.00312206399995,40.72687712799991],[-74.003730175,40.726250058999945],[-74.00403067899997,40.72551249599992],[-74.00427457099987,40.72491210899993],[-74.004574744,40.72417312999994],[-74.00478574899996,40.7236248379999],[-74.00505887099996,40.7229778639999],[-74.00536435999994,40.722183951999966],[-74.00538616799996,40.722112360999894],[-74.00539186699997,40.72203736699992],[-74.00538048599999,40.721962173999934],[-74.00535249999994,40.72189013499991],[-74.0053098609999,40.72182419199987],[-74.00591289899992,40.7222529489999],[-74.00629841699995,40.72254950399988],[-74.00762904199998,40.72349770399995],[-74.00791205999997,40.72369976699988],[-74.00807835299996,40.72382686299988],[-74.00830216199988,40.723977808999905],[-74.00857090899997,40.72416935499997],[-74.00864380599997,40.72422131699991],[-74.00931760399993,40.7247015519999],[-74.01004078699998,40.72520616399988],[-74.0108123829999,40.725789802999955],[-74.01092277299992,40.72579415099991],[-74.01102457999994,40.72579386199993],[-74.01103681999996,40.72572537699997],[-74.011176661,40.725169424999905],[-74.01135428299995,40.724277182999884],[-74.01143933,40.72428446899996],[-74.01159122599992,40.724297603999936],[-74.0119643202455,40.72432986461989],[-74.01178072408688,40.72523995904116],[-74.0116541510404,40.72586737457336],[-74.01165326569942,40.72587176185136],[-74.0119583307484,40.72597759972093],[-74.01231588417461,40.726033843285414],[-74.01411595444266,40.72621586380551],[-74.01477821548454,40.7262817064733],[-74.01516324118417,40.72631971193679],[-74.01520426531131,40.72636194937966],[-74.01518864981979,40.72645118250504],[-74.01517084019778,40.72657939015507],[-74.01514325523297,40.72671052627932],[-74.01512356549452,40.72679394256458],[-74.01430671596631,40.72670812119669],[-74.01341677520719,40.72662103121345],[-74.01234454766038,40.7265194304825],[-74.011542018976,40.726447346927074],[-74.01138323602366,40.728229272183555],[-74.01100472899994,40.7281932389999],[-74.01087083299997,40.72818049399996],[-74.01076791499999,40.728173957999914],[-74.01067264999996,40.72911266599989],[-74.01054441199987,40.72910009799991],[-74.00934961999998,40.72898755599988],[-74.00859272099993,40.728915277999924],[-74.0070902079999,40.72877225299994],[-74.00531369199996,40.72860449399992],[-74.00312767499993,40.72839380099989],[-74.00281726599992,40.72836312899994],[-74.00269315099992,40.728314054999906]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000374700210291","objectid":"100","shape_leng":"0.0248131090342","location_id":"100","zone":"Garment District","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98729377099981,40.750451608999896],[-73.98776905899994,40.749787028999926],[-73.98793687499989,40.749854966999926],[-73.99062219999986,40.75099175399994],[-73.99211708899992,40.75162207799989],[-73.99346417699985,40.752190054999886],[-73.99297937799993,40.75285340299992],[-73.99252855999994,40.75347391299987],[-73.99207900099996,40.75409111599987],[-73.99163271299996,40.75470680499996],[-73.99117738199989,40.75532984899993],[-73.99072636299991,40.75595040599996],[-73.99027621399986,40.756567564999926],[-73.98979085399995,40.75723313199991],[-73.98841835499992,40.7566549859999],[-73.98694873899993,40.756035901999915],[-73.98640436699999,40.755808028999866],[-73.98411754799999,40.754842052999955],[-73.984595843,40.75417694199992],[-73.98504363799995,40.753554148999854],[-73.98548819099985,40.752935179999945],[-73.98594653099994,40.7523168049999],[-73.98639930899988,40.751699985999934],[-73.98684991099998,40.75108167899989],[-73.98729377099981,40.750451608999896]]]]}},{"type":"Feature","properties":{"shape_area":"0.00000633056361314","objectid":"103","shape_leng":"0.0143055167343","location_id":"103","zone":"Governor\'s Island/Ellis Island/Liberty Island","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.04388559600675,40.690184824096946],[-74.04350596056258,40.689687359818144],[-74.04273533896499,40.690050191210034],[-74.04278433306983,40.69012097684565],[-74.04270428413375,40.69015520482211],[-74.04255372018648,40.68996275914475],[-74.04263929302562,40.68992817595552],[-74.04269380809586,40.68999725905358],[-74.04346752305135,40.68963699005171],[-74.0435163722292,40.68919103337114],[-74.04364078613705,40.688766559785],[-74.04397458578079,40.68858240702793],[-74.04438521705612,40.688516178201496],[-74.04478399103188,40.68859566005775],[-74.04627538918811,40.689327425448475],[-74.04680284899291,40.68995325613297],[-74.04747651481166,40.68961136999915],[-74.04772962698515,40.689915318233105],[-74.04758571912386,40.68998250691307],[-74.04743126078736,40.68980389023559],[-74.04689205500284,40.69005909816131],[-74.04720029383118,40.69042481531181],[-74.04711050616285,40.69047041292518],[-74.04711581988163,40.69065580605927],[-74.04718321406033,40.690747355024456],[-74.04719492423845,40.69076326392416],[-74.04721324509907,40.690790487168705],[-74.04722568396599,40.690819572241594],[-74.04723192804273,40.69084978818734],[-74.04723182036673,40.69088037534203],[-74.04722536428265,40.69091056537459],[-74.0472127219085,40.690939599444675],[-74.04719421009764,40.690966748235475],[-74.04717029494704,40.69099132912251],[-74.04714091071601,40.69101051633723],[-74.04710814069992,40.69102620832851],[-74.0470726967221,40.691038064209394],[-74.04703534814037,40.691045826247255],[-74.0469969069895,40.69104932615995],[-74.04617166999705,40.691097981243246],[-74.04614707204328,40.691122646016545],[-74.04609551081596,40.691120063192265],[-74.04604442476779,40.69111415216414],[-74.04599418397756,40.691104955847436],[-74.04592592783412,40.691082603292124],[-74.04586027413703,40.69105611629163],[-74.04460616491457,40.690573484475344],[-74.04388559600675,40.690184824096946]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000119205339715","objectid":"104","shape_leng":"0.0212208330928","location_id":"103","zone":"Governor\'s Island/Ellis Island/Liberty Island","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.03995040794244,40.7008906303213],[-74.03945262906649,40.70053315991193],[-74.0393827810941,40.70057769428059],[-74.03771124798313,40.69934404017383],[-74.03809786207383,40.69903950512211],[-74.03822954422694,40.69836859134887],[-74.03900043889001,40.69836989019551],[-74.03934037685065,40.69811551441799],[-74.0399327211647,40.698544422145524],[-74.04025555058615,40.69880482315377],[-74.04124261816106,40.69953674121738],[-74.04174768884,40.69914786378336],[-74.0399124888631,40.69770204019913],[-74.0416605190741,40.696452971319864],[-74.04367371215382,40.69802040416499],[-74.04363686205573,40.69804823209788],[-74.04365651081106,40.698064091043896],[-74.04270395805347,40.69880060029328],[-74.04296505213769,40.69899936216238],[-74.0410986121853,40.700492943194774],[-74.04080080623118,40.70026854996324],[-74.04031250903736,40.70062574909618],[-74.04039104391973,40.700687376104355],[-74.04041179180665,40.700678484059274],[-74.04053637716099,40.70078209438744],[-74.04048062492674,40.70082061433504],[-74.04034955315318,40.700716018827265],[-74.04036511100502,40.70070416692276],[-74.04028808718954,40.70064361323363],[-74.03995040794244,40.7008906303213]]]]}},{"type":"Feature","properties":{"shape_area":"0.000368636392805","objectid":"105","shape_leng":"0.0774253398314","location_id":"103","zone":"Governor\'s Island/Ellis Island/Liberty Island","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.01674756096064,40.693343368217555],[-74.01540359141636,40.69306649730916],[-74.01535466389976,40.69322485341719],[-74.01540916665937,40.693238673173134],[-74.01538919768244,40.693298134665504],[-74.01517482202624,40.693256680335395],[-74.01518934209336,40.693198603542925],[-74.01525474322258,40.693206891183976],[-74.01530915985025,40.693047042891514],[-74.01525951035647,40.69303681423183],[-74.01512030609705,40.693187550632885],[-74.01516209441293,40.69320828569578],[-74.01512395634913,40.693258069299695],[-74.0149313669649,40.69315577223661],[-74.0149785911563,40.69311566557116],[-74.01502946389674,40.693146079734866],[-74.01515612159491,40.69301551489164],[-74.01422123084896,40.692822906344],[-74.01418643053366,40.69280348533486],[-74.01415791009549,40.6927827688139],[-74.01413296148374,40.692759534774815],[-74.01411196509743,40.6927341374772],[-74.0134656664421,40.69213499619091],[-74.01346559490221,40.692134950631726],[-74.01345880318475,40.69213036821137],[-74.01345142020139,40.692126414925035],[-74.01344381222603,40.69212327316733],[-74.01343629886243,40.692121076587725],[-74.0134289639662,40.692119825678986],[-74.01342192440899,40.69211953014427],[-74.01341855282882,40.692119755024166],[-74.01341527571654,40.69212021493395],[-74.01337499385887,40.692129144477825],[-74.01329253788359,40.692152143650446],[-74.0132564793452,40.692160882186194],[-74.0131275881807,40.6921850043228],[-74.01308076367873,40.692194878694266],[-74.01305857042325,40.69220153624106],[-74.0128533381957,40.69224524345787],[-74.01272612664187,40.692271335581886],[-74.01260406086601,40.692294240965545],[-74.01258803080069,40.6922983121283],[-74.01257261595585,40.69230385277201],[-74.01255829038229,40.69231068878434],[-74.01254543217101,40.69231865108907],[-74.01253368614768,40.69232805434204],[-74.01252307563139,40.69233884241937],[-74.01252289827039,40.69233903241466],[-74.0124088889432,40.69249352748012],[-74.01240885439651,40.69249357187864],[-74.01237989918387,40.69253216208628],[-74.01233661589079,40.69255989385955],[-74.01229783565219,40.69256814655674],[-74.0122973149255,40.69256825483513],[-74.01211815614386,40.69260636571759],[-74.01211726765081,40.69260655461443],[-74.01210359185653,40.69260946499937],[-74.01204369179824,40.692601816621526],[-74.01184920038554,40.69251819825303],[-74.01184889307419,40.6925178732815],[-74.0118118564723,40.69247933506435],[-74.01179881230529,40.69244459473697],[-74.0117837450172,40.69240476697541],[-74.01175097032225,40.692318113592954],[-74.01175033086638,40.69231641141226],[-74.01175034252032,40.692316348755774],[-74.01175749051248,40.69226373956153],[-74.01183446726385,40.69215905602311],[-74.01183833471082,40.692153797275],[-74.01183900825662,40.69215287764775],[-74.01186468706686,40.69211796262598],[-74.01190309722556,40.69209058350786],[-74.01191118868,40.692088844071215],[-74.011968932587,40.69207647455717],[-74.01213630770874,40.692040643855556],[-74.01213732516256,40.69204041808883],[-74.01214293316167,40.692039219676275],[-74.01214885984382,40.69203794936049],[-74.0122011411636,40.69204490509603],[-74.01232430689473,40.69209118800497],[-74.01235951844633,40.692107770280096],[-74.01239001029667,40.69212308503785],[-74.01240858613572,40.69213424052948],[-74.0124292705935,40.69215423889232],[-74.01246140165121,40.69221262441595],[-74.01253982481636,40.69219697386315],[-74.01255899015489,40.69219315382361],[-74.01282826026976,40.6921394359441],[-74.01322338051708,40.69205919065682],[-74.01324195439297,40.6920554161388],[-74.01324784563468,40.692054217639885],[-74.0132851579289,40.69204736900615],[-74.01330314021662,40.69204264868686],[-74.01331123156653,40.69203949572286],[-74.01331804474162,40.692035902476796],[-74.01332367657382,40.692031822532485],[-74.01332606546653,40.692029579231274],[-74.01332818317637,40.69202720143703],[-74.01333064247271,40.69202372579595],[-74.01333264149613,40.69201997010239],[-74.01333505303288,40.69201209955263],[-74.013335394941,40.69200820902383],[-74.01333515825114,40.692004462970765],[-74.01333432976998,40.692000924552666],[-74.0133329328365,40.691997636989036],[-74.01332546520501,40.69198520246154],[-74.01331621035997,40.69197249741609],[-74.01327481959478,40.69193534679518],[-74.01326620460138,40.69192718049207],[-74.0132647611728,40.69192580274551],[-74.01325528699353,40.691916817498964],[-74.01318656537055,40.691957929417796],[-74.01291228751674,40.6916907308338],[-74.01292800393819,40.69167610442813],[-74.0128598710889,40.691602990865555],[-74.01289688430353,40.691576895500305],[-74.01289518355655,40.69157528340696],[-74.0128751983542,40.69155633025172],[-74.01286547266726,40.69154710124849],[-74.01281595185874,40.69150012672344],[-74.0127543683677,40.6914764676359],[-74.01265071760986,40.69139945918043],[-74.01262511694793,40.69140873714777],[-74.01260856859405,40.69136410462975],[-74.01258434695997,40.69137064972959],[-74.01258434935933,40.69138336238062],[-74.01254505151509,40.69139159327292],[-74.01255488211348,40.69142300124786],[-74.01253228594773,40.69142898661777],[-74.01251950752706,40.691396831454185],[-74.0120341761657,40.69150307668568],[-74.01201746659368,40.69145820805393],[-74.01259753152567,40.69133433554453],[-74.01252783209964,40.69114633733795],[-74.01218355071047,40.691136215940624],[-74.01218682075256,40.691078024270645],[-74.01182575354963,40.691064816216155],[-74.01182847957557,40.69101135776438],[-74.01219500090073,40.691028847568795],[-74.01219552958608,40.691020573667956],[-74.01221017410666,40.690791696801256],[-74.01208414396382,40.690780622300494],[-74.01208232424358,40.690759881924535],[-74.01205325498773,40.690739143903045],[-74.0119987596657,40.69075021210482],[-74.0119878628144,40.69077233607648],[-74.01197151318817,40.69077095550945],[-74.01198603276991,40.69069766811433],[-74.01199329167372,40.69065065379713],[-74.01198056761243,40.690606407271744],[-74.01204959850608,40.69061054854669],[-74.01205685428478,40.69055385448957],[-74.0120986343193,40.69054693658224],[-74.01210771369418,40.690528959597394],[-74.01212769712372,40.6905289574932],[-74.01214221600921,40.69045428780721],[-74.012231311469,40.69046133077507],[-74.01230688304486,40.68928018293753],[-74.01270320924039,40.68879053981697],[-74.01275451203071,40.68872055623788],[-74.01316926402752,40.68815477120321],[-74.01326486705615,40.688122430096655],[-74.01333019977945,40.68809316604797],[-74.01341858951315,40.688052198317855],[-74.01347243916622,40.688012057966205],[-74.01488097975005,40.68725457048857],[-74.01604730539512,40.68733800629772],[-74.01609789228392,40.68731459228818],[-74.01651927578641,40.68711955114744],[-74.01698146864109,40.68690738448148],[-74.0170498660923,40.68687598791897],[-74.0167158267198,40.686445593709585],[-74.01664664084757,40.6864163472334],[-74.0151516167432,40.68652480204175],[-74.0151439102199,40.68643703404304],[-74.01661971233223,40.68631980484094],[-74.01667351529983,40.68630516855344],[-74.01727291238646,40.685690697681224],[-74.01753032434085,40.6853629879324],[-74.0176225750659,40.685409783720694],[-74.01736132076928,40.68574627202702],[-74.01678113957136,40.686349037919165],[-74.01677346463228,40.68639877544977],[-74.01712099101067,40.68684333763659],[-74.02015656652381,40.68544978729508],[-74.02054367293081,40.68527206792596],[-74.0202068671052,40.684833833077064],[-74.02016278941748,40.68483301741088],[-74.01945957389425,40.68515495792238],[-74.01939842391928,40.685087404047145],[-74.0209525501029,40.684384431647196],[-74.02100877899288,40.684453539084316],[-74.02028899992284,40.68478444841859],[-74.02027819846491,40.68480913517446],[-74.02061267235811,40.68524039019806],[-74.02106226329632,40.68504102470039],[-74.02183909525692,40.684696540546895],[-74.0222407889853,40.68451840810193],[-74.02233552903553,40.68447639360419],[-74.02239732580504,40.6844489893264],[-74.02259359581036,40.684359695949944],[-74.02213250186877,40.683767672385194],[-74.02305574749599,40.6829169454452],[-74.02319462834667,40.68300049806215],[-74.02236823557664,40.68377991679401],[-74.0227589902996,40.68428444833225],[-74.0230170445636,40.68416704426917],[-74.02313509710321,40.684124156652665],[-74.0232567831563,40.684085414320776],[-74.0233977685456,40.68404096982173],[-74.0234147937385,40.68403560313049],[-74.02354160370115,40.684002983592535],[-74.0237826733674,40.68396891586903],[-74.0239473535509,40.68394921598667],[-74.0242153726967,40.68394424346433],[-74.02443173023701,40.68395403059442],[-74.02464809241222,40.68397856661301],[-74.02484185637266,40.684012941142406],[-74.02499306057516,40.68405211253555],[-74.02521646935898,40.68409398087133],[-74.02546836768583,40.68415292257828],[-74.02567183758212,40.68423645620504],[-74.02588501823519,40.68437652684009],[-74.02604653184764,40.68451415115493],[-74.02612578192962,40.68459351143973],[-74.02623238290327,40.68470026105375],[-74.026334042424,40.68480169772421],[-74.02644066624605,40.684951624519876],[-74.02651822912101,40.68510893314847],[-74.02657640943082,40.68524166303809],[-74.02660875559273,40.685376858009896],[-74.0266281908386,40.685526804749706],[-74.02662178340184,40.6856546341114],[-74.02660890959791,40.68576279806959],[-74.02657021545328,40.685905384681284],[-74.02649600144045,40.686055352516355],[-74.02642577243199,40.68617533982957],[-74.02637621613817,40.68623131880009],[-74.0263127037025,40.686295116268],[-74.02622025384302,40.68638456809348],[-74.02617488097594,40.6864290722291],[-74.02606584987552,40.686530566227816],[-74.0257838705966,40.68679470641727],[-74.02557971866312,40.6869974566],[-74.02538699247003,40.68716690428223],[-74.02518794246518,40.68735622748172],[-74.02515426770418,40.68738749447694],[-74.02498452676963,40.68754509996105],[-74.02495996488949,40.6875682036494],[-74.02474903514577,40.687787029412206],[-74.02456390211569,40.68796465845378],[-74.02445685221299,40.68806055942187],[-74.024339228089,40.688165810058095],[-74.02432308577353,40.68818025702191],[-74.0241951143645,40.68829476558987],[-74.02411997621049,40.68836824351029],[-74.02397192277759,40.688513025404276],[-74.02396924880294,40.6885155500981],[-74.02381144169377,40.688664515802714],[-74.02367436482531,40.688792309760025],[-74.02353644452148,40.68891577045839],[-74.02339034096943,40.689049247613426],[-74.02313394750364,40.68929545426466],[-74.0226846593962,40.68971747085379],[-74.02256537904927,40.68982575842607],[-74.02243973951947,40.68993981943944],[-74.02225114057582,40.69012221857815],[-74.02189942193753,40.69044347236065],[-74.02149639768447,40.69082705033472],[-74.02147636060455,40.690846622621194],[-74.02121292061638,40.69110396565088],[-74.02097996202453,40.69132439086214],[-74.02071969701747,40.69158098499546],[-74.02071619151157,40.691584232140485],[-74.02046388462907,40.691817991104024],[-74.02020527434266,40.69203392385426],[-74.01985623976917,40.692906232798926],[-74.01979706616879,40.693041562744504],[-74.01979706638019,40.69304227473585],[-74.01975820423938,40.69309283565343],[-74.01975203020818,40.69309852828896],[-74.01971454942077,40.69313300682719],[-74.0196683350802,40.69316438792429],[-74.01962614022352,40.693185638606145],[-74.01960136832818,40.69319203651079],[-74.01952625786083,40.693206790851846],[-74.01945183356793,40.69322738318994],[-74.01938401317452,40.69323476985883],[-74.01934089597206,40.69323477711305],[-74.01928712492476,40.693234786137076],[-74.01917408781627,40.69323234622592],[-74.01899645645297,40.69322254283086],[-74.01886404103503,40.69321764868792],[-74.01879710616217,40.69321765963996],[-74.01875100400217,40.69321766716067],[-74.0186541185004,40.69322505712628],[-74.01852170583395,40.69322999493903],[-74.01837960490766,40.693239851076015],[-74.01830295903022,40.69324774729765],[-74.01801807424182,40.6932657952483],[-74.017728751353,40.69328178778385],[-74.01742068986829,40.69329880082908],[-74.01723188418137,40.69332043274831],[-74.01711872274268,40.69332607805407],[-74.01700668693556,40.693344068510434],[-74.01690615078013,40.69335341225322],[-74.01682187641964,40.69334558113752],[-74.01674756096064,40.693343368217555]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000746112192675","objectid":"107","shape_leng":"0.0380413645908","location_id":"107","zone":"Gramercy","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98238628799993,40.73141124499994],[-73.98255629299985,40.7313501339999],[-73.98494102799992,40.73234760399986],[-73.98718049699994,40.73329214799988],[-73.98877931699997,40.733965399999924],[-73.98990295999991,40.7344347899999],[-73.98996936399989,40.73490456699995],[-73.98997766699992,40.73497925499992],[-73.9899791279999,40.73505420099984],[-73.98997373899982,40.735129042999894],[-73.98996152699992,40.73520341999989],[-73.98994254999981,40.73527697099994],[-73.98991689999981,40.73534934199992],[-73.989874214,40.73540825799992],[-73.98945472099987,40.73598724699991],[-73.98920953899987,40.73630712099986],[-73.98901559399987,40.73656015399992],[-73.98859298399994,40.737142560999935],[-73.98817910299996,40.73773074899986],[-73.98774074499983,40.738312187999945],[-73.98730154899981,40.73890302599993],[-73.98703592799987,40.7392663789999],[-73.9868491859999,40.73952182199985],[-73.98636141699991,40.74018480099993],[-73.98587913199991,40.74085299999996],[-73.98542767799994,40.74147034899988],[-73.98497775499983,40.742088956999964],[-73.98452636699996,40.7427070419999],[-73.98407485299994,40.7433247179999],[-73.98400852,40.74329901799996],[-73.98245520799999,40.74264695999995],[-73.98085965399993,40.741969767999905],[-73.98131180499988,40.74135092399991],[-73.98176150799992,40.740733112999905],[-73.98221134499993,40.7401145349999],[-73.98266497499989,40.73949733299986],[-73.98041832999985,40.73855053099987],[-73.97949062699986,40.73815979199986],[-73.97891574499987,40.737917658999876],[-73.97805226499996,40.7375539539999],[-73.97849845599995,40.73679095699989],[-73.97857449799984,40.736677280999864],[-73.97890917399987,40.73616412599992],[-73.9793481959999,40.73555311199989],[-73.97944606000004,40.73541451499994],[-73.97978904000004,40.734961816999906],[-73.98009050499998,40.734544370999906],[-73.98020496200002,40.73438532199987],[-73.98041991299985,40.73408982099988],[-73.980644989,40.733779319999904],[-73.98105323699987,40.73320848199997],[-73.98149910399985,40.732618595999924],[-73.98180339299985,40.73220479799991],[-73.98196782199994,40.7319825609999],[-73.98232282599996,40.73149788999992],[-73.98238628799993,40.73141124499994]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000579634566998","objectid":"113","shape_leng":"0.032745350566","location_id":"113","zone":"Greenwich Village North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99136388099987,40.72755978299991],[-73.99154832699986,40.72708947099994],[-73.99314656999991,40.727867202999896],[-73.99425278499996,40.72841245699992],[-73.99506103499998,40.728810771999875],[-73.99581237099986,40.7291805329999],[-73.99657214499979,40.729552233999904],[-73.99606314799985,40.73015526099991],[-73.99556245499996,40.73071521599994],[-73.99697435499994,40.73140883199992],[-73.99861225599987,40.73221542999989],[-74.000066577,40.7329292359999],[-73.99975771599985,40.73334132199989],[-73.99955589199998,40.73361059599991],[-73.999187803,40.734134833999896],[-73.99871443800002,40.73478386099987],[-73.99853021599989,40.73503789199989],[-73.99827418999986,40.73539113999988],[-73.99780442999989,40.736032157999894],[-73.99734132799996,40.736667888999925],[-73.99683993899998,40.73736088899995],[-73.99361688399992,40.73600449199991],[-73.99171498799983,40.73521530099993],[-73.99119899299986,40.73501236899992],[-73.9907539679999,40.734839154999875],[-73.98990295999991,40.7344347899999],[-73.98986852099996,40.73352711499992],[-73.99002687699983,40.73275628399994],[-73.99021190999987,40.731996333999895],[-73.99039009999987,40.731288523999865],[-73.99050558599987,40.73056495599995],[-73.99072530399991,40.729878686999896],[-73.99075728499993,40.7297408309999],[-73.99093053599996,40.729142295999914],[-73.99112256699988,40.72856796599994],[-73.99135869199992,40.72778246999996],[-73.99136388099987,40.72755978299991]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000470207704945","objectid":"114","shape_leng":"0.0317270347711","location_id":"114","zone":"Greenwich Village South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99257987399992,40.724201554999915],[-73.99260322299988,40.724136449999946],[-73.99267182399991,40.72416025399984],[-73.99339891300001,40.7244125049999],[-73.99345769099995,40.72443289599994],[-73.99417930499997,40.724692406999914],[-73.99490827399991,40.724951228999934],[-73.99532907899994,40.72508373999996],[-73.99584577599984,40.72520835299988],[-73.9967717579999,40.72543194399992],[-73.99761019599993,40.72579713799992],[-73.99836119299998,40.72616746799987],[-73.9991182469999,40.72654231299988],[-73.99991579199988,40.726934712999864],[-74.00063239199994,40.727286611999915],[-74.00139033499991,40.727660001999894],[-74.00214891499996,40.728035366999904],[-74.00269315099997,40.72831405399993],[-74.00281726599992,40.72836312899994],[-74.00250642399995,40.72901638499997],[-74.00220337299997,40.72965325599995],[-74.00213899299997,40.72979574399988],[-74.0016846549999,40.73058156199995],[-74.00141242499994,40.731065255999916],[-74.00095442299988,40.731706097999954],[-74.00051066399996,40.73231522299996],[-74.000066577,40.7329292359999],[-73.99861225599987,40.73221542999989],[-73.99697435499994,40.73140883199992],[-73.99556245499996,40.73071521599994],[-73.99606314799985,40.73015526099991],[-73.99657214499979,40.729552233999904],[-73.9958123719999,40.729180532999926],[-73.99506103499998,40.728810771999875],[-73.99425278499996,40.72841245699992],[-73.99314656999991,40.727867202999896],[-73.99154832699986,40.72708947099994],[-73.99179379299984,40.72639145899994],[-73.9920616679999,40.72564244299993],[-73.99220971099992,40.72523128999992],[-73.99232642199998,40.72490823199993],[-73.99257987399992,40.724201554999915]]]]}},{"type":"Feature","properties":{"shape_area":"0.000260415337217","objectid":"116","shape_leng":"0.0681164844265","location_id":"116","zone":"Hamilton Heights","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.93924885699987,40.82829635099988],[-73.93968952899993,40.827656573999896],[-73.9401395379999,40.82703868999988],[-73.94059472699999,40.82641360399988],[-73.94104840800001,40.82579262999991],[-73.94150312699996,40.82517136699994],[-73.94195569699997,40.82455443999992],[-73.94242953999996,40.8239091569999],[-73.94292366900005,40.8232605869999],[-73.9435059449999,40.82262775299988],[-73.94404986399994,40.82205159199989],[-73.94460364599989,40.82146198099991],[-73.94515456999994,40.82087626499993],[-73.94607828700005,40.82126321599991],[-73.94723844699998,40.82175398599991],[-73.94808289799983,40.82210802199994],[-73.94854029799983,40.82148762299991],[-73.94992194399984,40.8220723139999],[-73.95037710599996,40.82144561799988],[-73.95082880000002,40.82082793699989],[-73.9529102909999,40.8216969469999],[-73.95357262899981,40.82197589199988],[-73.95367103499984,40.82201753399995],[-73.953769274,40.822058690999896],[-73.9556966079999,40.82287647699994],[-73.95573074999992,40.82289125699989],[-73.95576937299988,40.822904320999896],[-73.95634010399982,40.82309232799989],[-73.95651468499985,40.82312012799986],[-73.95682824599992,40.8231650789999],[-73.9570826419999,40.823201547999865],[-73.95715187399986,40.82321376599985],[-73.95722203099996,40.82322595899993],[-73.95950897919587,40.823595788951415],[-73.95953101411841,40.823619182180664],[-73.95953800225304,40.823629334087286],[-73.95954284439091,40.823639168452445],[-73.95954472552475,40.82364494182927],[-73.95954522180324,40.82364733759967],[-73.95953351105088,40.82368501839732],[-73.95955575493869,40.82369379776886],[-73.95901612941891,40.82450418849924],[-73.95899582803376,40.82449642742513],[-73.95725896977147,40.827117309873124],[-73.95694866420463,40.82700055393508],[-73.95631784510306,40.827944215388555],[-73.95620054528379,40.8279012265975],[-73.95620373779566,40.827896986099844],[-73.95622394360245,40.82787008739143],[-73.955039129784,40.82741343191182],[-73.95469736619506,40.8279183855142],[-73.95454188062122,40.827861476365506],[-73.95446469977213,40.827974169698734],[-73.95446458034706,40.827974332149964],[-73.95436068010201,40.82811788301517],[-73.95427220906045,40.82823654314243],[-73.9542165362577,40.828307470855506],[-73.95416950644189,40.82836086924023],[-73.95413649135837,40.82839340956268],[-73.95406111804229,40.82846213245149],[-73.95403271717643,40.82849042349065],[-73.95402106678668,40.828502980304506],[-73.95398614911781,40.82854351625173],[-73.95395406407437,40.82858535816411],[-73.95359128626802,40.829097720648726],[-73.95297619362613,40.83009020327108],[-73.95234497932466,40.831019858645064],[-73.95219759081193,40.83122045489184],[-73.95214990407374,40.8312747172501],[-73.95169902461552,40.83191599677561],[-73.9515984038694,40.83204708164592],[-73.95140314324226,40.83232213003094],[-73.95131641118994,40.83245051197062],[-73.95119348573833,40.832647134665194],[-73.95109620887554,40.83280509670182],[-73.95105949632541,40.83289766190666],[-73.95105224571309,40.83292243763382],[-73.95099727522977,40.83311027766789],[-73.95096613500132,40.83321670328974],[-73.95093576231477,40.833293997985656],[-73.95066373627958,40.83363599766629],[-73.95042306202323,40.83404708748849],[-73.95024424006594,40.8342674146756],[-73.95015521048293,40.83439675940792],[-73.94997855399998,40.83443366399996],[-73.94985590499991,40.83445928699996],[-73.94977616199992,40.83445596499997],[-73.94970807799987,40.834449289999945],[-73.94964119799997,40.83443432999993],[-73.94957431799986,40.834419361999934],[-73.94955175300004,40.834410715999894],[-73.94941570599993,40.83435858999992],[-73.94919448899992,40.8342106589999],[-73.94890543299992,40.83406529899992],[-73.94829108099988,40.83386118099985],[-73.94592558100007,40.83280648999992],[-73.94582395199988,40.83276546099989],[-73.94571933699994,40.83272141299989],[-73.942979662,40.8315679799999],[-73.94136799599993,40.83089083799995],[-73.94034643199987,40.83045784199989],[-73.94017089799992,40.83038439099989],[-73.93962569899988,40.83015583699997],[-73.93899743399992,40.82988885299995],[-73.93864026699997,40.82973887399988],[-73.93896034899993,40.82898632999993],[-73.93924885699987,40.82829635099988]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000931462821313","objectid":"120","shape_leng":"0.0832612702158","location_id":"120","zone":"Highbridge Park","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.92295449499989,40.85885076199988],[-73.92282845999992,40.856851408999916],[-73.92277921199988,40.8568261979999],[-73.92263334899997,40.856831752999895],[-73.92204492207946,40.856854159792],[-73.9220746492405,40.85677949112047],[-73.92215747201129,40.85676624723815],[-73.92216865123653,40.85673844640939],[-73.92214637179917,40.85672634039559],[-73.92210975280419,40.856720271081564],[-73.92216714714418,40.856663482235554],[-73.92221972224736,40.85664175431945],[-73.92224682591336,40.85661396435389],[-73.92229299113583,40.8566272949924],[-73.92233282511857,40.85660797677499],[-73.92234437219699,40.85660230078275],[-73.92235458615987,40.856595304853194],[-73.92236320797554,40.856587166207184],[-73.92237001880541,40.85657809205398],[-73.9223748457777,40.85656831197291],[-73.92237756617774,40.85655807349529],[-73.92237142612484,40.85628034182682],[-73.92234465243865,40.85625312276869],[-73.92237468673567,40.85621505323654],[-73.92237580882698,40.85597834922766],[-73.92234459387056,40.85568233590739],[-73.92229611007241,40.855663835114505],[-73.92227873064479,40.85565498884374],[-73.92240035875272,40.85551005597432],[-73.922669296953,40.855179774960696],[-73.92281985673772,40.85498867651119],[-73.92290114139594,40.8548855053087],[-73.923132985165,40.85458947031775],[-73.92341584183607,40.854225806362244],[-73.92360595220674,40.853977198034684],[-73.92400939220502,40.853436953917885],[-73.92444065139927,40.852840472704436],[-73.92467021184008,40.852506639577925],[-73.92497396914037,40.85207090936957],[-73.92502191229713,40.8520217104241],[-73.92503326859799,40.851993784944625],[-73.92507294866871,40.85194222070442],[-73.9251098027101,40.851892817511],[-73.92514666528864,40.85183695594673],[-73.92515518101455,40.851815475919025],[-73.92517217729034,40.851802592329285],[-73.92521754031038,40.85173813710844],[-73.92527707938275,40.85164791170491],[-73.92529694152745,40.85160708720739],[-73.92534796606829,40.851538348338785],[-73.92542451604855,40.851422334244376],[-73.92548973032294,40.8513267343892],[-73.92553224547352,40.85127303036422],[-73.92554359303259,40.851242951311264],[-73.92563999034672,40.85109901600742],[-73.92566267418448,40.851068937044985],[-73.92573638681277,40.8509550715729],[-73.92575544274924,40.85092631771205],[-73.92585363309088,40.85077814704242],[-73.92587970419625,40.850752743447984],[-73.9258946157337,40.850716021158725],[-73.92602877508632,40.850514127209415],[-73.92623817249392,40.85020717547982],[-73.92625607778918,40.85018092828886],[-73.92649455759486,40.84983926318877],[-73.9267143909258,40.849532892486465],[-73.92692303519823,40.84925053211069],[-73.92711679645474,40.848968160769864],[-73.92725466369204,40.848763440050845],[-73.92740369127668,40.848557312118054],[-73.92752293332553,40.848379413766985],[-73.92765334858233,40.848187403075315],[-73.92797377830429,40.84772713626884],[-73.92813798976522,40.8474916337005],[-73.92821693262097,40.84738013744654],[-73.928391510366,40.84713222929974],[-73.92842200947663,40.84708268101525],[-73.92845501928952,40.847031473785755],[-73.92848994827723,40.846981957881525],[-73.92928544019534,40.845854221201265],[-73.92932522842061,40.84579501208142],[-73.92938078797037,40.84571308802428],[-73.92942845919356,40.84564416196216],[-73.92961778841166,40.845371976856384],[-73.92967631216537,40.84528959996815],[-73.92971850477531,40.84523177826372],[-73.92976558965158,40.845155498584745],[-73.9298142904901,40.84507738364217],[-73.92986949219896,40.844983883071116],[-73.92992306713143,40.84489407370509],[-73.92998963816926,40.844769196937264],[-73.93004648072018,40.844660929727574],[-73.93009844615622,40.84455511760717],[-73.93015203635413,40.844449305942874],[-73.93022352213245,40.844284441595754],[-73.93027389095322,40.84416349199061],[-73.93031939529575,40.844044140613846],[-73.93039902075682,40.84382880869292],[-73.93045266598449,40.8436811598807],[-73.93049978822178,40.84355565022295],[-73.93054530049922,40.84342854608869],[-73.93056966892286,40.8433719473011],[-73.93057942780858,40.84333749991762],[-73.93062818153543,40.84320584088485],[-73.93067529907344,40.84308525801471],[-73.93069805828584,40.843023119393514],[-73.93072736300049,40.8429397055029],[-73.93077282921934,40.84281025121564],[-73.93078580763273,40.842793033211535],[-73.9308020456184,40.8427659647572],[-73.93081019415833,40.842717972930494],[-73.93089465201413,40.8425383401419],[-73.93097488039662,40.842400432568006],[-73.9312222988684,40.84193119781963],[-73.93152929047892,40.84138536615741],[-73.93183459772912,40.84083694824566],[-73.93216198837912,40.840255026320825],[-73.9327955073118,40.83912367646816],[-73.93295967475893,40.83878569889997],[-73.93309911785128,40.838543384623826],[-73.93316799815203,40.838421587995605],[-73.93326662858152,40.83825017256957],[-73.93335677225113,40.83808776694384],[-73.93341799707589,40.83797177345045],[-73.93346646603968,40.83789121675665],[-73.93353109087465,40.83776619294515],[-73.93363822412816,40.83757930304679],[-73.93377509137271,40.837371160788706],[-73.93390943779711,40.837132723576715],[-73.93401488559304,40.836934226122665],[-73.93410248267041,40.83676602712268],[-73.93419813061857,40.836572646434874],[-73.9342843711121,40.836383690973754],[-73.9343123461022,40.836318349308975],[-73.93436121591056,40.83620061961779],[-73.93460027799988,40.83609686799992],[-73.93467393099985,40.836064902999915],[-73.93474569399996,40.836092093999916],[-73.93479886299984,40.8361101159999],[-73.93485740300004,40.83598502599991],[-73.93496274099988,40.83575993399989],[-73.93506336299993,40.83567765899993],[-73.93530787999994,40.83547772399988],[-73.93572624299988,40.83515634699995],[-73.93649557099988,40.83456879499995],[-73.93700641599989,40.834193109999894],[-73.93705905900006,40.83416598899989],[-73.93729666499993,40.833977743999945],[-73.93729719799981,40.8339773209999],[-73.93795718299988,40.83345441799987],[-73.93838508899995,40.8331135029999],[-73.93857474699988,40.8329150849999],[-73.93862894999997,40.83285794199988],[-73.93868316299985,40.832800788999904],[-73.9387736019999,40.83266321199991],[-73.93890834499989,40.832480356999945],[-73.93894859799995,40.832417335999914],[-73.9390289729999,40.832291496999915],[-73.93913480799989,40.832097594999915],[-73.93922536499997,40.831899659999934],[-73.93927114599987,40.83176179199989],[-73.93927116899984,40.83176171999991],[-73.9392711939998,40.83176165699991],[-73.93933313199983,40.83162629999988],[-73.93941078699996,40.83149507599992],[-73.93941083399996,40.831494994999915],[-73.93950338699985,40.83136945999996],[-73.93960960099984,40.83125111899992],[-73.93960970799996,40.83125100199988],[-73.93960982599997,40.83125089499988],[-73.93972831400002,40.83114089799994],[-73.93980468099991,40.83107011299992],[-73.93980484699988,40.83106995999987],[-73.93980498999994,40.83106978999995],[-73.93987048999986,40.83099197699993],[-73.9398705739998,40.83099188599995],[-73.93987063299983,40.83099179599987],[-73.93992383199988,40.8309082759999],[-73.93992389199987,40.83090817699985],[-73.93992395099986,40.83090805999994],[-73.93996366299984,40.8308206059999],[-73.93996368699993,40.83082053399987],[-73.93998939900003,40.830730965999855],[-73.94007905799997,40.8304639569999],[-73.9401708989999,40.83038439099996],[-73.94034643299983,40.8304578419999],[-73.94037033200001,40.83133125399993],[-73.94036830799989,40.83146049199992],[-73.94034688799985,40.83159040499989],[-73.94030591799994,40.83171845099985],[-73.94024600800003,40.83184212099991],[-73.94016848499993,40.8319590559999],[-73.94007535599995,40.83206722799986],[-73.93967601899988,40.83268537099987],[-73.93962608699985,40.832798753999896],[-73.93962606299986,40.83279880799989],[-73.93962603899988,40.83279885299988],[-73.93955995000002,40.832908696999894],[-73.93955986799993,40.83290884099993],[-73.93955977199981,40.83290896699988],[-73.9394782749999,40.833013327999886],[-73.93947814499981,40.833013488999924],[-73.93947800199997,40.83301364299994],[-73.93938222499987,40.83311083599996],[-73.93938216599997,40.83311089899993],[-73.93938209499981,40.833110962999875],[-73.93927389999998,40.83319934299994],[-73.93927371099988,40.83319949599997],[-73.93927348499993,40.833199648999894],[-73.9391548789999,40.83327799299992],[-73.93849196699979,40.83384379999993],[-73.93840360699998,40.83390946299992],[-73.93832027799995,40.833978817999935],[-73.93824224799982,40.834051641999935],[-73.93816976599996,40.83412770199994],[-73.93810306499991,40.8342067539999],[-73.93804235799993,40.83428854499991],[-73.93798783999988,40.834372813999956],[-73.93793968599998,40.834459289999856],[-73.93789804799981,40.83454769599993],[-73.93786306199998,40.83463774999997],[-73.93775116199998,40.834890575999964],[-73.93738281099989,40.83569072899993],[-73.93702353899988,40.8364689469999],[-73.93669078700003,40.83719324899995],[-73.93638316899992,40.83785012499988],[-73.93623075799998,40.838077855999884],[-73.93610200500004,40.83822716899989],[-73.93595950299988,40.838369897999904],[-73.93580416699986,40.8385049769999],[-73.93563711299996,40.83863141999997],[-73.93545962199988,40.83874840399992],[-73.93533073299984,40.83887479599988],[-73.93533061499988,40.83887491299989],[-73.93533051899982,40.83887503999995],[-73.93521776599987,40.839015821999936],[-73.93521772999993,40.83901586699992],[-73.93521769499985,40.83901592099991],[-73.93512487199997,40.83916933099994],[-73.9351247769999,40.83916948499991],[-73.93512471799994,40.83916963699992],[-73.93505508799984,40.8393332359999],[-73.93501119299988,40.83950397199993],[-73.93499463699986,40.83967805499989],[-73.93499462399987,40.839678135999925],[-73.93499462399996,40.83967821699988],[-73.93500574300005,40.83985180199986],[-73.93500575299987,40.83985191099993],[-73.93500577799999,40.839852009999916],[-73.93504373300003,40.84002151299995],[-73.93504374400003,40.84002156699993],[-73.93504376899986,40.84002162099989],[-73.93510666600004,40.84018372699994],[-73.93519161599997,40.84033539999994],[-73.93519169999996,40.84033554399989],[-73.93519180599998,40.84033568799992],[-73.93529543199986,40.84047481799996],[-73.93543637099998,40.84075133099986],[-73.93559506299997,40.841173399999924],[-73.93562818399985,40.841279099999944],[-73.93562826699996,40.84127936199993],[-73.93562830199987,40.84127961399994],[-73.93564242499978,40.841389129999904],[-73.93564244799997,40.841389282999934],[-73.93564243699991,40.84138944599988],[-73.935636661,40.841500139999944],[-73.93563664999986,40.84150019499988],[-73.93561111099991,40.84160880699991],[-73.93561108599988,40.841608895999876],[-73.93561105099988,40.8416089949999],[-73.93556697199989,40.841712527999924],[-73.93514017399997,40.8423116739999],[-73.93467106399996,40.84295724299987],[-73.93421198500002,40.843568902999955],[-73.933715538,40.844246374999926],[-73.93323248400002,40.8449099219999],[-73.933150441,40.84502194299994],[-73.93277020399985,40.8455411059999],[-73.93232515199996,40.8461539009999],[-73.93224030199994,40.84626460299991],[-73.93218663399993,40.84634306699996],[-73.93210093699993,40.846457729999884],[-73.93207258099989,40.84649567899991],[-73.93204002799989,40.84653350699988],[-73.93201002999993,40.84657596599988],[-73.93198004399996,40.846618414999895],[-73.93191507399995,40.84671052399989],[-73.93185010299997,40.846802632999925],[-73.93139355399987,40.84742823099986],[-73.93116151700002,40.8477406009999],[-73.93088430099981,40.84811893799988],[-73.9306210789998,40.84848097699991],[-73.92970731599995,40.84812261199989],[-73.92898242699984,40.849256121999915],[-73.92886675399986,40.849392312999925],[-73.92873382199987,40.84952048899989],[-73.92858520000006,40.84963880199997],[-73.92842287999987,40.84974567999992],[-73.92824918899996,40.84983985399994],[-73.92747680599985,40.85069436999992],[-73.927079823,40.85143234299991],[-73.92703315699981,40.852200774999886],[-73.92769565699982,40.8524877819999],[-73.92723934899986,40.85311537199989],[-73.92679937899987,40.853717144999926],[-73.92469199999985,40.856641996999905],[-73.92467094699998,40.85681088899992],[-73.92466977999999,40.8569826109999],[-73.92468915299989,40.85715512199993],[-73.9247291889999,40.857326286999886],[-73.92478952099987,40.8574939969999],[-73.92486929999991,40.85765619099987],[-73.92496717399985,40.8578110039999],[-73.92508143699999,40.85795678799993],[-73.92518924999993,40.85802753699994],[-73.92531748399992,40.858090806999954],[-73.925465479,40.858142410999974],[-73.92563075799984,40.85817795199989],[-73.92580872899991,40.858193419999964],[-73.92599285799992,40.8581858659999],[-73.9261752689999,40.85815409599992],[-73.92634775499995,40.85809897099994],[-73.92650299499998,40.85802341899991],[-73.92663553999984,40.85793192399994],[-73.92674232299986,40.857829767999874],[-73.92682273599989,40.85772223799992],[-73.92687811100001,40.85761400599994],[-73.92691117499996,40.857508759999874],[-73.92712222099993,40.858109610999854],[-73.92709951599984,40.85827552099992],[-73.92705253299991,40.85844209099991],[-73.92698078699978,40.85860624099996],[-73.92688470899988,40.85876482899988],[-73.92676563099991,40.85891478399986],[-73.9266257519999,40.8590533259999],[-73.92646803499991,40.859178123999854],[-73.92629594799985,40.85928741399989],[-73.92611328799985,40.859380110999965],[-73.9259203249999,40.85950140899994],[-73.92573839899995,40.85963767999989],[-73.9255703789999,40.859788079999895],[-73.92541898499994,40.85995133099994],[-73.92528662599987,40.860125796999974],[-73.92517535599984,40.86030947899993],[-73.92508669599982,40.86050012699994],[-73.92502162200003,40.86069531099992],[-73.92498050399993,40.86089251899991],[-73.92496310699987,40.861089282999934],[-73.92496778999988,40.861253467999916],[-73.92496864099992,40.86128326999995],[-73.92499818399988,40.86146373799991],[-73.92474153399992,40.861593637999924],[-73.924677287,40.86149664499993],[-73.92461430599997,40.86140156099989],[-73.92411747399994,40.86065512499988],[-73.92295846599977,40.85891378099997],[-73.92295449499989,40.85885076199988]]]]}},{"type":"Feature","properties":{"shape_area":"0.000163195647796","objectid":"127","shape_leng":"0.0600188855815","location_id":"127","zone":"Inwood","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.911224294065,40.87302771883775],[-73.91119073224566,40.87298467599477],[-73.91118400043388,40.87298831795382],[-73.91117439655734,40.872984663421995],[-73.91118017602021,40.8729744565152],[-73.91116864796129,40.87297226012854],[-73.91116674737339,40.872956220865504],[-73.91115332406393,40.87294308042572],[-73.91110344780436,40.87288470905089],[-73.91109962664044,40.872867938744996],[-73.91110445375335,40.872851175101246],[-73.91108430768067,40.872826360167416],[-73.91105552733826,40.87280081839454],[-73.91103635995363,40.87277163688558],[-73.91103927429148,40.87274830755421],[-73.91101240352126,40.87272203768021],[-73.91099227963159,40.872689938350334],[-73.91098078938774,40.87266003201782],[-73.91096737028887,40.8726439838647],[-73.91096164062033,40.87261700189777],[-73.91094435651671,40.8726082351562],[-73.91091462693844,40.87257393920995],[-73.91083208878284,40.87251773000828],[-73.91076301659224,40.872452058077684],[-73.91069663181787,40.87236327354684],[-73.91066886250452,40.872318082527606],[-73.9106487727767,40.87229624946581],[-73.91064402620876,40.87226205286499],[-73.91060004692918,40.87218492862952],[-73.91056469338127,40.87211653582045],[-73.91054082062271,40.87205832757491],[-73.91053797212396,40.872033597817236],[-73.91055333016271,40.87201833783434],[-73.910544749547,40.87198632794732],[-73.91051802379026,40.87190629880136],[-73.91049514192561,40.87182555244867],[-73.91048468158361,40.871761537525806],[-73.91047920100607,40.87172972553631],[-73.91047327677899,40.871695343065966],[-73.91046185402595,40.8716415112769],[-73.91045522870999,40.87157532001962],[-73.91045053766994,40.87149967593997],[-73.91044577257622,40.87148803744208],[-73.91042949267286,40.87148292792279],[-73.91043239004443,40.87146329950375],[-73.91044771865839,40.87146112338387],[-73.91045350986802,40.87143349263081],[-73.91045545985003,40.87140367908884],[-73.91045068458797,40.87139058263127],[-73.91043824727869,40.87137747855179],[-73.91045264466976,40.8713629380159],[-73.91046990523188,40.871353496918864],[-73.91047856276914,40.87132877558034],[-73.910499658267,40.8713171583159],[-73.91051786233251,40.87131208375771],[-73.91052747017778,40.87129536119792],[-73.9105504764678,40.871283014168284],[-73.91056680858036,40.871258300446634],[-73.9105582087164,40.87124083253429],[-73.91056588782178,40.87122847529583],[-73.91058704261461,40.8711732190149],[-73.9105985494958,40.871164493788534],[-73.91061103840086,40.871139046347885],[-73.91062831291488,40.87112014990978],[-73.91066096630357,40.87106126526174],[-73.91066290216686,40.871051081702696],[-73.910672492682,40.87103800475036],[-73.91069358025322,40.87103219563057],[-73.91070605869153,40.871015482982855],[-73.91071567489408,40.870991483050425],[-73.91072912439586,40.87096749563152],[-73.91073681875089,40.87094422427526],[-73.91072726861505,40.870918039087265],[-73.91071292770269,40.87089983835427],[-73.91069092913636,40.87086854714837],[-73.91069192441397,40.87084309096915],[-73.91070344390971,40.870824919459565],[-73.91070443211592,40.870804560661924],[-73.91072840254334,40.87078929726526],[-73.91073130565934,40.8707653015184],[-73.9107389951068,40.870745668085036],[-73.91074959513284,40.870705676166885],[-73.91075731220944,40.87066495362825],[-73.9107372219756,40.870643847959045],[-73.9107612369148,40.87059586166744],[-73.91076412223113,40.87058494994798],[-73.91076797207829,40.870571139989956],[-73.91076321449745,40.870554404624095],[-73.910771854801,40.870533322179696],[-73.91077478077005,40.87050132069525],[-73.91075950216381,40.87045621254697],[-73.91076623112325,40.870445313013256],[-73.91078255041361,40.87042204781848],[-73.91076915471747,40.87040603533581],[-73.91077305792284,40.870352945480015],[-73.9107778959443,40.870318766837286],[-73.91077411735417,40.870279485149254],[-73.91075785297797,40.87026202120585],[-73.91077897510436,40.87023076285048],[-73.9107818820916,40.87020385002602],[-73.91078863932837,40.870171851669056],[-73.91078961731874,40.87015003373559],[-73.91081268992717,40.870096959196715],[-73.91080986642974,40.87005258956975],[-73.91080989861791,40.87002859159875],[-73.91081758861237,40.87001768409285],[-73.91081282552356,40.86999586172145],[-73.91082053654102,40.86996022499773],[-73.9108234376424,40.86993767965712],[-73.91081674002804,40.86993331586905],[-73.91083402520907,40.86990569346968],[-73.9108407482736,40.86989041671913],[-73.9108407706945,40.8698736949313],[-73.91085708459481,40.86985333858793],[-73.91085711578782,40.86983007017777],[-73.91084850117832,40.86982351689345],[-73.91084755376188,40.86981333110147],[-73.91086099421386,40.86979588140576],[-73.91086678151244,40.8697704381356],[-73.91088311464894,40.8697355388011],[-73.91086874328361,40.86973116088065],[-73.91087931262922,40.86971371717353],[-73.91088893770015,40.86968390016123],[-73.91088991976903,40.86965917352723],[-73.91085928331742,40.86964751556358],[-73.91088227999221,40.86964170687792],[-73.91090242290286,40.869622812609265],[-73.9109149158664,40.869595185825965],[-73.91092931612711,40.86957846642498],[-73.91092070672006,40.86956755453764],[-73.91092169441231,40.869547186351866],[-73.91093033139221,40.86953701733965],[-73.91092363633766,40.86952318935023],[-73.9109457240888,40.86948829494994],[-73.91095152625854,40.86945120817018],[-73.91092950706621,40.869435919113364],[-73.91096019309789,40.869410486341906],[-73.91099086451533,40.86940469176467],[-73.91101288698583,40.869418523362796],[-73.91104353600879,40.869420725127576],[-73.91106176168185,40.8694076558008],[-73.91113645047578,40.869440437276346],[-73.91119295273501,40.869457211291966],[-73.91125998364576,40.86948562818122],[-73.91130786590509,40.86950821324815],[-73.91135000667573,40.86952205974031],[-73.91138545202726,40.86952063722174],[-73.911442974879,40.869492316562216],[-73.91146694984837,40.86947415352528],[-73.91147752414803,40.86945234244303],[-73.91147470849903,40.869410882204654],[-73.91146613195859,40.8693752336082],[-73.91142686201691,40.86936211004542],[-73.91141921168854,40.86935264984735],[-73.91140292777331,40.86934972847732],[-73.91139623561234,40.86934244714698],[-73.91136078970678,40.86933442355124],[-73.91135794914872,40.869311873114164],[-73.91112525892672,40.869213505408005],[-73.91111955311597,40.86917858855775],[-73.91109943435848,40.86917857305972],[-73.91106400513745,40.869166911456745],[-73.91103335740765,40.869155253026946],[-73.91105736488242,40.86911162543575],[-73.91107752901732,40.869078187477406],[-73.91108138261407,40.869061459425666],[-73.91107757570234,40.86904327606211],[-73.91109483782506,40.869031655730765],[-73.91109389484103,40.869019290133835],[-73.91112043564152,40.869006199729476],[-73.91113515331632,40.86897277565782],[-73.91112177734426,40.868952397578404],[-73.91114059177055,40.86893395120445],[-73.91113013545254,40.86892030091883],[-73.91114364443597,40.86889530382795],[-73.91114965452033,40.868880531589426],[-73.91116612307725,40.86887713149074],[-73.91120057610415,40.868864659790056],[-73.91125149289986,40.868861286183495],[-73.91128294662256,40.868847676345666],[-73.91130393727755,40.868824955426426],[-73.9113281775882,40.86880243953576],[-73.91133483134575,40.86878534909652],[-73.91133742099721,40.86877427396471],[-73.9113297074864,40.86875863646886],[-73.91133402644324,40.86874039636799],[-73.91132547908168,40.86871823689665],[-73.91133149891803,40.86870521125037],[-73.91132553554417,40.868675895507614],[-73.91133500160275,40.86865765936163],[-73.91135046077642,40.868646595289825],[-73.91134705123666,40.86862379245795],[-73.91135909150219,40.86860621531272],[-73.91136427055301,40.86858340919443],[-73.91139004972909,40.868563240128715],[-73.9114098549045,40.86851308940594],[-73.91141932680448,40.8684915930923],[-73.91144165907038,40.86847662530261],[-73.91148208144206,40.868408255175645],[-73.91149242138631,40.868375035257806],[-73.91149244825743,40.868354846413126],[-73.91150538755127,40.86830338506651],[-73.91151485871004,40.8682812392571],[-73.91152432337303,40.868264966127796],[-73.91153547484777,40.86826431698233],[-73.91154065941286,40.86824542871927],[-73.91158019244979,40.86820376706928],[-73.91160166210436,40.868186197122384],[-73.91162485562174,40.868174480740095],[-73.91165319817412,40.86815430536876],[-73.91166781354046,40.86813542482227],[-73.91171163037997,40.86810028506055],[-73.91172833168766,40.8680744889103],[-73.9117319206429,40.86806062376698],[-73.91173006189777,40.86804016393434],[-73.9117338348191,40.868030179937016],[-73.91172569759559,40.86803017371232],[-73.91172571085134,40.8680201880116],[-73.91172510380609,40.86800353710152],[-73.91173640142544,40.867991172662656],[-73.91173516231117,40.86797738507468],[-73.9117552250194,40.86796598305694],[-73.9117527627056,40.86793505776837],[-73.91176907763841,40.867913187887574],[-73.91178038282324,40.8678956019256],[-73.91179668040857,40.86789561438441],[-73.91180859603989,40.86788230457578],[-73.91179420262449,40.86786802111718],[-73.91179676558265,40.867831400035136],[-73.91180556034618,40.86781047911382],[-73.91182376049142,40.867789088776355],[-73.91184571092025,40.86777625586335],[-73.91187101089474,40.867759489718864],[-73.91188960227053,40.86774775335029],[-73.91189225260952,40.86772591741011],[-73.91191159865868,40.867700205672485],[-73.91184774646815,40.867672520472475],[-73.91199296785679,40.86750583452553],[-73.9120975526718,40.86737319112113],[-73.91222962953469,40.86721546219407],[-73.91245215298915,40.86694055877057],[-73.9126175467601,40.86673955984179],[-73.91273173919514,40.866605212711306],[-73.91255219352705,40.866528624292194],[-73.91254775130287,40.866514943004354],[-73.91282859693649,40.86615711135718],[-73.91312015100736,40.86578124232253],[-73.91351997708159,40.86526747116958],[-73.9138448505671,40.864848338592154],[-73.9139186313323,40.86474558440355],[-73.91393526952008,40.86473928454506],[-73.91403866833014,40.86471050057713],[-73.91416821692901,40.86466640191283],[-73.91425257819593,40.86464572510954],[-73.91431200712502,40.86462502269582],[-73.91438922696749,40.86462417974643],[-73.91492387927858,40.864580378919136],[-73.91492863719179,40.86456956663371],[-73.91454037626015,40.864412351623365],[-73.91447397606235,40.86431128599491],[-73.91441113392617,40.864173627375536],[-73.9150440759955,40.864436721607696],[-73.9150740494132,40.86444650490859],[-73.91508583854264,40.86444814391995],[-73.91516833371625,40.864439254176354],[-73.91525511928769,40.86443362651925],[-73.91543189718274,40.86441830355374],[-73.9154286973113,40.86440772916068],[-73.91543408398833,40.8643874009978],[-73.91545872397363,40.86438416877071],[-73.91545342726465,40.86433373708637],[-73.91563236347605,40.86430947317944],[-73.91563874300478,40.8643485145793],[-73.9156644439211,40.864350153818044],[-73.9157115910561,40.86434286717415],[-73.91575872905088,40.86434209128957],[-73.91581658566602,40.86433481225365],[-73.91586052063045,40.86432590208421],[-73.91589911645785,40.86430803808506],[-73.91592270819694,40.864280401402205],[-73.91593561439066,40.86424218421198],[-73.9159313804981,40.86420396508695],[-73.91592605810227,40.8641730558767],[-73.9158982423084,40.86414619304341],[-73.91587148065646,40.8641290910356],[-73.91585434906487,40.86412257697171],[-73.91584686790445,40.8641103696352],[-73.91579009737725,40.86410300812719],[-73.91574189992429,40.86409647019708],[-73.91572596025567,40.86409562529628],[-73.9156672828416,40.864086648919944],[-73.91561569079903,40.864075356830625],[-73.91558377690811,40.8640706510481],[-73.9155387298444,40.864066818623165],[-73.91549340827902,40.864066193949895],[-73.9154398263038,40.86407835707759],[-73.91540554211757,40.86408158273297],[-73.91538444080764,40.86408030195847],[-73.9153745421635,40.864079701332074],[-73.91535981968394,40.86407729022841],[-73.91534579103364,40.86407312961483],[-73.91533281441582,40.86406732572735],[-73.91532122117133,40.86406002676066],[-73.91531130731791,40.86405141908448],[-73.91530571233524,40.864042939557436],[-73.91529828280513,40.86403531519251],[-73.91528923936099,40.864028772408474],[-73.91527885056384,40.864023505504335],[-73.91526742492745,40.86401967088995],[-73.91524067177384,40.863996068174735],[-73.91521584698249,40.86397595269107],[-73.91519574800094,40.86394522473583],[-73.91518803106224,40.86389774401879],[-73.9151850595422,40.86387946104222],[-73.91518192994755,40.86386020413749],[-73.91518119486989,40.86384311506673],[-73.91517880018044,40.863787451908316],[-73.91517693846923,40.863744186521835],[-73.91517656557124,40.8637355194391],[-73.91517539779056,40.863708386201246],[-73.91517556429707,40.863680433750886],[-73.915200710796,40.863652186226076],[-73.9152181857278,40.86364108139574],[-73.91525443919686,40.86361804378021],[-73.91529676393407,40.86359864401922],[-73.91530810246218,40.86359047369598],[-73.91534455813895,40.863564205684476],[-73.91536190015128,40.863547232567136],[-73.91537404288228,40.86352873067105],[-73.91541657363635,40.86344790631757],[-73.91542702548192,40.86342917098901],[-73.91546863429258,40.8633624976231],[-73.91547682444238,40.863346107296714],[-73.9154851646404,40.86330071832317],[-73.91547306854308,40.86328033060862],[-73.91545987478224,40.863257073924885],[-73.91545061536698,40.863232984517246],[-73.9154549655414,40.86320845729238],[-73.91542295700886,40.86319418063079],[-73.91541083335659,40.86319548646494],[-73.91534506689356,40.86316454277737],[-73.9154109612744,40.8630949190698],[-73.91538673051149,40.86308438420073],[-73.91544970533424,40.86300651049479],[-73.91549965939643,40.86293812779098],[-73.91552015328232,40.86291007496551],[-73.91556578044927,40.86293107187449],[-73.91557595266735,40.86291610425661],[-73.91556299694936,40.862909251121],[-73.91557991520047,40.86289599834803],[-73.91558892372463,40.86290113918815],[-73.91559964505785,40.86289215924693],[-73.91559401542857,40.86288915679958],[-73.91560361016737,40.86287975337306],[-73.91561827252399,40.862878908221205],[-73.91567199779999,40.86290242787803],[-73.91568204906034,40.86289390578287],[-73.91569323361948,40.86287981889348],[-73.91571907457929,40.86285286403297],[-73.91578014796721,40.86278915736011],[-73.91581868929809,40.862751251544594],[-73.91583883849174,40.862731434183324],[-73.91585768842066,40.86271494020015],[-73.91586450572528,40.862708975484104],[-73.91586962339923,40.862704495961346],[-73.91593363168721,40.862648487694265],[-73.91595185469565,40.86263145582462],[-73.91595260030206,40.862630756958566],[-73.9161051792775,40.86248814480872],[-73.91616935439103,40.862441260343836],[-73.9162048494689,40.862421286040465],[-73.91622522141265,40.86240541779581],[-73.91627635012742,40.86236559143216],[-73.91639175003213,40.86227570227626],[-73.91640019183043,40.86226912657568],[-73.91642605482255,40.86224898054916],[-73.91649196679447,40.86219763869997],[-73.91652512043825,40.86218050396303],[-73.91653438522638,40.86217571564996],[-73.91656892746097,40.8621578639007],[-73.91659639029284,40.86214637960492],[-73.91660191778598,40.86214195529302],[-73.91661720458566,40.86212972006312],[-73.91663823024982,40.862112890466776],[-73.91664696334841,40.8621059005061],[-73.91666173979016,40.86209363474733],[-73.91672483714147,40.86204125761551],[-73.91673206785232,40.862034730435695],[-73.91674689045284,40.86202134865994],[-73.91675431445412,40.862014645383695],[-73.91676153411372,40.862008128077925],[-73.91678113004234,40.861990437862325],[-73.91678584948336,40.86198617595878],[-73.91679534822482,40.8619776012672],[-73.91685100780661,40.861963608813674],[-73.91687889367468,40.86195358002902],[-73.91692039865875,40.861931727543194],[-73.9169581550374,40.86193325556352],[-73.9169843735389,40.86192504083443],[-73.91700967075877,40.86191278695556],[-73.91701546163455,40.86190998158957],[-73.91705129801854,40.861892622976505],[-73.91706909419574,40.86187826898196],[-73.91709135961965,40.86186030823942],[-73.91715278759457,40.86181076114889],[-73.91723056919916,40.86173654373122],[-73.91727034392622,40.86169469967212],[-73.91729467741676,40.86167941823068],[-73.91734277917362,40.86161732807046],[-73.91737841920231,40.86157097798817],[-73.91740810708951,40.86153273761919],[-73.91740994469338,40.86148637270622],[-73.91746019820957,40.86142946988304],[-73.91748061393716,40.86139863458939],[-73.91750401182631,40.86136332486962],[-73.91751560442543,40.86134992426702],[-73.9175329272891,40.86133573604431],[-73.91754749618079,40.86132313129051],[-73.91756413342188,40.861306835801585],[-73.91757176600544,40.86129211697167],[-73.91759256564323,40.861276364714385],[-73.91761405307706,40.861261125565434],[-73.9176563633175,40.861221191772415],[-73.9176882562444,40.861192821694004],[-73.91772917654819,40.86114499922022],[-73.91778534143992,40.861093504262975],[-73.9178082344227,40.86106355285196],[-73.91782702380144,40.86104278280522],[-73.91782221945564,40.86102443659887],[-73.91783553764998,40.86099693592737],[-73.91782468139061,40.86098042213539],[-73.91782136420316,40.860948901791126],[-73.91784103780006,40.86093144631542],[-73.91786115746794,40.86090065580484],[-73.91786536368912,40.86088446784961],[-73.91787707054957,40.860883836076674],[-73.91788211332283,40.86087367385555],[-73.91790472454431,40.86084987200048],[-73.91790211673528,40.86083961320201],[-73.91792190583864,40.86082542617216],[-73.91792234646313,40.86081399922542],[-73.91788387387606,40.860802221270625],[-73.91792828566327,40.86074989768184],[-73.91795061771704,40.86073198472936],[-73.91805221056595,40.86062109843894],[-73.91826264968334,40.86040482431119],[-73.9184343925178,40.86022153339532],[-73.91836074527978,40.860195809044086],[-73.9183764802733,40.86017013802983],[-73.91838738720058,40.86013529739786],[-73.91839903543182,40.860096197508376],[-73.9183931121764,40.860080469421916],[-73.91841071714774,40.86004867742146],[-73.91842828384382,40.860056892617],[-73.91843100240942,40.860045612185054],[-73.91843508111556,40.860017915606264],[-73.91845133777615,40.85999124584131],[-73.91846755096878,40.85999228321194],[-73.91849190290432,40.859970760616775],[-73.91850002964881,40.85995024476262],[-73.91852845077686,40.859918459210604],[-73.91855953955259,40.85990719830251],[-73.9185879382561,40.85989387361192],[-73.91861094928478,40.8598631103016],[-73.91860422359034,40.8598354076015],[-73.91860966058975,40.859811808084224],[-73.91862051432182,40.85978206428477],[-73.91864215241455,40.85976771710835],[-73.91866650284997,40.859739008230505],[-73.91867866057468,40.859748246660274],[-73.918694889946,40.85973492157373],[-73.91869354554858,40.85972877034594],[-73.91870302556356,40.85971645820534],[-73.91868681416331,40.85970516392412],[-73.91873839393087,40.85964830753148],[-73.91872079932321,40.85964222493354],[-73.9188014004669,40.85955809573262],[-73.91877796600042,40.85954675131652],[-73.9188857796496,40.85943916349721],[-73.91890338201662,40.85941804164173],[-73.91900350576367,40.85931346590101],[-73.91913611131903,40.85917299234001],[-73.9192321799137,40.85907661750323],[-73.91933772085359,40.858963833604314],[-73.91940131157715,40.858899249081375],[-73.91943853541449,40.85885542134399],[-73.91948096295053,40.85881393735841],[-73.91950213660932,40.85879113379047],[-73.91952379146707,40.858783477504694],[-73.91954642281223,40.858791579133346],[-73.9195470792652,40.85879866699753],[-73.91981340987077,40.858912646598796],[-73.92009437526832,40.85902815900783],[-73.92029013424884,40.8591061774847],[-73.92028080078518,40.85911527525441],[-73.92036070029987,40.859148711450665],[-73.92041198649032,40.85914773801527],[-73.9204346715058,40.859120946591695],[-73.92044466588774,40.859124492077136],[-73.92046134307469,40.85910326112519],[-73.92032551794716,40.85904349210987],[-73.92026958923736,40.85901867159204],[-73.92024228428149,40.85901106140345],[-73.92020833439094,40.85899586467843],[-73.92019834633355,40.858987258634485],[-73.92009647993548,40.85894521618595],[-73.9200691729343,40.858938614947505],[-73.9199566565892,40.85888644357646],[-73.91993534975472,40.858880863670024],[-73.91990871589499,40.85886719354676],[-73.91984679689212,40.858843882069536],[-73.91977223409496,40.858801858298555],[-73.91977424610867,40.858794772291134],[-73.91984149127127,40.85882719172704],[-73.91991539174748,40.858858598542184],[-73.91996200375141,40.8588783602684],[-73.9200731723362,40.858926343959574],[-73.92047868273168,40.85910409209883],[-73.92043089498743,40.85915500079302],[-73.92044055434963,40.85916101282756],[-73.92043350742907,40.85917235515496],[-73.92050906689407,40.859205103755116],[-73.92050818037727,40.859212450713834],[-73.92061976769563,40.85925924508324],[-73.92065316209771,40.85926326599645],[-73.92067070680027,40.85928997791521],[-73.92069792257463,40.85932403533704],[-73.92069348890548,40.859351398048304],[-73.92074793277061,40.859398152496816],[-73.92081547121266,40.85952299932422],[-73.9208248103987,40.85953762397836],[-73.92096638988286,40.85975936332765],[-73.92107166676891,40.85993630055118],[-73.92120245201015,40.86009856883876],[-73.92127091296308,40.86018804281668],[-73.92132187073445,40.86021411051681],[-73.92134032212975,40.86021678989969],[-73.92134560571333,40.8602127856764],[-73.92136406183813,40.86021146544214],[-73.92139397626858,40.86019080173543],[-73.92143091729879,40.86017480665244],[-73.92145906374984,40.86016281389905],[-73.92151623522281,40.860130812815925],[-73.921516243884,40.86012347346225],[-73.92154265042431,40.86009880067782],[-73.92155671740983,40.860099476650014],[-73.92159014848224,40.86007280002688],[-73.92163335462683,40.859964040976585],[-73.92166068449595,40.859890650861324],[-73.92168799950892,40.85983994521568],[-73.92170654327566,40.85976520860326],[-73.92171803927064,40.85971182591403],[-73.92170136023316,40.85969379563056],[-73.92171017514295,40.85967244240075],[-73.92173654090277,40.85967246028849],[-73.92173832622478,40.85964710317339],[-73.92172252011017,40.85963373783402],[-73.92170406731475,40.85963106018624],[-73.92168648450185,40.85963572198345],[-73.92169705737561,40.8596116954394],[-73.92168123846953,40.85960901907275],[-73.92166455789794,40.859592321597304],[-73.92167072779478,40.85958097977293],[-73.92166897017356,40.85957230640458],[-73.92164788416521,40.85957094989075],[-73.92164878482414,40.85955093398912],[-73.92169009920316,40.85954762061979],[-73.92173052181315,40.85955566202522],[-73.92171996443375,40.85956766728357],[-73.92175425140597,40.85956902335617],[-73.92174017250268,40.859579694083415],[-73.9217586285431,40.85957903969074],[-73.92176920814246,40.859559019797416],[-73.9218034849839,40.85955904303372],[-73.92180349832363,40.85954769753206],[-73.92181669341468,40.859542365833605],[-73.92181579426176,40.859560393069266],[-73.92183337804909,40.85955506534812],[-73.92183602852785,40.85954038021452],[-73.9218395729169,40.85952169724189],[-73.92182640001612,40.859508343081615],[-73.92180092709991,40.85949497170502],[-73.92178421372903,40.85949696897949],[-73.92178423413667,40.85947961643428],[-73.92178951542853,40.859475612188575],[-73.92179128111253,40.8594669330016],[-73.92178337916735,40.859460255864654],[-73.92177813999356,40.859436892705396],[-73.92175531523264,40.859410853164086],[-73.92174475909616,40.859411511742024],[-73.92172807855657,40.859394815447835],[-73.92173862702768,40.859391481185064],[-73.92174216515187,40.85937813885153],[-73.92178084462995,40.859376165858485],[-73.9218010581483,40.85938351774833],[-73.92181422123235,40.85939487385554],[-73.92184589125199,40.85938288171891],[-73.92182743857511,40.85937152320405],[-73.92179318314086,40.859352814615036],[-73.9218063875841,40.85932879922491],[-73.9218362834468,40.85932347934413],[-73.92184158900768,40.85930012500566],[-73.92185654400586,40.85929078717131],[-73.92185568980089,40.859270760194725],[-73.92186363617589,40.859240734187836],[-73.92187159464771,40.859200029084526],[-73.92186633783652,40.85918134014976],[-73.92184878326474,40.85916264288542],[-73.92181013137586,40.85914125631136],[-73.92182860052971,40.85912859049983],[-73.92181807326534,40.85911523813002],[-73.92179523134078,40.859103875462374],[-73.92175392059862,40.85909383425407],[-73.92171348569521,40.859096472454404],[-73.92170031211961,40.85908378468562],[-73.92168362346396,40.859074434775295],[-73.92167133304646,40.85906707886248],[-73.92165637797628,40.859075749092845],[-73.92164144199684,40.85906840025916],[-73.92162299102328,40.85905570001837],[-73.92157640358245,40.8590550019536],[-73.92156323476758,40.859038306848646],[-73.92153688128289,40.85902828444114],[-73.92151667805072,40.85901158404418],[-73.92149647545965,40.859005564926306],[-73.92148241816876,40.85899687380335],[-73.92145693841896,40.85898017148006],[-73.92143674687564,40.85896481260309],[-73.92141478438363,40.85895210943488],[-73.92140688831236,40.85893942522687],[-73.92139545451528,40.858940083845006],[-73.92138491884843,40.85893207207082],[-73.9213620792983,40.85891937700612],[-73.92134098678977,40.85891268984172],[-73.92132253891833,40.858907337627066],[-73.92130672674394,40.8588993128658],[-73.92129619437267,40.8588799538981],[-73.92131378782533,40.85887529166448],[-73.92134542016208,40.85888532810863],[-73.92137001739772,40.85889669038685],[-73.92138847158147,40.85889670296219],[-73.92137003870111,40.8588786714329],[-73.92133313153455,40.858866633349265],[-73.92130940178662,40.858863943160955],[-73.92127775129002,40.85886926170835],[-73.9212558013679,40.85884655352703],[-73.9212391392654,40.85881451204279],[-73.92123916377011,40.85879381975475],[-73.92124971927129,40.85878448837617],[-73.92125502240955,40.85876313160802],[-73.92126384154847,40.85873710468035],[-73.9212568347567,40.858715082986926],[-73.92123928232213,40.85869371179081],[-73.92121027761029,40.85868901775321],[-73.92118832732727,40.858666311233264],[-73.92117253002358,40.858645615841816],[-73.92113298285777,40.858638906647386],[-73.92110400043417,40.858616194633974],[-73.92110930043289,40.85859751288116],[-73.92112073232282,40.85858818278336],[-73.92110317429248,40.85857215153363],[-73.92108911428319,40.858566801779055],[-73.9210856169332,40.85855611977917],[-73.92107155243102,40.858553444528184],[-73.92110236769079,40.85851275393425],[-73.92111383643037,40.85847271718302],[-73.92112177944212,40.85844535685077],[-73.92109189655196,40.85844132909271],[-73.92108224017782,40.85843265148383],[-73.92106819230459,40.858417288031646],[-73.92106558355202,40.85839726855678],[-73.92105857633999,40.858374571228296],[-73.92107355499465,40.8583452163224],[-73.92107885124753,40.85832986610281],[-73.92105864446829,40.85831717344756],[-73.92107887262824,40.85831184831973],[-73.92108767646545,40.85829984124802],[-73.9210639508839,40.85829381914131],[-73.92099712882886,40.85830377722352],[-73.92098748015538,40.858289758969825],[-73.92094165735571,40.85828441491401],[-73.92092950082889,40.85825501412292],[-73.92091459857794,40.85821896663772],[-73.92093869016941,40.858120674461524],[-73.92081205174519,40.858082255605574],[-73.92066414958995,40.85803608476008],[-73.9206600093851,40.85802724891317],[-73.92062427494882,40.85801681477228],[-73.92060931660876,40.858018696153046],[-73.9204843854752,40.85823254806245],[-73.92035142875443,40.858195220619145],[-73.92036477249754,40.85816493709914],[-73.92047278308782,40.858195304332554],[-73.9204827854302,40.858171961497824],[-73.92042547044453,40.85814731130443],[-73.92043129405509,40.8581372208709],[-73.92049359805799,40.858165341058694],[-73.92050776371386,40.85814200109049],[-73.92050777201234,40.85813505809411],[-73.92047369719569,40.858125570886756],[-73.92047870523538,40.85811294928194],[-73.92051858770813,40.85812623254581],[-73.92055690666027,40.858058100919905],[-73.9205244898293,40.858049874644045],[-73.92053115561134,40.85803978528797],[-73.92055940739405,40.85804926796663],[-73.92058272320153,40.85801141923441],[-73.92054366782155,40.85800066666607],[-73.92056616182882,40.85796439326245],[-73.92053125929229,40.857953013828954],[-73.92053626149328,40.85794544354678],[-73.92056783382262,40.857955559738315],[-73.92059865529568,40.85789878704374],[-73.92058121435349,40.85788362925947],[-73.92056957361469,40.85788866436666],[-73.92056458747452,40.85788297887913],[-73.9205828871062,40.85787415680172],[-73.92061195368183,40.85789563653846],[-73.92061194313827,40.85790446953135],[-73.92077315152532,40.85794118585793],[-73.92077568813255,40.85790332113988],[-73.92072417703403,40.85788498852889],[-73.92075084244313,40.857831995110466],[-73.92075835110651,40.857810540535226],[-73.92071431024054,40.85779473427549],[-73.92071848663913,40.85778338174717],[-73.92070601599154,40.857778321847256],[-73.92068020565321,40.85781995106413],[-73.92067272424282,40.857817424694986],[-73.92069520768324,40.85778083514134],[-73.9206311915981,40.85779593807325],[-73.92062871453668,40.85778458097081],[-73.92069356299953,40.85776789384213],[-73.92069440518277,40.857757169747714],[-73.9206786250252,40.857752747676464],[-73.9206744727128,40.85774390193743],[-73.92068280608277,40.857727500938644],[-73.92070610816093,40.857701014101934],[-73.92071524126256,40.85770985505422],[-73.92072604222552,40.85771238319908],[-73.92074102474629,40.8576997783191],[-73.92074018031833,40.857712392912646],[-73.9207118650148,40.85775592096779],[-73.92070770216483,40.85776664378533],[-73.9207176690908,40.85777233268964],[-73.9207209967533,40.857766652921526],[-73.92074591736552,40.857774872820706],[-73.92075009406679,40.85776289023625],[-73.92085894403364,40.85779577941521],[-73.92085476658923,40.85780840110435],[-73.92082485064823,40.85780143807837],[-73.92081902487526,40.85781341970117],[-73.92085806645605,40.85782607154625],[-73.92090874735563,40.857843772803285],[-73.92091792340256,40.857817277915004],[-73.92095947032028,40.85782740083621],[-73.92095530904551,40.857834971712904],[-73.92100848746315,40.857847632689],[-73.92101432159707,40.85783880318059],[-73.92100188046803,40.85781796615766],[-73.92098278238336,40.85780154635139],[-73.92098779381654,40.85777630838017],[-73.92096035984791,40.857787014262115],[-73.92095035684835,40.85781035713936],[-73.92082407985954,40.85775220748162],[-73.92083991421826,40.857721294888435],[-73.92096286020836,40.85777881319741],[-73.92097118010598,40.85777313684196],[-73.9209853172339,40.857764312351854],[-73.92098948520304,40.85774979964861],[-73.92097620645463,40.857735905051605],[-73.9209629044585,40.857741577492064],[-73.92092883675433,40.8577264083683],[-73.92093134355565,40.85772262741053],[-73.92092137657248,40.85771567858191],[-73.92091720674985,40.857721347894746],[-73.92091056810698,40.857719452843746],[-73.92091472483578,40.85771440436355],[-73.92090475572954,40.857709985133646],[-73.92090225899011,40.85771439581785],[-73.9208922874603,40.85771312803338],[-73.92089395343788,40.8577074558319],[-73.92087484340281,40.857701129947436],[-73.92087151368248,40.85770744044379],[-73.9208640314502,40.85770616565296],[-73.92086987022243,40.85769418520923],[-73.9208972809938,40.8577024067838],[-73.92090394377362,40.857694208574024],[-73.92091142601693,40.85769547347845],[-73.92090725459605,40.85770304384415],[-73.92091722324945,40.85770747178462],[-73.92092388660173,40.85769990379673],[-73.92093219665317,40.85770306094023],[-73.92092553330006,40.85771063010125],[-73.92093550328049,40.857715057538556],[-73.9209588081255,40.85768541149859],[-73.92088985451419,40.8576639061803],[-73.9209140083115,40.857619113275405],[-73.92089157534419,40.85761341584083],[-73.92088491030913,40.85762351560547],[-73.92081427830648,40.85760706042052],[-73.92078761914492,40.85765437063227],[-73.92077266841045,40.857649939761984],[-73.92079765383627,40.85760388767716],[-73.92077605235171,40.85759756056828],[-73.9207885591364,40.857571698701406],[-73.9207835691488,40.85756980360237],[-73.92071949545583,40.85763286578187],[-73.92069706927528,40.85762148676177],[-73.92075532130517,40.8575571591458],[-73.92077195797644,40.85754896662084],[-73.92078857040964,40.857562233308116],[-73.92079356302033,40.8575534032327],[-73.92090075662524,40.857582499179266],[-73.92089408405235,40.85759764155769],[-73.92091900484338,40.85760586142001],[-73.92092983808878,40.85759199222074],[-73.92098217660369,40.85761221698062],[-73.92100215706549,40.8575850987588],[-73.92094565691801,40.8575642327251],[-73.92095148909628,40.857556663495814],[-73.92101011202337,40.85757846860788],[-73.92101505160242,40.85757358148218],[-73.92101050029305,40.85757127391592],[-73.92101657172314,40.857561776989],[-73.92102453923798,40.85756407868502],[-73.9210319869216,40.857555044393585],[-73.92090011378151,40.85749428733865],[-73.92090943072884,40.85747877738355],[-73.92093729165354,40.857487262269146],[-73.92094474783686,40.85747033747435],[-73.92099676230845,40.85748447487976],[-73.92103583613053,40.85743935946252],[-73.9210135498486,40.85742946602829],[-73.92104891513684,40.85738152111153],[-73.92106933540855,40.857394233182],[-73.92109350791351,40.85738295630128],[-73.92116405945595,40.85743662069778],[-73.92113244274998,40.85745494138236],[-73.92107291328591,40.85751698028255],[-73.92112119690319,40.85753677083312],[-73.92118439137633,40.85752410721184],[-73.92122323658643,40.85752233035376],[-73.92130475209376,40.85742065143315],[-73.92136378026812,40.857399965363875],[-73.92140169782736,40.85738959755385],[-73.92145963506641,40.8573672528818],[-73.9215196726864,40.85734890638003],[-73.92155550463495,40.857321750596235],[-73.92158397059998,40.85728979192766],[-73.92159242598983,40.85726341560259],[-73.92158614447966,40.85723223373973],[-73.92157985204594,40.85721144384182],[-73.92155849622625,40.857152702522846],[-73.92155857155751,40.857088830629124],[-73.92159160704566,40.857065154233375],[-73.92161794209801,40.85705477965234],[-73.92164638409345,40.85704360657247],[-73.92166323981648,40.85703562380639],[-73.9217032680549,40.85702126106142],[-73.92174434054141,40.857013294715706],[-73.92180121504491,40.8569989433622],[-73.92183702160173,40.856992571921474],[-73.92186334597841,40.856991790499265],[-73.9218865189657,40.8569846112325],[-73.92190021806313,40.85697502778718],[-73.92191814231168,40.85695425312496],[-73.92194132896722,40.85693428361933],[-73.92196978492623,40.856911118312865],[-73.92204492207946,40.856854159792],[-73.92263334899997,40.856831752999895],[-73.92277921199988,40.8568261979999],[-73.92282845999992,40.856851408999916],[-73.92295449499989,40.85885076199988],[-73.92295846599977,40.85891378099997],[-73.92411747399994,40.86065512499988],[-73.92461430599997,40.86140156099989],[-73.924677287,40.86149664499993],[-73.92474153399992,40.861593637999924],[-73.92537318199992,40.8625808149999],[-73.92601092899994,40.86357366499991],[-73.92661948999994,40.86452429399989],[-73.92726915099985,40.865534559999944],[-73.92805770399998,40.866199363999954],[-73.92872203199992,40.8667426629999],[-73.92700250499986,40.86795125999991],[-73.92623313399997,40.868506137999915],[-73.92382143399999,40.869018381999915],[-73.9223436069999,40.86945904099991],[-73.92214424199993,40.86915018199993],[-73.92187285799986,40.86927147499992],[-73.92187269199987,40.86927154799988],[-73.92187252499991,40.869271627999865],[-73.921610721,40.8694056499999],[-73.92161064999992,40.869405685999936],[-73.92135975499993,40.869551853999894],[-73.92112156199988,40.869709123999876],[-73.92112131299997,40.869709285999875],[-73.92112107599998,40.86970946599991],[-73.92089662999997,40.86987701899989],[-73.91925481799977,40.871007841999926],[-73.91969887499998,40.87206477599995],[-73.91945895199983,40.8722492809999],[-73.91845930899993,40.873022052999936],[-73.91717669599988,40.87249897299992],[-73.9162778549999,40.87211564499995],[-73.91505692599983,40.87160289599991],[-73.91415003100002,40.871219850999864],[-73.9140098549999,40.87116059399995],[-73.91366488599988,40.87150058499987],[-73.91334258899985,40.871756027999936],[-73.91267976599984,40.87229176099988],[-73.91206172199999,40.872806091999934],[-73.91176119999992,40.873063789999925],[-73.91154281116533,40.87325370616174],[-73.91142580718564,40.87318173085132],[-73.91135863952978,40.873127721845506],[-73.91130490090681,40.87309194960777],[-73.91127418900135,40.87306348765569],[-73.911224294065,40.87302771883775]]],[[[-73.92151894059094,40.85660117062316],[-73.92159078705224,40.856496661134166],[-73.9215969651289,40.85649911033576],[-73.9216718169156,40.85639401600261],[-73.92168970374024,40.8564006434736],[-73.92175965629767,40.85630468180855],[-73.921823250446,40.85632912586351],[-73.9220295673179,40.856040055047735],[-73.92204171700534,40.85604505428097],[-73.92212909531288,40.85592262927441],[-73.92212701759904,40.855919408911056],[-73.92212563579955,40.855915977100395],[-73.92212498555783,40.8559124189683],[-73.92212508375181,40.855908829512146],[-73.92212592520553,40.85590529500261],[-73.92212749215773,40.855901909575984],[-73.92212974214682,40.85589875797036],[-73.92213261947896,40.85589592022434],[-73.92213604839007,40.85589346932677],[-73.92213994408347,40.855891467204145],[-73.9221442056687,40.85588996488286],[-73.9221487254288,40.8558890018259],[-73.92215338838638,40.855888600403496],[-73.9221580751638,40.85588877209428],[-73.92218505751369,40.855847415549796],[-73.9222189508469,40.85579546579659],[-73.92223557106671,40.85577118594847],[-73.92225931710543,40.85572561566736],[-73.92227219913848,40.855700892373285],[-73.9222811377406,40.85568693163889],[-73.92228832283236,40.855675713420055],[-73.92228837057658,40.85567563890435],[-73.92229611007241,40.855663835114505],[-73.92234459387056,40.85568233590739],[-73.92234217898556,40.855685461012676],[-73.9223363626243,40.85569298743926],[-73.92232971276387,40.85570159265731],[-73.92232888081013,40.85570267178517],[-73.92232785330081,40.85570400173132],[-73.92219572192109,40.85587499055045],[-73.92217874229384,40.85589696519633],[-73.92218117594763,40.85589995310889],[-73.9221829564415,40.855903194713854],[-73.92218404128785,40.85590660873356],[-73.92218440300834,40.85591010854004],[-73.92218403221776,40.85591360667985],[-73.92218293740308,40.85591701537637],[-73.92218114624346,40.855920249043876],[-73.92217870362472,40.85592322545872],[-73.92217567339655,40.85592587095338],[-73.92217212888958,40.85592811806574],[-73.92216815974786,40.85592991040065],[-73.92216386729518,40.85593120413541],[-73.92215935791673,40.85593196633969],[-73.92215474438092,40.85593217732165],[-73.92215014297035,40.8559318311289],[-73.92206335132519,40.85605391178446],[-73.92207704565449,40.85605913536592],[-73.92195201468988,40.85623699044721],[-73.92187322153111,40.85634966205607],[-73.92188760113714,40.85635513372336],[-73.9218175009566,40.8564542243656],[-73.92183549330599,40.856462141312434],[-73.92176508454392,40.856565868590216],[-73.92177019744629,40.85656789490128],[-73.92169841904696,40.85667230185494],[-73.92151894059094,40.85660117062316]]]]}},{"type":"Feature","properties":{"shape_area":"0.000207405982869","objectid":"128","shape_leng":"0.0702090290681","location_id":"128","zone":"Inwood Hill Park","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.92359742020388,40.878898712992644],[-73.9236171919141,40.87885275853596],[-73.92362423150792,40.87885490128636],[-73.92363695289211,40.87881535593209],[-73.92367919311681,40.878826074498626],[-73.92366647926977,40.87886349651294],[-73.92367773890643,40.8788656261365],[-73.92366219321842,40.87891158339879],[-73.92365233486954,40.878911576877584],[-73.92362973975199,40.878963943121555],[-73.92359172576555,40.8789521591663],[-73.92361150251905,40.878900860405935],[-73.92359742020388,40.878898712992644]]],[[[-73.9264055692112,40.87762147653742],[-73.92635080268249,40.87759232046259],[-73.9262952034438,40.87756537764221],[-73.92630825734184,40.87755054598149],[-73.92629847830014,40.87753324126217],[-73.92629265898066,40.877514937239674],[-73.9262909640355,40.87749615181876],[-73.92629344141879,40.87747741652433],[-73.92630002103081,40.87745926146291],[-73.92631051670104,40.877442200322804],[-73.92632463145766,40.87742671584046],[-73.92634196592843,40.87741324614079],[-73.9263534010335,40.87740645871844],[-73.92636692938808,40.877400016219504],[-73.92637867418443,40.87739558168086],[-73.9263910032764,40.87738349591492],[-73.92640802970631,40.87737059295211],[-73.92642110544408,40.87733596882139],[-73.92641753339738,40.877294193421214],[-73.92641611724352,40.87726616044384],[-73.92640746178061,40.877237432824344],[-73.92639977123254,40.8772210887617],[-73.9263991893142,40.877220013565],[-73.92637952771739,40.87719099712255],[-73.92635386246528,40.877164821268956],[-73.92632864338461,40.8771458606087],[-73.92630027044785,40.8771296702047],[-73.92626926759239,40.87711654902951],[-73.9262453844698,40.877107196388685],[-73.92615199405294,40.87708622922075],[-73.92605688918461,40.877070309564594],[-73.92596054274807,40.877059516576416],[-73.92586343379948,40.87705390392122],[-73.92575170680726,40.8770693823326],[-73.92564159048314,40.87709048786867],[-73.92559068716548,40.877102286852825],[-73.92549403426749,40.877128422489996],[-73.92539963430987,40.877158935721575],[-73.92530783107327,40.87719371542732],[-73.92524634149107,40.87722814955089],[-73.92519060669277,40.87726782779955],[-73.92514139843446,40.87731220075884],[-73.92510748792193,40.877350298819394],[-73.92507840203368,40.87739062951777],[-73.92504660587467,40.877409303874636],[-73.92501165764392,40.87742438784907],[-73.92497425597504,40.87743557990351],[-73.92493514854823,40.87744265630253],[-73.92489511714378,40.87744547558453],[-73.92482755466249,40.87744477528718],[-73.9247602128762,40.87744057495241],[-73.92469340614272,40.87743289418772],[-73.92466562648586,40.87742864594198],[-73.92463117456373,40.87742249513269],[-73.92455187350787,40.877404270395694],[-73.92447065956256,40.87739181072039],[-73.92438825846597,40.87738522744807],[-73.92428280917072,40.87736652931362],[-73.92417885993329,40.877343494966674],[-73.92407672001595,40.87731619293739],[-73.92397669329614,40.877284704453075],[-73.92397527867065,40.87728422323366],[-73.92391006772807,40.877260960104174],[-73.9238717096996,40.877242249493825],[-73.9238136130879,40.87722978627897],[-73.92375369171315,40.87722419516896],[-73.92369334793713,40.8772256070146],[-73.92363399400763,40.87723398877403],[-73.92357701900715,40.87724914428569],[-73.92353366131377,40.877264724938115],[-73.92348842591905,40.877276845938546],[-73.9234293956286,40.8772870102061],[-73.92336912887104,40.87729129167426],[-73.9233149012421,40.87729209093475],[-73.92326088083085,40.87728840831927],[-73.92320770869343,40.87728028752906],[-73.92315569321521,40.87726773224347],[-73.92310580095484,40.87725093071908],[-73.92305863152065,40.877230084878235],[-73.92303506229437,40.87720731455437],[-73.92300876211289,40.87718468513292],[-73.92294412537231,40.87713691678707],[-73.92294354888257,40.87713253970405],[-73.92292227478717,40.877094030120965],[-73.92288254092276,40.87706513321681],[-73.92286583578245,40.87705549586329],[-73.9228243580552,40.87703753047251],[-73.92279786519552,40.87702832748321],[-73.92277768846607,40.87702525300922],[-73.92276904248315,40.87703268590172],[-73.92276213709974,40.87702349534052],[-73.9227771360302,40.87701081720804],[-73.92278406427518,40.87700032286081],[-73.92276677289159,40.87699550255101],[-73.92274949451486,40.87698936702666],[-73.92272934926771,40.87696966040843],[-73.92269767779175,40.876944704783746],[-73.92265706349428,40.87692871165308],[-73.922631137663,40.87692257098524],[-73.92260748875238,40.87693567517189],[-73.9226075060566,40.876920808883476],[-73.92259771145176,40.876917298409786],[-73.92258387170894,40.87692253928839],[-73.92257466338114,40.87691422163937],[-73.92257120834556,40.87690634910445],[-73.92257641535174,40.876897158951586],[-73.92257007003337,40.876895848184894],[-73.92257758831417,40.87687923028559],[-73.92258912035129,40.87686829828595],[-73.92256839578593,40.87685735168328],[-73.92253610173903,40.87686826271068],[-73.92249578378302,40.8768419865078],[-73.9224837033913,40.87682404894122],[-73.92243706188535,40.87678901507315],[-73.92243362687847,40.876773263786816],[-73.92241576943685,40.876765822988446],[-73.92240887383943,40.87674831222904],[-73.92239907976202,40.876743057157164],[-73.922400623303,40.87673234126452],[-73.92240533581122,40.876699431748015],[-73.92241886633713,40.87663307471048],[-73.9224229921152,40.87655445689456],[-73.92240693330263,40.87647889402186],[-73.92241108552581,40.87638802009181],[-73.92243750433738,40.87622621072903],[-73.92244171582213,40.87607407695334],[-73.9224269873826,40.87601791226069],[-73.92241496389698,40.875941326184744],[-73.92241369514767,40.875879038367216],[-73.92241845190593,40.87583973536945],[-73.92241443957167,40.8758111424034],[-73.92242252812991,40.87580298010221],[-73.92242659071222,40.875778480956704],[-73.92242259483537,40.87574580815282],[-73.92242396062541,40.8757243604639],[-73.92242265440576,40.875694751448385],[-73.92243077867309,40.87564575148044],[-73.92244696222403,40.875613085202474],[-73.92247388452017,40.87558962682106],[-73.92247527129064,40.875560010903335],[-73.92249078070564,40.875526837409545],[-73.92252715989451,40.875470708211054],[-73.92254872142617,40.875434990583074],[-73.9225541393091,40.87540742215168],[-73.92257168317542,40.87535842849239],[-73.9225838173596,40.875328819782375],[-73.92259326010884,40.875309429326634],[-73.9226094679212,40.87525634854943],[-73.92264179478191,40.875216550231265],[-73.92265124753175,40.87518796562526],[-73.92264992358426,40.87516346285897],[-73.92265534021038,40.875136919827476],[-73.92265672015898,40.87510322472124],[-73.92265343019594,40.875045536722624],[-73.92265347533191,40.87500673563257],[-73.92265621964499,40.8749516003686],[-73.92266297766196,40.8749250582346],[-73.92265628020954,40.87489953416529],[-73.9226563300901,40.8748566527251],[-73.92265370811916,40.874806619622134],[-73.92265104634215,40.87477904576762],[-73.92264706229452,40.87473616162277],[-73.92265246019703,40.87471676794625],[-73.92263505079865,40.87465039011858],[-73.92263911310297,40.87462486404581],[-73.92265258491385,40.87460955596584],[-73.92263913448598,40.874606485471205],[-73.92264185921482,40.87457994063309],[-73.92262241329665,40.87453041004046],[-73.9226076645474,40.87449261572223],[-73.92258487775169,40.87441806653692],[-73.9225674567449,40.8743629189126],[-73.92253526184382,40.87428938947979],[-73.92253663536354,40.87426181832856],[-73.92253531894417,40.87424037754329],[-73.92250844284314,40.87421483823994],[-73.92248291316665,40.87419541609168],[-73.92245467613134,40.87418723004988],[-73.92244396077805,40.874149446459604],[-73.92241305509722,40.874120835910325],[-73.92239695345737,40.8740830488613],[-73.92237683031455,40.87404525123125],[-73.92234123070199,40.874002859089806],[-73.92232781274556,40.87397324191267],[-73.92227950313357,40.87387416555273],[-73.92226069249845,40.87385986117744],[-73.92226204657453,40.87384863303612],[-73.92224324758364,40.87382513568445],[-73.9222184093859,40.87378172534674],[-73.92220362984004,40.87376945924828],[-73.92218619484476,40.87372554881245],[-73.92216067057092,40.87369081785797],[-73.92211364251733,40.87365300102317],[-73.92208944494341,40.87363971185712],[-73.92206527090742,40.873608043774446],[-73.92203570759096,40.87358760930835],[-73.9219926791775,40.8735681752257],[-73.9219859680907,40.87355592443662],[-73.92196579224448,40.8735528389296],[-73.92194296317746,40.87352627732295],[-73.92191875466726,40.8735221817653],[-73.92189592800635,40.87348439059407],[-73.92186904474784,40.87347517824164],[-73.92183005389812,40.87345269423069],[-73.92178168307726,40.873416921132666],[-73.92172791772019,40.87337809225714],[-73.9216701428844,40.873330056596004],[-73.9216183807434,40.873302970870434],[-73.9215901530671,40.8732876340777],[-73.92149841910096,40.873247793849444],[-73.92141123301121,40.8732024497342],[-73.92132916660043,40.873151899122355],[-73.92125275808976,40.873096473550774],[-73.921169296781,40.87306939228805],[-73.92108198156424,40.87305347540085],[-73.92104702078318,40.87304425733171],[-73.92100265196892,40.87303606039706],[-73.92097844127738,40.873033999037375],[-73.92092598584571,40.873031918824836],[-73.92089505217784,40.8730278184436],[-73.92084932060317,40.87302778708621],[-73.92081299828271,40.87302571905911],[-73.92079015106097,40.873015491522644],[-73.9207740068131,40.873014463241574],[-73.92075652672875,40.873009344976154],[-73.92071319024366,40.87301051299764],[-73.92069726314591,40.8730063510054],[-73.92069129315439,40.87299878190671],[-73.92066636738936,40.87300027767256],[-73.92064442871197,40.872993446419365],[-73.92060953713961,40.8729858585973],[-73.92057463023556,40.872990373776126],[-73.9205606635804,40.87299414465016],[-73.92052973842686,40.87301305243241],[-73.9204938100222,40.87302892057548],[-73.92046088686524,40.87304176665674],[-73.92042797810988,40.8730523417989],[-73.92038905696707,40.87307123464822],[-73.92035813253032,40.87307878651478],[-73.92032920968069,40.873089364882055],[-73.92030226117289,40.87310599670292],[-73.92029230572703,40.873098416622625],[-73.92027634052175,40.873105978798655],[-73.92025736613591,40.873121103218885],[-73.92022292951731,40.873149462307765],[-73.92019300382896,40.87316533500905],[-73.92016706828103,40.87316759571542],[-73.92014910357753,40.87318120741504],[-73.92013213760733,40.87319179517843],[-73.92012314974757,40.87320768235057],[-73.92010118828746,40.87322053491069],[-73.92008222781284,40.873233389377276],[-73.92006027075733,40.8732522938619],[-73.92004627217649,40.873281811066754],[-73.92001431202269,40.87332190544188],[-73.91998535385889,40.87335215975609],[-73.9199758550652,40.87337902433251],[-73.9199658574108,40.87339642369029],[-73.91995189299274,40.87340776937151],[-73.91994884190137,40.873448640142286],[-73.91995979041688,40.873469845068826],[-73.91995279557032,40.87348573411187],[-73.91995376124532,40.87351147064185],[-73.9199577235154,40.87353115832614],[-73.91994374992086,40.87353946949144],[-73.91994074372579,40.87355385728065],[-73.9199357337655,40.873576554151356],[-73.91991976382093,40.873588655304864],[-73.91991776524846,40.87359320132476],[-73.91990280475248,40.87359394680504],[-73.91989579909402,40.87360907896863],[-73.91986389068701,40.8736060310184],[-73.91981902154345,40.873608269785905],[-73.91978312944534,40.873603697435584],[-73.91978308103732,40.873643823136156],[-73.91982295820223,40.8736499012699],[-73.9198628465619,40.87364614731621],[-73.91989077111431,40.8736461667043],[-73.91991668692258,40.873651479752745],[-73.91993362050847,40.873666629031426],[-73.91994956492047,40.87367648256047],[-73.91994555163063,40.873698432970734],[-73.91994054414333,40.87371961794944],[-73.9199465131935,40.873727951659475],[-73.91995149021679,40.873742336274965],[-73.91995446542514,40.873753693704764],[-73.91995942777578,40.873771103436646],[-73.91996637212853,40.87379608824889],[-73.91997433025301,40.87381804746398],[-73.91996733096013,40.87382788507755],[-73.91997828639676,40.87384302919795],[-73.9199917496795,40.87384417366738],[-73.92012428446928,40.87392222958632],[-73.92013926594399,40.873904076629906],[-73.92016516941842,40.87391847571556],[-73.92015018861089,40.87393662750303],[-73.92019105255761,40.873960122867445],[-73.92020902200159,40.87394272900417],[-73.9202369138315,40.87396166747345],[-73.92021794909964,40.87397754775454],[-73.9202877068482,40.874015444218784],[-73.92034849897662,40.8740503081534],[-73.92040330261301,40.87408365502706],[-73.92043917329222,40.87410637993942],[-73.9204720447048,40.87413668703333],[-73.92049844862419,40.874159793050396],[-73.9205433335032,40.874144678227346],[-73.92057619910041,40.874180279175135],[-73.92060608624132,40.874206791627785],[-73.92062699165683,40.87423481112878],[-73.92076966714161,40.87417738586543],[-73.92078761461624,40.87417891108441],[-73.92080255630347,40.87419405886663],[-73.92080751306929,40.87421526009999],[-73.92066084429216,40.874278743471514],[-73.92066980301328,40.87429691178115],[-73.9206857269419,40.87432341511571],[-73.92069665918827,40.87434840144939],[-73.92071107412367,40.874387393739674],[-73.92070010598974,40.874391933609424],[-73.92071604571976,40.87440632505257],[-73.92072498444587,40.874430554820826],[-73.92074290853479,40.87445175558191],[-73.92075785117514,40.874466146501845],[-73.92075483429562,40.874489612027126],[-73.92076677770551,40.87451081688577],[-73.92078070500605,40.8745312585311],[-73.9207816924167,40.87453958877671],[-73.92079265694505,40.87454716950531],[-73.92078865109977,40.87456306014473],[-73.92080359467634,40.8745766945262],[-73.92079957959791,40.87459107343412],[-73.92080954431921,40.874600922738345],[-73.92081650482736,40.87461379460437],[-73.92081649581893,40.87462135908939],[-73.92082945415412,40.87462894101476],[-73.92084240240087,40.87464333105765],[-73.92083940266566,40.87465241443042],[-73.92084337428213,40.87466452838157],[-73.92085235584491,40.874663778679036],[-73.92086879559815,40.87467627994869],[-73.92088273221307,40.87468839252237],[-73.92088671102694,40.87470429684725],[-73.92089167392983,40.87472095067331],[-73.9209056154877,40.87473912355144],[-73.92091956358946,40.87475124433698],[-73.92092254079128,40.87476184470561],[-73.92091453517739,40.874780010750214],[-73.9209155100288,40.87479817524274],[-73.92092349157225,40.874799693610235],[-73.92092746229659,40.87481332045575],[-73.9209384181303,40.87482770845203],[-73.9209473691218,40.87484285160678],[-73.92097230770959,40.8748413557891],[-73.92098723992623,40.87486407674106],[-73.92098721924138,40.874881483515736],[-73.92100015808852,40.87489512470691],[-73.92101610565861,40.87490270061613],[-73.92103202290917,40.8749345076661],[-73.92105493692358,40.874960259196556],[-73.92108133530783,40.874978061804434],[-73.92111420160488,40.87501366259345],[-73.92114009384979,40.87504849286096],[-73.92115600330543,40.8750772747615],[-73.92116695696885,40.875094688530055],[-73.92117492688537,40.87510604933731],[-73.92117491342296,40.875117405193684],[-73.92118186508976,40.87513784085071],[-73.9211698884575,40.87514389297377],[-73.92116987769633,40.875152969684855],[-73.92117284868004,40.87516811912251],[-73.92116885342608,40.87517568021374],[-73.9211698417931,40.87518325291774],[-73.92115787665247,40.87518853980348],[-73.92115986015386,40.87519611486263],[-73.92114389543798,40.87520366727274],[-73.92114588498156,40.8752067048147],[-73.92113391038936,40.875209721255395],[-73.9211319044239,40.87522183111014],[-73.92112690618701,40.87523469595512],[-73.9211109446201,40.87523846720639],[-73.92110394084428,40.87525284290744],[-73.9211129036416,40.87526723019338],[-73.92110691408502,40.87527631152839],[-73.92110491037751,40.87528539676059],[-73.9210799642233,40.87529294352374],[-73.92106199576551,40.87530883400249],[-73.92105700109649,40.8753194202021],[-73.92103602209794,40.875343628802725],[-73.92102403531776,40.875367844223476],[-73.92101105768876,40.875376920770776],[-73.92099010857669,40.87538523549415],[-73.92097812109449,40.87540036481026],[-73.92096913044006,40.875418521973565],[-73.920955153647,40.875429110728255],[-73.92093020805649,40.87543742320585],[-73.92092920057632,40.875446499233476],[-73.92091823046628,40.875453308385055],[-73.92091322183165,40.875464660315174],[-73.92090325515422,40.87546616638258],[-73.92089428451298,40.875457831169996],[-73.92087559199673,40.87546395002319],[-73.92084158803193,40.87545733501876],[-73.92079579222155,40.875450352408016],[-73.92076221925711,40.87543951476238],[-73.9207327312122,40.87541631556056],[-73.92067983077874,40.875397738296705],[-73.92057606461886,40.875365222461205],[-73.92053640420096,40.87533660421736],[-73.92047030646286,40.875292524993],[-73.92039300443471,40.87525384948979],[-73.92034213453782,40.87523372489072],[-73.9203024613251,40.8752159305375],[-73.92025056805598,40.87520816837106],[-73.92023398573666,40.875202823991025],[-73.92018482308941,40.875189096689034],[-73.92009707040329,40.875147034489174],[-73.91981895201579,40.875034348711836],[-73.91972463724571,40.8749961351941],[-73.91924742219437,40.874831044944585],[-73.91897439539596,40.87470861588605],[-73.91896727626954,40.87470937663401],[-73.91894286506647,40.87469700569053],[-73.91890319914951,40.87467379886838],[-73.918857942435,40.87464324876078],[-73.9188589780202,40.87463089568875],[-73.91884881993983,40.87461388732878],[-73.91885699002506,40.87458762583616],[-73.91887126163864,40.874568329706655],[-73.91889469405842,40.87455675644839],[-73.91894154174601,40.87452665921787],[-73.91899146424903,40.874486523480684],[-73.91901591932367,40.87446336168924],[-73.91903833950522,40.87443479585484],[-73.91908625963018,40.87436298815266],[-73.91911737112589,40.87430931388154],[-73.91916221498532,40.874249859633835],[-73.9192111816839,40.87415564878188],[-73.91922652147316,40.8740969478044],[-73.91923368469071,40.87406837125046],[-73.91924749339371,40.87401082192225],[-73.91925978641387,40.87393975445136],[-73.91926195569941,40.87383392226377],[-73.91925904468509,40.87372035852512],[-73.91926009034685,40.873689455653626],[-73.91927030351344,40.87366088122923],[-73.91928102175844,40.87363655754588],[-73.91926375452918,40.87361259137962],[-73.91921896474608,40.873617972027304],[-73.91893896566567,40.873302966470234],[-73.91862104668414,40.8731972942998],[-73.91855365026461,40.873180588115396],[-73.91853666560324,40.87319685767055],[-73.91853998447118,40.87322904265611],[-73.91854552710514,40.873256142715604],[-73.9185622051726,40.87329596461076],[-73.91857669301552,40.87331205769525],[-73.91860122675237,40.87332139429759],[-73.91862350877972,40.873347659666095],[-73.91864021482168,40.873374776470676],[-73.9186284370542,40.873420918526044],[-73.9186272845728,40.873451407369295],[-73.91860268946238,40.87349288492382],[-73.918551335354,40.87352079132854],[-73.91850556824869,40.87353938939763],[-73.9184731967847,40.873557151592706],[-73.91845086074116,40.873574920368135],[-73.91843599403886,40.873567021044586],[-73.918414036594,40.87358505191864],[-73.91842852157109,40.8735952279453],[-73.91839947532085,40.873628237548765],[-73.91838048803518,40.873642613995955],[-73.91835591726749,40.87366462284993],[-73.91833357491785,40.87368747088964],[-73.91830232945689,40.873695066371134],[-73.91828781665393,40.873708608859026],[-73.91826659956283,40.8737221454243],[-73.91824427174542,40.873733133679266],[-73.91821079469307,40.87374243042434],[-73.91818288978932,40.87375510703017],[-73.91817615884986,40.8737771196134],[-73.91815939815253,40.87380505857412],[-73.91813594089376,40.87382705878906],[-73.918106915921,40.873843129766485],[-73.91807901550598,40.87385157522655],[-73.91805893427565,40.873849867984006],[-73.9180516579742,40.87386254546655],[-73.91803715672657,40.87389725829062],[-73.91794108366345,40.8739831478103],[-73.91792902917979,40.87397889320507],[-73.91775468095318,40.87424853456615],[-73.91776990325637,40.8742543038425],[-73.9175772988473,40.87454867854727],[-73.91749921000535,40.87452007854011],[-73.91769066058586,40.874225222183256],[-73.91770931109484,40.87423249407926],[-73.91789032098379,40.87396247775168],[-73.91788506630628,40.8739602501475],[-73.91787144917501,40.87390499528865],[-73.91784685200199,40.87393101283528],[-73.91781448198516,40.87394623603753],[-73.91780777752835,40.87395724404439],[-73.91779327441755,40.87395300141786],[-73.91777764915211,40.87396314669118],[-73.91778097440154,40.87398008829645],[-73.91776812456737,40.873991514582436],[-73.91774021567048,40.87400673105857],[-73.91770785270614,40.874016027949004],[-73.9176434714112,40.87402630142592],[-73.9175903009546,40.87403575514311],[-73.91755115955162,40.87406777530256],[-73.91749486066541,40.87408434930755],[-73.91742914539073,40.87411754000315],[-73.91739625419048,40.874160243657684],[-73.91726640898547,40.874209993198725],[-73.91718819114,40.87424198521311],[-73.91711624585014,40.87425735872737],[-73.9170372269262,40.874303002166734],[-73.91698090690281,40.87432669780203],[-73.91685267654526,40.87433728573168],[-73.9167134990195,40.87435498785027],[-73.9166556014652,40.87438699433423],[-73.91658048205615,40.87443560224685],[-73.91644828715275,40.87449544308543],[-73.91634348667561,40.874523849889655],[-73.91621216322862,40.874503583365296],[-73.91609852720278,40.87450015889178],[-73.91601675124143,40.87451485046096],[-73.91589033125027,40.874519637324326],[-73.91576604987803,40.87452767756275],[-73.91568463084475,40.87452761810509],[-73.91557751037355,40.874519408904725],[-73.91540183736201,40.874503016307244],[-73.9152240214605,40.874486621868144],[-73.91506980141546,40.8744491021406],[-73.91498198606966,40.87442464213988],[-73.91463283278519,40.874326621096806],[-73.91422167905834,40.87419960364557],[-73.91419784904603,40.87418935531247],[-73.91390244516936,40.874096565043786],[-73.91358433902973,40.874029105900824],[-73.91349623201457,40.87399286752708],[-73.91334350989777,40.87395015089037],[-73.91329209830897,40.873941980883494],[-73.9132471240974,40.873927309609364],[-73.91319197797986,40.87389272024491],[-73.91314007075697,40.87386867985808],[-73.9130929525688,40.873854006909944],[-73.91303726119472,40.87384257993784],[-73.91297760373487,40.87384462648886],[-73.9128872888601,40.873835961915],[-73.91272877461884,40.8738065683737],[-73.91260884231676,40.8737674436236],[-73.91250176411434,40.87372832966795],[-73.91229017490778,40.87363544449129],[-73.91208146441699,40.87352884099815],[-73.91154281116533,40.87325370616174],[-73.91176119999992,40.873063789999925],[-73.91206172199999,40.872806091999934],[-73.91267976699986,40.87229176099989],[-73.91334258899985,40.871756027999936],[-73.91366488699992,40.871500584999886],[-73.9140098549999,40.87116059399995],[-73.91415003100002,40.871219850999864],[-73.91505692599983,40.87160289599991],[-73.9162778549999,40.87211564499995],[-73.91717669599988,40.87249897299992],[-73.91845930899993,40.873022052999936],[-73.91945895199983,40.8722492809999],[-73.91969887499998,40.87206477599995],[-73.91925481799977,40.871007841999926],[-73.92089662999997,40.86987701899989],[-73.92112107599998,40.86970946599991],[-73.92112131299997,40.869709285999875],[-73.92112156199988,40.869709123999876],[-73.92135975499993,40.869551853999894],[-73.92161064999992,40.869405685999936],[-73.921610721,40.8694056499999],[-73.92187252499991,40.869271627999865],[-73.92187269199987,40.86927154799988],[-73.92187285799986,40.86927147499992],[-73.92214424199993,40.86915018199993],[-73.9223436069999,40.86945904099991],[-73.92382143399995,40.86901838099993],[-73.92623313399997,40.868506137999915],[-73.92700250499986,40.86795125999991],[-73.92872203199992,40.8667426629999],[-73.92934104099999,40.86725723999994],[-73.92997974899997,40.86779614899997],[-73.93091942499993,40.868571000999935],[-73.93117877500005,40.86876886699991],[-73.93127671599983,40.86884359399991],[-73.93141437399996,40.868961927999905],[-73.93156536999994,40.86958215799991],[-73.9321985510756,40.8698448708717],[-73.93220600531866,40.87009644510452],[-73.93212328527157,40.870378943105216],[-73.93204740481396,40.870582903966586],[-73.9320315692666,40.8707572025347],[-73.93191377136804,40.87112949372268],[-73.9317844012482,40.87133442292377],[-73.93160149587301,40.87158387547001],[-73.9314682113937,40.871797716206544],[-73.93137655898947,40.87210862736062],[-73.93122107559076,40.87233532285592],[-73.93106254199596,40.87266680652867],[-73.93084511434465,40.87288717030783],[-73.93068381818156,40.87315687690047],[-73.92997686743148,40.87433896233042],[-73.92986215062544,40.87441844152513],[-73.9293191881939,40.875294438561],[-73.92917968255965,40.87555554896632],[-73.9290134580973,40.875738660592724],[-73.92859002632834,40.87609601029504],[-73.9283297696842,40.87635346958729],[-73.92814623603574,40.876522528943994],[-73.92803638576686,40.876582443008516],[-73.92796594643464,40.876617685376516],[-73.92753082127467,40.87671053481295],[-73.92689940502429,40.877216633932015],[-73.92660824434302,40.87750763121183],[-73.92653096278354,40.87758369178244],[-73.92648185718433,40.87761820301796],[-73.9264159145478,40.87761004770086],[-73.9264055692112,40.87762147653742]]]]}},{"type":"Feature","properties":{"shape_area":"0.000128848901918","objectid":"151","shape_leng":"0.0548899410999","location_id":"151","zone":"Manhattan Valley","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96371096499993,40.79301293399991],[-73.96417598599989,40.792362044999884],[-73.96525997299999,40.79280137099989],[-73.96701396999998,40.793559990999924],[-73.96987063299996,40.79473520499991],[-73.96941543899999,40.79536077899998],[-73.97073269599991,40.79591916999989],[-73.97082734199991,40.79595859999988],[-73.97093073199993,40.79600104799988],[-73.97225661799988,40.79656086499989],[-73.97365145399993,40.797148318999845],[-73.97413148099994,40.79734378899995],[-73.97507069999986,40.797713349999874],[-73.97521014699981,40.79777354799995],[-73.97539813999988,40.7978477439999],[-73.97549419399992,40.79788855199996],[-73.97563350899993,40.797946205999914],[-73.97582955799997,40.798021996999935],[-73.97635598099994,40.798254020999956],[-73.97639951915279,40.79827321034626],[-73.97628527884258,40.79843523541014],[-73.97583055785226,40.799092280913214],[-73.97578169321176,40.79915625678026],[-73.97579140130185,40.799209627886306],[-73.97576219486481,40.79926017354923],[-73.97554385822002,40.799528250637344],[-73.97526783234454,40.79993284953168],[-73.97508668067901,40.80018953363309],[-73.97496436808174,40.8003696341939],[-73.97483924435981,40.80055824326267],[-73.97466556722719,40.80081351473425],[-73.9744872252097,40.80105742889691],[-73.97414361823463,40.801516895341194],[-73.97394098366695,40.801809025864046],[-73.97389989052456,40.801889863531166],[-73.9737747724601,40.80204584594857],[-73.97372060455768,40.802167815280235],[-73.97361322463878,40.80229686038974],[-73.9735422772158,40.802356411250344],[-73.97336671067806,40.802630113346446],[-73.97320518045738,40.80283005827629],[-73.97312859120979,40.80297471550859],[-73.97307070537937,40.80305554844743],[-73.97303522902078,40.80307397374196],[-73.97292317001974,40.80324982284389],[-73.97286807262148,40.803320734176026],[-73.97287179090726,40.803356187573904],[-73.97279907800002,40.803329158999894],[-73.9726574479999,40.803276513999926],[-73.97257779799996,40.803247183999915],[-73.97250022199995,40.80321661299997],[-73.97150381000002,40.80283773599996],[-73.97032589799987,40.80238456099995],[-73.97027400499987,40.802359035999885],[-73.97021594799989,40.80233585099994],[-73.97004742199995,40.80226500999991],[-73.96858360799983,40.80163546999991],[-73.96798415999996,40.80139826599985],[-73.96787379699998,40.80135169799993],[-73.96775900399992,40.80130351599994],[-73.96571144299992,40.80043806999988],[-73.96286980099991,40.799239676999946],[-73.96147779999993,40.79865415599994],[-73.96004456499999,40.79804123499991],[-73.96052271699993,40.79736846899988],[-73.96097971799988,40.796738643999916],[-73.96144060699996,40.796110826999964],[-73.96189985499994,40.795479269999916],[-73.96235980199994,40.79485206099987],[-73.96280590599986,40.79423581299993],[-73.96371096499993,40.79301293399991]]]]}},{"type":"Feature","properties":{"shape_area":"0.000114203907779","objectid":"140","shape_leng":"0.0475842911325","location_id":"140","zone":"Lenox Hill East","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95854329689507,40.75849562296791],[-73.95877790811335,40.75827092092435],[-73.95893448599985,40.75833515499994],[-73.95903681099995,40.75838378299988],[-73.95972180399991,40.75866306399995],[-73.96196573699997,40.75961946099988],[-73.96177668399997,40.759879715999936],[-73.96176766499995,40.75989304099994],[-73.96172701399999,40.75994980699992],[-73.96169733399984,40.75998713799995],[-73.96167816899991,40.76001396599987],[-73.96164363299995,40.76005959199991],[-73.96162070799981,40.760094433999896],[-73.96152208599995,40.760230359999916],[-73.96106754499992,40.76085809299985],[-73.96060649299993,40.76148739799985],[-73.9601506909999,40.762114874999945],[-73.95969458599983,40.762740538999935],[-73.95923908799993,40.76336615799994],[-73.95878081199999,40.76399001699986],[-73.95832133999988,40.764616629999864],[-73.95786874099996,40.765242324999896],[-73.95741202499985,40.765868753999875],[-73.95695607099981,40.766493435999884],[-73.95649564199994,40.76711891499989],[-73.95599908699987,40.76780389299994],[-73.9555017079999,40.76848474299992],[-73.95503700499988,40.769120065999864],[-73.95457540899991,40.769754856999946],[-73.9541124529999,40.7703890789999],[-73.95364859999982,40.77102410799993],[-73.95318747599984,40.771656893999925],[-73.95268514999994,40.772339404999926],[-73.95043560599999,40.7713911029999],[-73.94807387899996,40.770394394999876],[-73.94779385500001,40.770249151999934],[-73.94771625099995,40.77021606799992],[-73.94766538399982,40.77019325299993],[-73.94761452999984,40.77017042899995],[-73.94752257899997,40.770129694999895],[-73.9474897547817,40.77011515400953],[-73.94814040181448,40.769416756358105],[-73.94866416477879,40.76885762439947],[-73.94908536768632,40.76827827079564],[-73.94937332131488,40.76788219105435],[-73.9495791207141,40.767628930179555],[-73.95006979303056,40.767025088383264],[-73.95066345154245,40.76638071134941],[-73.95122497666563,40.76577119897351],[-73.95176480900415,40.76516371184316],[-73.95230963181133,40.76455428860604],[-73.95336559963572,40.763368170911676],[-73.954418260786,40.76218410495111],[-73.95557264605307,40.761168326230354],[-73.95587222339078,40.760904712115575],[-73.95633318967775,40.76048658556384],[-73.95697841727626,40.75989675444593],[-73.9573173758794,40.759592212256514],[-73.95759869445274,40.75934231825778],[-73.95763772742096,40.75930673989833],[-73.9580049661682,40.758971999629246],[-73.95825660841928,40.758749261193095],[-73.9583612533255,40.75866024195484],[-73.95838528673994,40.75863979740061],[-73.95842620189605,40.75860387300684],[-73.95845501771939,40.75858090209874],[-73.95849119520824,40.75854590391523],[-73.95854329689507,40.75849562296791]]]]}},{"type":"Feature","properties":{"shape_area":"0.000116455098947","objectid":"137","shape_leng":"0.0461076242707","location_id":"137","zone":"Kips Bay","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97219641647804,40.74040257875024],[-73.97221685422322,40.74030762506154],[-73.97226753642127,40.740313743277184],[-73.9722700133414,40.74030857434567],[-73.97225332319164,40.740300105554866],[-73.97224837803633,40.74029117185863],[-73.97229979590853,40.740034962742975],[-73.97231030439093,40.74001851267486],[-73.97233141721733,40.7400109081997],[-73.97243888981417,40.74002174997318],[-73.97253745182257,40.73966141394607],[-73.97265743803044,40.739222754276966],[-73.97265528968896,40.73917826848007],[-73.9726506037967,40.73905826571552],[-73.97264431062423,40.73901746233535],[-73.97264512721954,40.738958668310985],[-73.97264674830716,40.73884587151235],[-73.97263256455133,40.738789470052794],[-73.97263100998644,40.738740265008055],[-73.97262787457508,40.73870906197222],[-73.97262630543392,40.73866586408449],[-73.97262792189784,40.738593869671085],[-73.97262084766338,40.73852066599611],[-73.9726192965622,40.738463068045895],[-73.97262753952535,40.73840038548476],[-73.97263884800155,40.73839530977717],[-73.97263833265164,40.73837968597632],[-73.97262807328735,40.73836796724543],[-73.97262452608486,40.73824336395957],[-73.9726327464413,40.73823242426211],[-73.97263327107359,40.738223833298434],[-73.97262254718066,40.738217068211725],[-73.97261946865977,40.73804427874751],[-73.97261474017301,40.73802986934807],[-73.9726060999748,40.737938672288784],[-73.97261872947428,40.73791467680059],[-73.9726124265646,40.73789787206911],[-73.97260457307685,40.73782227307573],[-73.97261404225611,40.73779827683594],[-73.97260621196618,40.73766627757036],[-73.97260583208758,40.73749474970565],[-73.97257739454064,40.73749433836131],[-73.97257959604842,40.73735478687316],[-73.97256998441054,40.73726378775497],[-73.97259412459493,40.73726174867489],[-73.97259521395056,40.73723114989956],[-73.97260003717393,40.737221768395315],[-73.97259458103935,40.73718868180281],[-73.97260563605106,40.73716588375281],[-73.97259459485838,40.73715508388077],[-73.97259775633782,40.737122685024104],[-73.97259776670337,40.73709748050962],[-73.97258360606305,40.73701588054919],[-73.97258445692434,40.73687548339179],[-73.97259038224664,40.73676965534477],[-73.9725829245608,40.73674468509609],[-73.972579797985,40.736690689579284],[-73.97257525871015,40.73664650893144],[-73.97255622610943,40.73646148552752],[-73.9725633368432,40.73644588163205],[-73.97248994174741,40.73580328010761],[-73.9725101678601,40.735787129859595],[-73.97286939178467,40.73577086128555],[-73.97441385816511,40.736414393859],[-73.97445975070453,40.73629401971837],[-73.974416773548,40.73627772610679],[-73.97441154346602,40.73628527904678],[-73.97439952343301,40.73628408408965],[-73.97402692104305,40.73612576724549],[-73.97404679254456,40.73609992993463],[-73.97442932366866,40.736260633491526],[-73.97442775474407,40.73626619954391],[-73.97446647047282,40.73627845682991],[-73.97450376013232,40.736064588444],[-73.97447471755295,40.73606238071294],[-73.97444082924032,40.73605047965705],[-73.97443372879933,40.73605371686953],[-73.97414062018366,40.73595565716735],[-73.97415127634777,40.735933792668014],[-73.97444722336759,40.73603347295401],[-73.97444828612812,40.73603779285906],[-73.97447828183064,40.73604418545101],[-73.97450488285963,40.73604228053671],[-73.97451459772603,40.735894598411235],[-73.97450793938151,40.73579694577236],[-73.97448737985142,40.735876987533125],[-73.97444962990862,40.73587039671474],[-73.97446125831894,40.73583242506949],[-73.97424881734733,40.73579823084531],[-73.97424533118316,40.73578115493269],[-73.97425771965976,40.73576732638401],[-73.974469391487,40.73579916097891],[-73.97446862602692,40.7357891567999],[-73.97447676009864,40.73578915860297],[-73.97447066995052,40.73572851519182],[-73.97446461207309,40.73566817266455],[-73.97439147294988,40.73566874159347],[-73.97439108143224,40.73567315398562],[-73.97426298913933,40.73567253975694],[-73.97426396904014,40.73567694357618],[-73.97419155221249,40.73568111586587],[-73.97418881323293,40.73566089849516],[-73.97415673129369,40.73565879219353],[-73.97414539712055,40.73567255831331],[-73.97409217163273,40.73564160471855],[-73.9740893642723,40.73564553073938],[-73.97341851539187,40.735367886022004],[-73.97343868734961,40.735341388996005],[-73.97305698712053,40.73517745341554],[-73.97280661710455,40.73552391852113],[-73.97293673973691,40.73559924929959],[-73.9729303192644,40.73560761439672],[-73.97276308380349,40.73550508747356],[-73.97299695202474,40.73518650689114],[-73.9729639526808,40.735169066679866],[-73.97293185609784,40.73520531236901],[-73.97288512856927,40.73518020390186],[-73.97286403116168,40.735212267015186],[-73.97283745943452,40.73519971670444],[-73.97294520758678,40.73506517007111],[-73.97296719785788,40.73507843076685],[-73.97294519031807,40.7351077005131],[-73.97299560236563,40.73512793848568],[-73.9729708363559,40.735157216971274],[-73.97300291199267,40.73517256003519],[-73.97303684713691,40.7351279481501],[-73.97329895046123,40.735242355077084],[-73.97332187458159,40.73520191866486],[-73.97331638345146,40.735196342781975],[-73.97329897672428,40.73517681588363],[-73.97327881634085,40.73514752741424],[-73.97327241144049,40.7351189338514],[-73.97327700851481,40.73507919579837],[-73.97329627362959,40.7350408566426],[-73.97332929043593,40.735010877391716],[-73.97336870942664,40.73498927476267],[-73.97341821248345,40.73497115816109],[-73.97345945915038,40.73496837685119],[-73.97352270834288,40.734975360846946],[-73.9735447289197,40.73494432655072],[-73.97443700979296,40.73531635606464],[-73.97467193099992,40.73539830299991],[-73.97474900599997,40.73542518899997],[-73.9748261859999,40.73538167399991],[-73.9748930509999,40.73537519599992],[-73.97495992999993,40.73536871799993],[-73.97511055299996,40.73539025499991],[-73.97522275599997,40.73539790799989],[-73.97589093699993,40.735673198999955],[-73.9763637329999,40.73586797799992],[-73.97712441199997,40.736196797999895],[-73.97792798399998,40.73654414599988],[-73.97833820599989,40.7367214709999],[-73.97849845599995,40.73679095699989],[-73.97805226499996,40.7375539539999],[-73.97891574499987,40.737917658999876],[-73.97949062699986,40.73815979199986],[-73.98041832999985,40.73855053099987],[-73.98266497499989,40.73949733299986],[-73.98221134499993,40.7401145349999],[-73.98176150799992,40.740733112999905],[-73.98131180499988,40.74135092399991],[-73.98085965399993,40.741969767999905],[-73.98040998099987,40.74258715999988],[-73.97995899799996,40.743205200999924],[-73.97950790899995,40.743825200999915],[-73.9790584949999,40.7444435519999],[-73.97860713299984,40.7450578309999],[-73.97812378199983,40.74572717299987],[-73.97735988999995,40.74540421599994],[-73.97588117699995,40.74477922399991],[-73.97522419999986,40.744504681999906],[-73.97350835000003,40.743782033999885],[-73.97223028499984,40.743249026999884],[-73.97210897599994,40.74320549099992],[-73.97206165299998,40.74318802999993],[-73.97198880299989,40.74316289599995],[-73.97191659199993,40.74313739399983],[-73.97167921200406,40.74305446402989],[-73.97188888913038,40.7427248203555],[-73.97176261327057,40.74267267153466],[-73.97174059715836,40.74266357950899],[-73.9717750124801,40.74261591264713],[-73.97195955856255,40.74233792154363],[-73.97204926316721,40.7418877537763],[-73.97206949682803,40.741788905934726],[-73.97210163980672,40.741623202060914],[-73.97215263572176,40.74138858760125],[-73.97219804813778,40.74114466869176],[-73.97228618248482,40.74073827407896],[-73.97228992099222,40.74072103903176],[-73.9722128259937,40.740711663608245],[-73.97219567275307,40.74070957946137],[-73.9721826857009,40.74070627990965],[-73.97216848387873,40.740693120300485],[-73.97216477368652,40.74067572212913],[-73.97216549760822,40.74067216504988],[-73.97221525425884,40.740426563519435],[-73.9722251561433,40.740416696931206],[-73.97223504317171,40.74041340340201],[-73.97223566211,40.74040541522519],[-73.97219641647804,40.74040257875024]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000766545579019","objectid":"141","shape_leng":"0.0415144638712","location_id":"141","zone":"Lenox Hill West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96177668399997,40.759879715999936],[-73.96196573699996,40.75961945999995],[-73.96308073599987,40.760083162999884],[-73.96355618899993,40.76028081899991],[-73.96431353599988,40.760599230999944],[-73.9665833839999,40.76155093499988],[-73.96612747299989,40.76217929999994],[-73.96566959999997,40.76280455599994],[-73.96521328099986,40.76343135899992],[-73.96475544899988,40.76405706999992],[-73.9642979039999,40.76468198699991],[-73.96384291099993,40.76530968599997],[-73.96340154099988,40.765911190999894],[-73.96292865800001,40.76655862799987],[-73.9624699899999,40.76718493299991],[-73.96201413099995,40.76781230799988],[-73.96155824299983,40.76843761199996],[-73.9611017069999,40.7690593189999],[-73.96060180599979,40.769749186999924],[-73.96010955199993,40.77043221099989],[-73.959644408,40.771064265999925],[-73.9591817999999,40.77169682399995],[-73.9587170739999,40.77233167499991],[-73.95825534899998,40.772965336999896],[-73.95779380499984,40.77359989699994],[-73.95729409999986,40.7742835549999],[-73.95505481599999,40.773336850999954],[-73.95268514999994,40.772339404999926],[-73.95318747599984,40.771656893999925],[-73.95364859999982,40.77102410799993],[-73.9541124529999,40.7703890789999],[-73.95457540899991,40.769754856999946],[-73.95503700499988,40.769120065999864],[-73.9555017079999,40.76848474299992],[-73.95599908699987,40.76780389299994],[-73.95649564199994,40.76711891499989],[-73.95695607099981,40.766493435999884],[-73.95741202499985,40.765868753999875],[-73.95786874099996,40.765242324999896],[-73.95832133999988,40.764616629999864],[-73.95878081199999,40.76399001699986],[-73.95923908799993,40.76336615799994],[-73.95969458599983,40.762740538999935],[-73.9601506909999,40.762114874999945],[-73.96060649299993,40.76148739799985],[-73.96106754499992,40.76085809299985],[-73.96152208599995,40.760230359999916],[-73.96162070799981,40.760094433999896],[-73.96164363299995,40.76005959199991],[-73.96167816899991,40.76001396699989],[-73.96169733399982,40.7599871369999],[-73.96172701399999,40.75994980699992],[-73.96176766499995,40.75989304099994],[-73.96177668399997,40.759879715999936]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000756537920738","objectid":"142","shape_leng":"0.0381758942321","location_id":"142","zone":"Lincoln Square East","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98147898799989,40.76772505899991],[-73.98155301499993,40.76768021699989],[-73.98163412099991,40.76764472399989],[-73.98173478100003,40.7676193279999],[-73.98173489899985,40.76761929999994],[-73.98173502899986,40.76761929099996],[-73.98184353599999,40.767609717999925],[-73.98184380799981,40.76760969099991],[-73.98184408100003,40.76760970899987],[-73.98195388499981,40.76761757899992],[-73.981954182,40.76761759699986],[-73.98195445399982,40.76761766099985],[-73.98205860599991,40.76764244899991],[-73.9820588189999,40.76764250299994],[-73.98205899699985,40.76764257499985],[-73.98215157199994,40.76768179799989],[-73.98236545099999,40.7673921529999],[-73.98521720299992,40.76859462999991],[-73.98806289599996,40.769790799999925],[-73.98761512099995,40.77041544299988],[-73.98714552199996,40.771054037999875],[-73.98669559399988,40.771668182999896],[-73.98665479099989,40.77172445399991],[-73.98649075499988,40.77195067399991],[-73.98645451899998,40.77200064599989],[-73.98623798899992,40.772299256999894],[-73.98618447899992,40.772372030999854],[-73.98613338199989,40.77244152299989],[-73.98602063499989,40.77259485899986],[-73.98596463199983,40.77267102299991],[-73.98582184799984,40.772865207999914],[-73.98577822599991,40.77292453299991],[-73.9857570959999,40.77295327099989],[-73.98562257199983,40.773136219999884],[-73.98556790099997,40.773210570999936],[-73.98551605299986,40.77328108299987],[-73.98546970299988,40.77334411699991],[-73.9853325459999,40.77353064599993],[-73.98487946600002,40.774155670999924],[-73.98441202599994,40.77480807799988],[-73.98397150999992,40.77542927299991],[-73.98349614799992,40.77604586099993],[-73.983046668,40.77668267699989],[-73.98258286200002,40.7773028379999],[-73.98215547099988,40.77797229499992],[-73.98211778999992,40.77801318099994],[-73.98162126599993,40.778608082999874],[-73.98113503699982,40.7792913869999],[-73.980673654,40.779925181999914],[-73.97783054399989,40.77872973099989],[-73.97499744000005,40.77753254599988],[-73.9754606719999,40.776898502999884],[-73.97595517399988,40.7762197549999],[-73.97645763799984,40.77553235199985],[-73.97691168299995,40.774909123999905],[-73.97737084999984,40.77428100699992],[-73.97782639399986,40.77365619199991],[-73.97828220099997,40.77303187899987],[-73.978722468,40.77241889799995],[-73.97919214499984,40.77178126499997],[-73.97965233399994,40.77115532699992],[-73.98011181599992,40.770528368999884],[-73.980563707,40.769905324999904],[-73.9810229009999,40.76927283399994],[-73.98164804599995,40.76843632199994],[-73.98154597299994,40.76838337499988],[-73.98154591499996,40.76838333899988],[-73.98145349899993,40.768320602999935],[-73.98145334399989,40.768320494999905],[-73.98145320300002,40.76832036999991],[-73.98137263399991,40.768249315999924],[-73.98132588899983,40.768188379999884],[-73.98129467599998,40.7681188019999],[-73.98128253299977,40.76804427399991],[-73.98129085699999,40.76796955199996],[-73.98129086899992,40.76796945299993],[-73.9812909039998,40.76796936299995],[-73.98131853299991,40.76789900199987],[-73.98136213699995,40.76783673899992],[-73.98141469499981,40.76777787299987],[-73.98147898799989,40.76772505899991]]]]}},{"type":"Feature","properties":{"shape_area":"0.000146637644064","objectid":"152","shape_leng":"0.0579094768782","location_id":"152","zone":"Manhattanville","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95357262899981,40.82197589199988],[-73.9529102909999,40.8216969469999],[-73.95082880000002,40.82082793699989],[-73.95037710599996,40.82144561799988],[-73.94992194399984,40.8220723139999],[-73.94854029799983,40.82148762299991],[-73.94808289799983,40.82210802199994],[-73.94723844699998,40.82175398599991],[-73.94607828700005,40.82126321599991],[-73.94640289799987,40.820572041999945],[-73.94671831999985,40.81989426799995],[-73.94703623199983,40.81920837199988],[-73.94734953999983,40.81853499799996],[-73.94766641299987,40.817855508999905],[-73.94800732899995,40.81711650899995],[-73.94835601499989,40.81637430599994],[-73.94867681799998,40.815692285999916],[-73.94883491299987,40.815363980999955],[-73.94900927799986,40.81503994299992],[-73.94919960099985,40.81472085399986],[-73.949405505,40.814407408999976],[-73.94962639600001,40.81410043599993],[-73.94962653799998,40.81410023899991],[-73.94962668099991,40.81410004999989],[-73.94986218999995,40.813799979999935],[-73.95035019299995,40.813159388999914],[-73.95092724899993,40.812575428999914],[-73.95098203399994,40.81252162999989],[-73.95150537299989,40.812007684999905],[-73.9521012519999,40.811442853999935],[-73.95354382999984,40.81205082099992],[-73.95408058399987,40.81228011299991],[-73.95520337899985,40.8135541289999],[-73.95570690100003,40.81414395999996],[-73.95626957999987,40.81337502299987],[-73.95707738499995,40.81429809399993],[-73.95710690099989,40.8143318209999],[-73.95716929999979,40.814403123999966],[-73.95782821899992,40.81515604899989],[-73.95819953200001,40.81558041799985],[-73.95829447399994,40.81569078999992],[-73.95839496699998,40.81579688699991],[-73.95949328899988,40.8170074739999],[-73.96068717899983,40.817510516999945],[-73.9610201569998,40.81764868599986],[-73.96138875999992,40.81781807599991],[-73.96157544099992,40.81790997099991],[-73.9616361359999,40.81793985099996],[-73.96168805999997,40.81796669399991],[-73.96181860199984,40.81802315399989],[-73.9618998499999,40.8180472869999],[-73.96203105797969,40.818086330740854],[-73.9613183318058,40.818894523557375],[-73.96094889843968,40.81931128887266],[-73.96044728492026,40.81987715679099],[-73.95999892229341,40.82038294480238],[-73.95981462674504,40.820297875203906],[-73.95939068797922,40.82085517835582],[-73.95932566265213,40.820946276253366],[-73.95928300647289,40.820994974413715],[-73.95913061580634,40.82116895377474],[-73.95920767709258,40.82120790934945],[-73.95926255403748,40.82123565535862],[-73.95930263598672,40.821189897523006],[-73.95942624349648,40.821252381738034],[-73.95914685715196,40.821571328551],[-73.95903294155774,40.821513746228455],[-73.95923467194001,40.82127782527041],[-73.95917712794255,40.82124942998514],[-73.9590896024009,40.821206247055926],[-73.95881892233997,40.82151852484672],[-73.95894172941705,40.821569364009555],[-73.95874523660488,40.82180551197357],[-73.95896360094618,40.822373794142074],[-73.95900018289882,40.822409728374346],[-73.95911304024106,40.822454964645544],[-73.95922976213465,40.82228691013227],[-73.95990999444398,40.822571119821994],[-73.9596033246027,40.82299468678336],[-73.95892614718308,40.822711755441375],[-73.95904953331714,40.822541335368236],[-73.95891721760434,40.82248605137144],[-73.95886745433303,40.822450239228004],[-73.95883849863245,40.82240504207783],[-73.958651260119,40.82191843657338],[-73.95864585147663,40.82190436963179],[-73.95852731524242,40.821843756652164],[-73.9582001935402,40.82228313691813],[-73.95816805363577,40.82245810099125],[-73.95813063305536,40.82253109146093],[-73.95807467943848,40.82261135846494],[-73.95793904909117,40.82277435354731],[-73.95822838183025,40.82288786710083],[-73.95820639539099,40.822922131912215],[-73.95814312769197,40.82302072227144],[-73.95916458632307,40.823451795483315],[-73.95918196037638,40.82345912294556],[-73.95943846744429,40.823562392292935],[-73.95946454189165,40.82357113567166],[-73.9594826976694,40.82357865266566],[-73.95949747410948,40.82358681628588],[-73.95950361164493,40.823591185797746],[-73.9595089796959,40.82359578895143],[-73.95722203099996,40.82322595899993],[-73.95715187499992,40.82321376599985],[-73.95708264299999,40.823201547999865],[-73.95651468499985,40.82312012799986],[-73.95634010399982,40.82309232799989],[-73.95576937299988,40.822904320999896],[-73.95573074999992,40.82289125699989],[-73.9556966079999,40.82287647699994],[-73.953769274,40.822058690999896],[-73.95367103499984,40.82201753399995],[-73.95357262899981,40.82197589199988]]]]}},{"type":"Feature","properties":{"shape_area":"0.00015109426901","objectid":"143","shape_leng":"0.0541798538849","location_id":"143","zone":"Lincoln Square West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98162787399998,40.780328934999936],[-73.98151911299976,40.78028175799991],[-73.98140948699984,40.780235418999894],[-73.980673654,40.779925181999914],[-73.98113503699982,40.7792913869999],[-73.98162126499993,40.778608082999924],[-73.98211778999992,40.77801318099994],[-73.98215547099988,40.77797229499992],[-73.98258286099983,40.7773028379999],[-73.983046668,40.77668267699989],[-73.98349614799992,40.77604586099993],[-73.98397150999982,40.77542927399991],[-73.98441202599994,40.77480807799988],[-73.98487946600002,40.774155670999924],[-73.9853325459999,40.77353064599993],[-73.98546970299988,40.77334411699991],[-73.98551605299986,40.77328108299987],[-73.98556790099997,40.773210570999936],[-73.98562257199983,40.773136219999884],[-73.9857570959999,40.77295327099989],[-73.98577822599991,40.77292453299991],[-73.98582184799984,40.772865207999914],[-73.98596463199983,40.77267102299991],[-73.98602063499989,40.77259485899986],[-73.98613338199989,40.77244152299989],[-73.98618447899992,40.772372030999854],[-73.98623798899992,40.772299256999894],[-73.98645451899998,40.77200064599989],[-73.98649075499988,40.77195067399991],[-73.98665479099989,40.77172445399991],[-73.98669559399988,40.771668182999896],[-73.98714552199996,40.771054037999875],[-73.98761512099995,40.77041544299988],[-73.98806289599996,40.769790799999925],[-73.99059644699987,40.770854809999946],[-73.990913076,40.77098775899989],[-73.99365606199987,40.772145961999854],[-73.99378189799992,40.77219909099988],[-73.99387445099994,40.77223816799995],[-73.9935026219999,40.772751632999885],[-73.9935908639999,40.77279007999994],[-73.99372534699988,40.772864197999915],[-73.9937873699999,40.77290384599992],[-73.99383108201548,40.77293178742534],[-73.9938875450122,40.7729557440819],[-73.99389125221832,40.772955194438346],[-73.99396258575715,40.77294465345443],[-73.99401262490255,40.772882846315966],[-73.99412205804117,40.77292405851296],[-73.99413665279414,40.77290187008702],[-73.99430134219553,40.77297002883192],[-73.99428153506716,40.77299380153468],[-73.99437655287542,40.77303955105065],[-73.99431863484354,40.773121440135085],[-73.99429402991179,40.77315624399585],[-73.9950232764303,40.773481196788154],[-73.9950710884848,40.773414138832905],[-73.9950893919464,40.7733884750195],[-73.99501396385818,40.77335803471349],[-73.99505028484955,40.77329715309494],[-73.99624065194922,40.77378979119886],[-73.99619583723546,40.77385235609209],[-73.99610846890408,40.77381631600754],[-73.99610778171481,40.77381737780049],[-73.99606316854084,40.773886886805],[-73.99612697786858,40.77391335481041],[-73.99612850491377,40.77391398495152],[-73.99612636120095,40.7739167138271],[-73.99609880718478,40.77395180514953],[-73.99611835151377,40.77396032398065],[-73.99617945998676,40.77398695417577],[-73.99609524511304,40.7740861862188],[-73.9960512527533,40.77406889580328],[-73.99557226516114,40.773870731394304],[-73.99393587681126,40.773179512586104],[-73.99386194292893,40.773269531698894],[-73.99382239352724,40.773381758622975],[-73.99376701931838,40.7734839812249],[-73.99369846374411,40.77356214105259],[-73.99362199595426,40.773632286315],[-73.99352708391201,40.773714451955094],[-73.99344271598801,40.773770566055774],[-73.99341107446543,40.77380263098026],[-73.99335832646867,40.773926888327935],[-73.99262266386546,40.774974056036925],[-73.99257784276604,40.77495601635934],[-73.9925277439515,40.775002110439836],[-73.9924697458154,40.77502415955178],[-73.99240383719177,40.775018140390756],[-73.99226708903534,40.77511603385852],[-73.99205908493721,40.7754975981922],[-73.99212537239482,40.77550907505336],[-73.99222686779687,40.77548221102612],[-73.9923293466088,40.77546890095856],[-73.99236175680107,40.77550189976658],[-73.99238604296023,40.77555718042467],[-73.99208768471263,40.7759839708214],[-73.99201877991067,40.776073340735394],[-73.99142953190211,40.77687956054528],[-73.99092717414973,40.77756687876296],[-73.99073041339479,40.77756055024258],[-73.99039616003645,40.777585065679084],[-73.99010126597655,40.77799645751658],[-73.9896488729282,40.77862756000903],[-73.9892009588643,40.77925239865153],[-73.98920068089916,40.77925278678187],[-73.98917577843797,40.779287524015736],[-73.9890851947858,40.779407597662015],[-73.98886861739992,40.779692922911416],[-73.98887187449955,40.77971373825301],[-73.98921902288056,40.77969789520934],[-73.98927785904421,40.779723439271145],[-73.98940905418009,40.77973770647197],[-73.98949861492709,40.77972504438973],[-73.98959649338828,40.77969814668337],[-73.98967981290244,40.77967756865803],[-73.98975270293778,40.77967124421157],[-73.98984224780634,40.779680752670714],[-73.9899443022714,40.779696593271176],[-73.99004010212052,40.77970767769822],[-73.99013797752488,40.779699769704784],[-73.99022336845653,40.779682361211215],[-73.99033584033211,40.77966179439508],[-73.99043059869707,40.779664973055496],[-73.99050764615511,40.779668139123864],[-73.99062219939665,40.77967606491435],[-73.99074506950537,40.77967132818406],[-73.99087211428213,40.77964600764394],[-73.9909616722243,40.77963968375177],[-73.99105747282958,40.77965235262575],[-73.99115742949688,40.77966977560645],[-73.99124281740438,40.77967136708451],[-73.99125531828973,40.77965078251653],[-73.99129488711995,40.77963020920888],[-73.99132196764978,40.77963179604143],[-73.99135945556924,40.779585883337354],[-73.99155105922739,40.779574821437386],[-73.99141982585954,40.779755280287084],[-73.98888614411702,40.77987889853276],[-73.98893965670626,40.77995617844041],[-73.98892610353073,40.78005929201363],[-73.98891168026452,40.780096037146635],[-73.98891166067348,40.780122366770236],[-73.98891926146848,40.780226094343675],[-73.98838105020263,40.78098107404577],[-73.98823241384693,40.78123314421561],[-73.98821042083165,40.78122548254207],[-73.98814418135414,40.781365671327244],[-73.98813788174485,40.781379281274056],[-73.9881274618433,40.78140179672363],[-73.98799363199988,40.78134281699988],[-73.98746219899976,40.78110860999992],[-73.98746089399997,40.7811080339999],[-73.98741432699994,40.7810875109999],[-73.98736363999998,40.781062804999856],[-73.98730772799986,40.781041302999924],[-73.98707137499986,40.780906381999955],[-73.98654378999994,40.780657980999926],[-73.98567936099997,40.780312632999944],[-73.98536952700006,40.781078372999914],[-73.98507184299989,40.781779680999946],[-73.98351422299999,40.781125389999914],[-73.98232616399993,40.78062377299992],[-73.98162787399998,40.780328934999936]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000474789670369","objectid":"144","shape_leng":"0.0276201668505","location_id":"144","zone":"Little Italy/NoLiTa","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99580912300002,40.71664465899988],[-73.99605872699998,40.7162316399999],[-73.99698375299992,40.716540542999894],[-73.99776285999995,40.71681392799996],[-73.99858925599978,40.717099511999905],[-73.99931241699989,40.71755024199989],[-73.999956209,40.71801709499989],[-74.00053195499999,40.71843023899987],[-74.00127273399993,40.71896142599997],[-74.00140055699994,40.719052619999886],[-74.00188406299992,40.71939757099991],[-74.001523638,40.71982079799995],[-74.00142450999995,40.71993719799993],[-74.000660725,40.72083979399993],[-73.99985330399981,40.721791787999926],[-73.99952163199998,40.72218334699987],[-73.9988117219999,40.72302140899991],[-73.9977850889999,40.724234893999906],[-73.99684295899995,40.725347837999905],[-73.9967717579999,40.72543194399992],[-73.99584577599984,40.72520835299988],[-73.99532907899994,40.72508373999996],[-73.99490827399991,40.724951228999934],[-73.99417930499997,40.724692406999914],[-73.99345769099995,40.72443289599994],[-73.99339891300001,40.7244125049999],[-73.99267182399991,40.72416025399984],[-73.99260322299988,40.724136449999946],[-73.99263254999987,40.72405686599991],[-73.99308859399994,40.72281909799991],[-73.99325915400001,40.72235330999995],[-73.99352298099996,40.721631692999956],[-73.99379527399988,40.72093644299991],[-73.99403499399986,40.720323010999884],[-73.99437745899998,40.71951908899993],[-73.99442117799985,40.719391298999874],[-73.99480778999998,40.71845742599988],[-73.99542875899999,40.717279242999936],[-73.99580912300002,40.71664465899988]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000697489921327","objectid":"148","shape_leng":"0.0391305015633","location_id":"148","zone":"Lower East Side","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98447731699999,40.720234238999886],[-73.985073423,40.71908329399989],[-73.9859109239999,40.71933897299989],[-73.98675136699994,40.719592845999955],[-73.98736015299995,40.71836979699993],[-73.98739393199992,40.7183035229999],[-73.98743405799996,40.718213079999934],[-73.98751208099989,40.71807218599989],[-73.98787935799997,40.7174089729999],[-73.98791645999995,40.71733557399992],[-73.98795181500003,40.717265627999915],[-73.98836626299988,40.71644570199992],[-73.98915463799979,40.716708646999905],[-73.98975418199988,40.71555234799996],[-73.9902023599999,40.71466442999987],[-73.99022155699988,40.71457875599987],[-73.99022750999988,40.714491668999926],[-73.99022012699989,40.71440493999988],[-73.99075515399984,40.71455407299985],[-73.99122551100001,40.714486643999926],[-73.99213486499995,40.7144198019999],[-73.99256242199989,40.714388076999974],[-73.99282173499992,40.71436522999988],[-73.99301588399996,40.71435562499989],[-73.99395033499991,40.71429083199993],[-73.99414039099992,40.71426893199987],[-73.99431855699987,40.71425088499997],[-73.99434786700003,40.71424791599986],[-73.99450033499993,40.71423116399996],[-73.99465684999993,40.714219446999884],[-73.99472479499984,40.71421571299988],[-73.99484048899991,40.71420935199993],[-73.99647830999992,40.7141072639999],[-73.99744448599988,40.71406687299986],[-73.99750445299988,40.71406913199994],[-73.99709223399998,40.71461839799991],[-73.99680607099992,40.71503695599991],[-73.99653128199989,40.715491390999894],[-73.99622493199992,40.71599579099993],[-73.99614929199988,40.716084840999955],[-73.99605872699998,40.7162316399999],[-73.99580912300002,40.71664465899988],[-73.99542875899999,40.717279242999936],[-73.99480778999998,40.71845742599988],[-73.99442117799985,40.719391298999874],[-73.99437745899998,40.71951908899993],[-73.99403499399986,40.720323010999884],[-73.99379527399988,40.72093644299991],[-73.99352297999984,40.7216316929999],[-73.99325915400001,40.72235330999995],[-73.99308859399994,40.72281909799991],[-73.99263254999998,40.7240568649999],[-73.99260322199994,40.72413644999988],[-73.99250385799984,40.72410592499995],[-73.99135472799998,40.723754618999855],[-73.99127307099994,40.7237298129999],[-73.99102410399988,40.72364943199991],[-73.99027361600001,40.72342601799987],[-73.98939218099996,40.723174057999884],[-73.98875683199988,40.72297036599986],[-73.98863862799996,40.72293371999991],[-73.98854361399987,40.722903617999904],[-73.98786491500006,40.72269708899991],[-73.98713584799998,40.72246981099991],[-73.98628574000003,40.722241919999874],[-73.98551686199984,40.72198522499987],[-73.98467780299995,40.72173060499992],[-73.9838238729998,40.72147287199987],[-73.98386422799992,40.7213963779999],[-73.98447731699999,40.720234238999886]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000324684964817","objectid":"153","shape_leng":"0.024737239022","location_id":"153","zone":"Marble Hill","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.90666530999995,40.875715608999904],[-73.90692502800006,40.87503467099995],[-73.90716476399983,40.87437421899993],[-73.90746489800001,40.87354735399992],[-73.9077427079998,40.87284595199988],[-73.90846367899988,40.87262079199995],[-73.90872046399987,40.87222866599997],[-73.90893235220783,40.87215734798525],[-73.90897851360198,40.8722243539186],[-73.90901544805163,40.87228958702743],[-73.90905980364177,40.87234132839487],[-73.90908937875491,40.87237507530972],[-73.90909972105362,40.87239419188019],[-73.90909969322314,40.87241442532674],[-73.90913961647068,40.87246279498993],[-73.90917513278698,40.87248081419602],[-73.90919137619544,40.87251342547653],[-73.90921055884137,40.87256514682172],[-73.90924604694906,40.872604525423235],[-73.90926526019165,40.87263376123266],[-73.90927114016716,40.87266299598998],[-73.90935540980549,40.87277097703952],[-73.90943966199148,40.87288233476204],[-73.90951136313969,40.87297738355044],[-73.90954388318947,40.87301787612438],[-73.90957936387078,40.87306286600733],[-73.90958973101802,40.87306400028056],[-73.90960006660967,40.87308761824522],[-73.90963706316084,40.87310788118937],[-73.90965332823252,40.873124751217716],[-73.90967403485497,40.87314725286422],[-73.9097095289807,40.87318212947383],[-73.90971690053208,40.87320461120855],[-73.90974797469846,40.873218124915354],[-73.90978644251612,40.87324738489864],[-73.90984559578646,40.87331376126337],[-73.90990769944696,40.873383498929115],[-73.90996168304555,40.87343132034095],[-73.91001640976121,40.87348194410383],[-73.91007556909462,40.8735359559803],[-73.91009482143302,40.87353708775016],[-73.91010961470225,40.87355396586297],[-73.91010367477757,40.87356070595167],[-73.91016876214525,40.873616964007915],[-73.91017913401178,40.87361472095865],[-73.91018355408711,40.87362708835755],[-73.9101894638254,40.87364283404717],[-73.9102737818055,40.87370809418795],[-73.9103551397179,40.87377785515433],[-73.91044539476847,40.87383862805885],[-73.9105060659268,40.87388026812663],[-73.91065439307907,40.8739759430305],[-73.91080913168175,40.874085022055525],[-73.91085171090067,40.87410973724408],[-73.91092118004799,40.87414639601998],[-73.91098953820747,40.87417963995649],[-73.9110690967962,40.87422141212586],[-73.91111279481103,40.874242725000144],[-73.91115761996681,40.87426573964851],[-73.91119459821621,40.87428194078672],[-73.91125288020052,40.87431007188996],[-73.9112629469905,40.87432370407539],[-73.91127192479053,40.87431604794521],[-73.91127864317853,40.87433136924933],[-73.91131058924775,40.87434481582342],[-73.91148428297787,40.87441792104998],[-73.91151006661373,40.87442304598177],[-73.91155043066773,40.87442818308494],[-73.91157173258563,40.874431612885914],[-73.91159751286466,40.874439285901424],[-73.91159974693575,40.87444524899033],[-73.91162329185646,40.874447815101746],[-73.91162776520517,40.874456337333214],[-73.91163897503573,40.87445719203627],[-73.91165017603142,40.874473374319955],[-73.91166810950028,40.87447594488272],[-73.91167146278335,40.87448786152828],[-73.91168826975449,40.87449043115864],[-73.91169275467155,40.87448957927271],[-73.91170284178415,40.874496395362755],[-73.91173423700735,40.874501524916205],[-73.91173983012341,40.87450578818882],[-73.91177009202042,40.87451602293514],[-73.91179139183596,40.87452114412123],[-73.91180933995194,40.87452201416823],[-73.91183904256401,40.874532671021676],[-73.91185921079003,40.874541205994404],[-73.91188274672243,40.87455057896902],[-73.91189619479312,40.87455399388582],[-73.9119152574419,40.87455571920048],[-73.91192086201634,40.874560828884455],[-73.91192983324362,40.874558278608944],[-73.91193318113005,40.8745659442165],[-73.9119444037699,40.87456595249829],[-73.91194663053723,40.87457702112579],[-73.91195447088613,40.87457872896526],[-73.91195784463281,40.87457447245355],[-73.91196570064146,40.87457277735309],[-73.91196907175222,40.87456256846288],[-73.91203072161403,40.8745830378179],[-73.91208452800096,40.874595847197156],[-73.91215290813037,40.87461377507739],[-73.9121764462137,40.874621456116515],[-73.91221454479957,40.87463509998273],[-73.91221566296912,40.87464190888751],[-73.91222814396944,40.87465056297354],[-73.91222813320367,40.87465854110614],[-73.91223791359347,40.87465455896359],[-73.91225294388349,40.87465513804568],[-73.91227699162117,40.8746540217871],[-73.91227397278395,40.87466770678097],[-73.91228449380333,40.87466829175391],[-73.91229500780878,40.874675710853595],[-73.91230627871727,40.874674574878256],[-73.91231155258637,40.874669446851534],[-73.91232355802433,40.87467858616002],[-73.91233333490989,40.87467688342118],[-73.91234234304949,40.87468373307686],[-73.91233707714717,40.874691716904124],[-73.91234308865762,40.8746940081139],[-73.91234910104856,40.874686593188855],[-73.9123558652191,40.874694017966114],[-73.9123498419076,40.87470028136261],[-73.9123588548898,40.87470257521208],[-73.9123648748739,40.87469858203209],[-73.91236862605753,40.874706004164956],[-73.91237764718186,40.8747020128729],[-73.91238741516419,40.874707162804576],[-73.91239492490993,40.874707168154984],[-73.91240469493584,40.87471174086121],[-73.91242271779869,40.87471859877235],[-73.91243099100983,40.87471518316869],[-73.91244000191651,40.87471861183008],[-73.91245203282763,40.87471804391961],[-73.91245729299712,40.87472375717076],[-73.91247757264037,40.87472833869738],[-73.91248809220902,40.874730624171306],[-73.91249033807661,40.87473690281091],[-73.91250236313707,40.87474033369901],[-73.91250687871081,40.87473406062238],[-73.91251965496578,40.87473521388558],[-73.9125256581892,40.87474377377167],[-73.912529410846,40.8747494851984],[-73.912551200576,40.874751780277656],[-73.91255570224403,40.87475692486938],[-73.91259176808397,40.87476436313473],[-73.91261880851071,40.874779790908924],[-73.91264284973255,40.87478379887098],[-73.91267517023708,40.874788955883474],[-73.9126962150604,40.87478954831901],[-73.91270634490408,40.87480010903188],[-73.91272287889382,40.87480240010714],[-73.91272859671744,40.87480240476915],[-73.91274316499636,40.87480241502598],[-73.91275367183313,40.87481497632551],[-73.9127687078019,40.87481099814735],[-73.91278749082916,40.87481671205942],[-73.91280025722797,40.87482528618445],[-73.91280626515456,40.874829846761436],[-73.91282129694946,40.87482985793964],[-73.91284834382581,40.8748395772712],[-73.91285660205791,40.87484757013021],[-73.91286937917496,40.87484701292165],[-73.91287914404397,40.874855007183406],[-73.91288441177969,40.8748458800894],[-73.9128949292361,40.87484988736233],[-73.91290469377688,40.8748578810364],[-73.9129212312108,40.87485789377647],[-73.91293626418764,40.87485619390874],[-73.91294378259612,40.87484934731967],[-73.91350066356716,40.87501790507695],[-73.91348952397077,40.87503607785827],[-73.91349978845808,40.875034131379806],[-73.91350919503029,40.87503478681045],[-73.91350901692014,40.87504437616451],[-73.91353440086448,40.87504719658454],[-73.91354822577777,40.87505316849612],[-73.91356898724574,40.87505212924253],[-73.91358236087551,40.87505879442265],[-73.91358789193708,40.87506580397602],[-73.9136017368192,40.87506476096734],[-73.91362249791955,40.87506547903329],[-73.9136317314757,40.875061983121626],[-73.91364510961307,40.87506479319905],[-73.91365295999721,40.875058144214975],[-73.91377097505355,40.87509610769932],[-73.91386393524301,40.87512409223816],[-73.91387403109368,40.87512410000559],[-73.91388267200851,40.87512957211256],[-73.91407508569827,40.875182799046996],[-73.91406883175179,40.87520834074647],[-73.91535186479148,40.875594734825164],[-73.91538349409625,40.87559320888148],[-73.91540287121052,40.87559941029492],[-73.91542631477185,40.875607945317405],[-73.91545588514181,40.875621131955185],[-73.91546939921095,40.87563214618999],[-73.91548768177182,40.875636787460465],[-73.91551075196118,40.875643414795675],[-73.91552990793934,40.875645742470525],[-73.91555253991932,40.875654021779646],[-73.91557648264494,40.87565833610146],[-73.9155856207657,40.875662969433066],[-73.9156178241692,40.875677866462915],[-73.91567267909491,40.875685508351],[-73.91570881079426,40.875693136137784],[-73.91572098193815,40.87570967097484],[-73.9157431844291,40.875713322870155],[-73.91578609320084,40.87571718248032],[-73.91574356,40.875760999999954],[-73.91571027699979,40.875795454999924],[-73.91487449199987,40.876642145999924],[-73.91205829999997,40.878119319999904],[-73.91148913199984,40.87901885899991],[-73.91033193599998,40.879038046999895],[-73.90949832099987,40.87877673199989],[-73.90906235999998,40.878486782999886],[-73.90835569799991,40.87791831399997],[-73.90765281699993,40.87742802299989],[-73.90703748899998,40.87689516099993],[-73.9068187309999,40.87661958799991],[-73.90666530999995,40.875715608999904]]]]}},{"type":"Feature","properties":{"shape_area":"0.000185568253002","objectid":"158","shape_leng":"0.0548099905515","location_id":"158","zone":"Meatpacking/West Village West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00779116099989,40.74197084499985],[-74.00697077799991,40.741627126999916],[-74.00536591799992,40.74094529499997],[-74.00515808199998,40.74085808099991],[-74.00529178799992,40.74002322299992],[-74.00539035999991,40.73941197299994],[-74.00549494099988,40.73875392299989],[-74.00559149599995,40.73813833999992],[-74.0056870449999,40.73755187899992],[-74.00579620299999,40.73692169799991],[-74.00585387099987,40.73653322599989],[-74.00596018000002,40.7358450069999],[-74.00606869899997,40.735133213999916],[-74.00618179699998,40.734439131999885],[-74.0062942419999,40.733742041999925],[-74.00640707599995,40.73305393999988],[-74.00650135299995,40.73242587499988],[-74.00662407199995,40.73166937899993],[-74.00673713399992,40.7309470659999],[-74.00685682099994,40.7302282359999],[-74.00697298799992,40.72949498999988],[-74.0070902079999,40.72877225299994],[-74.00859272099996,40.72891527699988],[-74.00934961999998,40.72898755599988],[-74.01054441299988,40.7291000979999],[-74.01067264999996,40.729112666999896],[-74.01076791499999,40.728173957999914],[-74.01087083299997,40.72818049399996],[-74.01100472999994,40.7281932389999],[-74.01138323602366,40.728229272183555],[-74.014390699162,40.728463047760016],[-74.01434461474159,40.72862218378146],[-74.01421928543024,40.729523427755595],[-74.0140774139113,40.730640409187835],[-74.01408693559922,40.730663173040305],[-74.01403796924805,40.73069421884393],[-74.01401552295421,40.73068283965607],[-74.01116195696464,40.730450676349065],[-74.01108642940412,40.73128902958223],[-74.01099350879153,40.73232041794062],[-74.01094127374121,40.73302031334128],[-74.01400220214602,40.73306800179544],[-74.01399957240955,40.73333227751771],[-74.01090389883275,40.7332976171396],[-74.01089482435796,40.73334817096212],[-74.01086736557718,40.7333488343982],[-74.01084045026995,40.73335302243395],[-74.01081485457661,40.73336061430152],[-74.01079131658479,40.73337139107892],[-74.01077051504689,40.7333850420029],[-74.01075304980591,40.733401173429414],[-74.01073942450006,40.73341932018602],[-74.01073003203787,40.7334389589845],[-74.01072514326883,40.73345952351112],[-74.01072489917198,40.73348042075682],[-74.01072930679061,40.73350104811758],[-74.01073823902861,40.733520810771275],[-74.01075143831419,40.73353913883062],[-74.01076852402858,40.733555503776586],[-74.0107890034796,40.73356943369936],[-74.01081228611086,40.73358052690649],[-74.01083770052972,40.73358846350718],[-74.0108645138697,40.73359301463594],[-74.01083284563215,40.734007094513636],[-74.01201792010478,40.734063744456314],[-74.01200124222407,40.734338401668715],[-74.01081359479103,40.734283443647534],[-74.01078798331716,40.73454829384434],[-74.01070922910374,40.73536287214015],[-74.01064292017875,40.736048697704945],[-74.01067724659347,40.736056279956806],[-74.01066986751215,40.73610193192913],[-74.01068752603774,40.73611386772276],[-74.01070404345337,40.73612918443091],[-74.01071702975825,40.73614635650884],[-74.01072613231958,40.73616491766635],[-74.01073110396315,40.73618436389367],[-74.01073180968515,40.73620416714772],[-74.0107282303185,40.736223789689696],[-74.01072046305407,40.736242698688],[-74.0107087188013,40.73626038068563],[-74.01069377906512,40.73627594935932],[-74.01067576035113,40.736289501811896],[-74.01065512584192,40.7363006896678],[-74.01065421033896,40.73634774524588],[-74.01061910077436,40.73634539072178],[-74.01056810573431,40.736972220142476],[-74.01051581576753,40.73759606495365],[-74.0104765981442,40.73806394059505],[-74.01108706635937,40.73809275008135],[-74.01106791934316,40.73830409617404],[-74.01108874586753,40.73831752469385],[-74.01110665713955,40.73833319830264],[-74.01112123961192,40.738350755119946],[-74.01113215659413,40.738369789784436],[-74.01113915602558,40.73838986281303],[-74.01111800254128,40.738392696092404],[-74.01109653938134,40.73839332225607],[-74.01107516272492,40.73839172974585],[-74.01105426715442,40.73838794795728],[-74.01105126196637,40.73839642575062],[-74.01045432864609,40.738364506228145],[-74.01042867884628,40.738703364658704],[-74.0103930313456,40.739174296059204],[-74.01049858988287,40.739173432770414],[-74.01055473996806,40.739186239049005],[-74.01074676135308,40.739175936679615],[-74.01138798406548,40.73921605608857],[-74.01148456734634,40.73926046259409],[-74.01158045502316,40.739264536112046],[-74.01158818724917,40.73927159590028],[-74.01158715816628,40.73947887033475],[-74.01163351895192,40.739506486066205],[-74.01162792311773,40.73956247410615],[-74.01155518156293,40.7395567262273],[-74.0115274502041,40.739873771449915],[-74.01159286133141,40.73987376488411],[-74.01161258017336,40.73970760054936],[-74.01234819241687,40.739737565353636],[-74.0123691740004,40.73975164637212],[-74.01237411577733,40.73977886786768],[-74.01234943428379,40.73979389076181],[-74.01228649627012,40.73979296102123],[-74.01228897847172,40.739899042124534],[-74.01231366348769,40.73990279375338],[-74.01234328917008,40.7399206297923],[-74.01235687134118,40.73993658471746],[-74.01234947552231,40.74001637981593],[-74.01232356118135,40.74003140300372],[-74.01227049910142,40.74003422696505],[-74.01226310747168,40.74014218976771],[-74.01230877290088,40.74014781277593],[-74.01232852356425,40.74016283157746],[-74.01232975860133,40.74018348844809],[-74.01231001212764,40.74019475620399],[-74.01157686924238,40.74016009950159],[-74.01158637887598,40.73997384795255],[-74.01151491736529,40.739972863698824],[-74.01146073955334,40.7405842147525],[-74.01215741913083,40.74060599813125],[-74.01215372624051,40.740674256620736],[-74.01265742489983,40.740696652231826],[-74.01265928208485,40.74074763849748],[-74.0125737299691,40.740741731844885],[-74.01257372874738,40.74073525812518],[-74.01147486918853,40.74068706027103],[-74.01137438820483,40.740723947641335],[-74.01071840609639,40.74068559392549],[-74.00963145571744,40.740645367374285],[-74.00949685520365,40.74072701178543],[-74.00949154621287,40.74074270943978],[-74.00951627358208,40.7407735836735],[-74.00951844195927,40.74080572291691],[-74.00950137905853,40.74082922374572],[-74.00946293860208,40.740902337240264],[-74.00941140266131,40.741154093312815],[-74.00958131822176,40.74117496028479],[-74.00957692791619,40.741210656654424],[-74.01216232909212,40.74149188968266],[-74.01211745872139,40.74175851621158],[-74.00951947145005,40.741490302198606],[-74.00944784072523,40.741891591220124],[-74.00927792756069,40.74187861085614],[-74.00916608258481,40.742416591231674],[-74.00902439199994,40.742399742999964],[-74.008893399,40.742384166999884],[-74.00879080599995,40.742375143999915],[-74.00869902299993,40.74236172299993],[-74.00820401899988,40.74214751799986],[-74.00779116099989,40.74197084499985]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000719130682992","objectid":"161","shape_leng":"0.0358039100611","location_id":"161","zone":"Midtown Center","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97534377999993,40.7552996949999],[-73.97580739399986,40.754677274999935],[-73.97589877700003,40.7547142229999],[-73.9765156939999,40.754974262999944],[-73.97697379099985,40.75434867599992],[-73.97743259200001,40.75371708799987],[-73.9778749419999,40.75309839199991],[-73.9783696929999,40.75241622699992],[-73.97928686199992,40.75280049699995],[-73.98088709899987,40.75348098899989],[-73.98411754799999,40.754842052999955],[-73.98362433299988,40.75551634599986],[-73.98316796099988,40.75614022199994],[-73.98271205299979,40.756771227999934],[-73.98225528700006,40.75738736499995],[-73.98179404299992,40.75802130299997],[-73.98134107099996,40.75864529799986],[-73.98088574599987,40.759270669999914],[-73.98042606399994,40.75989908099994],[-73.97997188199987,40.76052470099987],[-73.97951319199996,40.761148561999924],[-73.97905731199987,40.761770719999944],[-73.97860169399989,40.76239607199995],[-73.97813931699997,40.76302401399992],[-73.977686006,40.76364440299992],[-73.97445730599989,40.762293083999914],[-73.97285250499992,40.76161435699987],[-73.97133777299992,40.760977297999894],[-73.97124277300003,40.76093641799986],[-73.97169609199985,40.760312660999936],[-73.97215595499983,40.759681239999985],[-73.9726127139999,40.75905930799997],[-73.97306851999987,40.7584314939999],[-73.97352419599999,40.75780843999996],[-73.97398183199975,40.757179757999936],[-73.97443866399978,40.75655630599991],[-73.97488727199989,40.75592379099991],[-73.97534377999993,40.7552996949999]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000478936962112","objectid":"162","shape_leng":"0.0352698146219","location_id":"162","zone":"Midtown East","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.9712170449999,40.75519332399994],[-73.97167699199997,40.75456963099995],[-73.97213617399994,40.7539432349999],[-73.97258874999983,40.753317887999856],[-73.97304502599985,40.7526916219999],[-73.97350255899984,40.7520649319999],[-73.97395914699996,40.75144102099995],[-73.9744494109998,40.75076644499992],[-73.97604824899986,40.75144139299993],[-73.97685152399993,40.75177649399989],[-73.97710781099983,40.75188340599991],[-73.97754284999984,40.7520635559999],[-73.97767660499981,40.7521189369999],[-73.97779152099986,40.7521675949999],[-73.9783696929999,40.75241622699992],[-73.9778749419999,40.75309839199991],[-73.97743259200001,40.75371708799987],[-73.97697379000006,40.754348675999886],[-73.9765156939999,40.754974262999944],[-73.97589877700003,40.7547142229999],[-73.97580739399984,40.75467727399997],[-73.97534377999993,40.7552996949999],[-73.97488727199989,40.75592379099991],[-73.97443866299996,40.75655630599988],[-73.97398183199975,40.757179757999936],[-73.97352419599999,40.75780843999996],[-73.97306851999987,40.7584314939999],[-73.9726127139999,40.75905930799997],[-73.97215595499983,40.759681239999985],[-73.97169609199985,40.760312660999936],[-73.97124277300003,40.76093641799986],[-73.97075063899997,40.76160870199995],[-73.97025814699983,40.76228875299991],[-73.96980028899992,40.76291351199995],[-73.96968801199992,40.76286596199986],[-73.96818687799986,40.76222682099993],[-73.9665833839999,40.76155093499988],[-73.96657146999985,40.761481879999955],[-73.96699471899981,40.76090538299993],[-73.96746215199991,40.76022290599994],[-73.96792193499995,40.75959308699991],[-73.96802436899996,40.759578139999896],[-73.96847979599983,40.75895012799988],[-73.96893510299992,40.75833009199994],[-73.96939411299984,40.75769952799991],[-73.96984859899989,40.75707595799987],[-73.97031393599993,40.75645301899989],[-73.97075919399998,40.7558248509999],[-73.9712170449999,40.75519332399994]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000408567804196","objectid":"163","shape_leng":"0.0341768669752","location_id":"163","zone":"Midtown North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98136213699995,40.76783673899992],[-73.97907658799991,40.76687608599993],[-73.97836113000002,40.766573710999886],[-73.97623388799995,40.765674630999854],[-73.9741922899999,40.764806527999916],[-73.9736358469999,40.76456991299992],[-73.97301487199995,40.76427887899991],[-73.97141141699996,40.763587473999955],[-73.9699048929999,40.762958042999834],[-73.96980028899992,40.76291351199995],[-73.97025814699983,40.76228875299991],[-73.97075063899997,40.76160870199995],[-73.97124277300003,40.76093641799986],[-73.97133777299992,40.760977297999894],[-73.97285250499992,40.76161435699987],[-73.97445730599989,40.762293083999914],[-73.977686006,40.76364440299992],[-73.97813931699997,40.76302401399992],[-73.97860169399989,40.76239607199995],[-73.98143351999995,40.763594359999914],[-73.9824697079998,40.76403346399993],[-73.98428230099987,40.76479181499995],[-73.98382185700001,40.76541847499991],[-73.98336657899995,40.766045241999926],[-73.98287713499988,40.766715594999866],[-73.98236545099999,40.7673921529999],[-73.98215157200003,40.76768179699994],[-73.98205899699985,40.76764257499985],[-73.9820588189999,40.76764250299994],[-73.98205860599991,40.76764244899991],[-73.98195445399982,40.76761766099985],[-73.981954182,40.76761759699986],[-73.98195388499981,40.76761757899992],[-73.98184408100003,40.76760970899987],[-73.98184380799981,40.76760969099991],[-73.98184353599999,40.767609717999925],[-73.98173502899986,40.76761929099996],[-73.98173489899985,40.76761929999994],[-73.98173478100003,40.7676193279999],[-73.98163412099991,40.76764472399989],[-73.98155301499993,40.76768021699989],[-73.98147898799989,40.76772505899991],[-73.98141469499981,40.76777787299987],[-73.98136213699995,40.76783673899992]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000556318237441","objectid":"164","shape_leng":"0.0357716119908","location_id":"164","zone":"Midtown South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98362519999995,40.7439431149999],[-73.98407485299994,40.7433247179999],[-73.98413729099997,40.74334959099991],[-73.98569571299991,40.744007640999946],[-73.98729805500001,40.74468149799989],[-73.98872905499988,40.74528637399991],[-73.99051761299985,40.746038637999895],[-73.99006749199991,40.746659282999936],[-73.98961683100002,40.74727642299989],[-73.98916651699989,40.747895434999904],[-73.9887140509998,40.748513273999954],[-73.98823761499983,40.74913016899993],[-73.98797357699985,40.74949077899986],[-73.98776905899994,40.749787028999926],[-73.98729377099981,40.750451608999896],[-73.98684991099998,40.75108167899989],[-73.98639930899988,40.751699985999934],[-73.98594653099994,40.7523168049999],[-73.98548819099985,40.752935179999945],[-73.98504363799995,40.753554148999854],[-73.984595843,40.75417694199992],[-73.98411754799999,40.754842052999955],[-73.98088709899987,40.75348098899989],[-73.98137143199989,40.752813855999946],[-73.98182244299983,40.75219712699989],[-73.98227490399981,40.75157729799986],[-73.9827238749999,40.750958943999926],[-73.9831741629998,40.75034220999989],[-73.983621411,40.749723770999935],[-73.98407636100002,40.74910212499994],[-73.98247211999985,40.74843150099986],[-73.98094249999997,40.747790070999905],[-73.98085054499998,40.74775036999995],[-73.98134068699997,40.747078663999936],[-73.98177455300002,40.74649679899989],[-73.98183365099987,40.74641659099996],[-73.98227872699987,40.74579756299987],[-73.98233039299987,40.74572641199994],[-73.98272686499999,40.74518041399988],[-73.98317411899995,40.7445603109999],[-73.98362519999995,40.7439431149999]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000743150675972","objectid":"170","shape_leng":"0.0457690091051","location_id":"170","zone":"Murray Hill","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97203331099983,40.745804967999945],[-73.97212958899986,40.74568090199994],[-73.97257598299977,40.74506785499992],[-73.97302670299986,40.74445004099993],[-73.97350835000003,40.743782033999885],[-73.97522419999986,40.744504681999906],[-73.97588117699995,40.74477922399991],[-73.97735988999995,40.74540421599994],[-73.97812378199983,40.74572717299987],[-73.97860713299984,40.7450578309999],[-73.9790584949999,40.7444435519999],[-73.97950791000001,40.74382520099996],[-73.97995899799996,40.743205200999924],[-73.98040998099987,40.74258715999988],[-73.98085965399993,40.741969767999905],[-73.98245520799999,40.74264695999995],[-73.98400852,40.74329901799996],[-73.98407485299994,40.7433247179999],[-73.98362519999995,40.7439431149999],[-73.98317411899995,40.7445603109999],[-73.98272686499999,40.74518041399988],[-73.98233039299987,40.74572641199994],[-73.98227872699987,40.74579756299987],[-73.98183365099987,40.74641659099996],[-73.98177455300002,40.74649679899989],[-73.98134068699997,40.747078663999936],[-73.98085054399985,40.74775036999989],[-73.98094249999997,40.747790070999905],[-73.98247211999985,40.74843150099986],[-73.98407636100002,40.74910212499994],[-73.983621411,40.749723770999935],[-73.98317416299989,40.75034220899994],[-73.98272387399996,40.750958943999905],[-73.98227490399981,40.75157729799986],[-73.98182244299983,40.75219712699989],[-73.98137143199989,40.752813855999946],[-73.98088709899987,40.75348098899989],[-73.97928686199992,40.75280049699995],[-73.9783696929999,40.75241622699992],[-73.97779152099986,40.7521675949999],[-73.97767660499981,40.7521189369999],[-73.97754284999984,40.7520635559999],[-73.97710781099983,40.75188340599991],[-73.97685152399993,40.75177649399989],[-73.97604824899986,40.75144139299993],[-73.9744494109998,40.75076644499992],[-73.9749347119999,40.75009962799993],[-73.97538295899986,40.74948305799993],[-73.9758346669999,40.74886314599998],[-73.97497000599988,40.748501848999865],[-73.97359187599997,40.74791866299991],[-73.9727379199999,40.74755798999995],[-73.97121971999988,40.74692154099996],[-73.97165740599984,40.746303693999955],[-73.97174810699977,40.74618613899989],[-73.97194428900002,40.745931871999886],[-73.97203331099983,40.745804967999945]]]]}},{"type":"Feature","properties":{"shape_area":"0.000255276270405","objectid":"166","shape_leng":"0.0688237542871","location_id":"166","zone":"Morningside Heights","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95707738499995,40.81429809399993],[-73.95626957999987,40.81337502299987],[-73.95570690100003,40.81414395999996],[-73.95520337899985,40.8135541289999],[-73.95408058399987,40.81228011299991],[-73.95354382999984,40.81205082099992],[-73.9521012519999,40.811442853999935],[-73.9525912579999,40.81076533299994],[-73.95307869999975,40.81009408499988],[-73.9532765489999,40.80987960399989],[-73.9535757779999,40.8094766979999],[-73.95496657099991,40.81006455499995],[-73.95542974899983,40.80942915299993],[-73.95588417599986,40.808802248999875],[-73.95634493700001,40.80817335399992],[-73.95680543799989,40.80754570899993],[-73.95726581599985,40.80691617099996],[-73.95772176,40.8062909889999],[-73.95818167299996,40.80559679099991],[-73.95825482599987,40.804713877999916],[-73.958203008,40.803894270999905],[-73.95824878299987,40.80310648599989],[-73.95868839399998,40.80246979399986],[-73.95914741099993,40.80184375999991],[-73.95964685399987,40.80115642299993],[-73.96107793999975,40.801800357999866],[-73.96386126299988,40.80297203799993],[-73.96659731599986,40.804122764999946],[-73.96670106899995,40.80416847599993],[-73.96680327299997,40.804207560999906],[-73.96804849299988,40.804683699999906],[-73.96849506699984,40.80483226999993],[-73.96855913399985,40.80485358399993],[-73.96860707399988,40.804870949999895],[-73.96978722000001,40.80530049699997],[-73.97069326499995,40.80563026799993],[-73.97076362399993,40.80565737299987],[-73.97084148399995,40.80568534399987],[-73.97110765876137,40.805790139589654],[-73.97045990226607,40.80663109398826],[-73.97021400799224,40.80693570615333],[-73.9698829061469,40.80736478848125],[-73.96977288943326,40.80752528264376],[-73.96955934797347,40.80779550099896],[-73.96911173565825,40.808406370068965],[-73.96909103244369,40.80843016507843],[-73.9689167848404,40.808630780559795],[-73.96885218645302,40.80875198661713],[-73.96866264764923,40.80896329267825],[-73.96855747771205,40.80907289432357],[-73.96854420633765,40.80914511039273],[-73.96846348611653,40.8093187140199],[-73.9684247350703,40.809394060333055],[-73.96823952732154,40.80966268389443],[-73.96815337512054,40.809765881408794],[-73.96811675018661,40.80980683624046],[-73.96813186592715,40.809844489225036],[-73.9679606531174,40.810100010069306],[-73.96788312497532,40.81020156518219],[-73.96788099174,40.81024414732448],[-73.96779484834431,40.81036699737401],[-73.96772160095219,40.810434161110926],[-73.96770439052305,40.81048819988439],[-73.96766778940892,40.810550445942845],[-73.96762038824623,40.8105848503943],[-73.9676204142259,40.81063070153998],[-73.96754397270519,40.81077319972411],[-73.96740185312369,40.811022155397055],[-73.96713048758585,40.81138742007399],[-73.9670411118029,40.81152009962688],[-73.96700232144049,40.81154794802964],[-73.96692265508437,40.81169044653371],[-73.96688175014941,40.811773976428185],[-73.96674930787943,40.81198198551441],[-73.96663300760063,40.812153970788046],[-73.96652962321858,40.812285015524836],[-73.96639177720876,40.81247337316197],[-73.96627762716759,40.81263881250281],[-73.96615809223952,40.81281570279123],[-73.96610639539493,40.812863206936264],[-73.96588240945108,40.81320062634857],[-73.96579194974646,40.81332838170002],[-73.96565840161266,40.81349873149242],[-73.96548975012963,40.81374707236785],[-73.96548932424895,40.81374769375629],[-73.96534706551687,40.813939651896696],[-73.96510784267409,40.814275476532295],[-73.96509511906311,40.814319572659144],[-73.96432483391364,40.81551273701066],[-73.96414082888293,40.81577165745391],[-73.9634039510228,40.81668419794027],[-73.96312702403796,40.816955095336404],[-73.96308529694089,40.81700611343311],[-73.96271913392074,40.81736849075736],[-73.96203105797969,40.818086330740854],[-73.9618998499999,40.8180472869999],[-73.961818603,40.81802315399993],[-73.96168806099998,40.817966693999956],[-73.9616361359999,40.81793985099996],[-73.96157544099992,40.81790997099991],[-73.96138875999992,40.81781807599991],[-73.9610201569998,40.81764868599986],[-73.96068717899983,40.817510516999945],[-73.95949328899988,40.8170074739999],[-73.9583949659998,40.815796886999934],[-73.95829447399994,40.81569078999992],[-73.95819953200001,40.81558041799985],[-73.95782821899992,40.81515604899989],[-73.95716929999979,40.814403123999966],[-73.95710689999994,40.8143318209999],[-73.95707738499995,40.81429809399993]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000370729416953","objectid":"186","shape_leng":"0.0246963902234","location_id":"186","zone":"Penn Station/Madison Sq West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.99096832799995,40.74542088999988],[-73.99141858599994,40.74480268199988],[-73.99426258599996,40.74600398099987],[-73.99709902899994,40.74720510199991],[-73.99664704399989,40.74782272899996],[-73.99619655499993,40.74843932799997],[-73.99574855599987,40.74905219599989],[-73.99529821499979,40.74967168299992],[-73.99484363799989,40.75029330899991],[-73.99437946899982,40.75093038999993],[-73.99394825699984,40.75152222199995],[-73.99346417699985,40.752190054999886],[-73.99211708899992,40.75162207799989],[-73.99062219999986,40.75099175399994],[-73.98793687499989,40.749854966999926],[-73.98776905899994,40.749787028999926],[-73.98797357699985,40.74949077899986],[-73.98823761499983,40.74913016899993],[-73.9887140509998,40.748513273999954],[-73.98916651699989,40.747895434999904],[-73.98961683100002,40.74727642299989],[-73.99006749199991,40.746659282999936],[-73.99051761299985,40.746038637999895],[-73.99096832799995,40.74542088999988]]]]}},{"type":"Feature","properties":{"shape_area":"0.000273481702719","objectid":"194","shape_leng":"0.0817938353532","location_id":"194","zone":"Randalls Island","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.91639852914044,40.79768484203896],[-73.91545470966419,40.79706346603093],[-73.91443827233297,40.79566551786385],[-73.91380428276793,40.79451184645597],[-73.91378385370594,40.793836285482065],[-73.9145920846776,40.7927766019591],[-73.91514134426104,40.79201248299488],[-73.91535698910359,40.79184304950765],[-73.91552117846275,40.79178325024936],[-73.916305770761,40.79111736995261],[-73.91616965652562,40.79101537285409],[-73.9168544196006,40.79035844788467],[-73.91707800430397,40.79045626926614],[-73.91710622312881,40.790468617239384],[-73.91784071922031,40.79017131993739],[-73.91812330871126,40.79004023993423],[-73.91843338465661,40.78980396433666],[-73.9185629977498,40.78969533382591],[-73.91859001366782,40.78947410390863],[-73.91850876959093,40.789425089769395],[-73.92188898370831,40.785701197162865],[-73.92199195097098,40.78575394991961],[-73.92218831157653,40.785509278139266],[-73.92285203280137,40.783555693417696],[-73.92306473139391,40.78334288477424],[-73.92401145782644,40.78266068982501],[-73.9240136473876,40.78265764398257],[-73.92406208829156,40.78259027845207],[-73.92412113996787,40.78252307401083],[-73.9242362187582,40.78249691558929],[-73.92424754901657,40.782494339126565],[-73.92431077958685,40.78245595655429],[-73.92448052280419,40.782320490645915],[-73.92467329671872,40.782244860001015],[-73.92488394771702,40.78222258277354],[-73.92506087908808,40.78221629397282],[-73.92514021519146,40.78224376759571],[-73.92515351840345,40.78224837480777],[-73.92524195308084,40.78227404884854],[-73.9253893908798,40.78227414439881],[-73.92571808678538,40.78217655794456],[-73.92713754068623,40.78119426862356],[-73.92732422574852,40.781090629324254],[-73.92754410768512,40.781050635401634],[-73.9276039547454,40.78103974834903],[-73.92769650608254,40.78101478526652],[-73.92778746547549,40.780989858917586],[-73.92810118993663,40.78092032002107],[-73.92849269580674,40.78100835324047],[-73.92917352795325,40.78141057877102],[-73.9303098816472,40.782077335895316],[-73.93063819695584,40.78226141302441],[-73.93105352803921,40.78239659378324],[-73.9326708060521,40.782693639812365],[-73.93502345117236,40.78300638201435],[-73.93540566292114,40.78339449913405],[-73.93581299799298,40.783710081268794],[-73.93598226003293,40.7839423680532],[-73.93607064658492,40.78421721581008],[-73.93605332720759,40.784512368076776],[-73.93600271220353,40.78467537090369],[-73.93591823870035,40.78480687998174],[-73.93579345324424,40.78525478115202],[-73.93576384806458,40.785446039146336],[-73.93571265998845,40.785680489246246],[-73.93314749383153,40.788691282071184],[-73.93270707318968,40.78916719218212],[-73.93240673563922,40.789718503046515],[-73.93224324588684,40.789692515205765],[-73.93147595314876,40.79047915912888],[-73.93084178719639,40.79099143000079],[-73.93072940501884,40.790955114215386],[-73.92978443004151,40.79134147536453],[-73.92972400790947,40.791366178171536],[-73.92966610521292,40.79135578622649],[-73.9287194896338,40.7909435327562],[-73.92859459823978,40.79096692415191],[-73.92807273587826,40.790823391141565],[-73.92737326899098,40.79081082516725],[-73.9269225827856,40.790788693002014],[-73.92680823697293,40.79076444018542],[-73.92666714373019,40.790734513893575],[-73.92641834021488,40.790693376193516],[-73.92625431474322,40.79069453300849],[-73.9261041024332,40.79073160730996],[-73.92606242622999,40.79082793616362],[-73.92606571253833,40.79093668275996],[-73.9260860778176,40.791004012938735],[-73.92608938664702,40.791092046136995],[-73.92604500498163,40.79117745932123],[-73.92604831400956,40.79126549193269],[-73.92608708144499,40.79135413308455],[-73.9261128771905,40.791413114098766],[-73.92615360747125,40.79154777494013],[-73.92616033990507,40.791620275177166],[-73.92616023377902,40.791716073510884],[-73.92627260981645,40.791757571034466],[-73.92644290176644,40.791796517697264],[-73.9265484745292,40.79182765421351],[-73.9265688801793,40.79185873681861],[-73.92651433019059,40.791897539443355],[-73.92627928808834,40.79187926587529],[-73.92614646074732,40.79184811016752],[-73.92592839987515,40.79187645092191],[-73.92576489923744,40.79185822180665],[-73.92563608586745,40.79182315574161],[-73.9255877914775,40.79182185999814],[-73.92558094001407,40.79185551410814],[-73.92560814781015,40.79189695828148],[-73.9261702508689,40.79189990812939],[-73.92642909660879,40.79195703508008],[-73.92663010365783,40.79194680694441],[-73.92666775380432,40.79194057213958],[-73.92673913886138,40.79192875185231],[-73.92670177076633,40.79183293010977],[-73.92664049578528,40.79179146422634],[-73.92657917174049,40.7917940151715],[-73.92650765413156,40.79177325647902],[-73.9263681028016,40.79166183419214],[-73.92633080392882,40.791503873114216],[-73.92634471493115,40.79124755705966],[-73.9264266261548,40.79111038629359],[-73.92648804311864,40.791022393999704],[-73.92656584807987,40.79097950185658],[-73.92670272281141,40.79096815888377],[-73.92673885594114,40.790974120837205],[-73.92682874582606,40.790988952076695],[-73.92694456108919,40.79099938201269],[-73.92701950689816,40.79099942975277],[-73.92711487713235,40.791015024230255],[-73.92716599683943,40.790996933453535],[-73.92724094286734,40.790996980621685],[-73.9273158787935,40.79100738396167],[-73.92738061595081,40.790997068665945],[-73.92743856860018,40.79096085712281],[-73.92751010802489,40.79096090213123],[-73.92756120582968,40.79096352366368],[-73.92765319089136,40.79095840286456],[-73.9277840996424,40.79094160382707],[-73.9278688922052,40.79095483831723],[-73.9278932871547,40.79097884634051],[-73.92790202759703,40.791009818668336],[-73.9279105358314,40.79103914679122],[-73.9278937449928,40.791091111210484],[-73.92765982803098,40.79134833426529],[-73.92757830264749,40.79146047486957],[-73.92732065704298,40.7917431602298],[-73.92727664462073,40.791767327255954],[-73.92723286076209,40.79179136818892],[-73.92713563764022,40.791929306801514],[-73.92780141486193,40.791997479131155],[-73.92800053586241,40.79213364095347],[-73.92826720298079,40.79232852397404],[-73.9283194359912,40.793091266082726],[-73.9282921999328,40.79315082224056],[-73.92826221599341,40.79320287515347],[-73.92735224578799,40.794460846782584],[-73.92724362202914,40.79477971085496],[-73.92709775283825,40.79510394223802],[-73.92705117746826,40.7951787840646],[-73.9270115547382,40.795255903895765],[-73.92697907687112,40.79533492894325],[-73.92695390083247,40.79541547781582],[-73.9269361484504,40.795497160940506],[-73.92692590462262,40.79557958400357],[-73.92692321960746,40.795662348903164],[-73.92690492714154,40.795983851767936],[-73.92689066980924,40.79623452436238],[-73.9268896786395,40.796252011431335],[-73.92695192377981,40.79670843214218],[-73.92703845685821,40.796988795207476],[-73.9271115141623,40.79719788006736],[-73.92718514800379,40.7973498967187],[-73.9272029981222,40.797386747692755],[-73.92721689278596,40.7974154332488],[-73.9272772028445,40.79740745307425],[-73.92743922192645,40.79771053810799],[-73.92747588601745,40.79812289983246],[-73.92726293295631,40.79891864506106],[-73.92691995657893,40.79983759048993],[-73.92690105422145,40.799888236676075],[-73.92688261777174,40.79994076875161],[-73.92685410186321,40.79998755902302],[-73.92680607671764,40.80003590076877],[-73.92669572614771,40.800146977076245],[-73.92666565490181,40.80018271401784],[-73.9265535167681,40.80031517296066],[-73.92653846445016,40.80033389815394],[-73.9265025028775,40.80037491715338],[-73.9266778180094,40.8004496894687],[-73.9265524180424,40.80060482504616],[-73.9265095488364,40.80065703126224],[-73.92588046318872,40.801551741962996],[-73.92582494619354,40.80164248988908],[-73.92577551805864,40.80173060099814],[-73.92569826189312,40.801810871426575],[-73.92549293546509,40.80195616882528],[-73.92529030602597,40.801995586077716],[-73.9252752102012,40.80199852274338],[-73.92436044107556,40.80198555341902],[-73.92263378594882,40.80186873814114],[-73.92215538898822,40.80162646997485],[-73.92191092229565,40.8015026662535],[-73.92133752419274,40.8008521075022],[-73.92113594709092,40.80047546009652],[-73.92103317645132,40.800265281858074],[-73.92083898713122,40.80001259800666],[-73.92057878116655,40.79966814846023],[-73.92035479893731,40.79942285236057],[-73.9203146552122,40.799375459290026],[-73.91923785764347,40.79888106768282],[-73.91914573748252,40.79883898734595],[-73.91906560282143,40.79880279731935],[-73.91899496843432,40.79877184320446],[-73.9189872445785,40.798769712219844],[-73.91891076100565,40.798740138368245],[-73.9179799205819,40.79838020192752],[-73.9179027981093,40.798362653231486],[-73.91662985247798,40.79785813943717],[-73.91639852914044,40.79768484203896]]]]}},{"type":"Feature","properties":{"shape_area":"0.000106175396322","objectid":"202","shape_leng":"0.0699215712618","location_id":"202","zone":"Roosevelt Island","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.94180032729437,40.76904692662474],[-73.9425680614214,40.76850590573147],[-73.94285528620689,40.76830349440931],[-73.94321923520103,40.76789264385325],[-73.94381427322762,40.76722091204987],[-73.94422343089231,40.76666497788985],[-73.9448402665221,40.76582362839085],[-73.94623787959823,40.76428501454969],[-73.94662141408685,40.763862772080905],[-73.94682460228385,40.76361763323449],[-73.94708876929518,40.763298921086715],[-73.94788268389203,40.76236569759203],[-73.9479297966422,40.76231031625978],[-73.94832459525026,40.76184623000118],[-73.94833197228184,40.76183755882174],[-73.94896770106449,40.76109023662192],[-73.94943175497114,40.76054861736116],[-73.94971226700027,40.760328917384776],[-73.95033358814476,40.7598567555536],[-73.95126005908766,40.758810116371734],[-73.95148626283033,40.75866645585446],[-73.9517119041103,40.75846249420143],[-73.95177822026001,40.758402549876976],[-73.9520923302263,40.75799314034483],[-73.95217663423693,40.757831336440056],[-73.9522114634206,40.75758363983295],[-73.95254079336881,40.75709531453726],[-73.95312156546179,40.7565238048271],[-73.95322009963138,40.756426842320344],[-73.95326888611,40.756381044103335],[-73.95330696035853,40.7563443271275],[-73.95334556462886,40.75631137566744],[-73.95340583051967,40.75625853187726],[-73.95409527736291,40.75565492894537],[-73.95507326928144,40.75479868255479],[-73.95519503183546,40.75477452347619],[-73.95579415237704,40.75416154740866],[-73.95692404304639,40.75296115989125],[-73.95721003531298,40.75271535683171],[-73.95791452493181,40.752109854525315],[-73.95860755756419,40.75161332398696],[-73.95903975987336,40.7513924851116],[-73.95902757442488,40.751297369850946],[-73.95941235107571,40.750947663845146],[-73.95955875930795,40.75081459776195],[-73.95990187081871,40.750558515353546],[-73.9603917057254,40.750256186117326],[-73.96082903392376,40.749910550705266],[-73.96104019266978,40.749670844523514],[-73.96117372960865,40.74949844307386],[-73.9614247793652,40.749401291404006],[-73.96158304969282,40.74941430105318],[-73.9616079947122,40.74956431675508],[-73.96155080052249,40.74977388985281],[-73.96132003404371,40.750074671967425],[-73.96111060170932,40.750600469450376],[-73.9607094085506,40.75114849812205],[-73.96026766186368,40.75158071381146],[-73.96001132397946,40.75183151716754],[-73.95949352891616,40.752972403252826],[-73.95901616663733,40.75359505947865],[-73.95892671110458,40.75356249218072],[-73.95845836852823,40.7539492367524],[-73.95768072880023,40.75482196108277],[-73.9568947698001,40.755703995161895],[-73.95646348786491,40.756187982772815],[-73.95598563455,40.756724225403765],[-73.95565513182049,40.75709510586294],[-73.95559286286709,40.75722280008675],[-73.95556724783259,40.75725766684307],[-73.95553464388513,40.75729603423413],[-73.9555042551224,40.75733345603629],[-73.95546455390387,40.75737736810592],[-73.95544589007469,40.757399251221365],[-73.9549940600116,40.75792901932858],[-73.95365747474159,40.75949610137514],[-73.95332321608947,40.75974596434368],[-73.9533914071698,40.7597967621788],[-73.95312451552458,40.76005275821471],[-73.95297788208018,40.75996210793836],[-73.95231257072545,40.76063375519731],[-73.9520863228326,40.76086215420241],[-73.95187667349164,40.761245582899015],[-73.95162504986979,40.76167886380286],[-73.95097191647194,40.76249450775369],[-73.95093734914026,40.762570495118865],[-73.95073068791342,40.76275822521683],[-73.95037548087188,40.76317384529021],[-73.94997191725122,40.76364603015847],[-73.94920376011383,40.76426964391638],[-73.94908628795766,40.76426402713744],[-73.94881315308189,40.7646107542343],[-73.94770109006382,40.76602239716259],[-73.94655273946525,40.767368205283255],[-73.94591458852791,40.76821393900933],[-73.94585112316524,40.76824775011775],[-73.94584451411889,40.76832122812566],[-73.94575361316765,40.76830167121359],[-73.94570357284314,40.76832793415568],[-73.94559658517925,40.768470865002506],[-73.94548114294636,40.76862477921884],[-73.94562721096723,40.7686929530894],[-73.94556302024347,40.76880177601348],[-73.94540491875006,40.768732173019295],[-73.94538208189473,40.76876320302393],[-73.94524510320667,40.76877326815515],[-73.94515704210755,40.76911831787578],[-73.9450906579704,40.76921372115898],[-73.94472353210327,40.76973405894194],[-73.94472478498723,40.76978627176734],[-73.94467293291667,40.76981996802662],[-73.94456161508772,40.769886395963674],[-73.9442700703175,40.77014053537861],[-73.94400423978152,40.77029398207532],[-73.94320414157106,40.77099239987432],[-73.94281710980138,40.77141086085113],[-73.94257830300492,40.7717018568592],[-73.94212674623404,40.77203470075466],[-73.94136990721195,40.77230915091386],[-73.94088707205813,40.772372515888044],[-73.94056957410288,40.77261475898203],[-73.94027460960578,40.77294743744903],[-73.94017959802048,40.772959315797124],[-73.94007665725826,40.77292618617896],[-73.9400115727917,40.77284236077629],[-73.94018451224508,40.772564906804156],[-73.94028207924202,40.77230140699121],[-73.9402776672235,40.77171314173954],[-73.94020021779653,40.77112830566273],[-73.94022870389077,40.77085226166444],[-73.94027985829325,40.77067071100978],[-73.94035533477506,40.77049657437108],[-73.94082605300244,40.76991215726811],[-73.9411177871802,40.76941440857463],[-73.94121934173008,40.76933434312226],[-73.94125975382602,40.769308879392725],[-73.94180032729437,40.76904692662474]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000388703351209","objectid":"209","shape_leng":"0.0306953113473","location_id":"209","zone":"Seaport","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00499805099996,40.71201189699988],[-74.00490674599992,40.711972278999966],[-74.00442860399994,40.71178622599991],[-74.00418143899992,40.71168714199992],[-74.00382358799995,40.71155186199991],[-74.00366118299998,40.711487282999954],[-74.00336407499992,40.71126941399996],[-74.0033244169999,40.71123748299989],[-74.0025796699999,40.71063789699985],[-74.00223869799997,40.710363931999886],[-74.00173688899991,40.70996016999993],[-74.00155908199999,40.70981710799992],[-74.00147140299997,40.709746553999885],[-74.00134439799994,40.709646292999906],[-74.00055004899994,40.709017916999905],[-74.00026566699997,40.708792949999896],[-74.000191031,40.708733911999886],[-74.000123591,40.70868451899993],[-74.00000765499989,40.70859961899986],[-73.9999293639999,40.70853681699991],[-73.99981193899987,40.70844261399988],[-73.99956273399984,40.70823648299993],[-73.99944281399992,40.70813655699987],[-73.99939954999992,40.70810033799996],[-73.99936195599989,40.70807228699991],[-73.99928734399988,40.708016626999886],[-73.99928731099999,40.708016602999926],[-73.99919451154408,40.70794737617572],[-73.99925945470767,40.7079140213104],[-73.9993263267542,40.70787967649388],[-73.99938225177354,40.707841549321465],[-73.99942129138608,40.70781893705527],[-73.99946033075176,40.70779632645101],[-73.99952324941056,40.70776262865822],[-73.99951211364748,40.70774870660909],[-73.99949062474623,40.707721845224945],[-73.99953839659445,40.70769347002565],[-73.99955121325492,40.7076943527765],[-73.99957149513773,40.70771719818587],[-73.99960948039234,40.70775997317624],[-73.99988297085214,40.7076240860353],[-73.99994855949784,40.707591496371016],[-73.99994505655117,40.70758262698328],[-73.99994855952315,40.70755869155379],[-73.99995671262306,40.70753119885585],[-73.99997222648798,40.70750639882204],[-73.99999645016015,40.70749164789845],[-74.00013868859138,40.707405054407545],[-74.00023380525755,40.70734714248689],[-74.0004002783203,40.70726027957068],[-74.0005524793205,40.707184275922934],[-74.00077175219094,40.707080148200696],[-74.00084973367683,40.70704311913909],[-74.00088259097619,40.707025253300515],[-74.00118685262835,40.70685982577176],[-74.0011313057719,40.70679905068455],[-74.00122367538816,40.70674526164779],[-74.00123213691963,40.706740336930935],[-74.00122701299958,40.706734869906434],[-74.0011603902257,40.70666372083431],[-74.00117521610974,40.70664874526917],[-74.00116913341533,40.70663949766775],[-74.00117643567683,40.70663505879536],[-74.00117602079669,40.70662757435901],[-74.00098276691728,40.70641671299288],[-74.00140533024056,40.706180135207944],[-74.00140666691954,40.706179388020644],[-74.00140581495832,40.706178612883114],[-74.0005829704798,40.7054339336489],[-74.0005924020934,40.7054100794135],[-74.00082417549918,40.70526711251571],[-74.00143661179398,40.704872177705234],[-74.00145437409415,40.70487330321598],[-74.0014608578281,40.70487371790605],[-74.00183509991501,40.7052122589112],[-74.00205517713985,40.7054113499346],[-74.002061425319,40.70541700532031],[-74.00206282142268,40.70541607717397],[-74.00212278743204,40.70537900283618],[-74.00215818324273,40.705357119059194],[-74.00256965079724,40.705523579761746],[-74.00295417200002,40.706027114999934],[-74.00296019099989,40.70603499799994],[-74.0029653009999,40.706041688999925],[-74.00299474599991,40.70608024599991],[-74.00302615299988,40.70610867499988],[-74.00306957,40.70614280299989],[-74.00316110399999,40.706232014999884],[-74.00360537999994,40.70678059299992],[-74.00372234799997,40.70693234399992],[-74.00392127499991,40.70723974499993],[-74.00405660199985,40.707436780999934],[-74.00432857299997,40.70782349599988],[-74.00478782699994,40.708401892999895],[-74.00505672799989,40.70878876899996],[-74.00526217199993,40.70892071099994],[-74.00551252899992,40.70909340799993],[-74.00643549199992,40.70955732199991],[-74.00705335799995,40.7098719509999],[-74.00774466499993,40.71022077299991],[-74.00906264699988,40.71088670399995],[-74.00860085399992,40.711392239999945],[-74.00834760999993,40.71135854599988],[-74.00796787799999,40.71144733199986],[-74.00746749399993,40.71156690299989],[-74.00738921499999,40.71164226899988],[-74.00698584099997,40.71173749899987],[-74.00607752399999,40.7119623529999],[-74.00589174999999,40.71200715999993],[-74.00573499299995,40.71197868799989],[-74.00543986499996,40.7120785329999],[-74.00538198399992,40.7120767429999],[-74.00522812799994,40.71207345199987],[-74.00518548699988,40.71207123299992],[-74.00510989899993,40.712055593999914],[-74.00499805099996,40.71201189699988]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000397291966087","objectid":"211","shape_leng":"0.0252345082132","location_id":"211","zone":"SoHo","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.001523638,40.71982079799995],[-74.00188406299992,40.71939757099991],[-74.00260001899987,40.719903425999874],[-74.0032595509999,40.72037709599996],[-74.00351186399998,40.7205563519999],[-74.00392928399991,40.72085443499993],[-74.00463516199997,40.721353632999865],[-74.00522684899992,40.72174422199989],[-74.0053098609999,40.72182419199987],[-74.00535249999994,40.72189013499991],[-74.00538048599999,40.721962173999934],[-74.00539186699989,40.7220373659999],[-74.00538616799996,40.722112360999894],[-74.00536435999994,40.722183951999966],[-74.00505887099996,40.7229778639999],[-74.00478574899996,40.7236248379999],[-74.00457474399995,40.72417313099995],[-74.00427457099987,40.72491210899993],[-74.00403067899997,40.72551249599992],[-74.003730175,40.726250058999945],[-74.00312206399995,40.72687712799991],[-74.00251324599992,40.72760092699993],[-74.00221100999997,40.727961316999874],[-74.00214891499996,40.728035366999904],[-74.00139033499991,40.727660001999894],[-74.00063239199994,40.727286611999915],[-73.99991579199988,40.726934712999864],[-73.9991182469999,40.72654231299988],[-73.99836119299998,40.72616746799987],[-73.99761019599993,40.72579713799992],[-73.9967717579999,40.72543194399992],[-73.99684295899995,40.725347837999905],[-73.9977850889999,40.724234893999906],[-73.9988117219999,40.72302140899991],[-73.99952163199998,40.72218334699987],[-73.99985330399981,40.721791787999926],[-74.000660725,40.72083979399993],[-74.00142450999995,40.71993719799993],[-74.001523638,40.71982079799995]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000984786989135","objectid":"224","shape_leng":"0.0440204462769","location_id":"224","zone":"Stuy Town/Peter Cooper Village","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97511055399991,40.73539025499987],[-73.97495992999993,40.73536871799993],[-73.9748930509999,40.73537519599992],[-73.9748261859999,40.73538167399991],[-73.97474900599997,40.73542518799996],[-73.97467193099992,40.73539830299991],[-73.97443700979296,40.73531635606464],[-73.97442281130166,40.73523384837344],[-73.97440811789221,40.735177896632045],[-73.97438778900487,40.735091821036896],[-73.97437155854928,40.735030348615766],[-73.97434824707203,40.73494205848576],[-73.97431379174476,40.734803480784734],[-73.97427029379338,40.734630482401556],[-73.97425447779786,40.73456678630614],[-73.97421154391887,40.73440582932186],[-73.97418317281978,40.73430095691658],[-73.97416917978923,40.73423971179249],[-73.97415110840357,40.73416396616608],[-73.97410591714231,40.73399354354752],[-73.97406016216316,40.73381107244231],[-73.97402174588252,40.73366389393438],[-73.97399237089745,40.73355457425366],[-73.97395905029705,40.73342116553848],[-73.97394321924938,40.73340308886323],[-73.9739353135698,40.73336607678393],[-73.97390702695192,40.73334971660826],[-73.97390137711359,40.73332733730498],[-73.97389120382235,40.733309261904566],[-73.97386631865577,40.73331097608678],[-73.97386292958613,40.733291182396094],[-73.97385275193625,40.73328257140103],[-73.97384483854864,40.733265361113745],[-73.97386520802397,40.73324642803961],[-73.97385730036494,40.73321630363855],[-73.97384145962661,40.733219740365655],[-73.9738493738127,40.73323265510628],[-73.97383126846695,40.73324556510916],[-73.97380976846544,40.733248999372925],[-73.97378375783396,40.73322748070547],[-73.97380298847429,40.733211987539875],[-73.97378376867147,40.733199934826935],[-73.9737645264947,40.73321284338783],[-73.97374076899366,40.73320938893705],[-73.97372718707769,40.73321971435091],[-73.97370795169591,40.73321368520495],[-73.97368984982582,40.73321885110607],[-73.97367627576054,40.733205933888065],[-73.97369438098605,40.733195609010984],[-73.97369212859832,40.73317409574745],[-73.97371588914245,40.73316979674709],[-73.97372607356364,40.73315947055946],[-73.97373739762315,40.73314311937236],[-73.9737577603272,40.733139684862834],[-73.97377813922648,40.73312419146021],[-73.97380529755296,40.7331207574843],[-73.97381887171846,40.733099247654614],[-73.97384036797052,40.73310355629585],[-73.97387206174007,40.73309495480662],[-73.97386810776207,40.733065687195605],[-73.9737703082618,40.73268844617683],[-73.97367702799221,40.73231023125138],[-73.97364735766598,40.732175493766555],[-73.9736273640125,40.732107445607845],[-73.97360833346643,40.73204268972966],[-73.9735396928971,40.73176433282338],[-73.97352137914261,40.73169016478128],[-73.97341321730852,40.73128241642864],[-73.97338181410112,40.73123602442203],[-73.9733659100069,40.731220019948424],[-73.97334064688678,40.73118304166194],[-73.97331715426387,40.73115792717309],[-73.97328321111144,40.731112675908484],[-73.97323625417937,40.731056926741],[-73.97320012915407,40.731016632390016],[-73.9731459279161,40.73096088099614],[-73.97309858148473,40.730913679890705],[-73.97305304853799,40.73086730375558],[-73.97300605975387,40.730823131910434],[-73.97291929100172,40.73075024150268],[-73.97283215562831,40.73068148130965],[-73.9727461164315,40.73060583194699],[-73.97264270492411,40.73052353780736],[-73.97255990007288,40.730458093618154],[-73.97247970053027,40.73040080736293],[-73.97245936471883,40.73038632937771],[-73.97233277439494,40.73029657297067],[-73.97224018578797,40.7302304971359],[-73.97223370120912,40.73022567784319],[-73.9720891859024,40.73011835704164],[-73.97205385214981,40.73008665043243],[-73.97201026033457,40.73004517148755],[-73.97196340301248,40.73000037721747],[-73.97190238512813,40.729930708644424],[-73.97185608949026,40.729875550267224],[-73.97182992841701,40.72984569147017],[-73.9717482235702,40.72974201454455],[-73.97174494790077,40.729734548588496],[-73.97170029038125,40.72966570245395],[-73.97162729998553,40.72955788414599],[-73.97157719441799,40.729469136637825],[-73.97151882628022,40.72935136174009],[-73.97150816031564,40.72932396649239],[-73.97147994907196,40.72924957769849],[-73.97145716122313,40.729169407557954],[-73.97143981566721,40.72909584986445],[-73.9714322181421,40.72906361904417],[-73.97142139208222,40.728995843972214],[-73.97141235109783,40.728879856021706],[-73.97140659672053,40.72879447130567],[-73.9714061790851,40.728718764251106],[-73.97141946379264,40.72856882754402],[-73.97142718443534,40.72848582638753],[-73.97145269559667,40.728341433313076],[-73.97145662182912,40.72831923851683],[-73.97147343819977,40.728209255928085],[-73.97151048447923,40.7280027639066],[-73.97155553514948,40.72770310859809],[-73.97156931647098,40.72769376719842],[-73.97157278760149,40.72764591976768],[-73.97158965149985,40.72764003369323],[-73.97161872706992,40.72765055818574],[-73.97163586152143,40.72764797412135],[-73.97165160075565,40.72764321253462],[-73.97168514866578,40.727405886636525],[-73.97158604106335,40.72739693305272],[-73.9715611436591,40.72739468824764],[-73.97153686592743,40.72739296510087],[-73.97152076789605,40.72738616623977],[-73.97151282181225,40.72737430858104],[-73.97149260058237,40.727373123351384],[-73.97149039092838,40.72735009810991],[-73.97162697285862,40.72662845299843],[-73.97179602099986,40.72671367999989],[-73.97185671300005,40.7267586849999],[-73.97191244199995,40.72679100899989],[-73.97197685099988,40.72683035599993],[-73.97205015299988,40.72688094599988],[-73.97329796799995,40.72742800799989],[-73.97569651100005,40.728475052999926],[-73.97580243799992,40.72851847999988],[-73.9761329,40.72863827199994],[-73.97615204099999,40.728645209999854],[-73.976269971,40.7286892589999],[-73.97690436400002,40.72895782399994],[-73.97739386799988,40.72916504799993],[-73.97802697999985,40.729433059999984],[-73.97926849199995,40.72998142799986],[-73.98034007599992,40.73044246099994],[-73.98082000799998,40.73063915899997],[-73.98150053399984,40.73091807699994],[-73.98246876199994,40.731314883999914],[-73.98255629299985,40.7313501339999],[-73.98238628699993,40.7314112439999],[-73.98232282599996,40.73149788999992],[-73.98196782199994,40.7319825609999],[-73.98180339299985,40.73220479799991],[-73.98149910399985,40.732618595999924],[-73.98125724799999,40.732938574999885],[-73.98105323600001,40.73320848199997],[-73.98088975699991,40.73343707099984],[-73.980644989,40.733779319999904],[-73.98041991299985,40.73408982099988],[-73.98020496200002,40.73438532199987],[-73.98009050499998,40.734544370999906],[-73.97978904000004,40.734961816999906],[-73.97944606000004,40.73541451499994],[-73.9793481959999,40.73555311199989],[-73.97890917399987,40.73616412599992],[-73.97857449799984,40.736677280999864],[-73.97849845599995,40.73679095699989],[-73.97833820599989,40.7367214709999],[-73.97792798399998,40.73654414599988],[-73.97712441199997,40.736196797999895],[-73.9763637329999,40.73586797799992],[-73.97589093699993,40.735673198999955],[-73.97522275599997,40.73539790699988],[-73.97511055399991,40.73539025499987]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000947058230931","objectid":"229","shape_leng":"0.0425252900116","location_id":"229","zone":"Sutton Place/Turtle Bay North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96162927534907,40.75515238425916],[-73.96219381838414,40.75450431515319],[-73.9622312516558,40.75452213042181],[-73.96268703046536,40.75400437328663],[-73.96289729202535,40.75376551709425],[-73.9628689676921,40.75374250915685],[-73.96316074049744,40.753412207328125],[-73.96373572283164,40.75278377577701],[-73.96426352137193,40.75220690108016],[-73.96482214210387,40.75159632579114],[-73.96485451699984,40.75169675999992],[-73.96495708499998,40.751743445999885],[-73.96505548699992,40.75181258099991],[-73.96521537099981,40.75180845999994],[-73.96518524199982,40.75195230699995],[-73.96530480400006,40.75193187399988],[-73.96532415299987,40.751930897999934],[-73.96547092299994,40.75193959699992],[-73.96688157199996,40.75254455599992],[-73.96701854999988,40.75260074199987],[-73.967067339,40.752620674999946],[-73.96694827399996,40.752785487999944],[-73.96677887099986,40.7530187869999],[-73.96665543199994,40.75318878499998],[-73.96661581800002,40.75324342499995],[-73.96897803700001,40.75425053499993],[-73.9712170449999,40.75519332399994],[-73.97075919399998,40.7558248509999],[-73.97031393599993,40.75645301899989],[-73.96984859899989,40.75707595799987],[-73.96939411299984,40.75769952799991],[-73.96893510299992,40.75833009199994],[-73.96847979599983,40.75895012799988],[-73.96802436899996,40.759578139999896],[-73.96792193499995,40.75959308699991],[-73.96746215199991,40.76022290599994],[-73.96699471899981,40.76090538299993],[-73.96657146999985,40.761481879999955],[-73.9665833839999,40.76155093499988],[-73.96431353599988,40.760599230999944],[-73.96355618899993,40.76028081899991],[-73.96308073599987,40.760083162999884],[-73.96196573699997,40.75961946099988],[-73.95972180399991,40.75866306399995],[-73.95903681099995,40.75838378299988],[-73.95893448599985,40.75833515499994],[-73.95877790811335,40.75827092092435],[-73.959070030312,40.757939098020366],[-73.95917264248828,40.757864780393994],[-73.95918103219987,40.757856111052256],[-73.95965770876651,40.75726014512322],[-73.95966400300107,40.75721141218687],[-73.96003900990611,40.75672535023881],[-73.96036455140813,40.75626941113339],[-73.96065638180474,40.75592314955019],[-73.96079709914974,40.75580477274058],[-73.96079722985938,40.75580465585206],[-73.96102790867172,40.75561058457904],[-73.96162927534907,40.75515238425916]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000560914463266","objectid":"230","shape_leng":"0.0310283096779","location_id":"230","zone":"Times Sq/Theatre District","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98362433299988,40.75551634599986],[-73.98411754799999,40.754842052999955],[-73.98640436699999,40.755808028999866],[-73.98694873899993,40.756035901999915],[-73.98841835499996,40.7566549869999],[-73.98979085399995,40.75723313199991],[-73.98929727499997,40.757906637999916],[-73.98884253899993,40.75853349899993],[-73.98839044599993,40.75916418599997],[-73.9879264059999,40.75979027699986],[-73.98747524599992,40.7604047869999],[-73.98701514599995,40.76103736699991],[-73.98656138499996,40.76166012199991],[-73.98610406099989,40.76228995299988],[-73.98564677799999,40.76291487399988],[-73.98519152199997,40.76354367499996],[-73.98473393799985,40.76416910499991],[-73.98428230099987,40.76479181499995],[-73.9824697079998,40.76403346399993],[-73.98143351999995,40.763594359999914],[-73.97860169399989,40.76239607199995],[-73.97905731199987,40.761770719999944],[-73.97951319199996,40.761148561999924],[-73.97997188199987,40.76052470099987],[-73.98042606399994,40.75989908099994],[-73.98088574599998,40.75927066899989],[-73.98134106999997,40.75864529899995],[-73.98179404299992,40.75802130299997],[-73.98225528700006,40.75738736499995],[-73.98271205299996,40.75677122899993],[-73.98316795999989,40.75614022199993],[-73.98362433299988,40.75551634599986]]]]}},{"type":"Feature","properties":{"shape_area":"0.000166929752992","objectid":"231","shape_leng":"0.0634201165587","location_id":"231","zone":"TriBeCa/Civic Center","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00931760399995,40.72470155099989],[-74.00864380599997,40.72422131699991],[-74.00857090999989,40.724169354999894],[-74.00830216299991,40.72397780899997],[-74.00807835299996,40.72382686299988],[-74.00791205999997,40.72369976699988],[-74.00762904199998,40.72349770399995],[-74.00629841699995,40.72254950399988],[-74.00591289899992,40.7222529489999],[-74.0053098609999,40.72182419199987],[-74.00522684899992,40.72174422199989],[-74.00463516199997,40.721353632999865],[-74.00392928399991,40.72085443499993],[-74.00351186399998,40.7205563519999],[-74.0032595509999,40.72037709599996],[-74.00260001899987,40.719903425999874],[-74.00188406299992,40.71939757099991],[-74.00140055699995,40.719052620999896],[-74.00127273399993,40.71896142599997],[-74.00053195499999,40.71843023899987],[-73.999956209,40.71801709499989],[-74.00027443699997,40.71761940199987],[-74.00081842499998,40.71692970799994],[-74.00168306199991,40.71574412299987],[-74.00211455799992,40.715158909999936],[-74.002453932,40.71478981999997],[-74.00272286199994,40.71438970899991],[-74.00321983099997,40.714036236999895],[-74.00360280399998,40.71364542999989],[-74.004059007,40.71313478999985],[-74.00421405399993,40.712980742999896],[-74.00429113899996,40.71290782599993],[-74.00470652299994,40.71257401499987],[-74.00485768099996,40.7124525409999],[-74.00498716699994,40.712374856999894],[-74.00512712599992,40.71230677399993],[-74.00527561999998,40.71224943999993],[-74.00543047899994,40.712203694999914],[-74.00558932999998,40.712170053999905],[-74.00574044699991,40.71208875699989],[-74.00589174999999,40.71200715999993],[-74.00607752399999,40.7119623529999],[-74.00698584099997,40.71173749899987],[-74.00738921499999,40.71164226999986],[-74.00746749399993,40.71156690299989],[-74.00796787799999,40.71144733199986],[-74.00834760999993,40.71135854599988],[-74.00860085399992,40.711392239999945],[-74.00883879499997,40.71150395899991],[-74.01012167499995,40.71208469599989],[-74.01166334799997,40.71279805599988],[-74.01254378499995,40.713179103999934],[-74.01359729999992,40.7136233779999],[-74.01375388499997,40.71369055499988],[-74.01359239999988,40.71449431699989],[-74.01347524299992,40.715110711999905],[-74.0133512149999,40.71523331199993],[-74.01323384899992,40.715656187999855],[-74.01314862399995,40.716029349999886],[-74.0130514639999,40.71645477099989],[-74.0128666309999,40.717176100999886],[-74.01281566799992,40.71735629799987],[-74.01244109199989,40.71905767299989],[-74.0125546879999,40.719069862999966],[-74.01270167899996,40.71909177499987],[-74.01303068113208,40.71913145590955],[-74.01301259080437,40.71921511757715],[-74.01295868239187,40.71947369644304],[-74.01296083955079,40.71948393527159],[-74.0129144874633,40.71970829322538],[-74.01294460912554,40.719713197540514],[-74.01294583743953,40.71969680842214],[-74.01302616790717,40.71970920840729],[-74.01302432551543,40.71972559759596],[-74.01344694115667,40.71978202079137],[-74.01338906903435,40.72004260727321],[-74.01396546195676,40.72011613349159],[-74.01452415856508,40.72018739744569],[-74.01450706139606,40.720265906177275],[-74.01457231438083,40.72027413774219],[-74.01451968588725,40.72051578688329],[-74.01452586453652,40.72051656945924],[-74.01452278990024,40.72053205032778],[-74.01418581466784,40.72048801202073],[-74.01414732641814,40.720481589088564],[-74.01415861254227,40.720431590837414],[-74.01409095949832,40.720422747859125],[-74.01407954419396,40.72047331152247],[-74.01400416755592,40.720468520737754],[-74.01396301313083,40.72046444645889],[-74.01396609722485,40.72041363453815],[-74.01386714357214,40.72040757231251],[-74.01385921064892,40.72044993375784],[-74.013681739107,40.720425901487225],[-74.0136874483683,40.72039057527121],[-74.01364192748738,40.720383366299956],[-74.01363580332405,40.72041955013261],[-74.01354841723077,40.72040685437942],[-74.01355378315908,40.720368726324615],[-74.01350724376601,40.720362832840436],[-74.01350069470506,40.720401861823426],[-74.01296558526825,40.720328675587126],[-74.01286909071982,40.720833752211725],[-74.01323937337015,40.72088798672807],[-74.01315895020863,40.72125326078352],[-74.01313846153448,40.72125131813748],[-74.01308347695151,40.721528774532736],[-74.01308010145627,40.721545807195234],[-74.01307805009768,40.72154553033896],[-74.01304353513854,40.72154472392732],[-74.01300955803927,40.721560486512075],[-74.01253875807251,40.721503176576356],[-74.0124917103152,40.72177975782742],[-74.01237071715381,40.722387580578996],[-74.01223080840143,40.72305625707263],[-74.01209463829593,40.72370705248107],[-74.01196432024551,40.72432986411989],[-74.01159122599992,40.724297603999936],[-74.01143933,40.72428446899996],[-74.01135428299995,40.724277182999884],[-74.011176661,40.725169424999905],[-74.01103681999996,40.72572537699997],[-74.01102457999994,40.72579386199993],[-74.01092277299992,40.72579415099991],[-74.0108123829999,40.725789802999955],[-74.01004078699994,40.725206162999925],[-74.00931760399995,40.72470155099989]]]]}},{"type":"Feature","properties":{"shape_area":"0.000204715440774","objectid":"239","shape_leng":"0.0636261152958","location_id":"239","zone":"Upper West Side South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97501417199996,40.78768560599987],[-73.97217414999986,40.78648646099994],[-73.96933573299991,40.78529327999992],[-73.96983225599998,40.784610910999916],[-73.97030068199992,40.783975413999904],[-73.97076013099995,40.783340137999865],[-73.971222922,40.78270625599991],[-73.97172305599985,40.78202147599997],[-73.97357117499988,40.779477861999936],[-73.97406668299993,40.77880541699987],[-73.97453231499993,40.77816778499996],[-73.97499744000005,40.77753254599988],[-73.97783054399989,40.77872973099989],[-73.980673654,40.779925181999914],[-73.98140948699984,40.780235418999894],[-73.98151911299976,40.78028175799991],[-73.98162787399998,40.780328934999936],[-73.98351422299999,40.781125389999914],[-73.98507184299989,40.781779680999946],[-73.98536952699989,40.78107837199991],[-73.98567936099997,40.780312632999944],[-73.98654378999994,40.780657980999926],[-73.98707137499986,40.780906381999955],[-73.98730772899984,40.78104130299991],[-73.98736363999998,40.781062804999856],[-73.98741432699994,40.7810875109999],[-73.98746219899995,40.78110860899996],[-73.98799363199988,40.78134281699988],[-73.9881274613434,40.78140179672367],[-73.98804128806722,40.781585961353784],[-73.98810029382456,40.78160287830525],[-73.98807644914505,40.78165093500165],[-73.98801805997222,40.78163418881039],[-73.98796079284213,40.781770987031535],[-73.98791968459248,40.78183347771319],[-73.98787728724993,40.78189205133479],[-73.98647480368582,40.783916573718756],[-73.98625187003549,40.78423876424542],[-73.9861137272529,40.78443891237993],[-73.98561580396364,40.78514186259512],[-73.98546581197031,40.78536070057545],[-73.98617270496534,40.78606845225865],[-73.98645586240188,40.785919219081364],[-73.98707234561537,40.78518963882012],[-73.98711901394245,40.7852103190041],[-73.98649778102364,40.78595120288722],[-73.98616462880621,40.786121882448334],[-73.98612842248579,40.7862390013311],[-73.98607113521952,40.78624070602664],[-73.98602727478905,40.78622896423677],[-73.98609763784941,40.786058225697985],[-73.98542932126932,40.78541394218458],[-73.9850811377319,40.78592193511045],[-73.98519883325459,40.78596655219782],[-73.98517050238983,40.78601333415815],[-73.98521621867359,40.78603050181638],[-73.98525509798002,40.78597620551154],[-73.98524273937646,40.78597257265341],[-73.98524962933016,40.78596313985584],[-73.98528177918678,40.78597862095007],[-73.98524003288435,40.78603585813679],[-73.98568388524194,40.78622212391976],[-73.98571752900456,40.78617599466883],[-73.98576566029756,40.78619627485871],[-73.98568287192252,40.78630978621312],[-73.9856362709302,40.78629015064923],[-73.98567072256466,40.78624291199381],[-73.98561523764441,40.78621964571528],[-73.98520511880015,40.786047669212834],[-73.98521103560738,40.78603955488364],[-73.98516263994709,40.78602099976972],[-73.98513163631195,40.786060297020015],[-73.98501696406503,40.78601423719574],[-73.98493597820348,40.78613072065099],[-73.98465507883023,40.78653474180792],[-73.98574378790082,40.78657008285482],[-73.98589227228332,40.78642652901957],[-73.98594285499509,40.786452847880334],[-73.98594956155647,40.786487113966515],[-73.98581237352651,40.786616865357146],[-73.98513520970305,40.786587618895574],[-73.98461942858404,40.786586016349794],[-73.98371551265213,40.78788609007548],[-73.98234664147557,40.78985478127526],[-73.98188645923244,40.7905165804675],[-73.98185980499981,40.79050307799984],[-73.98176573099992,40.790455425999916],[-73.98169328900003,40.79041872799998],[-73.9815945909999,40.79038412399996],[-73.98097150799998,40.79016087799991],[-73.98035659399986,40.78994055799996],[-73.97785649899998,40.78888153899993],[-73.97660504199992,40.78835448099992],[-73.97650149399988,40.788312676999944],[-73.97639149199995,40.78826674699993],[-73.97501417199996,40.78768560599987]]]]}},{"type":"Feature","properties":{"shape_area":"0.000216049973456","objectid":"232","shape_leng":"0.0614709085331","location_id":"232","zone":"Two Bridges/Seward Park","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.97635525199995,40.71913288399984],[-73.97551012699985,40.71895861299991],[-73.97545167499995,40.71894655899996],[-73.97509520199993,40.71888074599987],[-73.97497644799995,40.71887065199991],[-73.97491298899988,40.718862442999864],[-73.97485919899994,40.71885547999992],[-73.97474239999998,40.71884079399995],[-73.97468687499985,40.71884170199993],[-73.97464720799998,40.718842349999896],[-73.97347975524508,40.71886142911291],[-73.9735436873773,40.71866262945056],[-73.97359492157358,40.71851801880885],[-73.97365255284436,40.71835741732556],[-73.97372208271211,40.718155790530695],[-73.97380258807483,40.71794026346791],[-73.97390596973892,40.717639219737386],[-73.97399195824943,40.7174153452363],[-73.97408161583928,40.717155325222436],[-73.97418131138616,40.71692102577268],[-73.97422340312282,40.716786147252094],[-73.97425084643321,40.716698543367634],[-73.97445315383058,40.716151681161705],[-73.97449720984376,40.71604257630628],[-73.97463933366734,40.71570768976437],[-73.97473312789971,40.715482988621964],[-73.97481840216984,40.715286372090574],[-73.97491787352749,40.71506599388644],[-73.97500029316984,40.71487154606127],[-73.97513489452726,40.714608103940215],[-73.97515865241793,40.71456160677657],[-73.97517484286146,40.71452991316869],[-73.97518850986295,40.71450316072387],[-73.97521319223425,40.71444996434558],[-73.97523888264773,40.714394578936414],[-73.97523893090127,40.714394480105895],[-73.97580133088594,40.713182224269396],[-73.97579346365995,40.71317403724817],[-73.97596844519683,40.712789573390786],[-73.97604981455497,40.71260419377782],[-73.97612368838796,40.71246032539839],[-73.97616531238327,40.71242019791075],[-73.9763112786719,40.712118647310184],[-73.97642872514517,40.71190903250363],[-73.97650540115386,40.711798789452466],[-73.9765500881422,40.711734538728294],[-73.97671221539647,40.71153576517846],[-73.97681883540065,40.71141956702117],[-73.97699076574622,40.71125666023055],[-73.97705659401724,40.71119762696939],[-73.97722213562548,40.711068731228345],[-73.97752668432635,40.71084307273315],[-73.97772119493052,40.7107100746607],[-73.97782091638246,40.71064544490706],[-73.9778994961945,40.71059986620246],[-73.9779967479038,40.710561017391605],[-73.978079749066,40.710532251079854],[-73.9781819069428,40.71050686551763],[-73.97825557749202,40.71049790955784],[-73.97837148165253,40.71048970749159],[-73.97861560123994,40.71047378191086],[-73.97877613342088,40.7104633150472],[-73.97918894377,40.71043492338827],[-73.97920726434594,40.71043366689569],[-73.9792901523712,40.710428144566926],[-73.98003642292828,40.71037840126665],[-73.98028344332175,40.710361815108435],[-73.98029934149871,40.71034267301001],[-73.98031391320167,40.71033259071118],[-73.98033113415963,40.710323524412026],[-73.98033016246781,40.71028673011878],[-73.98050948312414,40.71027356987713],[-73.98127684210984,40.710217251191],[-73.98123734462091,40.70982334331847],[-73.98306019477401,40.70964791174809],[-73.98364234472628,40.70959187924471],[-73.98449647076768,40.70950966393941],[-73.98655035339978,40.709311944641996],[-73.9881649172667,40.70915678150646],[-73.9881734096786,40.709147518301265],[-73.98839064023261,40.70912694916261],[-73.98844653437374,40.709133820546924],[-73.98847967268772,40.70915584730847],[-73.98849727173877,40.709176305795744],[-73.9886365807184,40.70991206151628],[-73.98864533493676,40.709916934401114],[-73.98866750580949,40.709920034830716],[-73.98869610271325,40.70992844984459],[-73.98871771111233,40.70994709051892],[-73.9887368170753,40.709970741845105],[-73.98879717785798,40.709966607472246],[-73.98889845980878,40.70995473576508],[-73.98935765696673,40.709900986707815],[-73.98946067019428,40.70988928705126],[-73.98957449608706,40.7098740816065],[-73.98974515155741,40.70984876165558],[-73.99015825373382,40.70979037266374],[-73.99051420376685,40.709733884621315],[-73.99078913018562,40.709689506086086],[-73.9910678346299,40.70965723034519],[-73.9913510923706,40.709620332703324],[-73.99170260292517,40.709565262955984],[-73.99176779580131,40.70955505602623],[-73.99190824271031,40.709532926643355],[-73.99192047499996,40.70955429399989],[-73.9919434659999,40.70958905299992],[-73.99197509100001,40.70964553499988],[-73.99200595899985,40.70969647899993],[-73.99204746299989,40.70977574499992],[-73.9919070979999,40.70980199399987],[-73.99183817499984,40.709810551999965],[-73.99177662699996,40.709819039999914],[-73.99191690599989,40.710597505999885],[-73.99197674899987,40.71091126599987],[-73.99200166199995,40.7110155229999],[-73.99202215999982,40.71110129999989],[-73.99213550299994,40.71157561499989],[-73.99215484499997,40.71165655599985],[-73.99216806999992,40.71171189899994],[-73.99218322399993,40.71177531099993],[-73.99220577799984,40.71196063499992],[-73.99221855999997,40.71206565499991],[-73.99224319399994,40.71226805499987],[-73.99225369299995,40.71235432599987],[-73.99226747499985,40.712467556999925],[-73.99239157000001,40.71319080999998],[-73.9924556359999,40.71376288199985],[-73.99246827699984,40.71385682499988],[-73.99256242199989,40.714388076999974],[-73.99213486499995,40.7144198019999],[-73.99122551100001,40.714486643999926],[-73.9907551529999,40.7145540729999],[-73.99022012699989,40.71440493999988],[-73.99022750999988,40.714491668999926],[-73.99022155699988,40.71457875599987],[-73.9902023599999,40.71466442999987],[-73.98975418199988,40.71555234799996],[-73.98915463799979,40.716708646999905],[-73.98836626299988,40.71644570199992],[-73.98795181500003,40.717265627999915],[-73.98791645999995,40.71733557399992],[-73.98787935799997,40.7174089729999],[-73.98751208099989,40.71807218599989],[-73.98743405799996,40.718213079999934],[-73.98739393199992,40.7183035229999],[-73.98736015299995,40.71836979699993],[-73.98675136699994,40.719592845999955],[-73.9859109239999,40.71933897299989],[-73.985073423,40.71908329399989],[-73.98447731799986,40.72023423899989],[-73.98386422799992,40.7213963779999],[-73.9838238729998,40.72147287199987],[-73.98300308699991,40.721222680999894],[-73.98216615299982,40.72096885499996],[-73.98130824199984,40.7207087859999],[-73.97966021699982,40.72021282999992],[-73.97875234999992,40.71993370699994],[-73.978031227,40.71963834799988],[-73.97722379199992,40.71930977499993],[-73.97674495699998,40.71921523399993],[-73.97648182399995,40.719159627999915],[-73.97635525199995,40.71913288399984]]]]}},{"type":"Feature","properties":{"shape_area":"0.000116188094682","objectid":"233","shape_leng":"0.048035918294","location_id":"233","zone":"UN/Turtle Bay South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96547092299994,40.75193959699992],[-73.96532415299987,40.751930897999934],[-73.96530480400006,40.75193187399988],[-73.96518524199982,40.75195230699995],[-73.96521537099989,40.751808460999904],[-73.96505548699992,40.75181258099991],[-73.96495708499998,40.751743445999885],[-73.96485451699984,40.75169675999992],[-73.96482214210387,40.75159632579114],[-73.96532405586481,40.751047718272055],[-73.96791272994389,40.747970935642165],[-73.96811893399281,40.7477258297499],[-73.96817376101056,40.7476667537417],[-73.96823574753452,40.74759121839251],[-73.96836519324144,40.74743349462015],[-73.96823171715793,40.747368476489285],[-73.96829622113238,40.7472956513671],[-73.96829811451514,40.747283395002775],[-73.96830191005883,40.74727329974721],[-73.96831613715759,40.747274024359285],[-73.96832610433407,40.747252034598795],[-73.96834696591314,40.74724121830999],[-73.96836118844753,40.747218145486315],[-73.96840008314159,40.74716695396425],[-73.96843139158797,40.74712945662025],[-73.96846363690706,40.74709412848565],[-73.96847691942916,40.74707250130821],[-73.9685006403586,40.74704438450719],[-73.9685148595502,40.747032843998056],[-73.9685347900076,40.74700039777951],[-73.968544278662,40.7469881423127],[-73.96858885224545,40.74694344358069],[-73.96859169569538,40.74693334755284],[-73.96860023472239,40.74692109182235],[-73.96860971997499,40.74691460360568],[-73.96861730876927,40.746899455777815],[-73.96863912464634,40.74687927464661],[-73.96866379796626,40.74684682031493],[-73.96867043421345,40.74683600997994],[-73.9686922519053,40.74680860795763],[-73.96870458089755,40.746800682796184],[-73.9687107654442,40.74678826391716],[-73.96875271240361,40.74674271521675],[-73.96894301109302,40.7465183356965],[-73.96896670537485,40.746530500799395],[-73.96897366849464,40.74652900733651],[-73.96898899231675,40.74650579199741],[-73.96899981595465,40.74650193477237],[-73.96900302810072,40.7464908088819],[-73.96901641754057,40.746481152086254],[-73.96901961115914,40.746472438902586],[-73.96907193333254,40.74641298300629],[-73.96913096118836,40.746340715306665],[-73.96921135921266,40.74624451530388],[-73.96923432172326,40.74622228401153],[-73.9692470758419,40.746207781993604],[-73.96925028881681,40.74619617144262],[-73.96932591437381,40.74610408771041],[-73.96933228026558,40.74610167233752],[-73.96933924459174,40.746092656088365],[-73.96938290644789,40.746035949024964],[-73.96940022327856,40.74602084326546],[-73.96940086652106,40.74601402713001],[-73.9694175339955,40.74599696633198],[-73.96943292389848,40.74597698923133],[-73.96946210038307,40.7459445776336],[-73.96952046125196,40.74586904111652],[-73.96955059658639,40.745838827693575],[-73.96959740261153,40.745782784111796],[-73.969623705834,40.745746716794386],[-73.96963204180261,40.74574330564597],[-73.96969487777564,40.74566679689092],[-73.96969678845915,40.745657000292894],[-73.96987561403044,40.74544478913761],[-73.96990575265262,40.74545820514513],[-73.96991227975748,40.74545175943625],[-73.96993139614943,40.74546300191986],[-73.96992704959064,40.745467792035086],[-73.96997377026268,40.7454957474306],[-73.970047589049,40.74540286129935],[-73.97009123175702,40.74535112915095],[-73.97012962576954,40.74530536659431],[-73.97021602288636,40.745200579032776],[-73.97033931161238,40.7450496320225],[-73.97032571321418,40.745036949464414],[-73.97032571931098,40.7450232614002],[-73.97037811940483,40.74495230608582],[-73.97044255489001,40.74487037600953],[-73.97046063703607,40.74486474339068],[-73.97047240576431,40.744866241747694],[-73.97050560032663,40.74482376425927],[-73.9705687722909,40.74473186530609],[-73.97062381510642,40.744656426210064],[-73.97078834776636,40.744406217690354],[-73.97085704434333,40.74443263739721],[-73.97087688233857,40.74444557343096],[-73.97088963376707,40.74444772970185],[-73.97089742067703,40.7444547367797],[-73.9709094613216,40.74445635209411],[-73.9709172484543,40.74446336034336],[-73.97092858032363,40.744463363204204],[-73.97094062960414,40.74447144402548],[-73.97101648059069,40.744355089523594],[-73.9711250301855,40.74418974894764],[-73.97111076626928,40.744183945109306],[-73.97109154986752,40.744182247937445],[-73.97107528455967,40.7441760664907],[-73.97106420642824,40.744167068050885],[-73.97092895951977,40.74411024678126],[-73.97091343992325,40.744102373652225],[-73.97090457107981,40.74410349618338],[-73.97089791952085,40.744097866123326],[-73.97087943942499,40.74409281003314],[-73.97086171010008,40.7440759385033],[-73.97084544343367,40.744076493254425],[-73.97083878967527,40.744070873074385],[-73.97081588183757,40.74406523939511],[-73.97079622300242,40.74404888066652],[-73.97078276128667,40.74404724738941],[-73.97077757716099,40.74404662522193],[-73.97075833953649,40.74403919088488],[-73.97075084955125,40.74402980466477],[-73.97071823494028,40.744016927848136],[-73.97070578720823,40.74400256198672],[-73.9707031746558,40.74399049541112],[-73.9707425727204,40.743948324660025],[-73.97075061381996,40.74394863411313],[-73.97076123524698,40.74394210814419],[-73.9707920969469,40.743956010435085],[-73.97079892989288,40.743952797506395],[-73.97083587404146,40.743969672238116],[-73.97083595090118,40.74396970165843],[-73.97087357851332,40.74398767476942],[-73.97095964992798,40.744025696987066],[-73.97096300193458,40.7440236727748],[-73.97117346687045,40.74410753551064],[-73.9711819357606,40.74410323270784],[-73.97120616502995,40.744066029846614],[-73.97127362462288,40.74396474842357],[-73.97135752941857,40.74383845535952],[-73.97123423981489,40.743784646190235],[-73.97120546301963,40.7437715103013],[-73.97128101831672,40.743651942051315],[-73.97124127770057,40.7436377401475],[-73.97120787330633,40.74369879478971],[-73.97119990329709,40.74370632109215],[-73.97118780171982,40.74370736326176],[-73.97109822176313,40.74367849681545],[-73.97108533439558,40.74366405834521],[-73.97123301520192,40.743414663960074],[-73.97124584132808,40.74340203417445],[-73.97125636771857,40.74340155868206],[-73.97126710092137,40.743389882433846],[-73.97130663606043,40.743413403261854],[-73.97135416843827,40.74342493319505],[-73.97135016335174,40.743431659048724],[-73.97135725327772,40.74343661339124],[-73.97136080173868,40.74344427709271],[-73.97131062520039,40.7435240231909],[-73.97135563409158,40.743539649851975],[-73.97149421270423,40.74333467446508],[-73.97163772240417,40.74311720098464],[-73.97167921200406,40.74305446402989],[-73.97191659199993,40.74313739399983],[-73.97198880299989,40.74316289599995],[-73.97206165299998,40.74318802999993],[-73.97210897599994,40.74320549099992],[-73.97223028499984,40.743249026999884],[-73.97350835000003,40.743782033999885],[-73.97302670299986,40.74445004099993],[-73.97257598299977,40.74506785499992],[-73.97212958899986,40.74568090199994],[-73.97203331099983,40.745804967999945],[-73.97194428900002,40.745931871999886],[-73.97165740599984,40.746303693999955],[-73.97121971999988,40.74692154099996],[-73.9727379199999,40.74755798999995],[-73.97359187599997,40.74791866299991],[-73.97497000699995,40.74850184899988],[-73.9758346669999,40.74886314599998],[-73.97538295899986,40.74948305799993],[-73.97493471299984,40.75009962799991],[-73.9744494109998,40.75076644499992],[-73.97395914699999,40.751441021999916],[-73.97350255899984,40.7520649319999],[-73.97304502599985,40.7526916219999],[-73.97258874999983,40.753317887999856],[-73.97213617399994,40.7539432349999],[-73.97167699199997,40.75456963099995],[-73.9712170449999,40.75519332399994],[-73.96897803700001,40.75425053499993],[-73.96661581800002,40.75324342499995],[-73.96665543199994,40.75318878499998],[-73.96677887099995,40.75301878799995],[-73.96694827399996,40.752785487999944],[-73.96706733899993,40.75262067599991],[-73.96701854999988,40.75260074199987],[-73.96688157199996,40.75254455599992],[-73.96547092299994,40.75193959699992]]],[[[-73.96421230395671,40.74660431847666],[-73.9642736475242,40.746541845055035],[-73.96433729322388,40.74654572659317],[-73.96437765404302,40.746495088038856],[-73.96444522752618,40.746410425763166],[-73.96458318426942,40.746454400673315],[-73.96458702399427,40.746515898544594],[-73.96454518192593,40.74656415047295],[-73.96447543657693,40.74664083319782],[-73.96437443772194,40.74670453064306],[-73.96433758671738,40.746734848181354],[-73.96427256202216,40.746751308084086],[-73.96421616682363,40.74683700083099],[-73.96415980288437,40.74686554735954],[-73.96412514486158,40.74684576060534],[-73.96413382933486,40.74681279616542],[-73.96421192462753,40.74666667680293],[-73.96421230395671,40.74660431847666]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000731054382894","objectid":"234","shape_leng":"0.0360721994984","location_id":"234","zone":"Union Sq","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.98996936399989,40.73490456699995],[-73.98990295999991,40.7344347899999],[-73.9907539679999,40.734839154999875],[-73.99119899299986,40.73501236899992],[-73.99171498799983,40.73521530099993],[-73.99361688399992,40.73600449199991],[-73.99683993899998,40.73736088899995],[-73.9963368949999,40.73804374699991],[-73.99587409499989,40.73868594599992],[-73.99544664199995,40.7392721329999],[-73.99501798599992,40.73986001099995],[-73.99459264899987,40.74044198099993],[-73.99416492399986,40.7410309369999],[-73.99397071699987,40.74129843899993],[-73.99373928799994,40.74161720799987],[-73.99329166800001,40.74223330099994],[-73.99280340900002,40.74291001999997],[-73.99231888499999,40.74356832199989],[-73.991871024,40.74418557099991],[-73.99141858599994,40.74480268199988],[-73.99096832799982,40.74542089099989],[-73.99051761299985,40.746038637999895],[-73.98872905499988,40.74528637399991],[-73.98729805499983,40.74468149899992],[-73.98569571299986,40.744007641999865],[-73.98413729099997,40.74334959099991],[-73.98407485299994,40.7433247179999],[-73.98452636699996,40.7427070419999],[-73.98497775500003,40.74208895799994],[-73.98542767799994,40.74147034899988],[-73.98587913199991,40.74085299999996],[-73.98636141699991,40.74018480099993],[-73.9868491859999,40.73952182199985],[-73.98703592799987,40.7392663789999],[-73.98730154899981,40.73890302599993],[-73.98774074499983,40.738312187999945],[-73.98817910299996,40.73773074899986],[-73.98859298399994,40.737142560999935],[-73.98901559399987,40.73656015399992],[-73.98920953899987,40.73630712099986],[-73.98945472099987,40.73598724699991],[-73.989874214,40.73540825799992],[-73.98991689999981,40.73534934199992],[-73.98994254999981,40.73527697099994],[-73.98996152699992,40.73520341999989],[-73.98997373899982,40.735129042999894],[-73.9899791279999,40.73505420099984],[-73.98997766699992,40.73497925499992],[-73.98996936399989,40.73490456699995]]]]}},{"type":"Feature","properties":{"shape_area":"0.000102864345211","objectid":"236","shape_leng":"0.0442519223099","location_id":"236","zone":"Upper East Side North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95779380499984,40.77359989699994],[-73.95825534899998,40.772965336999896],[-73.95985681799993,40.7736427679999],[-73.96136792699977,40.77427876099991],[-73.9614758119999,40.77432401099989],[-73.96158453899987,40.77436878399993],[-73.96308760299976,40.775002841999886],[-73.96468735799992,40.77567708199995],[-73.96422820200003,40.776310308999946],[-73.9637612389999,40.77695096899987],[-73.96372602699994,40.77700571799989],[-73.96322991899993,40.7776770469999],[-73.9627671559999,40.778313040999876],[-73.96230361500002,40.77894704099987],[-73.96183836899999,40.77958419199989],[-73.961368727,40.78022974899989],[-73.96091849500006,40.78085062899991],[-73.96041638899996,40.78153163299988],[-73.959920943,40.78221294499987],[-73.95946905999989,40.78283332099994],[-73.95900363199986,40.783467289999855],[-73.9585581369999,40.78409759899993],[-73.95809563799989,40.78471746199995],[-73.95763599400006,40.78534345799993],[-73.95716853699999,40.785982893999865],[-73.95671863099989,40.786600792999934],[-73.95626130899994,40.78722287599987],[-73.9557773589999,40.78791392399995],[-73.95416383099995,40.78722686099993],[-73.95266136699996,40.78659501999991],[-73.95255145499999,40.78654858099986],[-73.95244615099996,40.786502485999925],[-73.95092733999991,40.78586544699993],[-73.94933170599992,40.78519312699994],[-73.9498239039999,40.784515570999886],[-73.95028254899988,40.783890469999946],[-73.95073913799986,40.783261709999884],[-73.95119927299987,40.7826333919999],[-73.95165920699998,40.78200767399993],[-73.9521220329999,40.78138670999995],[-73.95257421900006,40.780753033999865],[-73.95303367999988,40.780125454999926],[-73.95349212400005,40.77949662199995],[-73.9539837019998,40.77882210999991],[-73.95448224099997,40.77813866499987],[-73.9549452009999,40.77750394699991],[-73.9554072979999,40.776868479999926],[-73.9558693369999,40.77623622599986],[-73.95633492299991,40.77560078299992],[-73.95679749099989,40.77496631099994],[-73.95729409999986,40.7742835549999],[-73.95779380499984,40.77359989699994]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000959873206621","objectid":"237","shape_leng":"0.0422126003388","location_id":"237","zone":"Upper East Side South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96612747299989,40.76217929999994],[-73.9665833839999,40.76155093499988],[-73.96818687799986,40.76222682099993],[-73.96968801199992,40.76286596199986],[-73.96980028899992,40.76291351199995],[-73.9699048929999,40.762958042999834],[-73.97141141699996,40.763587473999955],[-73.97301487199995,40.76427887899991],[-73.97255352299985,40.76489773199991],[-73.97209852400005,40.76551725099991],[-73.97164774299996,40.76614246799993],[-73.97118812999996,40.766766592999915],[-73.97072777399985,40.76739372199989],[-73.97028165499981,40.768025031999905],[-73.96982455299987,40.76864600899992],[-73.96936484599993,40.76927065699993],[-73.96890454699994,40.76990083199992],[-73.96844155899997,40.77051632699992],[-73.96799327799991,40.77114722999993],[-73.96753398399983,40.77177618399991],[-73.96703947599987,40.772461218999865],[-73.96653616999981,40.7731403689999],[-73.96607448999993,40.7737729889999],[-73.96560968599992,40.77440720099987],[-73.96514745399985,40.775044231999864],[-73.96468735799992,40.77567708199995],[-73.96308760299976,40.775002841999886],[-73.96158453899987,40.77436878399993],[-73.9614758119999,40.77432401099989],[-73.96136792699977,40.77427876099991],[-73.95985681799993,40.7736427679999],[-73.95825534899998,40.772965336999896],[-73.9587170739999,40.77233167499991],[-73.9591817999999,40.77169682399995],[-73.959644408,40.771064265999925],[-73.96010955199993,40.77043221099989],[-73.96060180599979,40.769749186999924],[-73.9611017069999,40.7690593189999],[-73.96155824299983,40.76843761199996],[-73.96201413099995,40.76781230799988],[-73.9624699899999,40.76718493299991],[-73.96292865800001,40.76655862799987],[-73.96340154099988,40.765911190999894],[-73.96384291099993,40.76530968599997],[-73.9642979039999,40.76468198699991],[-73.96475544899988,40.76405706999992],[-73.96521328099986,40.76343135899992],[-73.96566959999997,40.76280455599994],[-73.96612747299989,40.76217929999994]]]]}},{"type":"Feature","properties":{"shape_area":"0.000184763693765","objectid":"238","shape_leng":"0.0601093114033","location_id":"238","zone":"Upper West Side North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.96884378999985,40.785967388999964],[-73.96933573299991,40.78529327999992],[-73.97217414999986,40.78648646099994],[-73.97501417199996,40.78768560599987],[-73.97639149199995,40.78826674699993],[-73.97650149399988,40.788312676999944],[-73.97660504199992,40.78835448099992],[-73.97785649899998,40.78888153899993],[-73.98035659399986,40.78994055799996],[-73.98097150799998,40.79016087799991],[-73.9815945909999,40.79038412399996],[-73.98169328900003,40.79041872799998],[-73.98176573099992,40.790455425999916],[-73.98185980499981,40.79050307799984],[-73.98188645923244,40.7905165804675],[-73.98139174468552,40.79122824600514],[-73.98128937370942,40.79137550943299],[-73.9809470835407,40.79186789378255],[-73.980537679464,40.79245681262499],[-73.98043434255987,40.792594283096705],[-73.98013222578668,40.79299376538316],[-73.98004684398002,40.79311352516387],[-73.9792881710042,40.7941776574507],[-73.97828937313398,40.795586819072305],[-73.9777947550319,40.79628462977193],[-73.97685207845178,40.79763134839319],[-73.97639951965265,40.79827321084625],[-73.97635598099994,40.798254020999956],[-73.97582955899989,40.798021996999935],[-73.97563350899993,40.797946205999914],[-73.97549419399992,40.79788855199996],[-73.97539813999988,40.7978477439999],[-73.97521014699981,40.79777354799995],[-73.97507069999986,40.797713349999874],[-73.97413148099996,40.79734378799992],[-73.97365145399995,40.797148317999934],[-73.97225661799988,40.79656086499989],[-73.97093073199993,40.79600104799988],[-73.97082734199991,40.79595859999988],[-73.97073269599991,40.79591916999989],[-73.96941543899999,40.79536077899998],[-73.96987063299996,40.79473520499991],[-73.96701396999998,40.793559990999924],[-73.96644741199998,40.793314953999904],[-73.96525997299999,40.79280137099989],[-73.96417598599989,40.792362044999884],[-73.96468540699995,40.791664026999904],[-73.96517705600003,40.79099034099997],[-73.96563269799995,40.79036540399989],[-73.96609500599993,40.78973438899991],[-73.96655226699976,40.78910715299992],[-73.96700977099991,40.788476789999905],[-73.96744908399992,40.78786072099995],[-73.9679269639999,40.78722157099988],[-73.96838479399985,40.786595696999896],[-73.96884378999985,40.785967388999964]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000657697664169","objectid":"263","shape_leng":"0.0370166252994","location_id":"263","zone":"Yorkville West","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.95218621999996,40.77301984499992],[-73.95268514999994,40.772339404999926],[-73.95505481599999,40.773336850999954],[-73.95729409999986,40.7742835549999],[-73.95679749099989,40.77496631099994],[-73.95633492299991,40.77560078299992],[-73.9558693369999,40.77623622599986],[-73.9554072979999,40.776868479999926],[-73.9549452009999,40.77750394699991],[-73.95448224099997,40.77813866499987],[-73.9539837019998,40.77882210999991],[-73.95349212400005,40.77949662199995],[-73.95303367999988,40.780125454999926],[-73.95257421900006,40.780753033999865],[-73.9521220329999,40.78138670999995],[-73.95165920699998,40.78200767399993],[-73.95119927299987,40.7826333919999],[-73.95073913799986,40.783261709999884],[-73.95028254899988,40.783890469999946],[-73.9498239039999,40.784515570999886],[-73.94933170599992,40.78519312699994],[-73.94706938199998,40.78423622699995],[-73.94472264499986,40.78324757199989],[-73.94521308599991,40.782570746999944],[-73.94525035499998,40.782519863999916],[-73.94536565199984,40.78236245099987],[-73.94566981599996,40.78194717599993],[-73.94573785299986,40.781854041999964],[-73.94588094499986,40.78165816599989],[-73.94613091699998,40.78131597799995],[-73.946197187,40.78122601799986],[-73.94630631700001,40.781077875999884],[-73.94642443299978,40.78091753399991],[-73.94647764199985,40.78084530299988],[-73.94659059199999,40.78069197399987],[-73.9470492189998,40.78006434699994],[-73.94750818099986,40.77943712299992],[-73.94796768199993,40.77880646599992],[-73.94842272599978,40.77818264099989],[-73.9488804199999,40.77755328499992],[-73.9493736669999,40.776875747999945],[-73.94987249699994,40.77619615099997],[-73.95033856500001,40.77556320899991],[-73.95079834699999,40.774927767999884],[-73.9512617339999,40.774291940999944],[-73.95172338299997,40.77365653199994],[-73.95181761599994,40.77352690399989],[-73.95218621999996,40.77301984499992]]]]}},{"type":"Feature","properties":{"shape_area":"0.000438377341503","objectid":"243","shape_leng":"0.0943314999364","location_id":"243","zone":"Washington Heights North","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.93156536999994,40.86958215799991],[-73.93141437399996,40.868961927999905],[-73.93127671599983,40.86884359399991],[-73.93117877500005,40.86876886699991],[-73.93091942499993,40.868571000999935],[-73.92997974799981,40.86779614899993],[-73.92934104099999,40.86725723999994],[-73.92872203199992,40.8667426629999],[-73.92805770299987,40.86619936399994],[-73.92726915099985,40.865534559999944],[-73.92661948999994,40.86452429399989],[-73.92601092899994,40.86357366499991],[-73.92537318199986,40.86258081399991],[-73.92474153399992,40.861593637999924],[-73.92499818399988,40.86146373799991],[-73.92496864099992,40.86128326999995],[-73.92496778999988,40.861253467999916],[-73.92496310699987,40.861089282999934],[-73.92498050399993,40.86089251899991],[-73.92502162200003,40.86069531099992],[-73.92508669599982,40.86050012699994],[-73.92517535599984,40.86030947899993],[-73.9252866269999,40.86012579699997],[-73.92541898499994,40.85995133099994],[-73.9255703789999,40.859788079999895],[-73.92573839899995,40.85963767999989],[-73.9259203249999,40.85950140899994],[-73.92611328899989,40.85938011099994],[-73.92629594899988,40.8592874139999],[-73.92646803499991,40.859178123999854],[-73.9266257519999,40.8590533259999],[-73.92676563199994,40.85891478399991],[-73.9268847099999,40.85876482899988],[-73.92698078699978,40.85860624099996],[-73.92705253299991,40.85844209099991],[-73.92709951599984,40.85827552099992],[-73.92712222099993,40.858109610999854],[-73.92691117499983,40.85750876099994],[-73.92687811100001,40.85761400599994],[-73.92682273599989,40.85772223799992],[-73.92674232299986,40.857829767999874],[-73.92663553999984,40.85793192399994],[-73.92650299499998,40.85802341899991],[-73.92634775499995,40.85809897099994],[-73.9261752689999,40.85815409599992],[-73.92599285799992,40.8581858659999],[-73.92580872999993,40.85819341999993],[-73.92563075899986,40.85817795199993],[-73.925465479,40.858142410999974],[-73.92531748399992,40.858090806999954],[-73.92518924999993,40.85802753699994],[-73.92508143699999,40.85795678799993],[-73.92496717399985,40.8578110039999],[-73.92486929999991,40.85765619099987],[-73.92478952099987,40.8574939969999],[-73.9247291889999,40.857326286999886],[-73.92468915299989,40.85715512199993],[-73.92466977999999,40.8569826109999],[-73.92467094699998,40.85681088899992],[-73.92469199999985,40.856641996999905],[-73.92679937899987,40.853717144999926],[-73.92723935000001,40.853115371999905],[-73.92769565799996,40.85248778199987],[-73.92703315699981,40.852200774999886],[-73.927079823,40.85143234299991],[-73.92747680599985,40.85069436999992],[-73.92824918899986,40.84983985499985],[-73.92842288,40.84974568099992],[-73.92858520000006,40.84963880199997],[-73.92873382199987,40.84952048899989],[-73.92886675399986,40.849392312999925],[-73.92898242699984,40.849256121999915],[-73.92970731599995,40.84812261199989],[-73.9306210789998,40.84848097699991],[-73.93088430099981,40.84811893799988],[-73.93116151799987,40.84774060099992],[-73.93139355399987,40.84742823099986],[-73.93284984899991,40.84803810999989],[-73.93423946400002,40.84862621199994],[-73.93547108199992,40.84914438299994],[-73.93639683100004,40.84954119499985],[-73.93575394299994,40.8501682029999],[-73.93666142799988,40.85044732599994],[-73.93736531699994,40.85064452999997],[-73.93828416699976,40.85090854599987],[-73.93923603299991,40.851178486999906],[-73.93939953299987,40.851232664999955],[-73.93939969799992,40.851232718999896],[-73.93939985299984,40.85123275599991],[-73.93957073799986,40.85127555599993],[-73.93974700799991,40.85130623699991],[-73.9397471139998,40.85130625499991],[-73.93974720899999,40.85130626499992],[-73.939926313,40.85132427799989],[-73.93992646699995,40.851324295999895],[-73.93992663199994,40.851324304999906],[-73.94010632899983,40.85132953199995],[-73.94010645799983,40.85132953199994],[-73.94010658899992,40.85132952199994],[-73.94028476699981,40.851322149999916],[-73.94048563299987,40.85131271699995],[-73.94048575099985,40.85131270899994],[-73.9404858699999,40.85131270899989],[-73.94068785099988,40.85131542399991],[-73.94068804199995,40.85131542399991],[-73.94068822000003,40.851315432999854],[-73.94088954899996,40.851330367999935],[-73.94088972799987,40.8513303759999],[-73.94088990599982,40.851330403999945],[-73.94108881800004,40.851357429999894],[-73.94108888899997,40.85135743899991],[-73.9410889599999,40.85135745699994],[-73.94126220299982,40.85139196199991],[-73.94185191299992,40.851821335999944],[-73.94203871799984,40.851931028999914],[-73.94221850999999,40.85179850399986],[-73.94238599199987,40.85165518499987],[-73.94247684499997,40.851564590999885],[-73.9425395099999,40.85150210499991],[-73.94267766599995,40.85134048199993],[-73.94279927299995,40.85117167299994],[-73.94290346199983,40.85099716399988],[-73.94298963999994,40.85081850399992],[-73.94309647899988,40.850387302999884],[-73.94311799599984,40.85023724299993],[-73.94315143499992,40.850004033999944],[-73.94316093899997,40.84993545899992],[-73.94316977700004,40.84984751199991],[-73.94317806099995,40.84979994299993],[-73.94381229899996,40.84991964099994],[-73.94396593999994,40.849950809999946],[-73.94409966200001,40.849977402999855],[-73.94472103299991,40.85010096199994],[-73.944768533,40.85011040299986],[-73.944914825,40.85013703799996],[-73.9458970349999,40.85032798199989],[-73.94692626452421,40.85052805583417],[-73.94686899614918,40.85058959685872],[-73.94681367391628,40.850649039178094],[-73.94680219627986,40.85066137249108],[-73.94651595882908,40.850968926946535],[-73.94650234446286,40.85097627305157],[-73.94648747390856,40.85098204659227],[-73.94647165993503,40.85098612613527],[-73.94645689400723,40.85098827764361],[-73.94644188478783,40.85098895010289],[-73.94642688811145,40.85098813205079],[-73.94641211347597,40.85098582788765],[-73.94639786213489,40.850982077295754],[-73.9463843785491,40.85097694461102],[-73.94637189400876,40.85097051787692],[-73.94633856812649,40.85094852447611],[-73.94632053353631,40.850923937715315],[-73.94632862612754,40.85090502942344],[-73.94635149986354,40.85089369453736],[-73.94635191475699,40.850870558569106],[-73.94633765223675,40.85085347928547],[-73.94632696500435,40.850846615401025],[-73.94631554216869,40.8508392789245],[-73.94629678670803,40.850833725838775],[-73.94627461183848,40.850841593471515],[-73.9462433633095,40.85088523552587],[-73.94619735733023,40.850906420201966],[-73.94617267171917,40.850958789751104],[-73.94619565359774,40.85097500953831],[-73.94620054046909,40.85103239211628],[-73.9461857520811,40.85103238521867],[-73.94617185524098,40.85105307106365],[-73.94615791969893,40.85104824156037],[-73.94614668962957,40.85103223464638],[-73.94614508385327,40.85100838241099],[-73.94613353603556,40.850984828080854],[-73.94611934283114,40.85096964315819],[-73.94609624718471,40.85096724398697],[-73.94608145021917,40.85098164676894],[-73.94608704722194,40.851009023386204],[-73.9460970573703,40.85103358549357],[-73.94609776719916,40.85103455913642],[-73.94614136091342,40.85109472309467],[-73.94613637747574,40.85115582829458],[-73.94611728194423,40.85117372143474],[-73.9460476559076,40.8511896630908],[-73.9459646207679,40.85117296552845],[-73.94593014421991,40.851190796484325],[-73.94589567174965,40.85118840282924],[-73.94584084991659,40.85117052999494],[-73.94576720433773,40.851170495396815],[-73.94572488131935,40.85119784128443],[-73.94572798690905,40.851228774441324],[-73.9456825554423,40.85122756464785],[-73.94565279045506,40.85121208034208],[-73.94561203147599,40.85124061483366],[-73.94555556310249,40.85132148895219],[-73.94552736155029,40.85132147563915],[-73.94551948943962,40.851363110709954],[-73.94548187577574,40.85137380003347],[-73.94544893316966,40.851428516042574],[-73.94542229851784,40.85142731553617],[-73.94539567234408,40.851416594838255],[-73.9453784200023,40.85142729476892],[-73.94538936847742,40.8514534679505],[-73.94532198248487,40.85147009472928],[-73.9453125651084,40.85148556105454],[-73.94527966082822,40.85149506296039],[-73.94525302780075,40.85149266412056],[-73.9452436006128,40.851520025436805],[-73.94527256188401,40.851546811601985],[-73.94526627919835,40.85157178871038],[-73.94519574791491,40.85159317711649],[-73.94515345120476,40.85158720423755],[-73.94506567411703,40.851639507848795],[-73.94504370869103,40.851671618664454],[-73.94500607672323,40.851702541806006],[-73.944977851949,40.851732272132274],[-73.94493240846673,40.85173105265653],[-73.94487719641315,40.85175440837052],[-73.94477691248362,40.85179683195325],[-73.94476566471432,40.851801590264635],[-73.94471435250203,40.85181591121898],[-73.9446937046878,40.85182460198623],[-73.94468755000356,40.851836237725294],[-73.94469257824674,40.85186300317582],[-73.94468965406844,40.8518776453314],[-73.94468309631044,40.8519104913526],[-73.94466706665953,40.85192169852068],[-73.94463221068919,40.85190996135587],[-73.94458832934104,40.8519277890699],[-73.94457734596685,40.8519432540793],[-73.94450369998015,40.85195749066512],[-73.94448648497414,40.851924173700404],[-73.94450307651685,40.8518998251177],[-73.94450507247345,40.85189033001257],[-73.94448754202686,40.85188922312717],[-73.94446190429296,40.851899805303866],[-73.94445360950604,40.85189798049819],[-73.94442225918847,40.85190510658742],[-73.94439719907635,40.85189319951099],[-73.94440663561446,40.85185513117773],[-73.94436748956578,40.85182536852248],[-73.94432519023105,40.85182297062388],[-73.94431732295752,40.85185627651454],[-73.94429066589659,40.85188244102266],[-73.94424520021661,40.85192049193891],[-73.94421071900311,40.85192998456854],[-73.94422164925084,40.851976391831485],[-73.94419654622922,40.85201564098287],[-73.94413386022264,40.85202750564373],[-73.94407120589058,40.852015580285084],[-73.94401323929921,40.852000090761386],[-73.9439912652317,40.85204171887874],[-73.94395986779188,40.85211903729921],[-73.94388148068221,40.852172533479965],[-73.94379606084516,40.85219807473172],[-73.94360072252731,40.85223107230983],[-73.94347978545615,40.85228188294709],[-73.94305902944303,40.85260143014694],[-73.94302644371187,40.852626177870995],[-73.94279838505354,40.852851233889844],[-73.94260996683576,40.85306791474677],[-73.94247365925723,40.85317127831178],[-73.94205514258485,40.853654107455704],[-73.94186996426673,40.853867739442755],[-73.94182774425003,40.853989960632596],[-73.94173105661464,40.85410838854933],[-73.9415815880044,40.85434714380842],[-73.94153736742429,40.85443564359609],[-73.94150213189876,40.85450012674853],[-73.94149762132163,40.8545083843677],[-73.9414098064236,40.85468463098871],[-73.94131311131312,40.85479553975522],[-73.94126592051121,40.854944078788556],[-73.94123366359767,40.855009887976884],[-73.94103277003084,40.85530503914508],[-73.94099928999186,40.85535861893859],[-73.94100914313304,40.855415039634785],[-73.94095704472404,40.85552033439455],[-73.94085539855477,40.85562183077844],[-73.94076854842876,40.85580797146752],[-73.9407462171037,40.85584744692032],[-73.94069419380095,40.85585306606014],[-73.94061975134593,40.85601100074243],[-73.9404883126927,40.85620462882264],[-73.9404051777662,40.856372905782024],[-73.94035056461426,40.8565158030732],[-73.94029347497097,40.85664177065756],[-73.94014717618717,40.85683351705708],[-73.94008523452419,40.85685605129765],[-73.94001827015856,40.85695004614774],[-73.9399488067714,40.8570666142561],[-73.93978146211117,40.85723483699594],[-73.93968482410261,40.857289321036085],[-73.93961041073217,40.85739647639676],[-73.93940211514372,40.85766529797213],[-73.93936488888228,40.85774050573835],[-73.93928303850637,40.85786082279131],[-73.9392223197617,40.85789369423106],[-73.93911094164396,40.85804091122572],[-73.93904122641767,40.85820201636389],[-73.93891471443492,40.858406937423176],[-73.93865680565516,40.85873403041931],[-73.93865306164695,40.85876881362194],[-73.93850174725024,40.859011335007715],[-73.9384372879185,40.8590733621211],[-73.93841643396333,40.85916624546454],[-73.93830957434292,40.85938052360819],[-73.93785336586474,40.85983027123292],[-73.93773556377965,40.85993351223935],[-73.9375573431849,40.86008135632523],[-73.93752944172567,40.86009664128206],[-73.93753066305457,40.86011187884754],[-73.9375521865698,40.86012367458296],[-73.93758716318406,40.86014954032659],[-73.93758054206488,40.860203206651164],[-73.9373543613443,40.86051512129021],[-73.93713577511515,40.860783636699566],[-73.93709390407562,40.86092524299121],[-73.93704223142178,40.86105753297894],[-73.93696851748112,40.861143219025095],[-73.93681096972892,40.86125802374978],[-73.93680279963627,40.86127908212909],[-73.93681851547501,40.861315818680424],[-73.9368104544925,40.86136346605994],[-73.93647561664902,40.861926591170764],[-73.93596813006776,40.86254409289871],[-73.93559460797813,40.86296505185206],[-73.93485089173119,40.86396557693494],[-73.93475540717563,40.86409633974318],[-73.93461870076229,40.86426987104492],[-73.93443446851097,40.86450373173374],[-73.93435568513519,40.864732907068436],[-73.9342316407922,40.864813897822636],[-73.9341923030187,40.864879107531024],[-73.93408173881329,40.86497781014821],[-73.93401664426698,40.865035548291566],[-73.93401648524471,40.86519581766668],[-73.93395001711579,40.86534674620981],[-73.93386283123468,40.86541004611179],[-73.93378916436362,40.86542863426856],[-73.93363055568597,40.86570901942328],[-73.93357158007582,40.86576675094427],[-73.9335739612204,40.86584129553878],[-73.93349285424156,40.8659456148249],[-73.93343635069695,40.86598658199528],[-73.93343628914424,40.86604807580756],[-73.93340182700808,40.86613564683984],[-73.93332317557574,40.866238095014126],[-73.93325688879918,40.86624178458094],[-73.93313150185679,40.86642621378959],[-73.93307500307841,40.86655741872505],[-73.93283349428312,40.86698204820548],[-73.93266332721451,40.867237066436985],[-73.9327564862724,40.86726436016792],[-73.93276260783125,40.867252297557144],[-73.93290171891765,40.86729304389972],[-73.93283958205068,40.867415276911366],[-73.93264569574575,40.86735847764239],[-73.93266035056361,40.86732966135371],[-73.93259823617254,40.867311462916476],[-73.93254851408642,40.86741391805599],[-73.93251910022944,40.867410578207554],[-73.93242547900691,40.86756827092846],[-73.93238662235719,40.8676938932447],[-73.93236431431154,40.86786330100779],[-73.93235078136804,40.867979120295345],[-73.93235431562957,40.86800719569787],[-73.93236746809531,40.86803721447596],[-73.93237341288611,40.86806348807323],[-73.93227397128045,40.86847715197787],[-73.9322812400666,40.86853253815755],[-73.93226769826255,40.86856231897237],[-73.9323228438442,40.868578111887054],[-73.93231591011308,40.868604142896054],[-73.93244643748234,40.86865976546891],[-73.93249214298582,40.86867751966221],[-73.93249377280186,40.868674809424526],[-73.93253077796827,40.868613271913894],[-73.93253690662306,40.8686030783755],[-73.9325689181631,40.86854984723809],[-73.93257970501192,40.868531909823226],[-73.932614318916,40.868474347379454],[-73.93262211514612,40.86846138498572],[-73.93262525075036,40.86845616797417],[-73.93262844350281,40.8684572743171],[-73.93265083512807,40.86846503348183],[-73.9325454652185,40.86864025923292],[-73.93255050661638,40.86864200559115],[-73.9325680426414,40.86864808335343],[-73.93252354560028,40.868722078358864],[-73.93250125163004,40.86871435273155],[-73.93250619965718,40.86870612539119],[-73.93249532884039,40.868701950391426],[-73.9323522987469,40.86864702816238],[-73.93230597278854,40.86862923954242],[-73.93229830514183,40.86864739503352],[-73.93225031754949,40.86863950937264],[-73.93225427749094,40.86868339935806],[-73.93227751053237,40.868711157475076],[-73.93228732044285,40.86887514239039],[-73.9323138544822,40.868923720343716],[-73.9323603509378,40.86894960979842],[-73.93245670800944,40.86896227317822],[-73.93253729354952,40.86896800236226],[-73.93256895482746,40.86897940371653],[-73.93256795169869,40.86904439147383],[-73.93250469803131,40.869129558665186],[-73.93239016804613,40.869187303109975],[-73.93229327689872,40.869199501942205],[-73.93218903826057,40.86936697638912],[-73.93246883069914,40.86947609938702],[-73.93235370807281,40.869755255296546],[-73.93226581636979,40.86973477164008],[-73.93235934466009,40.86950736321936],[-73.9321333660305,40.86941597544102],[-73.93210997106698,40.869477249101706],[-73.9320771261944,40.86954268415996],[-73.93205908286352,40.869582816886705],[-73.9320534384771,40.86960075074436],[-73.9320500216973,40.869641746782705],[-73.93206712211828,40.8696994277864],[-73.93209566102911,40.86975965114518],[-73.93217976024559,40.86982236640027],[-73.9321985510756,40.8698448708717],[-73.93156536999994,40.86958215799991]]]]}},{"type":"Feature","properties":{"shape_area":"0.000359702747951","objectid":"244","shape_leng":"0.0805686044599","location_id":"244","zone":"Washington Heights South","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.94068822000003,40.851315432999854],[-73.94068804199995,40.85131542399991],[-73.94068785199995,40.85131542399988],[-73.9404858699999,40.85131270899989],[-73.94048575099985,40.85131270899994],[-73.94048563299987,40.85131271699995],[-73.94028476699981,40.851322149999916],[-73.94010659000004,40.85132952199991],[-73.94010645899995,40.85132953199995],[-73.94010632899983,40.85132953199995],[-73.93992663199994,40.851324304999906],[-73.93992646699995,40.851324295999895],[-73.939926313,40.85132427799989],[-73.93974720899999,40.85130626499992],[-73.9397471139998,40.85130625499991],[-73.93974700799991,40.85130623699991],[-73.93957073799986,40.85127555599993],[-73.93939985299984,40.85123275599991],[-73.93939969799992,40.851232718999896],[-73.93939953299987,40.851232664999955],[-73.93923603299991,40.851178486999906],[-73.93828416699976,40.85090854599987],[-73.93736531799983,40.850644529999926],[-73.93666142799988,40.85044732599994],[-73.93575394299994,40.8501682029999],[-73.93639683100004,40.84954119499985],[-73.93547108199992,40.84914438299994],[-73.93423946399999,40.84862621099995],[-73.93284984899991,40.84803810999989],[-73.93139355399987,40.84742823099986],[-73.93185010299997,40.846802632999925],[-73.93191507399995,40.84671052399989],[-73.93198004399996,40.846618414999895],[-73.93201002999993,40.84657596599988],[-73.93204002799989,40.84653350699988],[-73.93207258099989,40.84649567899991],[-73.93210093699993,40.846457729999884],[-73.932186635,40.84634306699994],[-73.93224030199994,40.84626460299991],[-73.932325153,40.84615390099991],[-73.93277020499988,40.84554110599987],[-73.93315044200003,40.845021942999914],[-73.93323248499983,40.84490992199988],[-73.93371553899995,40.844246374999905],[-73.93421198500002,40.843568902999955],[-73.93467106399996,40.84295724299987],[-73.93514017499996,40.84231167399989],[-73.93556697199989,40.841712527999924],[-73.93561105199986,40.84160899499988],[-73.93561108599988,40.841608895999876],[-73.93561111099991,40.84160880699991],[-73.93563664999986,40.84150019499988],[-73.93563666199992,40.84150013999988],[-73.93564243699991,40.84138944599988],[-73.93564244899994,40.84138928299992],[-73.93564242499978,40.841389129999904],[-73.93562830199987,40.84127961399994],[-73.93562826699996,40.84127936199993],[-73.93562818399985,40.841279099999944],[-73.93559506299997,40.841173399999924],[-73.93543637099998,40.84075133099986],[-73.93529543300004,40.84047481799991],[-73.93519180599998,40.84033568799992],[-73.93519169999996,40.84033554399989],[-73.93519161699993,40.840335399999915],[-73.93510666600004,40.84018372699994],[-73.93504376899986,40.84002162099989],[-73.93504374499992,40.8400215669999],[-73.93504373300003,40.84002151299995],[-73.93500577799999,40.839852009999916],[-73.93500575400004,40.83985191099992],[-73.93500574300005,40.83985180199986],[-73.93499462399996,40.83967821699988],[-73.93499462399987,40.839678135999925],[-73.93499463699986,40.83967805499989],[-73.93501119299988,40.83950397199993],[-73.93505508799984,40.8393332359999],[-73.93512471799994,40.83916963699992],[-73.9351247769999,40.83916948499991],[-73.93512487199997,40.83916933099994],[-73.93521769499985,40.83901592099991],[-73.93521772999993,40.83901586699992],[-73.93521776599987,40.839015821999936],[-73.93533051999992,40.838875039999934],[-73.93533061499988,40.83887491299989],[-73.93533073299984,40.83887479599988],[-73.93545962199988,40.83874840399992],[-73.93563711299996,40.83863141999997],[-73.93580416699986,40.8385049769999],[-73.93595950299988,40.838369897999904],[-73.93610200500004,40.83822716899989],[-73.93623075799998,40.838077855999884],[-73.93638316899992,40.83785012499988],[-73.93669078700005,40.837193249999935],[-73.93702353999993,40.8364689469999],[-73.93738281099989,40.83569072899993],[-73.93775116199998,40.834890575999964],[-73.93786306199998,40.83463774999997],[-73.93789804799981,40.83454769599993],[-73.93793968599998,40.834459289999856],[-73.93798783999988,40.834372813999956],[-73.93804235799993,40.83428854499991],[-73.93810306499991,40.8342067539999],[-73.93816976599996,40.83412770199994],[-73.93824224799982,40.834051641999935],[-73.93832027799995,40.833978817999935],[-73.93840360699998,40.83390946299992],[-73.93849196799988,40.8338437999999],[-73.9391548789999,40.83327799299992],[-73.93927348599993,40.83319964899993],[-73.93927371099988,40.83319949599997],[-73.93927390099999,40.833199342999876],[-73.93938209499981,40.833110962999875],[-73.93938216599997,40.83311089899993],[-73.93938222499987,40.83311083599996],[-73.93947800199997,40.83301364299994],[-73.93947814499981,40.833013488999924],[-73.9394782749999,40.833013327999886],[-73.93955977199981,40.83290896699988],[-73.93955986799993,40.83290884099993],[-73.93955995000002,40.832908696999894],[-73.93962603899988,40.83279885299988],[-73.93962606299986,40.83279880799989],[-73.93962608699985,40.832798753999896],[-73.93967601899988,40.83268537099987],[-73.94007535699994,40.83206722799986],[-73.94016848499993,40.8319590559999],[-73.94024600800003,40.83184212099991],[-73.94030591799994,40.83171845099985],[-73.94034688799985,40.83159040499989],[-73.94036830799996,40.831460492999945],[-73.94037033300005,40.831331253999906],[-73.94034643299983,40.8304578419999],[-73.94136799599993,40.83089083799995],[-73.942979662,40.8315679799999],[-73.94571933699994,40.83272141299989],[-73.94582395199988,40.83276546099989],[-73.94592558199986,40.83280648999989],[-73.94829108199994,40.833861180999946],[-73.94890543299992,40.83406529899992],[-73.94919448899992,40.8342106589999],[-73.94941570599993,40.83435858999992],[-73.94957431799986,40.834419361999934],[-73.94964119799997,40.83443432999993],[-73.94970807899995,40.834449289999945],[-73.94977616299995,40.83445596499992],[-73.94985590499991,40.83445928699996],[-73.95015521048293,40.83439675940792],[-73.94997968030412,40.83487587860572],[-73.94988915620442,40.83528472075901],[-73.94979826505212,40.83548984121036],[-73.94978471338267,40.83552043388431],[-73.9497425788605,40.835628087824865],[-73.94973891528046,40.83570565447781],[-73.94971243579302,40.83577499028423],[-73.9496931383176,40.83586258094349],[-73.94968349007459,40.83592188337068],[-73.94968950571386,40.836041139876336],[-73.94969117640214,40.83607427749749],[-73.94968634744743,40.83610986332498],[-73.94965628913987,40.83619093997075],[-73.94964541816809,40.83622025475018],[-73.94962137643174,40.836232103601],[-73.94960149708459,40.83630509930473],[-73.94958334065868,40.83648393783687],[-73.94954600729368,40.83660437150179],[-73.9495099176216,40.83666548968748],[-73.9494570191996,40.836705619473804],[-73.94938852906095,40.83671562194061],[-73.94932846081275,40.836719250936476],[-73.94929034657056,40.83672929248491],[-73.94928698598417,40.836732775778955],[-73.94928446234256,40.83673664541798],[-73.94928285052791,40.83674078658174],[-73.94928219836629,40.836745076392866],[-73.94928252520906,40.83674938756381],[-73.94928382135787,40.836753592172705],[-73.94928604835373,40.83675756546004],[-73.94928914011716,40.83676118952974],[-73.94929300490867,40.836764356847915],[-73.94929752805186,40.83676697343329],[-73.9493025753354,40.836768961646385],[-73.94937713355948,40.83678033441992],[-73.94943994696526,40.83679169931688],[-73.94944230013112,40.83679215701845],[-73.94946292070983,40.836797746086475],[-73.94948204647808,40.83680583985768],[-73.94949739893782,40.836814981451575],[-73.94951081592382,40.83682573729457],[-73.94952200610777,40.836837873841816],[-73.94953069616135,40.83685106989402],[-73.94953674996701,40.83686508974796],[-73.94954003717058,40.8368796315235],[-73.94918058897858,40.837864010121635],[-73.9491523412929,40.837933552557644],[-73.94900459767892,40.83842558853353],[-73.9489289116868,40.838643426286126],[-73.94883961981111,40.83887563584407],[-73.94875763601367,40.83902023748219],[-73.94865775026906,40.8393013447156],[-73.94856054520493,40.839564885664224],[-73.94849640289038,40.839667593172464],[-73.94842860791495,40.83986085465317],[-73.94833417923732,40.839997335885975],[-73.948274498937,40.84006354116476],[-73.94823352622083,40.84011759626999],[-73.94807484255449,40.8404662594779],[-73.94796701014049,40.84065410819866],[-73.94786003452222,40.840896013090095],[-73.94776196087692,40.84112575683381],[-73.94770934809952,40.84126360686615],[-73.94760600401781,40.841409547682304],[-73.94755609818566,40.84152866737061],[-73.94748896929306,40.84169746388172],[-73.94738322154217,40.8419408263045],[-73.94727430439121,40.84205178297001],[-73.94721047555672,40.84210112669678],[-73.9471678822236,40.84215909904335],[-73.94713367972246,40.84225862411276],[-73.94712053311035,40.84228559744328],[-73.9471071517441,40.842306787578885],[-73.94696012382835,40.84253957012678],[-73.94693502862745,40.84261919850936],[-73.94686918645269,40.84270482339683],[-73.94678768212576,40.84281512747888],[-73.94675510074843,40.842888461013025],[-73.94670984756607,40.8429441246515],[-73.94661642596199,40.843020098338044],[-73.94654808278268,40.84311998115941],[-73.94645858066579,40.843254384265926],[-73.94636919991518,40.84345477995481],[-73.94631349566346,40.843559770438965],[-73.9462489191819,40.84367120457854],[-73.94619788899398,40.843754098967956],[-73.94612625578611,40.84388856876929],[-73.94612416421772,40.84389249655713],[-73.94611933577549,40.84400473749401],[-73.94609745833881,40.844055052047274],[-73.94609415172181,40.84409735524896],[-73.94611365510724,40.844196277526095],[-73.94611699818816,40.8442249656692],[-73.94609316413097,40.844291148652864],[-73.94610537772549,40.8443497221328],[-73.94608425805812,40.84446818196512],[-73.94609124077483,40.84449880134601],[-73.94607880557066,40.844597670328326],[-73.94610929980433,40.84485857499072],[-73.94612272152777,40.844879554715824],[-73.94612836835266,40.84491180766122],[-73.94614692398876,40.84493975742343],[-73.94616018722793,40.845029844919516],[-73.94616086907139,40.845125827057785],[-73.94619138728324,40.84519797277932],[-73.9462057455364,40.84523179311284],[-73.94622271166769,40.84525916634131],[-73.9462106518648,40.84533362513184],[-73.94617704845383,40.845365915213144],[-73.94617174983877,40.845392891580666],[-73.94620682406678,40.84546174573894],[-73.94623062385415,40.84557698074459],[-73.94627664957966,40.845690659918404],[-73.94630774814597,40.845740934326024],[-73.94643878255471,40.8458859229234],[-73.94646620992474,40.845881260909486],[-73.94647950512845,40.845919778073025],[-73.9464454448152,40.84592148809305],[-73.94648387687232,40.845964687313604],[-73.94651730200566,40.84599518440371],[-73.9465038958519,40.846028199767574],[-73.94645597912805,40.84605816509614],[-73.9464258195365,40.84606333862832],[-73.94634839459351,40.846156448606806],[-73.9463507804993,40.84624033128926],[-73.94640288265272,40.846361291622344],[-73.94643643817498,40.84643991999421],[-73.94647353057901,40.846528618163475],[-73.94651683205107,40.84659313985066],[-73.94664058210435,40.846684894539045],[-73.94671767879166,40.846824758247124],[-73.94678956849305,40.84699674934533],[-73.94682445342639,40.84713426206979],[-73.94680935266598,40.847288446637464],[-73.94678220543963,40.84735338919667],[-73.9467493384277,40.84740595933717],[-73.94669858704907,40.84749739387238],[-73.9466857685378,40.847728395044264],[-73.9466560643461,40.847883320483525],[-73.94664058205768,40.84793929215048],[-73.94662285734358,40.848145519491496],[-73.94662027748582,40.848214017831104],[-73.94661949998884,40.8482784259119],[-73.94664422572272,40.848399333885375],[-73.94665040763155,40.848667604216814],[-73.9466785376539,40.848837459092984],[-73.94663550012669,40.848912425059694],[-73.94665064310523,40.849005010411695],[-73.9466649962483,40.84904569410086],[-73.94670601762992,40.84909437729706],[-73.94672051176013,40.84923178391935],[-73.94673313406388,40.8492674972145],[-73.94675656427756,40.84930266769502],[-73.94681164673382,40.84935193378877],[-73.94683872036457,40.849382821350986],[-73.94685525004344,40.84942768019967],[-73.9468547984756,40.84953947126502],[-73.94688244417446,40.84959284156913],[-73.94689505793288,40.849639453080734],[-73.94690063210635,40.84967414925802],[-73.94696652237195,40.84981517403269],[-73.9469592294381,40.84984895849044],[-73.94695108849986,40.84985916446555],[-73.94695222118273,40.84989009836441],[-73.94699578658114,40.84995592429225],[-73.94695814474174,40.84998525944927],[-73.94696706524539,40.84999566592067],[-73.94698516576905,40.84999453307054],[-73.94702782494728,40.85004183181244],[-73.94702536171071,40.85006211459108],[-73.94700527357732,40.85008186727115],[-73.94697447146315,40.85008989508124],[-73.94695342915061,40.85009773522208],[-73.94696404495703,40.850111655775514],[-73.94698645041181,40.85011883088543],[-73.94701781699507,40.85012699598264],[-73.94702897203565,40.85014476043617],[-73.9470192100042,40.85019509273561],[-73.94704980259199,40.85022334922832],[-73.9470439927834,40.85025474598786],[-73.94700406576864,40.850329328700184],[-73.94700459608349,40.85034406799342],[-73.9470111027366,40.85035629265677],[-73.94700167436984,40.85038652011265],[-73.9469980830223,40.85039803084266],[-73.9469644175959,40.85046552581819],[-73.94692626452421,40.85052805583417],[-73.9458970349999,40.85032798199989],[-73.944914825,40.85013703799996],[-73.944768533,40.85011040299986],[-73.94472103299982,40.850100962999875],[-73.94409966200001,40.849977402999855],[-73.94396593999994,40.849950809999946],[-73.94381229899996,40.84991964099994],[-73.94317806099984,40.849799943999905],[-73.94316977700004,40.84984751199991],[-73.94316093899997,40.84993545899992],[-73.94315143499992,40.850004033999944],[-73.94311799599984,40.85023724299993],[-73.94309647899988,40.850387302999884],[-73.94298963999994,40.85081850399992],[-73.94290346199983,40.85099716399988],[-73.94279927299995,40.85117167299994],[-73.94267766599995,40.85134048199993],[-73.9425395099999,40.85150210499991],[-73.94247684499997,40.851564590999885],[-73.94238599199987,40.85165518499987],[-73.94221851099991,40.85179850399987],[-73.94203871799984,40.851931028999914],[-73.94185191299992,40.851821335999944],[-73.94126220299982,40.85139196199991],[-73.9410889599999,40.85135745699994],[-73.94108888899997,40.85135743899991],[-73.94108881800004,40.851357429999894],[-73.94088990599982,40.851330403999945],[-73.94088972799987,40.8513303759999],[-73.94088954899996,40.851330367999935],[-73.94068822000003,40.851315432999854]]]]}},{"type":"Feature","properties":{"shape_area":"0.000281298327076","objectid":"246","shape_leng":"0.0694671937437","location_id":"246","zone":"West Chelsea/Hudson Yards","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00439976203513,40.76267135909888],[-74.00220082073264,40.761728432226434],[-74.00178824022305,40.762294520644296],[-74.00153309083484,40.76264459806374],[-74.00133748499991,40.76220852199986],[-74.00127796299991,40.76207582499988],[-74.0011505409999,40.76202581199986],[-74.00103587499999,40.76196835199992],[-73.99831474500002,40.76082320899992],[-73.99623223099987,40.7599460319999],[-73.99547450199992,40.7596268569999],[-73.99594236599988,40.75898097899996],[-73.99640941599995,40.75833915899992],[-73.99663529299984,40.75801292199992],[-73.996800897,40.757789159999945],[-73.99685244899985,40.75773270899988],[-73.99692177899989,40.757637581999894],[-73.997233738,40.7572095429999],[-73.99730671399993,40.75711050699996],[-73.99775836599989,40.75648752899987],[-73.99820870599997,40.75586865599991],[-73.9986606719999,40.75525176299991],[-73.99914292099987,40.754584933999865],[-73.99963228999997,40.753918084999945],[-73.99992459199981,40.75351627999993],[-74.00001529900001,40.75339158699997],[-74.00052667499992,40.75268862399987],[-74.00086139300001,40.75221483899993],[-74.000974548,40.75205466499991],[-74.0014297059999,40.7514457209999],[-74.00188266699993,40.7508279309999],[-74.00233168699992,40.7502082579999],[-74.002431475,40.7500727519999],[-74.002458683,40.75003580599991],[-74.00278526999995,40.74959231999986],[-74.00312806199996,40.74912185999996],[-74.00316116799988,40.749076422999906],[-74.00323561099998,40.748974254999936],[-74.00368344599993,40.74835499999994],[-74.00416830599991,40.7476892919999],[-74.00465274299988,40.74702295299991],[-74.0051071349999,40.74640277299988],[-74.00553403899988,40.74581556899989],[-74.00595977599997,40.745230984999935],[-74.00638477199996,40.74464590299987],[-74.00681149999996,40.74406132399992],[-74.00696604399992,40.74384701399987],[-74.00723774599994,40.743470231999865],[-74.00770461499994,40.74283381299992],[-74.00789568799995,40.74257005099985],[-74.00820401899988,40.74214751799986],[-74.00869902299993,40.74236172299993],[-74.00879080599995,40.742375143999915],[-74.00889339799991,40.742384166999926],[-74.00902439199994,40.742399742999964],[-74.00916608208486,40.74241659123163],[-74.0090915684619,40.74288614957498],[-74.0092401357503,40.742899518409985],[-74.00924074160105,40.74291316086339],[-74.00962015348914,40.742951248892375],[-74.00956843411761,40.743257784726346],[-74.00958464345709,40.743263520483104],[-74.01211940028666,40.7435166121826],[-74.01213726936172,40.74353192705927],[-74.01214813183589,40.74355930154757],[-74.01209008289018,40.743897637648885],[-74.01206903486668,40.74392249354837],[-74.01202085006403,40.74393977020892],[-74.01197763342863,40.74393556042097],[-74.00951201767357,40.74367609376027],[-74.0094886836422,40.74369568117951],[-74.00943800870866,40.7439712559757],[-74.0093942693211,40.743968716838175],[-74.00904207504226,40.7439338712551],[-74.00890032962846,40.74391792709609],[-74.00880283523892,40.74443934762423],[-74.0087278005888,40.74485823290996],[-74.00872986359411,40.74488153782969],[-74.00893975844279,40.744909217332385],[-74.00957440612913,40.74499290866286],[-74.00961227924408,40.74499790315053],[-74.00955832929739,40.745288825298694],[-74.00991660813445,40.74532725500702],[-74.0099343667769,40.74531707810188],[-74.00993796184929,40.74529670191295],[-74.00994341816717,40.745265769736356],[-74.00995048769146,40.7452256903209],[-74.00995852601345,40.74518011964658],[-74.00996759959413,40.74512868110846],[-74.0099735068339,40.7450951941157],[-74.00998135739336,40.74505068238846],[-74.0099891727315,40.74500638476202],[-74.0099982260172,40.74495505930206],[-74.00998685784812,40.74494416421518],[-74.00986948474724,40.74493391770714],[-74.00987211085476,40.74491650212583],[-74.01016790535392,40.74494232970965],[-74.01016465197364,40.74496392462975],[-74.01005375656213,40.74495423492994],[-74.01003848384612,40.744963458078104],[-74.01002361252539,40.745046345318],[-74.01001404323704,40.745099676615546],[-74.01000814033448,40.745132576765556],[-74.00999930170602,40.74518183979109],[-74.00999250524056,40.7452197190643],[-74.00998320132649,40.74527157308871],[-74.00997743638763,40.74530370360894],[-74.0099739502191,40.74532313510926],[-74.0099909538001,40.74533668667391],[-74.01046920011856,40.74538676602894],[-74.0104883559496,40.74537571509469],[-74.0104918741746,40.74535516701374],[-74.0104969344119,40.74532561543083],[-74.01050332781186,40.74528827090891],[-74.01051171655337,40.74523927525828],[-74.01052083436335,40.745186021358805],[-74.01052681665274,40.745151080706044],[-74.01052968455852,40.745134332512635],[-74.01055044755887,40.74501305771002],[-74.01053188168753,40.74500298186925],[-74.01041700660251,40.744993582703295],[-74.01041937209395,40.744976824673586],[-74.01076419780681,40.74500503202083],[-74.01076156046132,40.74502372618347],[-74.0106062154018,40.74501101647424],[-74.01058579200937,40.74502044656155],[-74.01056801091896,40.74513793282639],[-74.01056370849734,40.74516636225321],[-74.01055056928816,40.745253182077825],[-74.01053978205333,40.745324455419386],[-74.01053373534732,40.74536440745704],[-74.010531065377,40.745382050389416],[-74.01054520392145,40.74539213501166],[-74.01110359804878,40.745447670243976],[-74.01111624163278,40.74543612462539],[-74.01112466229964,40.74537776220244],[-74.01113010029034,40.745343228325524],[-74.01113887006922,40.7452875486318],[-74.01114545795524,40.74524572071857],[-74.01115627315944,40.745177047156155],[-74.0111611341844,40.745146176461084],[-74.01117183119814,40.74507825828334],[-74.01115328709844,40.74506864357284],[-74.0110428174822,40.74506096342358],[-74.0110445915082,40.745046212402045],[-74.01138769974187,40.745073112682675],[-74.01138567845328,40.74508800864403],[-74.01123038057233,40.74507583116526],[-74.01121085294035,40.74517080368261],[-74.01120592447445,40.74519477063079],[-74.01118816871931,40.74528112609168],[-74.01118102964979,40.74531584944141],[-74.01116675082783,40.74538529798192],[-74.01115419176905,40.745446378083884],[-74.01116709976122,40.745460352539965],[-74.01173958552815,40.74551991819018],[-74.01175140766141,40.74544238769607],[-74.01175495761667,40.74541909767192],[-74.01176281151672,40.74536759428581],[-74.01177255159179,40.74530370649789],[-74.01177404681451,40.74529390321336],[-74.01178757177937,40.74520520356582],[-74.01179527645724,40.745154666984945],[-74.01178273500808,40.74513495663101],[-74.01166900853472,40.745127331191426],[-74.01167067583802,40.74511397784239],[-74.01183642872407,40.74512596367872],[-74.01177025765051,40.745552784540145],[-74.0117663544952,40.74557798004347],[-74.0117827582808,40.7456015722554],[-74.01171897530907,40.74593984499781],[-74.0117112349654,40.74596125915166],[-74.01167885505592,40.745979461815956],[-74.01163451251718,40.74597839430354],[-74.01055524902252,40.74587110492542],[-74.01055133475721,40.745902883999676],[-74.01012821388646,40.745857238928934],[-74.01012821162075,40.745842335463074],[-74.00994668462272,40.74581951444566],[-74.00994807913845,40.74580017091194],[-74.00946389855962,40.74575014365948],[-74.00945258331889,40.745817656644206],[-74.00944206850693,40.745880389871516],[-74.00943615127545,40.745915693320605],[-74.00942517623243,40.7459811773634],[-74.00941984903601,40.74601296304771],[-74.00940851345764,40.746080594635856],[-74.00940272604319,40.7461151306341],[-74.0093920495925,40.74617882395999],[-74.00938671069996,40.74621068100902],[-74.00938198694907,40.74623886784373],[-74.00937801611612,40.74626255972148],[-74.00936550495776,40.746337200862094],[-74.0115282185556,40.74657522476394],[-74.01156206111087,40.74658699142648],[-74.0115852836195,40.74660905095146],[-74.01158238743089,40.74663553579254],[-74.01152538638327,40.74697314077381],[-74.01150411235528,40.74699080250515],[-74.01147606280952,40.74699668563959],[-74.01143737944645,40.74699227651282],[-74.00924314592588,40.74676279075376],[-74.0091373625992,40.74735976280298],[-74.00956047962374,40.74740279960449],[-74.00956103476226,40.747387733595254],[-74.00956765300351,40.74738787745328],[-74.00956826626552,40.74737108340657],[-74.0095503986723,40.74737070611278],[-74.0095515541536,40.74733934176788],[-74.00996384996868,40.74737780301256],[-74.0099583844545,40.74741167208279],[-74.00990669970031,40.74740684960846],[-74.00990158912954,40.7474384843489],[-74.0113567533772,40.747592418346755],[-74.01139477623487,40.74761090210864],[-74.01140673935517,40.747630550570705],[-74.01134693158455,40.747976205492634],[-74.01133174441699,40.748000575341926],[-74.0113035299374,40.74801457190888],[-74.0112661125396,40.74801371918114],[-74.0090584790135,40.74778564533286],[-74.00894606502311,40.74841189316866],[-74.00897918405973,40.748412709626976],[-74.00897918237624,40.74840021938044],[-74.00907100927544,40.74840976720644],[-74.00907390770347,40.74839506170079],[-74.00941511636573,40.748429586917254],[-74.00941607672524,40.74843693503788],[-74.00952336741506,40.7484479568082],[-74.00951882360114,40.748473540435974],[-74.01116687561544,40.74864504676615],[-74.01119472751145,40.74865681411394],[-74.01121561813409,40.74867799224354],[-74.01121562130405,40.74869682117584],[-74.01114914281891,40.749025747264824],[-74.01113289942974,40.749041633830956],[-74.01110891182984,40.74904987642213],[-74.01107797059221,40.74905164311724],[-74.00994817938025,40.748931988005765],[-74.00956004978684,40.74993504179153],[-74.00972257401406,40.74997202900862],[-74.00972771074939,40.74996378830078],[-74.01006544547259,40.75006803825169],[-74.01050182205222,40.75020981164461],[-74.01075118603501,40.750293977204855],[-74.01080815800898,40.75031931136798],[-74.01075658033923,40.75041085295746],[-74.01069531261547,40.750394514816875],[-74.01048679093364,40.75032668876917],[-74.00968282368922,40.75006275779379],[-74.00969350260826,40.750043936175544],[-74.0095424804557,40.750000949023416],[-74.00951808686504,40.75010700478141],[-74.00947001922505,40.7500811641566],[-74.00947559600826,40.75007515771968],[-74.00925340917918,40.74998520622449],[-74.00911896644935,40.75033244243163],[-74.00900098259459,40.75064818378257],[-74.00870618650575,40.751426805003405],[-74.00873137829987,40.75146589496972],[-74.00866729071824,40.751628197220754],[-74.00862089839437,40.75165257792243],[-74.00853256925012,40.75188360930431],[-74.00876004993509,40.75194801470976],[-74.0091408211999,40.752097594099006],[-74.00912661123239,40.752116895734865],[-74.00874567715042,40.751964395327015],[-74.00865115936809,40.75193951211308],[-74.00864318237626,40.75195650203189],[-74.00896912527908,40.75207679147874],[-74.008957422948,40.75209022513094],[-74.00903895969972,40.75212515615248],[-74.00904909796253,40.75211834944301],[-74.00910757975154,40.752139712111855],[-74.00910596820003,40.752142124949444],[-74.00905774009662,40.75221435124321],[-74.00899734911651,40.75218910594712],[-74.00900762808337,40.75217684273936],[-74.00892887650465,40.75214400187013],[-74.00891472422606,40.752163628475834],[-74.00867223768384,40.75206225000071],[-74.00859053101694,40.75202810543436],[-74.00858095760466,40.7520438824116],[-74.00866456561988,40.75207286737424],[-74.00934089245268,40.75235560954558],[-74.00932795206235,40.75237350304618],[-74.0084789557279,40.75201857191993],[-74.00842636447226,40.75215785023921],[-74.00881779819426,40.752324345854184],[-74.00880273703069,40.75234485403722],[-74.0088394166214,40.752358816534645],[-74.00885173565295,40.75234228177297],[-74.00986566961524,40.752763413139334],[-74.00984627922618,40.752785441959404],[-74.00988922619945,40.75280368052555],[-74.00990631519593,40.752780411198394],[-74.0099905581974,40.75281618714907],[-74.00992010631788,40.75291212601697],[-74.00997058797012,40.752933564153146],[-74.00991916275481,40.753003591459176],[-74.00978913116431,40.75294837008777],[-74.00988774868313,40.752814077653284],[-74.00983854674402,40.752794967983014],[-74.00983056913974,40.752803464244515],[-74.00882994505388,40.75238001600714],[-74.00883632714992,40.752371521109524],[-74.00879210090841,40.7523521383795],[-74.0086879221956,40.75249399862839],[-74.00835352838843,40.752350739342255],[-74.00801152240543,40.75325645261208],[-74.0079038694304,40.75354153874585],[-74.00773968687764,40.7539714956911],[-74.00762013296321,40.754281475520145],[-74.00774478605632,40.75433654271943],[-74.00759664325838,40.75453044968608],[-74.00747193016366,40.75447681451167],[-74.00729394650305,40.75472318445086],[-74.00728499944329,40.75473556820319],[-74.00741362036896,40.75478930266942],[-74.00727181174757,40.75498559453522],[-74.00714468360961,40.75493248117337],[-74.00695917416672,40.75518079484938],[-74.00680635763676,40.75539177564034],[-74.00670291840642,40.7555323674909],[-74.00656620007939,40.75572286294469],[-74.00620548925966,40.75622084397098],[-74.00609900474532,40.75636785049746],[-74.00595462291497,40.75657584218473],[-74.00591251611402,40.756636499969474],[-74.00580062242977,40.75680169427738],[-74.00541885841004,40.757323140851746],[-74.00521187705773,40.7572319985399],[-74.00480392560178,40.757809843164665],[-74.00496777078648,40.757884164447944],[-74.00527894797887,40.758028554928195],[-74.00503105136634,40.75835701647308],[-74.00696428749305,40.7591600575616],[-74.00699375268461,40.75917614764263],[-74.00701038304956,40.75920372038661],[-74.00700358904015,40.75923187034106],[-74.0065295998783,40.7598747512412],[-74.00650687640179,40.75989203231714],[-74.00647588371949,40.759893601268054],[-74.00644352901304,40.75989046096714],[-74.00631515935251,40.759842822044675],[-74.00450483093914,40.75908499655266],[-74.0042062912538,40.759501707688415],[-74.00390742032765,40.75937569218353],[-74.00380657835007,40.75951073146595],[-74.0040798895684,40.759626044742674],[-74.00424697128052,40.75969921417134],[-74.00420247432244,40.759761071881755],[-74.00414863814689,40.75983591417084],[-74.00424487588268,40.75988657316653],[-74.00425967856711,40.759875307678534],[-74.0043188942507,40.759910685763465],[-74.00426869650676,40.75995927901335],[-74.00421059345649,40.75992456661],[-74.00422266066995,40.75991310304368],[-74.00413171622804,40.759861642395975],[-74.00411162007795,40.7598930073072],[-74.0036689145353,40.75970596957665],[-74.00357251040072,40.75984655897313],[-74.00392854933564,40.760003019720415],[-74.00382559595194,40.760133136666866],[-74.00358800911194,40.76045170695133],[-74.0033848822989,40.76072887070633],[-74.0031333899139,40.76107834509638],[-74.00278691552613,40.76092896970333],[-74.00233528130057,40.76154372700158],[-74.00454520983433,40.76249280194478],[-74.00455814361395,40.762507876075404],[-74.00455641560922,40.762524265025135],[-74.00444951527267,40.76266456720002],[-74.00442709659245,40.76267570735635],[-74.00439976203513,40.76267135909888]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000722155957729","objectid":"249","shape_leng":"0.03638434365","location_id":"249","zone":"West Village","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.00250642399995,40.72901638499997],[-74.00281726599992,40.72836312899994],[-74.00312767499993,40.72839380099989],[-74.00531369199996,40.72860449399992],[-74.0070902079999,40.72877225299994],[-74.00697298799992,40.72949498999988],[-74.00685682099994,40.7302282359999],[-74.00673713399992,40.7309470659999],[-74.00662407199995,40.73166937899993],[-74.00650135299995,40.73242587499988],[-74.00640707699989,40.733053939999884],[-74.0062942419999,40.733742041999925],[-74.00618179699998,40.734439131999885],[-74.00606869899997,40.735133213999916],[-74.00596018000002,40.7358450069999],[-74.00585387099987,40.73653322599989],[-74.00579620299999,40.73692169799991],[-74.0056870449999,40.73755187899992],[-74.00559149599995,40.73813833999992],[-74.00549494099988,40.73875392299989],[-74.00539035999991,40.73941197299994],[-74.00529178799992,40.74002322299992],[-74.00515808199998,40.74085808099991],[-74.00252381499989,40.73975264399995],[-73.99968392199985,40.73855224899989],[-73.99683993899998,40.73736088899995],[-73.99734132799996,40.736667888999925],[-73.99780443099984,40.73603215799991],[-73.99827418999986,40.73539113999988],[-73.99853021599989,40.73503789199989],[-73.99871443800002,40.73478386099987],[-73.999187803,40.734134833999896],[-73.99955589199998,40.73361059599991],[-73.99975771599985,40.73334132199989],[-74.000066577,40.7329292359999],[-74.00051066399996,40.73231522299996],[-74.00095442299988,40.731706097999954],[-74.00141242499994,40.731065255999916],[-74.0016846549999,40.73058156199995],[-74.00213899299997,40.72979574399988],[-74.00220337299997,40.72965325599995],[-74.00250642399995,40.72901638499997]]]]}},{"type":"Feature","properties":{"shape_area":"0.0000343423231652","objectid":"261","shape_leng":"0.0271204563616","location_id":"261","zone":"World Trade Center","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-74.01332610899988,40.7050307879999],[-74.01326979499997,40.704553495999974],[-74.01419226999991,40.7045704039999],[-74.01428922899998,40.70454907499989],[-74.014370312,40.70455803799994],[-74.01451712299998,40.704605674999854],[-74.01466709799998,40.70464721299986],[-74.01478059499995,40.70467411299992],[-74.01489542099996,40.70469751799991],[-74.01496125199999,40.704759797999884],[-74.01516257,40.704805094999884],[-74.01527219799995,40.70483003699998],[-74.01539758699995,40.704800148999894],[-74.01565756599994,40.704833087999944],[-74.01565582200001,40.70488263499986],[-74.0158739609999,40.704882112999876],[-74.01621736899986,40.70485302699991],[-74.01629888499991,40.70484641499997],[-74.01637519799986,40.704838484999925],[-74.01652040399995,40.7047997179999],[-74.01662761199991,40.704799430999856],[-74.01668613099999,40.70479933799992],[-74.01665417299996,40.7049638209999],[-74.016622178,40.7050944829999],[-74.01640305499988,40.70566620199991],[-74.01625159599989,40.706072613999886],[-74.0160596679999,40.70670512999994],[-74.01593869399987,40.70700757399988],[-74.01590498299998,40.70709269499987],[-74.01588574099995,40.707142175999934],[-74.01586395999995,40.70720018299993],[-74.01584985499994,40.70724726799988],[-74.01571815199996,40.707585310999924],[-74.01568829399997,40.70766382499988],[-74.015643777,40.70775609899987],[-74.01559220199994,40.70788324299987],[-74.01534330799996,40.70849681699987],[-74.01495415399995,40.70943269199994],[-74.01487257099997,40.70968487399991],[-74.01482432799993,40.70982336899991],[-74.01466507099994,40.71042693799993],[-74.01445559399995,40.71090715299987],[-74.01426893599994,40.711467815999924],[-74.01417753399997,40.71188266599997],[-74.01404744599986,40.71243781499994],[-74.01375388499997,40.71369055499988],[-74.01359729999992,40.7136233779999],[-74.01254378499995,40.713179103999934],[-74.01166334799997,40.71279805599988],[-74.01012167499995,40.71208469599989],[-74.00883879499997,40.71150395899991],[-74.00860085399992,40.711392239999945],[-74.00906264699988,40.71088670399995],[-74.00947357899994,40.71041254299995],[-74.00954277299994,40.71032749299993],[-74.00998739099994,40.70980567299989],[-74.0105424639999,40.70915414899993],[-74.01084638199993,40.708797544999925],[-74.0110119849999,40.70859402199989],[-74.01118228399991,40.7083855739999],[-74.01124834999997,40.708304700999854],[-74.01170249899995,40.70775571299986],[-74.01194691299999,40.70745153199994],[-74.01250773999996,40.706767066999916],[-74.01325396399993,40.70587051399992],[-74.01330942899993,40.70570683099988],[-74.01334484799995,40.70553882699991],[-74.01335946199991,40.70536865599994],[-74.01335309799998,40.70519857699985],[-74.01332610899988,40.7050307879999]]]]}},{"type":"Feature","properties":{"shape_area":"0.000122330270966","objectid":"262","shape_leng":"0.0490636231541","location_id":"262","zone":"Yorkville East","borough":"Manhattan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.94383256699986,40.78285908899991],[-73.9437600529999,40.782828931999894],[-73.94360760400001,40.78286536999992],[-73.94354420706223,40.78288052416259],[-73.94364823539011,40.78265616133327],[-73.94388068102414,40.78153204386692],[-73.943870759887,40.781273026571576],[-73.94371468850554,40.780629815528805],[-73.94360047475412,40.78015909946613],[-73.94321386265217,40.779317588660014],[-73.94300423950462,40.77963949547422],[-73.9427806664196,40.77950615406811],[-73.94271600545085,40.77954416947615],[-73.94262799584376,40.779323118968634],[-73.94271237476224,40.77921485693976],[-73.94253556320854,40.77909095606248],[-73.94289340818789,40.7786140932462],[-73.94265530676857,40.778124965573824],[-73.94245740990823,40.777407473347616],[-73.94243848174499,40.777315235765926],[-73.94232881653723,40.77724265564125],[-73.9423613254944,40.777164737886814],[-73.942302455358,40.777144704412],[-73.94224790662773,40.77711854006399],[-73.94219877702626,40.777086771368786],[-73.94215605521731,40.77705003763205],[-73.9421206009128,40.7770090780741],[-73.94209312757077,40.77696471695306],[-73.94207418803877,40.77691784697707],[-73.94200266722274,40.776185317382705],[-73.94208160457381,40.77595701631705],[-73.94240100949044,40.77572692752608],[-73.9425876964068,40.7752189565281],[-73.94293043781381,40.774676268035776],[-73.94333894750484,40.77421119259064],[-73.94366431814754,40.77384076467938],[-73.94396084370824,40.773530420594504],[-73.94442433595846,40.77304532251586],[-73.94487889596702,40.7725695620073],[-73.94561514012511,40.77194302658768],[-73.94640418919063,40.77126904561923],[-73.94690764133767,40.7707339117235],[-73.9474897547817,40.77011515400953],[-73.94752257899997,40.770129694999895],[-73.94761452999984,40.77017042899995],[-73.94766538399982,40.77019325299993],[-73.94771625099995,40.77021606799992],[-73.94779385500001,40.770249151999934],[-73.94807387899996,40.770394394999876],[-73.95043560599999,40.7713911029999],[-73.95268514999994,40.772339404999926],[-73.95218621999996,40.77301984499992],[-73.95181761599994,40.77352690399989],[-73.95172338299997,40.77365653199994],[-73.9512617339999,40.774291940999944],[-73.95079834699999,40.774927767999884],[-73.95033856500001,40.77556320899991],[-73.94987249699994,40.77619615099997],[-73.9493736669999,40.776875747999945],[-73.9488804199999,40.77755328499992],[-73.94842272599978,40.77818264099989],[-73.94796768199993,40.77880646599992],[-73.94750818099986,40.77943712299992],[-73.9470492189998,40.78006434699994],[-73.94659059199999,40.78069197399987],[-73.94647764199985,40.78084530299988],[-73.94642443299978,40.78091753399991],[-73.94630631700001,40.781077875999884],[-73.946197187,40.78122601799986],[-73.94613091699998,40.78131597799995],[-73.94588094499986,40.78165816599989],[-73.94573785299986,40.781854041999964],[-73.94566981599996,40.78194717599993],[-73.94536565199984,40.78236245099987],[-73.94525035499998,40.782519863999916],[-73.94521308599991,40.782570746999944],[-73.94472264499986,40.78324757199989],[-73.94464666000002,40.78321787299997],[-73.94405439399999,40.78296435799991],[-73.94395460199989,40.782915519999925],[-73.94389324599985,40.782887726999896],[-73.94383256699986,40.78285908899991]]],[[[-73.93804640603422,40.78082954427547],[-73.9379013362395,40.78074999617256],[-73.93779448726416,40.78078125875544],[-73.93779944179558,40.78103133979666],[-73.93764631821479,40.781001215892864],[-73.93765365963804,40.78079000755279],[-73.93759894622616,40.78046784086143],[-73.93779269036342,40.78035790421227],[-73.9382377350939,40.7802590794654],[-73.9383962259169,40.78026243389376],[-73.93861200821945,40.78033895586891],[-73.93923746178228,40.77973339405837],[-73.939318219876,40.77971800182687],[-73.93953015793254,40.77952762026044],[-73.93958378972465,40.77957647400715],[-73.93943238100762,40.7798122002746],[-73.93949329752046,40.77987369131538],[-73.93937515379653,40.77997877184918],[-73.9393052849678,40.7799512245521],[-73.93921789625274,40.78001352022149],[-73.93872802926589,40.78051074370461],[-73.93883951845037,40.78059924979985],[-73.93882863410155,40.78076345072766],[-73.93874423089268,40.78104387604228],[-73.93830097951646,40.781362084364964],[-73.9380821326871,40.78141843777721],[-73.93796757721641,40.78128933406028],[-73.93804948921756,40.78105580604241],[-73.93806723089875,40.78094470320065],[-73.93804640603422,40.78082954427547]]]]}}]}'),Qr=JSON.parse('[{"Event_ID":1,"Event_Name":"Thanksgiving Day Parade","Zone_ID":239,"Zone_Name":"Upper West Side South","Start_Date":{"Time":"11/22/2022 12:01:00 AM"},"End Date":{"Time":"11/22/2022 11:59:00 PM"},"Event_Agency":"Parks Department","Event_Type":"Special Event","Event_Borough":"Manhattan","Event_Location_Text":"Central Park: Central Park West Sidewalks - 72nd St to 81st St ,Central Park: Central Park West Sidewalks - 65th St to 72nd St ,Central Park: Central Park West Sidewalks - Merchant\'s Gate to 65 St ,Central Park: Merchants\' Gate ,Central Park: Central Park South Sidewalks - 7 Ave to Merchant\'s Gate ,Central Park: Central Park South Sidewalks - 6th Ave to 7th Ave ","Event_Location_Start_Coordinates":"[40.783268305609866, -73.97456188389754]","Event_Location":{"Latitude":40.783268305609866,"Longitude":-73.97456188389754},"Event_Street_Side":"","Street_Closure_Type":"","Community_Board":"64, ","Police Precinct":"22, ","expected_attendees":500000,"description":"The 92nd Annual Macy\'s Thanksgiving Day Parade is a special event organized by the Parks Department. It takes place in Manhattan\'s Central Park and features various floats, balloons, and performances. Thousands of people are expected to attend."},{"Event_ID":2,"Event_Name":"Halloween Parade and Party","Zone_ID":231,"Zone_Name":"TriBeCa/Civic Center","Start_Date":{"Time":"10/28/2022 12:50:00 PM"},"End Date":{"Time":"10/28/2022 01:20:00 PM"},"Event_Agency":"Police Department","Event_Type":"Parade","Event_Borough":"Manhattan","Event_Location_Text":" GREENWICH STREET between NORTH MOORE STREET and BEACH STREET,  GREENWICH STREET between NORTH MOORE STREET and DUANE STREET,  GREENWICH STREET between DUANE STREET and READE STREET","Event_Location_Start_Coordinates":"[40.720777, -74.010019]","Event_Location":{"Latitude":40.720777,"Longitude":-74.010019},"Event_Street_Side":"Full","Street_Closure_Type":"Full Street Closure ","Community_Board":"1, ","Police Precinct":"1, ","expected_attendees":10000,"description":"The Halloween Parade and Party is a festive parade organized by the Police Department in Manhattan. It takes place on Greenwich Street and features participants dressed in Halloween costumes. The event is expected to attract a crowd of around 10,000 people."},{"Event_ID":3,"Event_Name":"Saint Patrick\'s Day Parade","Zone_ID":237,"Zone_Name":"Upper East Side South","Start_Date":{"Time":"03/17/2022 08:00:00 AM"},"End Date":{"Time":"03/17/2022 06:57:00 PM"},"Event_Agency":"Parks Department","Event_Type":"Special Event","Event_Borough":"Manhattan","Event_Location_Text":"Central Park: Fifth Ave Sidewalks - 60 St to 65 St ","Event_Location_Start_Coordinates":"[40.774317073647985, -73.96566061866508]","Event_Location":{"Latitude":40.774317073647985,"Longitude":-73.96566061866508},"Event_Street_Side":"","Street_Closure_Type":"","Community_Board":"64, ","Police Precinct":"22, ","expected_attendees":250000,"description":"The NYC Saint Patrick\'s Day Parade is a special event organized by the Parks Department. It takes place on the Fifth Avenue sidewalks, spanning from 60th Street to 65th Street. The parade celebrates Irish culture and heritage and is expected to draw a crowd of around 250,000 attendees."},{"Event_ID":4,"Event_Name":"NYC Pride March","Zone_ID":90,"Zone_Name":"Flatiron","Start_Date":{"Time":"06/24/2022 12:00:00 PM"},"End Date":{"Time":"06/24/2022 05:00:00 PM"},"Event_Agency":"Police Department","Event_Type":"Parade","Event_Borough":"Manhattan","Event_Location_Text":"WEST 19 STREET between 7 AVENUE and 9 AVENUE,  WEST   18 STREET between 7 AVENUE and 9 AVENUE,  WEST   17 STREET between 7 AVENUE and 9 AVENUE,  WEST   16 STREET between 7 AVENUE and 9 AVENUE,  WEST   16 STREET between 6 AVENUE and 7 AVENUE,  WEST   15 STREET between 7 AVENUE and 9 AVENUE,  7 AVENUE between WEST   19 STREET and 7 AVENUE SOUTH,  CHRISTOPHER STREET between 7 AVENUE SOUTH and GREENWICH AVENUE,  GREENWICH AVENUE between CHRISTOPHER STREET and 6 AVENUE,  WEST    8 STREET between 6","Event_Location_Start_Coordinates":"[40.74265656195649, -73.99981520990745]","Event_Location":{"Latitude":40.74265656195649,"Longitude":-73.99981520990745},"Event_Street_Side":"Full","Street_Closure_Type":"Full Street Closure ","Community_Board":"2, 4, 5, ","Police Precinct":"10, 13, 14, 6, ","expected_attendees":2000000,"description":"The NYC Pride March is a large-scale parade celebrating LGBTQ+ pride organized by the Police Department. It takes place in Manhattan, with street closures along West 19th Street, West 18th Street, West 17th Street, West 16th Street, West 15th Street, 7th Avenue, Christopher Street, Greenwich Avenue, and West 8th Street. The march is expected to attract a massive crowd of approximately 2 million attendees."},{"Event_ID":5,"Event_Name":"Times Square Ball","Zone_ID":230,"Zone_Name":"Times Sq/Theatre District","Start_Date":{"Time":"12/31/2022 12:00:00 AM"},"End Date":{"Time":"12/31/2022 11:59:00 PM"},"Event_Agency":"Parks Department","Event_Type":"Special Event","Event_Borough":"Manhattan","Event_Location_Text":"Father Duffy Square","Event_Location_Start_Coordinates":"[40.75895078453756, -73.98483981311989]","Event_Location":{"Latitude":40.75895078453756,"Longitude":-73.98483981311989},"Event_Street_Side":"","Street_Closure_Type":"","Community_Board":"5, ","Police Precinct":"18, ","expected_attendees":100000,"description":"The Times Square Ball event is a special event organized by the Parks Department. It takes place at Father Duffy Square in Manhattan and marks the New Year\'s Eve celebration. Thousands of people gather in Times Square to witness the iconic ball drop, and the event is expected to attract around 100,000 attendees."},{"Event_ID":6,"Event_Name":"Lunar New Year Parade","Zone_ID":144,"Zone_Name":"Little Italy/Nolita","Start_Date":{"Time":"02/25/2022 01:00:00 PM"},"End Date":{"Time":"02/25/2022 04:00:00 PM"},"Event_Agency":"Police Department","Event_Type":"Parade","Event_Borough":"Manhattan","Event_Location_Text":" MOTT STREET between GRAND STREET and CANAL STREET,  MOTT STREET between CANAL STREET and CHATHAM SQUARE,  EAST BROADWAY between CHATHAM SQUARE and FORSYTHE STREET,  ELDRIDGE STREET between EAST BROADWAY and HESTER STREET,  HESTER STREET between BOWERY and MULBERRY STREET,  HESTER STREET between ELDRIDGE STREET and FORSYTH STREET,  FORSYTH STREET between GRAND STREET and DELANCEY STREET,  BROOME STREET between FORSYTH STREET and ELDRIDGE STREET,  FORSYTH STREET between HESTER STREET and GRAND ST","Event_Location_Start_Coordinates":"[40.71791248486757, -73.997152457876]","Event_Location":{"Latitude":40.71791248486757,"Longitude":-73.997152457876},"Event_Street_Side":"Full","Street_Closure_Type":"Full Street Closure ","Community_Board":"2, 3, ","Police Precinct":"5, ","expected_attendees":150000,"description":"The 19th Lunar New Year Parade is a vibrant parade celebrating the Lunar New Year organized by the Police Department. It takes place in Manhattan, featuring colorful floats and traditional performances. The parade route includes Mott Street, East Broadway, Eldridge Street, Hester Street, Forsyth Street, and Broome Street. The event is expected to attract a crowd of approximately 150,000 attendees."},{"Event_ID":7,"Event_Name":"Three Kings Day Parade","Zone_ID":74,"Zone_Name":"East Harlem North","Start_Date":{"Time":"1/5/2022 11:00"},"End Date":{"Time":"1/5/2022 13:00"},"Event_Agency":"Police Department","Event_Type":"Parade","Event_Borough":"Manhattan","Event_Location_Text":" EAST  115 STREET between PARK AVENUE and MADISON AVENUE,  EAST  106 STREET between PARK AVENUE and 3 AVENUE,  EAST  106 STREET between 5 AVENUE and PARK AVENUE,  3 AVENUE between EAST  106 STREET and EAST  116 STREET,  EAST  116 STREET between 3 AVENUE and PARK AVENUE,  PARK AVENUE between EAST  116 STREET and EAST  115 STREET","Event_Location_Start_Coordinates":"[40.7989778691995, -73.94463769065234]","Event_Location":{"Latitude":40.7989778691995,"Longitude":-73.94463769065234},"Event_Street_Side":"Both","Street_Closure_Type":"Full Street Closure ","Community_Board":"11, ","Police Precinct":"23, 25, ","expected_attendees":50000,"description":"The 41st Annual Three Kings Day Parade is a joyful parade celebrating the Christian feast of the Epiphany organized by the Police Department. It takes place in Manhattan, with the parade route spanning East 115th Street, East 106th Street, 3rd Avenue, and Park Avenue. The event is expected to attract a crowd of approximately 50,000 attendees."},{"Event_ID":8,"Event_Name":"4th of July Fireworks","Zone_ID":232,"Zone_Name":"Two Bridges/Seward Park","Start_Date":{"Time":"7/4/2022 0:00"},"End_Date":{"Time":"7/4/2022 23:59"},"Event_Agency":"","Event_Type":"Special Event","Event_Borough":"Manhattan","Event_Location_Text":"East River Walk: East River Esplanade","Event_Location_Start_Coordinates":"[40.71599281291161, -73.97536662439524]","Event_Location":{"Latitude":40.71599281291161,"Longitude":-73.97536662439524},"Event_Street_Side":"","Street_Closure_Type":"","Community_Board":"","Police Precinct":"","expected_attendees":3000000,"description":"Macy\'s 4th of July Fireworks is a grand fireworks display held in Manhattan along the East River Esplanade. It is a highly anticipated event celebrating Independence Day. The spectacular fireworks show is expected to attract a massive crowd of around 3 million attendees."}]'),$r=n(184),ti=(0,t.createContext)(),ei={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://52.90.34.70/api",ni=function(e){var n=e.children,r=p((0,t.useState)([]),2),i=r[0],o=(r[1],p((0,t.useState)([]),2)),a=o[0],s=o[1],l=p((0,t.useState)(0),2),u=l[0],c=l[1],h=p((0,t.useState)([]),2),f=h[0],d=h[1],y=p((0,t.useState)([]),2),g=y[0],m=y[1],_=p((0,t.useState)(null),2),x=_[0],b=_[1],w=p((0,t.useState)(null),2),k=w[0],E=w[1],S=p((0,t.useState)(!1),2),T=S[0],M=S[1],I=p((0,t.useState)(!1),2),C=I[0],P=I[1],A=p((0,t.useState)(!1),2),L=A[0],D=A[1],R=p((0,t.useState)(!1),2),O=R[0],z=R[1],N=p((0,t.useState)(!1),2),F=N[0],B=N[1],j=p((0,t.useState)(!1),2),U=j[0],V=j[1],G=p((0,t.useState)(!1),2),q=G[0],Z=G[1],W=p((0,t.useState)(null),2),X=W[0],H=W[1],Y=p((0,t.useState)(null),2),K=Y[0],J=Y[1],Q=[["#008000","#FFBF00","#FF0000"],["#FFD700","#9ACD32","#008000"],["#FF69B4","#C71585","#800080"],["#00BFFF","#1E90FF","#4169E1"],["#32CD32","#228B22","#006400"],["#CD5C5C","#B22222","#8B0000"],["#A9A9A9","#696969","#2F4F4F"],["#BA55D3","#9932CC","#8B008B"],["#4169E1","#0000CD","#191970"]],$=(0,t.useMemo)((function(){return Kt().domain([0,.4,.8]).range(Q[u])}),[Q,u]);return(0,$r.jsx)(ti.Provider,{value:{MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiaGFycnlvY2xlaXJpZ2giLCJhIjoiY2xpdzJmMzNjMWV2NDNubzd4NTBtOThzZyJ9.m_TBrBXxkO0y0GjEci199g",BASE_API_URL:ei,add3DBuildings:function(t){t.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}})},renderNeighbourhoods:function(t){Jr.features.forEach((function(e){var n="".concat(e.properties.location_id);e.id=n;var r=n+"-line";t.getLayer(n)||t.addLayer({id:e.id,type:"fill",source:{type:"geojson",data:e},paint:{"fill-color":"#888","fill-opacity-transition":{duration:600},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.9,.6]}}),t.getLayer(r)||t.addLayer({id:e.id+"-line",type:"line",source:{type:"geojson",data:e},paint:{"line-color":"#ffffff","line-width":0,"line-width-transition":{duration:600}}})}))},renderEvents:function(t){var e=[];Qr.forEach((function(n){var r=(new(v().Marker)).setLngLat([n.Event_Location.Longitude,n.Event_Location.Latitude]).addTo(t),i=r.getElement();r.Event_ID=n.Event_ID,i.addEventListener("click",(function(){console.log(n)})),i.addEventListener("mouseover",(function(){i.style.cursor="pointer"})),i.addEventListener("mouseout",(function(){i.style.cursor="default"})),e.push(r)})),s(e)},updateLayerColours:function(t,e,n,r){if(t&&r&&Jr){var i=t.getStyle();Jr.features.forEach((function(o){if(i.layers.some((function(t){return t.id===o.id}))){var a=e?n[o.id]:r[o.id];if(o.busyness_score=a,void 0!==a){var s=$(a);t.setPaintProperty(o.id,"fill-color",s)}}else console.warn("Layer with ID ".concat(o.id," doesn't exist"))}))}},removeAllMarkers:function(){a.forEach((function(t){t.remove()})),s([])},showAllMarkers:function(t){var e=[];Qr.forEach((function(n){var r=a.some((function(t){return t.getLngLat().lng===n.Event_Location.Longitude&&t.getLngLat().lat===n.Event_Location.Latitude}));if(!r){var i=(new(v().Marker)).setLngLat([n.Event_Location.Longitude,n.Event_Location.Latitude]).addTo(t);e.push(i)}})),s((function(t){return[].concat(Kr(t),e)}))},removeAllButOneMarker:function(t){a.forEach((function(e){e.Event_ID!==t&&e.remove()})),s(a.filter((function(e){return e.Event_ID==t})))},colourPairIndex:u,setColourPairIndex:c,neighbourhoodEvents:f,setNeighbourhoodEvents:d,eventsMap:g,setEventsMap:m,zone:x,setZone:b,error:k,setError:E,isSplitView:T,setSplitView:M,showInfoBox:O,setShowInfoBox:z,showNeighborhoodInfoBox:F,setShowNeighborhoodInfoBox:B,showChart:U,setShowChart:V,showChartData:q,setShowChartData:Z,useOriginal:C,setUseOriginal:P,makePredictionRequest:L,setMakePredictionRequest:D,zoneID:X,setZoneID:H,eventName:K,setEventName:J,neighbourhoods:Jr,prunedEvents:Qr,colourPairs:Q,colourScale:$,layerIds:i,originalLat:40.7484,originalLng:-73.9857,zoom:7,pitch:30},children:n})},ri=function(){var e=(0,t.useContext)(ti);if(void 0===e)throw new Error("useMapContext must be used within a MapProvider");return e};var ii=function(t){var e=t.map,n=t.isNeighbourhoodClickedRef,r=t.changeColourScheme,i=t.enableColours,o=t.disableColours,a=ri(),s=a.prunedEvents,l=a.setNeighbourhoodEvents,u=a.setShowInfoBox,c=a.setShowNeighborhoodInfoBox,h=a.setShowChartData,f=a.setZone,p=a.setEventName,d=s.map((function(t,e){return(0,$r.jsx)("option",{value:JSON.stringify(t),children:t.Event_Name},e)}));return(0,$r.jsxs)("div",{className:"floating-nav",children:[(0,$r.jsx)("form",{className:"floating-nav-form",children:(0,$r.jsxs)("select",{className:"floating-nav-dropdown",onChange:function(t){var r=JSON.parse(t.target.value),i=r.Event_Location.Latitude,a=r.Event_Location.Longitude;f(r.Zone_ID),function(t,n){e.current.flyTo({center:[t,n],zoom:15,essential:!0})}(a,i),function(t){var n=t+"-line";e.current.setPaintProperty(n,"line-width",4)}(r.Zone_ID),o(),n.current=!0,l([r]),u(!0),c(!0),h(!1),p(r.Event_Name)},children:[(0,$r.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select an event"}),d]})}),(0,$r.jsx)("button",{className:"floating-nav-outline-button",onClick:i,children:"Reset"}),(0,$r.jsx)("button",{className:"floating-nav-outline-button",onClick:r,children:"Change Colours"})]})},oi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYoAAACACAYAAAAVki7CAAAgAElEQVR4nO2dd7hcRd3HP/emF5JQhEhNAgHp1YAQilKEIFKCFRBFAUV8FUXx5UVFAQUVBRRsqCEUAbFTRCJFaQIhimAAIdJCICYhhPQ27x/f3eduNmdmT5lz7+7d3+d59rl3T5mZ3T1nfmd+tcM5Rw0dwBob6vgScDpwFjApcJxhGIbRS+ioExRTgcHAN4DJdcd+Grik8v9KYEPgtbIHaBiGYfQsnXX/7wi8BbgK+CMwqrJvInBx5f/HgCMxIWEYhtEW1K8oLgQ+C/SrvF8M/APYC6mlrgFOAlZU9q8DjK/s+xNaaRiGYRi9iHpBATAQrRi+B7ypZvsdwAS6hMHpwPnA8Mr7c4ALShupYRiG0SN0JmxbCtwA7Ae8Xtm2EPgoXULiy0iQDK85b15JYzQMwzB6kL6Vv+uj1cIYZHu4GXgS+ARwHfAt4MWa84YCU5AK6mW02rixe4ZsGIZhdCcdzrnjgR8CQ2q2LwE2RauEDwHXA8u7f3iGYRhGT9PhnJuDVhQg1dLNwNeBh3tsVIZhGEbT0OGcOxG5xD4I3AUsCBw/FNkrDMMwjDYhyespxKvAz4HzgEWljMgwDMNoKpK8ng4FDvYcvwCl7/g7iq0wDMMwejm1gqIP8E3gVmATz/GvVv5uBfwVpfUwDMMwejGdNX+vAT6PPJ1u8Bz/Qs3/fVHup8koSM8wDMPohVQFxdHA+yv/n4/cY5N4KmHbCcA9wMZxh2YYhmE0A1VB8RDwe+Bc4LLA8UmCAmBcpY23RhuZYRiG0RRk9XraFXg0sH8ZcAprpyg3DMMwWpSsgmII8AbKFhviMuAMYHXOcRmGYRhNQlZBATJob5biuFuBD9KVWNAwDMNoQZLiKBrxpGf7VOAA4FJUTnUCcqEdnWtkhmEYRlOQR1AkGbSfR4LhHuAzwLuB+ahi3kMoZblhGIbRguQRFE/UvV+NXGtn12y7GdgTrT42QGnIT8kzQMMwDKNnySMoHq97/yOUULCep5FBG6B/5bjL6KqBYRiGYbQAeYzZ69JVzc4hw/bMhONGANOAUXXbp6AVyNysHRuGYRjdT54VxWt0CYaHSRYSAFewtpAAOAgJkN1z9G0YhmF0M3kEBXSpnx7w7P8o8IHA+ZsBdwMTc/ZvGIZhdBNFBUVSEaO3IBfZRgwFfolqW+Qdh2EYhlEyRQXFpnXbB6HMs0NIRwdwDvA7YFjOsRiGYRglUlRQ1MdHXALslKGdB4E5wLuAvwHb5ByPYRiGURJ5BcW/UPzEaKRqAjiRbLESFwBvQ0btJyrt/A0F7hmGYRhNQh732CrPAFsC1wO3AT8lfYzEH4AjkXstwEbAfZX2ViN11IU1+w3DMIweooig+C2a7LPyIkpXXh9HsT/yhKpyI3ASsCjP4AzDMIw4FPE2qo/QTsNK4DiSg+2W1b1/L1plWFJBwzCMHqS7BcVZKKNsEqcnbNsZJRV8R46+DMMwjAh0p6D4BfAdz759Ue2KJDYAbgc+nbE/wzAMIwJFbBT9UcBdvxTH/gU4hLXVS1TOfxTYIUU7VwEfB5amHKNhGIZRkCIriuUoQ2wjHgOOIllIgCKz0wgJkAvuPcAmKY83DMMwClI0dUYj9dNjwIEokWASbwc+n7HPcSip4AEZzzMMwzByUKaguBcJiTme/Rshu0WWMfwe+A/wJmS3ODnDuYZhGEYOyhIUP0PpxH1Cog9wNRIWafklitvYA8Vb9Ad+jNKZp7GTGIZhGDkoQ1B8AaUZ99kkAL4LHJyhnyXAZyv/zwMOQ+VVAT6BiiFtmKE9wzAMIyVFBcUMYHHN+8uBbzU453PApzL280PgpZr3S4FjkQABJSd8GNgtY7uGYRhGA4q4x1Z5BCX2W4TSjs8PHPselBsqi4BaDIwBXq3b3qfS19CabUuAjwHXZWjfMAzDCBCjYFBV/XQ/YSFxMDA5R5+Xs7aQANlAhtZtGwRcC3wTCRLDMAyjIDEExT8qf+cFjjkGZYwdmLHt+WjST+LMwHmfB24B1s3Yn2EYhlFHTEFRX+2uykdQJtgBOdr+OsmeU29HK4oQ70T1LbbL0a9hGIZRIYaNYn00mS9DnkcLKts7UV2Jc1HJ06w8CexCsvfUfcDeKdt5AzgBlVs1DMMwMhJjRTEX1ZgYgFxVQSk5pgBfJZ+QWIVWIklC4gjSCwmAdYDfAF/OORbDMIy2JsaKAmR/eFfl/9kUj2k4D03s9QwA/gmMzdnub4APoWSGhmEYRgpirCigy04BxYXErUhdlcSZZBMS81Gg3l2V90cDD6CSq4ZhGEYKyhAURXgMVcBbnbBvc+DsjO1dgKLAD0KuuSC12ENkiww3DMNoW2KpnsaSLuV4iGeB8cArnv03ARMztjkWeKbyfz9kN9mv8n4xsB7hVCOGYRhtT6wVxbMU0/s/iVxefULiGLILiefoEhIAK4Av1rxfWXkZhmEYAWIJitXIyJyHh1Ap1Bc9+0cBP83R7q0J2xbV/P9b5F1lGIZhBIglKCCfnWIysD/+dOT9UG6oETna/m3CtndX/q4Cvp2jTcMwjLYjpqD4e4ZjlwCno9KmofrXFwJ75hjLc3R5OlUZRFfW2h+RfwVkGIbRVvSN2FbaFcVUFCk9vcFxHwPOyDmWb7C2/eF/kevuXJJjNAzDMIwEYnk9AQxB6Tt8q5SFKD7iUhobkT+IKuDlWfE8i/I7La/Zti2qsz0A1bH4VY52m4VRyPA/DsWDDAeGIfvL/MrrAVT5b0lyE4ZhGOmJuaJYhLyMtk7Y91uk9nkpYV89RwNXkU9IOODjrCkkBgE3ICHxE1pXSOyL4kgOofF3MxEJkdPKHpRhGL2fmDYKWNtOMRO5th5NOiHxXmS8zivAJqNYiVouB3ZEqq7P5Gy3J+mDqgbeDRxK+t9s47IGZBhGexFbUNTaKaYCu6L8SmnGcT4SEv1z9v1v4H/qtn0BJRd8DTiKNcu2tgIdwA9Q6pKsv9XU+MMxDKMdial6gi5BsQqVPf1vinOGAdegrLB5WVLpb0HNtvcho/aKyr6ikeM9wceAk3Oc51Aku2EYRmHKEhTPAP9Jcfw+wM9ItmukxQGnsuZqZgJdZVdPA/5coP2eYh2URbcRb6CgRYfyYQ0Fvkdjr7Iqv0DC9FWkKnwaqRBfzjhew2hX9gHOQvfMK8ALwFPAI/SSFEGxBcVLKHhuIzRJJyX3A9gA+Bqa4Iuqv85BHlJVDkQG6/5oov1RwfZ7imPR9+hjFVLXXYyERV72B96c0PaHgOsKtGsY7cIGJGtEZgBvJVwmuiWIbaMAPdmPQF469WyEBMQzqMhR0f6vQOVSq0ygqzb3JbR2vMTRgX2rkGfTuRQTEj76oLrjhmHkZwxSe7c8sVcUIEFxIHJFPQ/ZKbZGbp0Hk99YXc+PUHR3lfcjdVO/St+fjdRPT/G2wL7zKb+063bImB4t0MYw2pDte3oAMShDUFRdZMfSVQMiNpejuIzqJHYmcBFaofwYrVZaeYIbjpazScyle/JU9QfWpRcsmw2jBwmpj1uGMlRPZbplOqROqgqJfkgwfIsuF9tT8dtGWoVRgX23E7eUa6iOeK+4yA2jB+kV91AZK4qn0EQ2NHK7S1FMxPWV95tW/t8HCYYzgMsi99lT1BuXa3kqcl+ha2D9yH0ZRm+kX2Bfr7iHylhRrEJ5lWLyb2QcrwqJIyp97ENXMF1vERIQfgoJXZR5CNmM8qR3N4x2I3RPrtttoyiRMgQFyH84FpOB3SttbohcNn+PdPiPAnsgT6feRCiuZOeI/XQgDzEfveIiN4ySGRTY1ysetspQPUEcQTEXGaV/iYLPvow8mYaj7LPfQ0nyQvUsitJZ6Q+k3nq9xL6qDEceXD4OBvYG7o/Q12iac0UxAj0IDEdR93Mqr1a3PRnNSR/kfDMCuZvPQd6aaa+3twT2DUH32PLAMU1PswqKu1Cq8flIOHwReFNl3z3ILfbxgn3U0xfYC6Xw3g/YCtiENZeVy5GNYDrwIMqKmyYCPcRWaJWwNbrgDiZsoxgI3IfckB9FUaAvAbMqY/lX4NxNgJEobcq6wCcbjG1btJqrZyFK5x6r5vhApD48Cv0GWyQcswhFoN+LAirzVFT0MYQ1b/ZVKMp2tuf4gSjN+9vQdzqCNVdmM9Aq9z7P+X2AXeq2zcZfDhhgMHAAula2relvCPpu5qHf/wn0Hc0PtFUW66P7Zxe6rulhaOzDUPR/9XNOA+5AKfFjTKKb0zVHVFmEfgtf+3ujNDkTK+OrZTFyQf8Ma14HA1B8xLDKayxwSoOx7YdU5LWsRvfsK4HzBqLvdH3WnIfmouJsMekH7FS3bQESmPNxzpXx6nDOzXf5mOyc29A5d4Zz7qWa7dOcc8dW2o451pHOuS8752bmHO8059xpzrnBGfvtdM79OmefIZ51zu2S0N/NkfuZ75w7JqGfLK91nHPnO+dey9H/o865U51z/QqOAefcuIT2VznnLqs7boBz7mzn3KspxrfE+a+JYZ5z7nDJ1/cnnXPzUvRZZaVz7i7n3AkuzvcTeg10zh3ndH0tzzDGKgudcz93zu1YcBxXeNqf75w7ou7Y3Z1zD6cc3w015+3mnJud4bOlYarTfVD/eQ53zi3znDM94fiir8MDY3ykzAvojoZfUTKPO+eW1ry/1zk3wcUXEP2dc//nnFucc5z1zHa6odOOc/tI/SZxSV1fG5bUz/Uu//c/0Tk3K8IYnnHOfdAVuz6SBIVzug47K8ds4px7IOPYxnj68wkK55zbvOa4/k6TaBFmOD1gxb6/O51zH3f5H7DqWek02Q/KOR6foHDOuWsrx/Rzzl1c6SstU2v6+FKG87JwgFv784x04XEmPQwWeV0d6GtyWcZsWLtmdVq2R3rpy5HaYzxwK3ED6LZBS9/zCRuisvAm4PsoziGNEdgXUBeD+rbXKamf+uV6Gvqh9Co3ITVYUbYErkVqgvUitFfLAKQ2GYvUSHtlPD+P/az6GYai6/7DOdqoZTSy812HPksMNkYq4B8Qr+5JH2STvI+w6jUPGyM7wR+QKrtPhnNrPTjzXO9pGJ6w7RXgL4Fz3hex/0HAkYH9N5QpKO7MePwipHs+Dv2wpyMdfGz2QhfjdiW0DbIx3ExjN9Y0KdjzUq9bn0M5keo+Hb6PvmjC+nQJYzkC6ebr9dRF2Rn4K8l2kxDTCeufffRFE8ftKBVOLD6AHt6KOihshWxF4wuPKJldke0v1gMcwG6oyuU7c5z785r/s17vaXnVs/2GwDnvIxwsm4XD8T9MzgP+VKageITwF7sSSevLgXehp+Bj0URSVq3ncSjleNlBMHujCPEQ04FvAs9T3PC4AhnLZqJCUZfX7X8deYg9hwRyERYgwXMb8J0M53UgV+djUx7/OvAkMiqvSnnOtmiCjfXkDPqcaaNrZ6OnwIvRA0MeL6310TW6d4PjVlT6y/J7jqMraWYe1kXf7yYZzqkalGeQPqPAOOD/sg0tyDDkKJGVX7CmQ8I16CFwDsUcOVai+3UGcCnwsOe4Xwf6GQ3sWWAMtYRWJ78CVnQ4V2pKpM2RR8GbkcSq5mqfgQRJ0UkrC6ORh0Wjm34eSgtyF/BPNDEuQk84I5Fq7HDgeMLR5zOQ10faSa6epUj1Uc8ENHnF4mX8S/1TUILFGJxBY8EyrdLf71izHkZ/5PHzXpT+vNFq7cc0FtS1jAP+luF40HVxJ5rUH0BBoQuCZ3QxDL+r9Vz8DzL3AZMqfdZ62w1D6eKPQd6CjRJvfh+lwclCJ4pfOjzFsVNQcOwU9CBUyzZIzXEm4dXfQuRdlHblfQVSXWVhGpqopyIvpxHouxyOHqoeI91K/Ei0CkpiNdlUXfXcjhKqJnEpxcs7r4NWNL4V3IHAnbENXM36GuyceyJgrKlypXNuRMo2N3TO3dKgvYMKjHlpQnvOOXdYhO+j9vVyYPwnR+pjdxf2iJnj5KHT6Rq3NdY5d1ugrSqHZBifz5jtG+tZLtlTJe0rZMxOYlaGz7OFc+5PDdpb7ZzbP+OYv5BinHc653ZO2d4I59wfG7R3eobxhYzZ9ayqfJ4+GdoPvY5s0FeRtk8KtD3TpbtnQq/jA+3Pqn5HZaqemonTCNskHIrV+Bjp1UCz0ZPE7YFj9knZVm+mAz35+FYBTyK70dWkU9X8Gz3VXtTguIsp9iSXxN+RvvsiyqkDksR0lH3gTymPfx44DD1h++hADgVpddz9UIEwH8uQkfgg0se3zEcroNDx707ZVhZWACcgtW/e1X53chN+VfzGKEajCKHg3hupfEftIijm4l9CLkMG9EYTTxIrgY/iV6GFakq0C8fiF5jPoAv9mYxtrkaC/dzAMTsQvgmy8jAy4L4Qsc1GLED2u5kZz1uFVEs3B47ZBakx0+Dwf+6n0e/7XbLbZBYTLpC1H3Fzmy1HhYRaqXLjAqTy81HkGl8P2dJ8XFP9p10Exc+RjeJT6Eufji7wa9EN84sCbc8ErvLs6xVFSwpylmf7IrQyKOL99TXk+unj9MC+LKwGTqR7bWogg+6MnOeuRivk+ojgWtJ+PyuR99ehwA/R6uYG5Lq7A8VKCyTZMaoMIJz3LAvLkY2r7IJfZXBNYN9E8gvTY/Dbs6ZTY2RvF0EBuhi/j9RF2yGj2vFI9VEUnxvbSOKrP1qJPUlOAQLK3fV0wfYdSkMy17N/L9ZOS5CH+9GN0508T/F6768CFwT2H0R6d+JVSM36CeRm+n70gLSiyADRbxiKF9ihYPvQ2kIC9L37Hqg2IL8bdWg1cnXtm3YSFGXim0T6ooy37cpJnu0vo6SOMfgv0rf7CAUSpeXBCG1k5WKKT8IgDzCf3a0vsmf0NCF13lYR2p9C6woJ0HVwfWB/HvXTSORJmMRq6lYxJijiEArGihW52or4JqGriTMJVvlpYF8ad85GPBuhjSzMJvyZsvAG8oX3cUCkfooQiuuIEb3fymWRq1wd2HcU2WNjjsWv7bibugSVJiiKM5hwDeuk8Px2YHtgM8++2IWtZlVeSexC47iCRnRHevlarkWG3ljcFNg3LmI/eQkFF/aKUqIReBh/dcvhZF8ZhlYhk+s3mKDIzxBk45iGgp18xIwSbiVCN3/Mmt9VfO6qA1DEdhG6W1D4grfych/+CN+xxK+amJYO4GTC3oExVhS9hZBRO4v6aQv892c1ldIalFWPorcxHCWf2wrYET2FjSedEGhXQVFWLq08bEGx+hXdKSjm4K9jkZc3UJ2SJMN+f5RBoUz1Wj8UZb0N8mIaW/m7HY1teGUl4mtFrkGefknxL0egeSrNtXqcpw1QCqC1HuRMUKzJAKSqGIcCq7ZBwqFIorl2FRShp/gPoxroMQll4y2aVbY7BcVtlBMI9jR+D7CRxBMUG6H7560owd82yDU971zTrvdPEs+hxJdJ984gZHdIY9s6PrBvLbUTmKAAJTg7GgUfHUDcrJWU0F6r4LNPQPrEgLEommZ9WZRRpKNITEKI5wL7iqS8H4OeZscjAbF5gbaSMEGxJlfjf8g6nsaCYg/8D3Ez8WT9bmdBcRhK7XEY5cY6tOt33Ewqg6LpmLuzVnfWKPW0hFLTZPWY6YeSD34Kf5xMLFpBUHSnV9UvgctI/s32Q4I65G4cWk1ci2c1247G7PEo2+etKD1C2QFxzf4dhy7yIhNsWcWS8lD0N+hOQVGWmisUVZ7FK+xtKOfVJMoXEpA/JXp3EnL1jn3/z8efmqUTCXAffVFdEh+Jaqdqw+1CH+BCVJkra6WyJF5FLms3ofTZvop+zf4dhybBImMv6pIak1ZaUYRS1xchtLJNm5rkRORjH8NRYT5yMPg9qpHhoxUyGzSKCYpVYKhKKFdVaMVwCH7ngUeBJ3wntotapBPlezoh43krUbbSx1Ftiicqr+dZu8zlJE8bzX6hlyUoFhO2zyxGqTcWVl7VJ+nlxM+p9O+C53enoBhVUrshFU4oH1SVE4Gfkf2aeBGt4B9DcQBPo/unduX0TmTnSKLZ7x/QNRuik7gOCrchQZtUrXB75IiTVB00NP95VxPQPoLiZNIJiVVoxTGl8ncq6Q2ZYzzb23VFsYjkAjwPoUnnKVonYrY7BcWuJbUbqkPdKLX+LsCVpLseVtGVMuNW/An/0tIKgqLRiiK2oFiKqt/5UuQcz9qCYhj+tO0raJAYtR0ERQeNyyrOQuqjq8ifzbQ3CooiS+a5JHvAzCNOIsbupDsFxaHoe48tREcF9jVaUVxG47liHsrf9ROyp0VvRB+au3ZEmhVFbK7HLyg+gNK3135nE/GvKm+jQT3wZp/EYrAzYVfNH6NJ/tvkFxKD8Od0iq2fjE1ZKwpfZth9SS7x2sx0p6DYHKkOYuOLoVhNeJLYGDmA+FiNEhiOQfVB8giJRu65zT5PdbeNAuTG+opn30jWrjMR0qhMatRZs/8AMXhnYN+/UNrkentDVran+QWCj7IEhS8vzRAUmWv4OSpye6PwP8g8Tziv1D74r+1lyHPwTIp5a23aYH+z31tpVE+xWYW/vAGo3n2VrfEnf5wD3NKos3YQFKFJaQpxnhb3iNBGT+HLAQTFfNgfCezbskC77cBxxFULhx6WGqU2CT3tfxGpLYoSI5V4T9JI9VRWLEgo9fgRKJgY4FT8wvY6Go+/LQRFSO00L1Ifh0RqpydYENiX5FWRlrvwX4BHF2i3HRgNvC9ieyHf+VDRIAhfA6ESnWnpRKuSVqbRRFvkPgrxN/ypV/oiJ57BKGWOj0lpOmoHQRHymvAVLc/CBsSpedBThAyZ6xZodyHwV8++Eyg3vXUzxXDk5SziqFy2QxG7Pu5ocH5oxZnk1ZaV8bR+htg5DfYXuY9COMLeSp8GzsOf6+wfpEz53w6CIqQ7jZFm4hxae2IKuUYWvcCv9GzvRBd4zCett6DSoc8h3fksihWe72l2BN4ToZ3z8AucJ1CMUIhQTEveEpy1nB2hjZ5mCeF5pqwVBYTVTyOAzwb2T0rbSTsIiucC+4rWUx5P+gL1zUpIUBRN8PYr4CXPvjGo7kLRFA2DgR+iSe8UuqoNjgQuKth2T3MJxZ7ajwKOCez/WYo2QnmDTqKYLeUowvaTVsLngQTxEyXW8gT5UuivQLmdUtEOguKewL4DyV+qdDeUeqAVAoJChCaCnSiWYn0Fyp/vY3/kcZF3MtwDBUWeSvK1HEO12JO8GQnbPMbQnQhnEn0d/4qvltAkNJY1vWuysBlwec5zm5HpgX0Hldx3MFjOwy1kCAdoB0FxN/7qZ4OR1T+LCqoTZc28l3KXlN1FUqh/lf7oZi4S93Al4UI870DR2llupoHIZ/9+pHLyEaoz3Crsjz7nzhnOmQD8mXAdjvMJOzJUeZFwgOTFZLc3bY3iAHpTPflQevhj8acoiUEep4JJWQ5uB0GxAAXV+dgf5QL6KioPmHRz9UUriM+hQLLL6D11Ju4m7P31HhRv8nlgT1SI5u2kf8p1wEdQpLaPMcio+mfkoZMkgDuAHZCAeB74CuESni+gaPtWIyllzM5IoP8a/R5JLqsbVPbdjp4WQ26tf0fXcFp+Etg3EF1DX0LxRElzyjro/jkZpcl+nNZ3ia3n3sC+viilye+A96J6ELsRLgGbhenAfzIcPxulV0lNh3Otkm6nECNRUrK0apSFSG2xEE1aw8kvVM8GvpHjvKUkP8lPII7vei1fJPsY70feNGlTK+yLhEGa1clKdOG/UGl/OJpY0qqolqPI1Eaun1XGIVdDHyNRtuBYDMNv/DwOZTkOuXWDdOLz0PezARpjGi+p15HA9wVEJjEYJcX0pampZQm6dt9AE+RwFGRZhAE0dkG9AgXPJnEL5bvgdgIz6LKRpeXDKHVQUb5HenvpdwkbudeiHVYUoJvqJNLnzxmKhMpo5PnT27+nb5O9TvPe+KM9k/grulkbJaADTTBjkQ3pEDSxpRUSK5H7bVoh0Ww8jQTwjAbHjUSurzsiW0YaIbEIqUCyCAlQ5PYJpMtgMAjdM5sj1VJRIdEqrEb3UVY+E6n/LCuEzIKpt0+AtdyMjJ6xk4tNRWqZ2Kmxu5OVKAguazruPTMePwUJmLKSAs4HjgRuLKn97uI5JCxCBtKszERqVl9sSyPuR7r2Vr7Oy+YKpPrLwo7EicK/j3RZJqaRw0uqnQQFSNc6kQaZElPyAtIJ74GeJIrWPOhp/osmkscynBOyEfiYjtJWf4XiObZqmYL0vpl0r03MTOR+fXfBdhyqNbATxetx34IEWNYViY+b0LVwXKT2eprVyOU3FNtQTwdx7J0LSPe7TMrTeLsJCpBBaVvgB+SbqOaitOXbogu9SihBV6swCyWBuybl8VnVVVWWIbfZLSt/Z+VsxwF/RB5TB5PNoNcKzENxBpcQjpBO4g0kIHZG9T9ipat5FNXM+Br5EwHegx5K3oOebm+n9/x2S5FDxhEEKsbV8CB+r8ysPNRg/3LC1fG8tIsx28d6qMbsYcjY6qvzPA8tvW9Cnie+H3Y0WkquT9fT9kPIyyQrHyU5RuM25LJYNvuiCeZdwEZ1+15EbpGXRuqrf6Wft6Mn1h3wP8QsRgLqTuQW+K8I/W9IOGPr1cSNyQgZs99KckLFLdAYd0UuwQPocuteiVKxvICeKu9FKqZQVtgYjEDR70ej1Y/PE86hFffNSC2Y5DhQ9SzcDH2u2tXqlTRWq4zHX6L1BfRA0d10oGv6FPQgU+9ROQ2p8xrZo9JyNnBBYP+N5Mwh1u6Cop5NkWdH/8rrNaQCCAWl9XY6kbF0C3Qzv4ISkZVZSGY4yny5XuXlkLpwVqX/htkum5w8gqLZ6UT3zigkQDqQPWMeerKO9dTcqvRBD0CborllBlLzxpyATyMcxHgwUtFmxgSFYXQ/vVFQGD3PifhtEDOQJ2GusgrtaKMwDMPojYRiOH5Kgdo7JigMwzB6B7t4tq8kp7dTFRMUhmEYrc+m+Ovi3AK8XKRxExSGYRitz4X46+KkyRIcxNCVgmsAAADESURBVASFYRhGa/Nx/EGLM4mQG84EhWEYRmsyGGW9DrnE/oQIruwxcowYhmEY5dIfJVncFCVc3BsF69UHw9byCpFS7ZugMAzDaG4OQFHtWTLxOuCTRAp0NNWTYRhGczOB7Onav47SDUXBBIVhGEZzs0fG488Hzok5AFM9GYZhNC+dwO4pj52Hys1GW0nUDsIwDMNoTkbTlSXYxwLgIpTLKbqQAFtRGIZhNDNzUb2O3ZGdon9l28vAw8CfUbr9mGnw1+L/ARpW3vbs4RA8AAAAAElFTkSuQmCC",ai=n.p+"static/media/after-party-logo-violet.41f979d380f9f4778451.png";function si(t){var e=t.onClose;return(0,$r.jsx)("div",{id:"modal",className:"modal-overlay",onClick:function(t){"modal"===t.target.id&&e()},children:(0,$r.jsxs)("div",{className:"modal-content",children:[(0,$r.jsx)("button",{className:"modal-close",onClick:e,children:"X"}),(0,$r.jsx)("div",{className:"modal-image-container",children:(0,$r.jsx)("img",{src:oi,alt:"After Party Logo"})}),(0,$r.jsxs)("div",{className:"modal-scroll-content",children:[(0,$r.jsx)("p",{children:" The Event Impact Analysis Tool is an application designed to provide insights into the impact of events on busyness in Manhattan, NYC. By analyzing taxi data supplied by the TLC (Taxi and Limousine Commission), the tool aims to identify patterns and understand how events influence the usual urban flow."}),(0,$r.jsx)("p",{children:" This project is developed by a team of 6 individuals as part of a Master's in Computer Science program. The Event Impact Analysis Tool is an application designed to provide insights into the impact of events on busyness in Manhattan, NYC. By analyzing taxi data supplied by the TLC (Taxi and Limousine Commission), the tool aims to identify patterns and understand how events influence the usual urban flow."}),(0,$r.jsx)("p",{children:"The target audience for the Event Impact Analysis Tool includes event attendees who are interested in understanding the impact of events on transportation and congestion in Manhattan. It also caters to event organizers and marketers who want to assess the potential impact on transportation when planning and promoting events. Local businesses in Manhattan can benefit from the tool as well, as it helps them understand how events affect foot traffic and customer flow. Furthermore, researchers and analysts interested in urban dynamics, transportation planning, and event impact analysis can utilize the tool for their studies and investigations."}),(0,$r.jsx)("p",{children:"By catering to the needs of these target audiences, the Event Impact Analysis Tool offers valuable insights into the relationship between events and urban dynamics in Manhattan. It serves as a resource for various stakeholders involved in event planning, transportation management, and research in the field, contributing to a better understanding of the impact of events on the bustling city."})]})]})})}function li(){var e=p((0,t.useState)(!1),2),n=e[0],r=e[1],i=p((0,t.useState)(!1),2),o=i[0],a=i[1],s=function(){a(!0)},l=n?ai:oi;return(0,$r.jsxs)("div",{className:"navbar",children:[(0,$r.jsx)("div",{className:"navbar-links-wrapper",children:(0,$r.jsx)("button",{className:"transparent-button",onClick:s,children:(0,$r.jsx)("img",{src:l,className:"navbar-logo ".concat(n?"hovered":""),onMouseEnter:function(){r(!0)},onMouseLeave:function(){r(!1)},alt:"After Party Logo"})})}),(0,$r.jsx)("div",{className:"navbar-links",children:(0,$r.jsx)("button",{className:"transparent-button",onClick:s,children:"About Us"})}),o&&(0,$r.jsx)(si,{onClose:function(){a(!1)}})]})}var ui=function(t){var e=t.item,n=t.visualiseEventImpact,r=ri(),i=r.setShowChartData,o=r.removeAllButOneMarker;return(0,$r.jsxs)("div",{className:"floating-info-box-event-card",children:[(0,$r.jsx)("h2",{children:e.Event_Name}),(0,$r.jsxs)("h3",{children:["Expected Attendees: ",e.expected_attendees]}),(0,$r.jsx)("p",{children:e.description}),(0,$r.jsx)("button",{className:"floating-nav-cta-button",onClick:function(){n(e.Event_ID),i(!0),o(e.Event_ID)},children:"Visualise Event Impact"})]})};function ci(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fi(t){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fi(t)}function pi(){return pi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},pi.apply(this,arguments)}function di(t,e){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},di(t,e)}function vi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&di(t,e)}function yi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fi(t);if(e){var i=fi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===(0,s.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hi(t)}(this,n)}}function gi(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var mi=n(5671),_i=n(3144);function xi(t){return t+.5|0}var bi=function(t,e,n){return Math.max(Math.min(t,n),e)};function wi(t){return bi(xi(2.55*t),0,255)}function ki(t){return bi(xi(255*t),0,255)}function Ei(t){return bi(xi(t/2.55)/100,0,1)}function Si(t){return bi(xi(100*t),0,100)}var Ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Mi=Kr("0123456789ABCDEF"),Ii=function(t){return Mi[15&t]},Ci=function(t){return Mi[(240&t)>>4]+Mi[15&t]},Pi=function(t){return(240&t)>>4===(15&t)};function Ai(t){var e=function(t){return Pi(t.r)&&Pi(t.g)&&Pi(t.b)&&Pi(t.a)}(t)?Ii:Ci;return t?"#"+e(t.r)+e(t.g)+e(t.b)+function(t,e){return t<255?e(t):""}(t.a,e):void 0}var Li=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Di(t,e,n){var r=e*Math.min(n,1-n),i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function Ri(t,e,n){var r=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+t/60)%6;return n-n*e*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Oi(t,e,n){var r,i=Di(t,1,.5);for(e+n>1&&(e*=r=1/(e+n),n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function zi(t){var e,n,r,i=t.r/255,o=t.g/255,a=t.b/255,s=Math.max(i,o,a),l=Math.min(i,o,a),u=(s+l)/2;return s!==l&&(r=s-l,n=u>.5?r/(2-s-l):r/(s+l),e=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(i,o,a,r,s),e=60*e+.5),[0|e,n||0,u]}function Ni(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ki)}function Fi(t,e,n){return Ni(Di,t,e,n)}function Bi(t){return(t%360+360)%360}function ji(t){var e,n=Li.exec(t),r=255;if(n){n[5]!==e&&(r=n[6]?wi(+n[5]):ki(+n[5]));var i=Bi(+n[2]),o=+n[3]/100,a=+n[4]/100;return{r:(e="hwb"===n[1]?function(t,e,n){return Ni(Oi,t,e,n)}(i,o,a):"hsv"===n[1]?function(t,e,n){return Ni(Ri,t,e,n)}(i,o,a):Fi(i,o,a))[0],g:e[1],b:e[2],a:r}}}var Ui,Vi={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gi={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qi(t){Ui||((Ui=function(){var t,e,n,r,i,o={},a=Object.keys(Gi),s=Object.keys(Vi);for(t=0;t<a.length;t++){for(r=i=a[t],e=0;e<s.length;e++)n=s[e],i=i.replace(n,Vi[n]);n=parseInt(Gi[r],16),o[i]=[n>>16&255,n>>8&255,255&n]}return o}()).transparent=[0,0,0,0]);var e=Ui[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}var Zi=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var Wi=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},Xi=function(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)};function Hi(t,e,n){if(t){var r=zi(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Fi(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Yi(t,e){return t?Object.assign(e||{},t):t}function Ki(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ki(t[3]))):(e=Yi(t,{r:0,g:0,b:0,a:1})).a=ki(e.a),e}function Ji(t){return"r"===t.charAt(0)?function(t){var e,n,r,i=Zi.exec(t),o=255;if(i){if(i[7]!==e){var a=+i[7];o=i[8]?wi(a):bi(255*a,0,255)}return e=+i[1],n=+i[3],r=+i[5],{r:e=255&(i[2]?wi(e):bi(e,0,255)),g:n=255&(i[4]?wi(n):bi(n,0,255)),b:r=255&(i[6]?wi(r):bi(r,0,255)),a:o}}}(t):ji(t)}var Qi=function(){function t(e){if((0,mi.Z)(this,t),e instanceof t)return e;var n,r=typeof e;"object"===r?n=Ki(e):"string"===r&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*Ti[t[1]],g:255&17*Ti[t[2]],b:255&17*Ti[t[3]],a:5===n?17*Ti[t[4]]:255}:7!==n&&9!==n||(e={r:Ti[t[1]]<<4|Ti[t[2]],g:Ti[t[3]]<<4|Ti[t[4]],b:Ti[t[5]]<<4|Ti[t[6]],a:9===n?Ti[t[7]]<<4|Ti[t[8]]:255})),e}(e)||qi(e)||Ji(e)),this._rgb=n,this._valid=!!n}return(0,_i.Z)(t,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var t=Yi(this._rgb);return t&&(t.a=Ei(t.a)),t},set:function(t){this._rgb=Ki(t)}},{key:"rgbString",value:function(){return this._valid?(t=this._rgb)&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(Ei(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")):void 0;var t}},{key:"hexString",value:function(){return this._valid?Ai(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(t){if(t){var e=zi(t),n=e[0],r=Si(e[1]),i=Si(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(Ei(t.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(t,e){if(t){var n,r=this.rgb,i=t.rgb,o=e===n?.5:e,a=2*o-1,s=r.a-i.a,l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;n=1-l,r.r=255&l*r.r+n*i.r+.5,r.g=255&l*r.g+n*i.g+.5,r.b=255&l*r.b+n*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}},{key:"interpolate",value:function(t,e){return t&&(this._rgb=function(t,e,n){var r=Xi(Ei(t.r)),i=Xi(Ei(t.g)),o=Xi(Ei(t.b));return{r:ki(Wi(r+n*(Xi(Ei(e.r))-r))),g:ki(Wi(i+n*(Xi(Ei(e.g))-i))),b:ki(Wi(o+n*(Xi(Ei(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}},{key:"clone",value:function(){return new t(this.rgb)}},{key:"alpha",value:function(t){return this._rgb.a=ki(t),this}},{key:"clearer",value:function(t){return this._rgb.a*=1-t,this}},{key:"greyscale",value:function(){var t=this._rgb,e=xi(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}},{key:"opaquer",value:function(t){return this._rgb.a*=1+t,this}},{key:"negate",value:function(){var t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}},{key:"lighten",value:function(t){return Hi(this._rgb,2,t),this}},{key:"darken",value:function(t){return Hi(this._rgb,2,-t),this}},{key:"saturate",value:function(t){return Hi(this._rgb,1,t),this}},{key:"desaturate",value:function(t){return Hi(this._rgb,1,-t),this}},{key:"rotate",value:function(t){return function(t,e){var n=zi(t);n[0]=Bi(n[0]+e),n=Fi(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}]),t}();function $i(){}var to=function(){var t=0;return function(){return t++}}();function eo(t){return null===t||"undefined"===typeof t}function no(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function ro(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function io(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function oo(t,e){return io(t)?t:e}function ao(t,e){return"undefined"===typeof t?e:t}var so=function(t,e){return"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t};function lo(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function uo(t,e,n,r){var i,o,a;if(no(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(ro(t))for(o=(a=Object.keys(t)).length,i=0;i<o;i++)e.call(n,t[a[i]],a[i])}function co(t,e){var n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function ho(t){if(no(t))return t.map(ho);if(ro(t)){for(var e=Object.create(null),n=Object.keys(t),r=n.length,i=0;i<r;++i)e[n[i]]=ho(t[n[i]]);return e}return t}function fo(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function po(t,e,n,r){if(fo(t)){var i=e[t],o=n[t];ro(i)&&ro(o)?vo(i,o,r):e[t]=ho(o)}}function vo(t,e,n){var r=no(e)?e:[e],i=r.length;if(!ro(t))return t;for(var o,a=(n=n||{}).merger||po,s=0;s<i;++s)if(ro(o=r[s]))for(var l=Object.keys(o),u=0,c=l.length;u<c;++u)a(l[u],t,o,n);return t}function yo(t,e){return vo(t,e,{merger:go})}function go(t,e,n){if(fo(t)){var r=e[t],i=n[t];ro(r)&&ro(i)?yo(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ho(i))}}var mo={"":function(t){return t},x:function(t){return t.x},y:function(t){return t.y}};function _o(t){var e=function(t){var e,n=[],r="",i=gi(t.split("."));try{for(i.s();!(e=i.n()).done;)(r+=e.value).endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="")}catch(o){i.e(o)}finally{i.f()}return n}(t);return function(t){var n,r=gi(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(""===i)break;t=t&&t[i]}}catch(o){r.e(o)}finally{r.f()}return t}}function xo(t,e){return(mo[e]||(mo[e]=_o(e)))(t)}function bo(t){return t.charAt(0).toUpperCase()+t.slice(1)}var wo=function(t){return"undefined"!==typeof t},ko=function(t){return"function"===typeof t},Eo=function(t,e){if(t.size!==e.size)return!1;var n,r=gi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.has(i))return!1}}catch(o){r.e(o)}finally{r.f()}return!0};var So=Math.PI,To=2*So,Mo=To+So,Io=Number.POSITIVE_INFINITY,Co=So/180,Po=So/2,Ao=So/4,Lo=2*So/3,Do=Math.log10,Ro=Math.sign;function Oo(t,e,n){return Math.abs(t-e)<n}function zo(t){var e=Math.round(t);t=Oo(t,e,t/1e3)?e:t;var n=Math.pow(10,Math.floor(Do(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function No(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Fo(t,e,n){var r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Bo(t){return t*(So/180)}function jo(t){return t*(180/So)}function Uo(t){if(io(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}}function Vo(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<-.5*So&&(o+=To),{angle:o,distance:i}}function Go(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qo(t,e){return(t-e+Mo)%To-So}function Zo(t){return(t%To+To)%To}function Wo(t,e,n,r){var i=Zo(t),o=Zo(e),a=Zo(n),s=Zo(o-i),l=Zo(a-i),u=Zo(i-o),c=Zo(i-a);return i===o||i===a||r&&o===a||s>l&&u<c}function Xo(t,e,n){return Math.max(e,Math.min(n,t))}function Ho(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Yo(t,e,n){n=n||function(n){return t[n]<e};for(var r,i=t.length-1,o=0;i-o>1;)n(r=o+i>>1)?o=r:i=r;return{lo:o,hi:i}}var Ko=function(t,e,n,r){return Yo(t,n,r?function(r){var i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:function(r){return t[r][e]<n})},Jo=function(t,e,n){return Yo(t,n,(function(r){return t[r][e]>=n}))};var Qo=["push","pop","shift","splice","unshift"];function $o(t,e){var n=t._chartjs;if(n){var r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(Qo.forEach((function(e){delete t[e]})),delete t._chartjs)}}function ta(t){var e=new Set(t);return e.size===t.length?t:Array.from(e)}var ea="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function na(t,e){var n=[],r=!1;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n=o,r||(r=!0,ea.call(window,(function(){r=!1,t.apply(e,n)})))}}var ra=function(t){return"start"===t?"left":"end"===t?"right":"center"},ia=function(t,e,n){return"start"===t?e:"end"===t?n:(e+n)/2};function oa(t,e,n){var r=e.length,i=0,o=r;if(t._sorted){var a=t.iScale,s=t._parsed,l=a.axis,u=a.getUserBounds(),c=u.min,h=u.max,f=u.minDefined,p=u.maxDefined;f&&(i=Xo(Math.min(Ko(s,a.axis,c).lo,n?r:Ko(e,l,a.getPixelForValue(c)).lo),0,r-1)),o=p?Xo(Math.max(Ko(s,a.axis,h,!0).hi+1,n?0:Ko(e,l,a.getPixelForValue(h),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function aa(t){var e=t.xScale,n=t.yScale,r=t._scaleRanges,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;var o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}var sa=function(t){return 0===t||1===t},la=function(t,e,n){return-Math.pow(2,10*(t-=1))*Math.sin((t-e)*To/n)},ua=function(t,e,n){return Math.pow(2,-10*t)*Math.sin((t-e)*To/n)+1},ca={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*Po)},easeOutSine:function(t){return Math.sin(t*Po)},easeInOutSine:function(t){return-.5*(Math.cos(So*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return sa(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1)))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){return sa(t)?t:la(t,.075,.3)},easeOutElastic:function(t){return sa(t)?t:ua(t,.075,.3)},easeInOutElastic:function(t){var e=.1125;return sa(t)?t:t<.5?.5*la(2*t,e,.45):.5+.5*ua(2*t-1,e,.45)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-ca.easeOutBounce(1-t)},easeOutBounce:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*ca.easeInBounce(2*t):.5*ca.easeOutBounce(2*t-1)+.5}};function ha(t){if(t&&"object"===typeof t){var e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function fa(t){return ha(t)?t:new Qi(t)}function pa(t){return ha(t)?t:new Qi(t).saturate(.5).darken(.1).hexString()}var da=["x","y","borderWidth","radius","tension"],va=["color","borderColor","backgroundColor"];var ya=new Map;function ga(t,e,n){return function(t,e){e=e||{};var n=t+JSON.stringify(e),r=ya.get(n);return r||(r=new Intl.NumberFormat(t,e),ya.set(n,r)),r}(e,n).format(t)}var ma={values:function(t){return no(t)?t:""+t},numeric:function(t,e,n){if(0===t)return"0";var r,i=this.chart.options.locale,o=t;if(n.length>1){var a=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(a<1e-4||a>1e15)&&(r="scientific"),o=function(t,e){var n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}var s=Do(Math.abs(o)),l=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),ga(t,i,u)},logarithmic:function(t,e,n){if(0===t)return"0";var r=n[e].significand||t/Math.pow(10,Math.floor(Do(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?ma.numeric.call(this,t,e,n):""}};var _a={formatters:ma};var xa=Object.create(null),ba=Object.create(null);function wa(t,e){if(!e)return t;for(var n=e.split("."),r=0,i=n.length;r<i;++r){var o=n[r];t=t[o]||(t[o]=Object.create(null))}return t}function ka(t,e,n){return"string"===typeof e?vo(wa(t,e),n):vo(wa(t,""),e)}var Ea=function(){function t(e,n){(0,mi.Z)(this,t),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(t){return t.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(t,e){return pa(e.backgroundColor)},this.hoverBorderColor=function(t,e){return pa(e.borderColor)},this.hoverColor=function(t,e){return pa(e.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}return(0,_i.Z)(t,[{key:"set",value:function(t,e){return ka(this,t,e)}},{key:"get",value:function(t){return wa(this,t)}},{key:"describe",value:function(t,e){return ka(ba,t,e)}},{key:"override",value:function(t,e){return ka(xa,t,e)}},{key:"route",value:function(t,e,n,r){var o,a=wa(this,t),s=wa(this,n),l="_"+e;Object.defineProperties(a,(i(o={},l,{value:a[e],writable:!0}),i(o,e,{enumerable:!0,get:function(){var t=this[l],e=s[r];return ro(t)?Object.assign({},e,t):ao(t,e)},set:function(t){this[l]=t}}),o))}},{key:"apply",value:function(t){var e=this;t.forEach((function(t){return t(e)}))}}]),t}(),Sa=new Ea({_scriptable:function(t){return!t.startsWith("on")},_indexable:function(t){return"events"!==t},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(t){return"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}}),t.set("animations",{colors:{type:"color",properties:va},numbers:{type:"number",properties:da}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(t){return 0|t}}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(t,e){return e.lineWidth},tickColor:function(t,e){return e.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_a.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:function(t){return!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t},_indexable:function(t){return"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:function(t){return"backdropPadding"!==t&&"callback"!==t},_indexable:function(t){return"backdropPadding"!==t}})}]);function Ta(t,e,n,r,i){var o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function Ma(t,e,n,r){var i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;var a,s,l,u,c,h=0,f=n.length;for(a=0;a<f;a++)if(void 0===(u=n[a])||null===u||no(u)){if(no(u))for(s=0,l=u.length;s<l;s++)void 0===(c=u[s])||null===c||no(c)||(h=Ta(t,i,o,h,c))}else h=Ta(t,i,o,h,u);t.restore();var p=o.length/2;if(p>n.length){for(a=0;a<p;a++)delete i[o[a]];o.splice(0,p)}return h}function Ia(t,e,n){var r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Ca(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Pa(t,e,n,r){Aa(t,e,n,r,null)}function Aa(t,e,n,r,i){var o,a,s,l,u,c,h,f,p=e.pointStyle,d=e.rotation,v=e.radius,y=(d||0)*Co;if(p&&"object"===typeof p&&("[object HTMLImageElement]"===(o=p.toString())||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,v,0,0,To):t.arc(n,r,v,0,To),t.closePath();break;case"triangle":c=i?i/2:v,t.moveTo(n+Math.sin(y)*c,r-Math.cos(y)*v),y+=Lo,t.lineTo(n+Math.sin(y)*c,r-Math.cos(y)*v),y+=Lo,t.lineTo(n+Math.sin(y)*c,r-Math.cos(y)*v),t.closePath();break;case"rectRounded":l=v-(u=.516*v),a=Math.cos(y+Ao)*l,h=Math.cos(y+Ao)*(i?i/2-u:l),s=Math.sin(y+Ao)*l,f=Math.sin(y+Ao)*(i?i/2-u:l),t.arc(n-h,r-s,u,y-So,y-Po),t.arc(n+f,r-a,u,y-Po,y),t.arc(n+h,r+s,u,y,y+Po),t.arc(n-f,r+a,u,y+Po,y+So),t.closePath();break;case"rect":if(!d){l=Math.SQRT1_2*v,c=i?i/2:l,t.rect(n-c,r-l,2*c,2*l);break}y+=Ao;case"rectRot":h=Math.cos(y)*(i?i/2:v),a=Math.cos(y)*v,s=Math.sin(y)*v,f=Math.sin(y)*(i?i/2:v),t.moveTo(n-h,r-s),t.lineTo(n+f,r-a),t.lineTo(n+h,r+s),t.lineTo(n-f,r+a),t.closePath();break;case"crossRot":y+=Ao;case"cross":h=Math.cos(y)*(i?i/2:v),a=Math.cos(y)*v,s=Math.sin(y)*v,f=Math.sin(y)*(i?i/2:v),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a);break;case"star":h=Math.cos(y)*(i?i/2:v),a=Math.cos(y)*v,s=Math.sin(y)*v,f=Math.sin(y)*(i?i/2:v),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a),y+=Ao,h=Math.cos(y)*(i?i/2:v),a=Math.cos(y)*v,s=Math.sin(y)*v,f=Math.sin(y)*(i?i/2:v),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a);break;case"line":a=i?i/2:Math.cos(y)*v,s=Math.sin(y)*v,t.moveTo(n-a,r-s),t.lineTo(n+a,r+s);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(y)*(i?i/2:v),r+Math.sin(y)*v);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function La(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Da(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ra(t){t.restore()}function Oa(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){var o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else"after"===i!==!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function za(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Na(t,e,n,r,i){if(i.strikethrough||i.underline){var o=t.measureText(r),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,u=n+o.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,c),t.lineTo(s,c),t.stroke()}}function Fa(t,e){var n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ba(t,e,n,r,i){var o,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=no(e)?e:[e],u=s.strokeWidth>0&&""!==s.strokeColor;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),eo(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),o=0;o<l.length;++o)a=l[o],s.backdrop&&Fa(t,s.backdrop),u&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),eo(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(a,n,r,s.maxWidth)),t.fillText(a,n,r,s.maxWidth),Na(t,n,r,a,s),r+=Number(i.lineHeight);t.restore()}function ja(t,e){var n=e.x,r=e.y,i=e.w,o=e.h,a=e.radius;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,-Po,So,!0),t.lineTo(n,r+o-a.bottomLeft),t.arc(n+a.bottomLeft,r+o-a.bottomLeft,a.bottomLeft,So,Po,!0),t.lineTo(n+i-a.bottomRight,r+o),t.arc(n+i-a.bottomRight,r+o-a.bottomRight,a.bottomRight,Po,0,!0),t.lineTo(n+i,r+a.topRight),t.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-Po,!0),t.lineTo(n+a.topLeft,r)}var Ua=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Va=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ga(t,e){var n=(""+t).match(Ua);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}var qa=function(t){return+t||0};function Za(t,e){var n,r={},i=ro(e),o=i?Object.keys(e):e,a=ro(t)?i?function(n){return ao(t[n],t[e[n]])}:function(e){return t[e]}:function(){return t},s=gi(o);try{for(s.s();!(n=s.n()).done;){var l=n.value;r[l]=qa(a(l))}}catch(u){s.e(u)}finally{s.f()}return r}function Wa(t){return Za(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Xa(t){return Za(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ha(t){var e=Wa(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ya(t,e){t=t||{},e=e||Sa.font;var n=ao(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));var r=ao(t.style,e.style);r&&!(""+r).match(Va)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);var i={family:ao(t.family,e.family),lineHeight:Ga(ao(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ao(t.weight,e.weight),string:""};return i.string=function(t){return!t||eo(t.size)||eo(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Ka(t,e,n,r){var i,o,a,s=!0;for(i=0,o=t.length;i<o;++i)if(void 0!==(a=t[i])&&(void 0!==e&&"function"===typeof a&&(a=a(e),s=!1),void 0!==n&&no(a)&&(a=a[n%a.length],s=!1),void 0!==a))return r&&!s&&(r.cacheable=!1),a}function Ja(t,e){return Object.assign(Object.create(t),e)}function Qa(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return t[0]},a=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof r&&(r=us("_fallback",t));var s=(i(e={},Symbol.toStringTag,"Object"),i(e,"_cacheable",!0),i(e,"_scopes",t),i(e,"_rootScopes",a),i(e,"_fallback",r),i(e,"_getTarget",o),i(e,"override",(function(e){return Qa([e].concat(Kr(t)),n,a,r)})),e);return new Proxy(s,{deleteProperty:function(e,n){return delete e[n],delete e._keys,delete t[0][n],!0},get:function(e,r){return rs(e,r,(function(){return function(t,e,n,r){var i,o,a=gi(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("undefined"!==typeof(i=us(es(s,t),n)))return ns(t,i)?ss(n,r,t,i):i}}catch(l){a.e(l)}finally{a.f()}}(r,n,t,e)}))},getOwnPropertyDescriptor:function(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf:function(){return Reflect.getPrototypeOf(t[0])},has:function(t,e){return cs(t).includes(e)},ownKeys:function(t){return cs(t)},set:function(t,e,n){var r=t._storage||(t._storage=o());return t[e]=r[e]=n,delete t._keys,!0}})}function $a(t,e,n,r){var i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ts(t,r),setContext:function(e){return $a(t,e,n,r)},override:function(i){return $a(t.override(i),e,n,r)}};return new Proxy(i,{deleteProperty:function(e,n){return delete e[n],delete t[n],!0},get:function(t,e,n){return rs(t,e,(function(){return function(t,e,n){var r=t._proxy,i=t._context,o=t._subProxy,a=t._descriptors,s=r[e];ko(s)&&a.isScriptable(e)&&(s=function(t,e,n,r){var i=n._proxy,o=n._context,a=n._subProxy,s=n._stack;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);var l=e(o,a||r);s.delete(t),ns(t,l)&&(l=ss(i._scopes,i,t,l));return l}(e,s,t,n));no(s)&&s.length&&(s=function(t,e,n,r){var i=n._proxy,o=n._context,a=n._subProxy,s=n._descriptors;if("undefined"!==typeof o.index&&r(t))return e[o.index%e.length];if(ro(e[0])){var l=e,u=i._scopes.filter((function(t){return t!==l}));e=[];var c,h=gi(l);try{for(h.s();!(c=h.n()).done;){var f=ss(u,i,t,c.value);e.push($a(f,o,a&&a[t],s))}}catch(p){h.e(p)}finally{h.f()}}return e}(e,s,t,a.isIndexable));ns(e,s)&&(s=$a(s,i,o&&o[e],a));return s}(t,e,n)}))},getOwnPropertyDescriptor:function(e,n){return e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(t)},has:function(e,n){return Reflect.has(t,n)},ownKeys:function(){return Reflect.ownKeys(t)},set:function(e,n,r){return t[n]=r,delete e[n],!0}})}function ts(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=t._scriptable,r=void 0===n?e.scriptable:n,i=t._indexable,o=void 0===i?e.indexable:i,a=t._allKeys;return{allKeys:void 0===a?e.allKeys:a,scriptable:r,indexable:o,isScriptable:ko(r)?r:function(){return r},isIndexable:ko(o)?o:function(){return o}}}var es=function(t,e){return t?t+bo(e):e},ns=function(t,e){return ro(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object)};function rs(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];var r=n();return t[e]=r,r}function is(t,e,n){return ko(t)?t(e,n):t}var os=function(t,e){return!0===t?e:"string"===typeof t?xo(e,t):void 0};function as(t,e,n,r,i){var o,a=gi(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=os(n,s);if(l){t.add(l);var u=is(l._fallback,n,i);if("undefined"!==typeof u&&u!==n&&u!==r)return u}else if(!1===l&&"undefined"!==typeof r&&n!==r)return null}}catch(c){a.e(c)}finally{a.f()}return!1}function ss(t,e,n,r){var i=e._rootScopes,o=is(e._fallback,n,r),a=[].concat(Kr(t),Kr(i)),s=new Set;s.add(r);var l=ls(s,a,n,o||n,r);return null!==l&&(("undefined"===typeof o||o===n||null!==(l=ls(s,a,o,l,r)))&&Qa(Array.from(s),[""],i,o,(function(){return function(t,e,n){var r=t._getTarget();e in r||(r[e]={});var i=r[e];if(no(i)&&ro(n))return n;return i||{}}(e,n,r)})))}function ls(t,e,n,r,i){for(;n;)n=as(t,e,n,r,i);return n}function us(t,e){var n,r=gi(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i){var o=i[t];if("undefined"!==typeof o)return o}}}catch(a){r.e(a)}finally{r.f()}}function cs(t){var e=t._keys;return e||(e=t._keys=function(t){var e,n=new Set,r=gi(t);try{for(r.s();!(e=r.n()).done;){var i,o=e.value,a=gi(Object.keys(o).filter((function(t){return!t.startsWith("_")})));try{for(a.s();!(i=a.n()).done;){var s=i.value;n.add(s)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){r.e(l)}finally{r.f()}return Array.from(n)}(t._scopes)),e}function hs(t,e,n,r){var i,o,a,s,l=t.iScale,u=this._parsing.key,c=void 0===u?"r":u,h=new Array(r);for(i=0,o=r;i<o;++i)s=e[a=i+n],h[i]={r:l.parse(xo(s,c),a)};return h}var fs=Number.EPSILON||1e-14,ps=function(t,e){return e<t.length&&!t[e].skip&&t[e]},ds=function(t){return"x"===t?"y":"x"};function vs(t,e,n,r){var i=t.skip?e:t,o=e,a=n.skip?e:n,s=Go(o,i),l=Go(a,o),u=s/(s+l),c=l/(s+l),h=r*(u=isNaN(u)?0:u),f=r*(c=isNaN(c)?0:c);return{previous:{x:o.x-h*(a.x-i.x),y:o.y-h*(a.y-i.y)},next:{x:o.x+f*(a.x-i.x),y:o.y+f*(a.y-i.y)}}}function ys(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",o=ds(i),a=t.length,s=Array(a).fill(0),l=Array(a),u=ps(t,0);for(e=0;e<a;++e)if(n=r,r=u,u=ps(t,e+1),r){if(u){var c=u[i]-r[i];s[e]=0!==c?(u[o]-r[o])/c:0}l[e]=n?u?Ro(s[e-1])!==Ro(s[e])?0:(s[e-1]+s[e])/2:s[e-1]:s[e]}!function(t,e,n){for(var r,i,o,a,s,l=t.length,u=ps(t,0),c=0;c<l-1;++c)s=u,u=ps(t,c+1),s&&u&&(Oo(e[c],0,fs)?n[c]=n[c+1]=0:(r=n[c]/e[c],i=n[c+1]/e[c],(a=Math.pow(r,2)+Math.pow(i,2))<=9||(o=3/Math.sqrt(a),n[c]=r*o*e[c],n[c+1]=i*o*e[c])))}(t,s,l),function(t,e){for(var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",a=ds(o),s=t.length,l=ps(t,0),u=0;u<s;++u)if(r=i,i=l,l=ps(t,u+1),i){var c=i[o],h=i[a];r&&(n=(c-r[o])/3,i["cp1".concat(o)]=c-n,i["cp1".concat(a)]=h-n*e[u]),l&&(n=(l[o]-c)/3,i["cp2".concat(o)]=c+n,i["cp2".concat(a)]=h+n*e[u])}}(t,l,i)}function gs(t,e,n){return Math.max(Math.min(t,n),e)}function ms(t,e,n,r,i){var o,a,s,l;if(e.spanGaps&&(t=t.filter((function(t){return!t.skip}))),"monotone"===e.cubicInterpolationMode)ys(t,i);else{var u=r?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)l=vs(u,s=t[o],t[Math.min(o+1,a-(r?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,u=s}e.capBezierPoints&&function(t,e){var n,r,i,o,a,s=La(t[0],e);for(n=0,r=t.length;n<r;++n)a=o,o=s,s=n<r-1&&La(t[n+1],e),o&&(i=t[n],a&&(i.cp1x=gs(i.cp1x,e.left,e.right),i.cp1y=gs(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=gs(i.cp2x,e.left,e.right),i.cp2y=gs(i.cp2y,e.top,e.bottom)))}(t,n)}function _s(){return"undefined"!==typeof window&&"undefined"!==typeof document}function xs(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function bs(t,e,n){var r;return"string"===typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}var ws=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};var ks=["top","right","bottom","left"];function Es(t,e,n){var r={};n=n?"-"+n:"";for(var i=0;i<4;i++){var o=ks[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var Ss=function(t,e,n){return(t>0||e>0)&&(!n||!n.shadowRoot)};function Ts(t,e){if("native"in t)return t;var n=e.canvas,r=e.currentDevicePixelRatio,i=ws(n),o="border-box"===i.boxSizing,a=Es(i,"padding"),s=Es(i,"border","width"),l=function(t,e){var n,r,i=t.touches,o=i&&i.length?i[0]:t,a=o.offsetX,s=o.offsetY,l=!1;if(Ss(a,s,t.target))n=a,r=s;else{var u=e.getBoundingClientRect();n=o.clientX-u.left,r=o.clientY-u.top,l=!0}return{x:n,y:r,box:l}}(t,n),u=l.x,c=l.y,h=l.box,f=a.left+(h&&s.left),p=a.top+(h&&s.top),d=e.width,v=e.height;return o&&(d-=a.width+s.width,v-=a.height+s.height),{x:Math.round((u-f)/d*n.width/r),y:Math.round((c-p)/v*n.height/r)}}var Ms=function(t){return Math.round(10*t)/10};function Is(t,e,n,r){var i=ws(t),o=Es(i,"margin"),a=bs(i.maxWidth,t,"clientWidth")||Io,s=bs(i.maxHeight,t,"clientHeight")||Io,l=function(t,e,n){var r,i;if(void 0===e||void 0===n){var o=xs(t);if(o){var a=o.getBoundingClientRect(),s=ws(o),l=Es(s,"border","width"),u=Es(s,"padding");e=a.width-u.width-l.width,n=a.height-u.height-l.height,r=bs(s.maxWidth,o,"clientWidth"),i=bs(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||Io,maxHeight:i||Io}}(t,e,n),u=l.width,c=l.height;if("content-box"===i.boxSizing){var h=Es(i,"border","width"),f=Es(i,"padding");u-=f.width+h.width,c-=f.height+h.height}return u=Math.max(0,u-o.width),c=Math.max(0,r?u/r:c-o.height),u=Ms(Math.min(u,a,l.maxWidth)),c=Ms(Math.min(c,s,l.maxHeight)),u&&!c&&(c=Ms(u/2)),(void 0!==e||void 0!==n)&&r&&l.height&&c>l.height&&(c=l.height,u=Ms(Math.floor(c*r))),{width:u,height:c}}function Cs(t,e,n){var r=e||1,i=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);var a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(t.height,"px"),a.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==r||a.height!==i||a.width!==o)&&(t.currentDevicePixelRatio=r,a.height=i,a.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}var Ps=function(){var t=!1;try{var e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(n){}return t}();function As(t,e){var n=function(t,e){return ws(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ls(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ds(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function Rs(t,e,n,r){var i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=Ls(t,i,n),s=Ls(i,o,n),l=Ls(o,e,n),u=Ls(a,s,n),c=Ls(s,l,n);return Ls(u,c,n)}function Os(t,e,n){return t?function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,n):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}}function zs(t,e){var n,r;"ltr"!==e&&"rtl"!==e||(r=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Ns(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fs(t){return"angle"===t?{between:Wo,compare:qo,normalize:Zo}:{between:Ho,compare:function(t,e){return t-e},normalize:function(t){return t}}}function Bs(t){var e=t.start,n=t.end,r=t.count;return{start:e%r,end:n%r,loop:t.loop&&(n-e+1)%r===0,style:t.style}}function js(t,e,n){if(!n)return[t];for(var r,i,o,a=n.property,s=n.start,l=n.end,u=e.length,c=Fs(a),h=c.compare,f=c.between,p=c.normalize,d=function(t,e,n){var r,i,o=n.property,a=n.start,s=n.end,l=Fs(o),u=l.between,c=l.normalize,h=e.length,f=t.start,p=t.end,d=t.loop;if(d){for(f+=h,p+=h,r=0,i=h;r<i&&u(c(e[f%h][o]),a,s);++r)f--,p--;f%=h,p%=h}return p<f&&(p+=h),{start:f,end:p,loop:d,style:t.style}}(t,e,n),v=d.start,y=d.end,g=d.loop,m=d.style,_=[],x=!1,b=null,w=function(){return x||f(s,o,r)&&0!==h(s,o)},k=function(){return!x||0===h(l,r)||f(l,o,r)},E=v,S=v;E<=y;++E)(i=e[E%u]).skip||(r=p(i[a]))!==o&&(x=f(r,s,l),null===b&&w()&&(b=0===h(r,s)?E:S),null!==b&&k()&&(_.push(Bs({start:b,end:E,loop:g,count:u,style:m})),b=null),S=E,o=r);return null!==b&&_.push(Bs({start:b,end:y,loop:g,count:u,style:m})),_}function Us(t,e){for(var n=[],r=t.segments,i=0;i<r.length;i++){var o=js(r[i],t.points,e);o.length&&n.push.apply(n,Kr(o))}return n}function Vs(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){var i=t._chart.getContext(),o=Gs(t.options),a=t._datasetIndex,s=t.options.spanGaps,l=n.length,u=[],c=o,h=e[0].start,f=h;function p(t,e,r,i){var o=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!==e%l&&(u.push({start:t%l,end:e%l,loop:r,style:i}),c=i,h=e%l)}}var d,v=gi(e);try{for(v.s();!(d=v.n()).done;){var y=d.value;h=s?h:y.start;var g=n[h%l],m=void 0;for(f=h+1;f<=y.end;f++){var _=n[f%l];qs(m=Gs(r.setContext(Ja(i,{type:"segment",p0:g,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:a}))),c)&&p(h,f-1,y.loop,c),g=_,c=m}h<f-1&&p(h,f-1,y.loop,c)}}catch(x){v.e(x)}finally{v.f()}return u}(t,e,n,r):e}function Gs(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function qs(t,e){if(!e)return!1;var n=[],r=function(t,e){return ha(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}var Zs=function(){function t(){(0,mi.Z)(this,t),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return(0,_i.Z)(t,[{key:"_notify",value:function(t,e,n,r){var i=e.listeners[r],o=e.duration;i.forEach((function(r){return r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})}))}},{key:"_refresh",value:function(){var t=this;this._request||(this._running=!0,this._request=ea.call(window,(function(){t._update(),t._request=null,t._running&&t._refresh()})))}},{key:"_update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,i){if(r.running&&r.items.length){for(var o,a=r.items,s=a.length-1,l=!1;s>=0;--s)(o=a[s])._active?(o._total>r.duration&&(r.duration=o._total),o.tick(e),l=!0):(a[s]=a[a.length-1],a.pop());l&&(i.draw(),t._notify(i,r,e,"progress")),a.length||(r.running=!1,t._notify(i,r,e,"complete"),r.initial=!1),n+=a.length}})),this._lastDate=e,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(t){var e=this._charts,n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}},{key:"listen",value:function(t,e,n){this._getAnims(t).listeners[e].push(n)}},{key:"add",value:function(t,e){var n;e&&e.length&&(n=this._getAnims(t).items).push.apply(n,Kr(e))}},{key:"has",value:function(t){return this._getAnims(t).items.length>0}},{key:"start",value:function(t){var e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((function(t,e){return Math.max(t,e._duration)}),0),this._refresh())}},{key:"running",value:function(t){if(!this._running)return!1;var e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}},{key:"stop",value:function(t){var e=this._charts.get(t);if(e&&e.items.length){for(var n=e.items,r=n.length-1;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}}},{key:"remove",value:function(t){return this._charts.delete(t)}}]),t}(),Ws=new Zs,Xs="transparent",Hs={boolean:function(t,e,n){return n>.5?e:t},color:function(t,e,n){var r=fa(t||Xs),i=r.valid&&fa(e||Xs);return i&&i.valid?i.mix(r,n).hexString():e},number:function(t,e,n){return t+(e-t)*n}},Ys=function(){function t(e,n,r,i){(0,mi.Z)(this,t);var o=n[r];i=Ka([e.to,i,o,e.from]);var a=Ka([e.from,o,i]);this._active=!0,this._fn=e.fn||Hs[e.type||typeof a],this._easing=ca[e.easing]||ca.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=i,this._promises=void 0}return(0,_i.Z)(t,[{key:"active",value:function(){return this._active}},{key:"update",value:function(t,e,n){if(this._active){this._notify(!1);var r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Ka([t.to,e,r,t.from]),this._from=Ka([t.from,r,e])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(t){var e,n=t-this._start,r=this._duration,i=this._prop,o=this._from,a=this._loop,s=this._to;if(this._active=o!==s&&(a||n<r),!this._active)return this._target[i]=s,void this._notify(!0);n<0?this._target[i]=o:(e=n/r%2,e=a&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[i]=this._fn(o,s,e))}},{key:"wait",value:function(){var t=this._promises||(this._promises=[]);return new Promise((function(e,n){t.push({res:e,rej:n})}))}},{key:"_notify",value:function(t){for(var e=t?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][e]()}}]),t}(),Ks=function(){function t(e,n){(0,mi.Z)(this,t),this._chart=e,this._properties=new Map,this.configure(n)}return(0,_i.Z)(t,[{key:"configure",value:function(t){if(ro(t)){var e=Object.keys(Sa.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((function(r){var i=t[r];if(ro(i)){for(var o={},a=0,s=e;a<s.length;a++){var l=s[a];o[l]=i[l]}(no(i.properties)&&i.properties||[r]).forEach((function(t){t!==r&&n.has(t)||n.set(t,o)}))}}))}}},{key:"_animateOptions",value:function(t,e){var n=e.options,r=function(t,e){if(!e)return;var n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];var i=this._createAnimations(r,n);return n.$shared&&function(t,e){for(var n=[],r=Object.keys(e),i=0;i<r.length;i++){var o=t[r[i]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}(t.options.$animations,n).then((function(){t.options=n}),(function(){})),i}},{key:"_createAnimations",value:function(t,e){var n,r=this._properties,i=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),s=Date.now();for(n=a.length-1;n>=0;--n){var l=a[n];if("$"!==l.charAt(0))if("options"!==l){var u=e[l],c=o[l],h=r.get(l);if(c){if(h&&c.active()){c.update(h,u,s);continue}c.cancel()}h&&h.duration?(o[l]=c=new Ys(h,t,l,u),i.push(c)):t[l]=u}else i.push.apply(i,Kr(this._animateOptions(t,e)))}return i}},{key:"update",value:function(t,e){if(0!==this._properties.size){var n=this._createAnimations(t,e);return n.length?(Ws.add(this._chart,n),!0):void 0}Object.assign(t,e)}}]),t}();function Js(t,e){var n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function Qs(t,e){var n,r,i=[],o=t._getSortedDatasetMetas(e);for(n=0,r=o.length;n<r;++n)i.push(o[n].index);return i}function $s(t,e,n){var r,i,o,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=t.keys,u="single"===s.mode;if(null!==e){for(r=0,i=l.length;r<i;++r){if((o=+l[r])===n){if(s.all)continue;break}io(a=t.values[o])&&(u||0===e||Ro(e)===Ro(a))&&(e+=a)}return e}}function tl(t,e){var n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function el(t,e,n){var r=t[e]||(t[e]={});return r[n]||(r[n]={})}function nl(t,e,n,r){var i,o=gi(e.getMatchingVisibleMetas(r).reverse());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=t[a.index];if(n&&s>0||!n&&s<0)return a.index}}catch(l){o.e(l)}finally{o.f()}return null}function rl(t,e){for(var n,r=t.chart,i=t._cachedMeta,o=r._stacks||(r._stacks={}),a=i.iScale,s=i.vScale,l=i.index,u=a.axis,c=s.axis,h=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(a,s,i),f=e.length,p=0;p<f;++p){var d=e[p],v=d[u],y=d[c];(n=(d._stacks||(d._stacks={}))[c]=el(o,h,v))[l]=y,n._top=nl(n,s,!0,i.type),n._bottom=nl(n,s,!1,i.type),(n._visualValues||(n._visualValues={}))[l]=y}}function il(t,e){var n=t.scales;return Object.keys(n).filter((function(t){return n[t].axis===e})).shift()}function ol(t,e){var n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){var i,o=gi(e=e||t._parsed);try{for(o.s();!(i=o.n()).done;){var a=i.value._stacks;if(!a||void 0===a[r]||void 0===a[r][n])return;delete a[r][n],void 0!==a[r]._visualValues&&void 0!==a[r]._visualValues[n]&&delete a[r]._visualValues[n]}}catch(s){o.e(s)}finally{o.f()}}}var al=function(t){return"reset"===t||"none"===t},sl=function(t,e){return e?t:Object.assign({},t)},ll=function(){function t(e,n){(0,mi.Z)(this,t),this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=(this instanceof t?this.constructor:void 0).datasetElementType,this.dataElementType=(this instanceof t?this.constructor:void 0).dataElementType,this.initialize()}return(0,_i.Z)(t,[{key:"initialize",value:function(){var t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tl(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(t){this.index!==t&&ol(this._cachedMeta),this.index=t}},{key:"linkScales",value:function(){var t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=function(t,e,n,r){return"x"===t?e:"r"===t?r:n},i=e.xAxisID=ao(n.xAxisID,il(t,"x")),o=e.yAxisID=ao(n.yAxisID,il(t,"y")),a=e.rAxisID=ao(n.rAxisID,il(t,"r")),s=e.indexAxis,l=e.iAxisID=r(s,i,o,a),u=e.vAxisID=r(s,o,i,a);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(u)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(t){return this.chart.scales[t]}},{key:"_getOtherScale",value:function(t){var e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var t=this._cachedMeta;this._data&&$o(this._data,this),t._stacked&&ol(t)}},{key:"_dataCheck",value:function(){var t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(ro(e))this._data=function(t){var e,n,r,i=Object.keys(t),o=new Array(i.length);for(e=0,n=i.length;e<n;++e)r=i[e],o[e]={x:r,y:t[r]};return o}(e);else if(n!==e){if(n){$o(n,this);var r=this._cachedMeta;ol(r),r._parsed=[]}e&&Object.isExtensible(e)&&function(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Qo.forEach((function(e){var n="_onData"+bo(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a=r.apply(this,i);return t._chartjs.listeners.forEach((function(t){"function"===typeof t[n]&&t[n].apply(t,i)})),a}})})))}(e,this),this._syncList=[],this._data=e}}},{key:"addElements",value:function(){var t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(t){var e=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var i=e._stacked;e._stacked=tl(e.vScale,e),e.stack!==n.stack&&(r=!0,ol(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&rl(this,e._parsed)}},{key:"configure",value:function(){var t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(t,e){var n,r,i,o=this._cachedMeta,a=this._data,s=o.iScale,l=o._stacked,u=s.axis,c=0===t&&e===a.length||o._sorted,h=t>0&&o._parsed[t-1];if(!1===this._parsing)o._parsed=a,o._sorted=!0,i=a;else{i=no(a[t])?this.parseArrayData(o,a,t,e):ro(a[t])?this.parseObjectData(o,a,t,e):this.parsePrimitiveData(o,a,t,e);for(n=0;n<e;++n)o._parsed[n+t]=r=i[n],c&&((null===r[u]||h&&r[u]<h[u])&&(c=!1),h=r);o._sorted=c}l&&rl(this,i)}},{key:"parsePrimitiveData",value:function(t,e,n,r){var o,a,s,l=t.iScale,u=t.vScale,c=l.axis,h=u.axis,f=l.getLabels(),p=l===u,d=new Array(r);for(o=0,a=r;o<a;++o){var v;s=o+n,d[o]=(i(v={},c,p||l.parse(f[s],s)),i(v,h,u.parse(e[s],s)),v)}return d}},{key:"parseArrayData",value:function(t,e,n,r){var i,o,a,s,l=t.xScale,u=t.yScale,c=new Array(r);for(i=0,o=r;i<o;++i)s=e[a=i+n],c[i]={x:l.parse(s[0],a),y:u.parse(s[1],a)};return c}},{key:"parseObjectData",value:function(t,e,n,r){var i,o,a,s,l=t.xScale,u=t.yScale,c=this._parsing,h=c.xAxisKey,f=void 0===h?"x":h,p=c.yAxisKey,d=void 0===p?"y":p,v=new Array(r);for(i=0,o=r;i<o;++i)s=e[a=i+n],v[i]={x:l.parse(xo(s,f),a),y:u.parse(xo(s,d),a)};return v}},{key:"getParsed",value:function(t){return this._cachedMeta._parsed[t]}},{key:"getDataElement",value:function(t){return this._cachedMeta.data[t]}},{key:"applyStack",value:function(t,e,n){var r=this.chart,i=this._cachedMeta,o=e[t.axis];return $s({keys:Qs(r,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(t,e,n,r){var i=n[e.axis],o=null===i?NaN:i,a=r&&n._stacks[e.axis];r&&a&&(r.values=a,o=$s(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}},{key:"getMinMax",value:function(t,e){var n,r,i=this._cachedMeta,o=i._parsed,a=i._sorted&&t===i.iScale,s=o.length,l=this._getOtherScale(t),u=function(t,e,n){return t&&!e.hidden&&e._stacked&&{keys:Qs(n,!0),values:null}}(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},h=function(t){var e=t.getUserBounds(),n=e.min,r=e.max,i=e.minDefined,o=e.maxDefined;return{min:i?n:Number.NEGATIVE_INFINITY,max:o?r:Number.POSITIVE_INFINITY}}(l),f=h.min,p=h.max;function d(){var e=(r=o[n])[l.axis];return!io(r[t.axis])||f>e||p<e}for(n=0;n<s&&(d()||(this.updateRangeFromParsed(c,t,r,u),!a));++n);if(a)for(n=s-1;n>=0;--n)if(!d()){this.updateRangeFromParsed(c,t,r,u);break}return c}},{key:"getAllParsedValues",value:function(t){var e,n,r,i=this._cachedMeta._parsed,o=[];for(e=0,n=i.length;e<n;++e)io(r=i[e][t.axis])&&o.push(r);return o}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}},{key:"_update",value:function(t){var e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){var e,n,r,i;return ro(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(ao(this.options.clip,function(t,e,n){if(!1===n)return!1;var r=Js(t,n),i=Js(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}},{key:"update",value:function(t){}},{key:"draw",value:function(){var t,e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],o=n.chartArea,a=[],s=this._drawStart||0,l=this._drawCount||i.length-s,u=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(e,o,s,l),t=s;t<s+l;++t){var c=i[t];c.hidden||(c.active&&u?a.push(c):c.draw(e,o))}for(t=0;t<a.length;++t)a[t].draw(e,o)}},{key:"getStyle",value:function(t,e){var n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}},{key:"getContext",value:function(t,e,n){var r,i=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){var o=this._cachedMeta.data[t];r=o.$context||(o.$context=function(t,e,n){return Ja(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Ja(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(t){return this._resolveElementOptions(this.datasetElementType.id,t)}},{key:"resolveDataElementOptions",value:function(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}},{key:"_resolveElementOptions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,i="active"===n,o=this._cachedDataOpts,a=t+"-"+n,s=o[a],l=this.enableOptionSharing&&wo(r);if(s)return sl(s,l);var u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),h=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),c),p=Object.keys(Sa.elements[t]),d=u.resolveNamedOptions(f,p,(function(){return e.getContext(r,i,n)}),h);return d.$shared&&(d.$shared=l,o[a]=Object.freeze(sl(d,l))),d}},{key:"_resolveAnimations",value:function(t,e,n){var r,i=this.chart,o=this._cachedDataOpts,a="animation-".concat(e),s=o[a];if(s)return s;if(!1!==i.options.animation){var l=this.chart.config,u=l.datasetAnimationScopeKeys(this._type,e),c=l.getOptionScopes(this.getDataset(),u);r=l.createResolver(c,this.getContext(t,n,e))}var h=new Ks(i,r&&r.animations);return r&&r._cacheable&&(o[a]=Object.freeze(h)),h}},{key:"getSharedOptions",value:function(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}},{key:"includeOptions",value:function(t,e){return!e||al(t)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(t,e){var n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}},{key:"updateElement",value:function(t,e,n,r){al(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}},{key:"updateSharedOptions",value:function(t,e,n){t&&!al(e)&&this._resolveAnimations(void 0,e).update(t,n)}},{key:"_setStyle",value:function(t,e,n,r){t.active=r;var i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}},{key:"removeHoverStyle",value:function(t,e,n){this._setStyle(t,n,"active",!1)}},{key:"setHoverStyle",value:function(t,e,n){this._setStyle(t,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}},{key:"_resyncElements",value:function(t){var e,n=this._data,r=this._cachedMeta.data,i=gi(this._syncList);try{for(i.s();!(e=i.n()).done;){var o=p(e.value,3),a=o[0],s=o[1],l=o[2];this[a](s,l)}}catch(f){i.e(f)}finally{i.f()}this._syncList=[];var u=r.length,c=n.length,h=Math.min(c,u);h&&this.parse(0,h),c>u?this._insertElements(u,c-u,t):c<u&&this._removeElements(c,u-c)}},{key:"_insertElements",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._cachedMeta,o=i.data,a=t+e,s=function(t){for(t.length+=e,n=t.length-1;n>=a;n--)t[n]=t[n-e]};for(s(o),n=t;n<a;++n)o[n]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),r&&this.updateElements(o,t,e,"reset")}},{key:"updateElements",value:function(t,e,n,r){}},{key:"_removeElements",value:function(t,e){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(t,e);n._stacked&&ol(n,r)}n.data.splice(t,e)}},{key:"_sync",value:function(t){if(this._parsing)this._syncList.push(t);else{var e=p(t,3),n=e[0],r=e[1],i=e[2];this[n](r,i)}this.chart._dataChanges.push([this.index].concat(Kr(t)))}},{key:"_onDataPush",value:function(){var t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(t,e){e&&this._sync(["_removeElements",t,e]);var n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),t}();function ul(t){var e,n,r,i,o=t.iScale,a=function(t,e){if(!t._cache.$bar){for(var n=t.getMatchingVisibleMetas(e),r=[],i=0,o=n.length;i<o;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=ta(r.sort((function(t,e){return t-e})))}return t._cache.$bar}(o,t.type),s=o._length,l=function(){32767!==r&&-32768!==r&&(wo(i)&&(s=Math.min(s,Math.abs(r-i)||s)),i=r)};for(e=0,n=a.length;e<n;++e)r=o.getPixelForValue(a[e]),l();for(i=void 0,e=0,n=o.ticks.length;e<n;++e)r=o.getPixelForTick(e),l();return s}function cl(t,e,n,r){return no(t)?function(t,e,n,r){var i=n.parse(t[0],r),o=n.parse(t[1],r),a=Math.min(i,o),s=Math.max(i,o),l=a,u=s;Math.abs(a)>Math.abs(s)&&(l=s,u=a),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:o,min:a,max:s}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function hl(t,e,n,r){var i,o,a,s,l=t.iScale,u=t.vScale,c=l.getLabels(),h=l===u,f=[];for(i=n,o=n+r;i<o;++i)s=e[i],(a={})[l.axis]=h||l.parse(c[i],i),f.push(cl(s,a,u,i));return f}function fl(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function pl(t,e,n,r){var i=e.borderSkipped,o={};if(i)if(!0!==i){var a=function(t){var e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t),s=a.start,l=a.end,u=a.reverse,c=a.top,h=a.bottom;"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(o[dl(h,s,l,u)]=!0,i=c)),o[dl(i,s,l,u)]=!0,t.borderSkipped=o}else t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else t.borderSkipped=o}function dl(t,e,n,r){var i,o,a;return r?(a=n,t=vl(t=(i=t)===(o=e)?a:i===a?o:i,n,e)):t=vl(t,e,n),t}function vl(t,e,n){return"start"===t?e:"end"===t?n:t}function yl(t,e,n){var r=e.inflateAmount;t.inflateAmount="auto"===r?1===n?.33:0:r}i(ll,"defaults",{}),i(ll,"datasetElementType",null),i(ll,"dataElementType",null);var gl=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"parsePrimitiveData",value:function(t,e,n,r){return hl(t,e,n,r)}},{key:"parseArrayData",value:function(t,e,n,r){return hl(t,e,n,r)}},{key:"parseObjectData",value:function(t,e,n,r){var i,o,a,s,l=t.iScale,u=t.vScale,c=this._parsing,h=c.xAxisKey,f=void 0===h?"x":h,p=c.yAxisKey,d=void 0===p?"y":p,v="x"===l.axis?f:d,y="x"===u.axis?f:d,g=[];for(i=n,o=n+r;i<o;++i)s=e[i],(a={})[l.axis]=l.parse(xo(s,v),i),g.push(cl(xo(s,y),a,u,i));return g}},{key:"updateRangeFromParsed",value:function(t,e,r,i){pi(fi(n.prototype),"updateRangeFromParsed",this).call(this,t,e,r,i);var o=r._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t),o=i._custom,a=fl(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,pi(fi(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(t){var e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,o=this.index,a=this._cachedMeta.vScale,s=a.getBasePixel(),l=a.isHorizontal(),u=this._getRuler(),c=this._getSharedOptions(e,r),h=c.sharedOptions,f=c.includeOptions,p=e;p<e+n;p++){var d=this.getParsed(p),v=i||eo(d[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,u),g=(d._stacks||{})[a.axis],m={horizontal:l,base:v.base,enableBorderRadius:!g||fl(d._custom)||o===g._top||o===g._bottom,x:l?v.head:y.center,y:l?y.center:v.head,height:l?y.size:Math.abs(v.size),width:l?Math.abs(v.size):y.size};f&&(m.options=h||this.resolveDataElementOptions(p,t[p].active?"active":r));var _=m.options||t[p].options;pl(m,_,g,o),yl(m,_,u.ratio),this.updateElement(t[p],p,m,r)}}},{key:"_getStacks",value:function(t,e){var n,r=this._cachedMeta.iScale,i=r.getMatchingVisibleMetas(this._type).filter((function(t){return t.controller.options.grouped})),o=r.options.stacked,a=[],s=function(t){var n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(eo(r)||isNaN(r))return!0},l=gi(i);try{for(l.s();!(n=l.n()).done;){var u=n.value;if((void 0===e||!s(u))&&((!1===o||-1===a.indexOf(u.stack)||void 0===o&&void 0===u.stack)&&a.push(u.stack),u.index===t))break}}catch(c){l.e(c)}finally{l.f()}return a.length||a.push(void 0),a}},{key:"_getStackCount",value:function(t){return this._getStacks(void 0,t).length}},{key:"_getStackIndex",value:function(t,e,n){var r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}},{key:"_getRuler",value:function(){var t,e,n=this.options,r=this._cachedMeta,i=r.iScale,o=[];for(t=0,e=r.data.length;t<e;++t)o.push(i.getPixelForValue(this.getParsed(t)[i.axis],t));var a=n.barThickness;return{min:a||ul(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:n.grouped,ratio:a?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(t){var e,n,r=this._cachedMeta,i=r.vScale,o=r._stacked,a=r.index,s=this.options,l=s.base,u=s.minBarLength,c=l||0,h=this.getParsed(t),f=h._custom,p=fl(f),d=h[i.axis],v=0,y=o?this.applyStack(i,h,o):d;y!==d&&(v=y-d,y=d),p&&(d=f.barStart,y=f.barEnd-f.barStart,0!==d&&Ro(d)!==Ro(f.barEnd)&&(v=0),v+=d);var g=eo(l)||p?v:l,m=i.getPixelForValue(g);if(n=(e=this.chart.getDataVisibility(t)?i.getPixelForValue(v+y):m)-m,Math.abs(n)<u){n=function(t,e,n){return 0!==t?Ro(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(n,i,c)*u,d===c&&(m-=n/2);var _=i.getPixelForDecimal(0),x=i.getPixelForDecimal(1),b=Math.min(_,x),w=Math.max(_,x);e=(m=Math.max(Math.min(m,w),b))+n,o&&!p&&(h._stacks[i.axis]._visualValues[a]=i.getValueForPixel(e)-i.getValueForPixel(m))}if(m===i.getPixelForValue(c)){var k=Ro(n)*i.getLineWidthForValue(c)/2;m+=k,n-=k}return{size:n,base:m,head:e,center:e+n/2}}},{key:"_calculateBarIndexPixels",value:function(t,e){var n,r,i=e.scale,o=this.options,a=o.skipNull,s=ao(o.maxBarThickness,1/0);if(e.grouped){var l=a?this._getStackCount(t):e.stackCount,u="flex"===o.barThickness?function(t,e,n,r){var i=e.pixels,o=i[t],a=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null,l=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);var u=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/r,ratio:n.barPercentage,start:u}}(t,e,o,l):function(t,e,n,r){var i,o,a=n.barThickness;return eo(a)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=a*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}(t,e,o,l),c=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);n=u.start+u.chunk*c+u.chunk/2,r=Math.min(s,u.chunk*u.ratio)}else n=i.getPixelForValue(this.getParsed(t)[i.axis],t),r=Math.min(s,e.min*e.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length,i=0;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}}]),n}(ll);i(gl,"id","bar"),i(gl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),i(gl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var ml=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,pi(fi(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(t,e,r,i){for(var o=pi(fi(n.prototype),"parsePrimitiveData",this).call(this,t,e,r,i),a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}},{key:"parseArrayData",value:function(t,e,r,i){for(var o=pi(fi(n.prototype),"parseArrayData",this).call(this,t,e,r,i),a=0;a<o.length;a++){var s=e[r+a];o[a]._custom=ao(s[2],this.resolveDataElementOptions(a+r).radius)}return o}},{key:"parseObjectData",value:function(t,e,r,i){for(var o=pi(fi(n.prototype),"parseObjectData",this).call(this,t,e,r,i),a=0;a<o.length;a++){var s=e[r+a];o[a]._custom=ao(s&&s.r&&+s.r,this.resolveDataElementOptions(a+r).radius)}return o}},{key:"getMaxOverflow",value:function(){for(var t=this._cachedMeta.data,e=0,n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart.data.labels||[],r=e.xScale,i=e.yScale,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y),l=o._custom;return{label:n[t]||"",value:"("+a+", "+s+(l?", "+l:"")+")"}}},{key:"update",value:function(t){var e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,o=this._cachedMeta,a=o.iScale,s=o.vScale,l=this._getSharedOptions(e,r),u=l.sharedOptions,c=l.includeOptions,h=a.axis,f=s.axis,p=e;p<e+n;p++){var d=t[p],v=!i&&this.getParsed(p),y={},g=y[h]=i?a.getPixelForDecimal(.5):a.getPixelForValue(v[h]),m=y[f]=i?s.getBasePixel():s.getPixelForValue(v[f]);y.skip=isNaN(g)||isNaN(m),c&&(y.options=u||this.resolveDataElementOptions(p,d.active?"active":r),i&&(y.options.radius=0)),this.updateElement(d,p,y,r)}}},{key:"resolveDataElementOptions",value:function(t,e){var r=this.getParsed(t),i=pi(fi(n.prototype),"resolveDataElementOptions",this).call(this,t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));var o=i.radius;return"active"!==e&&(i.radius=0),i.radius+=ao(r&&r._custom,o),i}}]),n}(ll);i(ml,"id","bubble"),i(ml,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),i(ml,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var _l=function(t){vi(n,t);var e=yi(n);function n(t,r){var i;return(0,mi.Z)(this,n),(i=e.call(this,t,r)).enableOptionSharing=!0,i.innerRadius=void 0,i.outerRadius=void 0,i.offsetX=void 0,i.offsetY=void 0,i}return(0,_i.Z)(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(t,e){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var i,o,a=function(t){return+n[t]};if(ro(n[t])){var s=this._parsing.key,l=void 0===s?"value":s;a=function(t){return+xo(n[t],l)}}for(i=t,o=t+e;i<o;++i)r._parsed[i]=a(i)}}},{key:"_getRotation",value:function(){return Bo(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return Bo(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var t=To,e=-To,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){var r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}},{key:"update",value:function(t){var e=this.chart.chartArea,n=this._cachedMeta,r=n.data,i=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(e.width,e.height)-i)/2,0),a=Math.min(function(t,e){return"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e}(this.options.cutout,o),1),s=this._getRingWeight(this.index),l=this._getRotationExtents(),u=l.circumference,c=function(t,e,n){var r=1,i=1,o=0,a=0;if(e<To){var s=t,l=s+e,u=Math.cos(s),c=Math.sin(s),h=Math.cos(l),f=Math.sin(l),p=function(t,e,r){return Wo(t,s,l,!0)?1:Math.max(e,e*n,r,r*n)},d=function(t,e,r){return Wo(t,s,l,!0)?-1:Math.min(e,e*n,r,r*n)},v=p(0,u,h),y=p(Po,c,f),g=d(So,u,h),m=d(So+Po,c,f);r=(v-g)/2,i=(y-m)/2,o=-(v+g)/2,a=-(y+m)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:a}}(l.rotation,u,a),h=c.ratioX,f=c.ratioY,p=c.offsetX,d=c.offsetY,v=(e.width-i)/h,y=(e.height-i)/f,g=Math.max(Math.min(v,y)/2,0),m=so(this.options.radius,g),_=(m-Math.max(m*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*m,this.offsetY=d*m,n.total=this.calculateTotal(),this.outerRadius=m-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*s,0),this.updateElements(r,0,r.length,t)}},{key:"_circumference",value:function(t,e){var n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/To)}},{key:"updateElements",value:function(t,e,n,r){var i,o="reset"===r,a=this.chart,s=a.chartArea,l=a.options.animation,u=(s.left+s.right)/2,c=(s.top+s.bottom)/2,h=o&&l.animateScale,f=h?0:this.innerRadius,p=h?0:this.outerRadius,d=this._getSharedOptions(e,r),v=d.sharedOptions,y=d.includeOptions,g=this._getRotation();for(i=0;i<e;++i)g+=this._circumference(i,o);for(i=e;i<e+n;++i){var m=this._circumference(i,o),_=t[i],x={x:u+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+m,circumference:m,outerRadius:p,innerRadius:f};y&&(x.options=v||this.resolveDataElementOptions(i,_.active?"active":r)),g+=m,this.updateElement(_,i,x,r)}}},{key:"calculateTotal",value:function(){var t,e=this._cachedMeta,n=e.data,r=0;for(t=0;t<n.length;t++){var i=e._parsed[t];null===i||isNaN(i)||!this.chart.getDataVisibility(t)||n[t].hidden||(r+=Math.abs(i))}return r}},{key:"calculateCircumference",value:function(t){var e=this._cachedMeta.total;return e>0&&!isNaN(t)?To*(Math.abs(t)/e):0}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ga(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}},{key:"getMaxBorderWidth",value:function(t){var e,n,r,i,o,a=0,s=this.chart;if(!t)for(e=0,n=s.data.datasets.length;e<n;++e)if(s.isDatasetVisible(e)){t=(r=s.getDatasetMeta(e)).data,i=r.controller;break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)"inner"!==(o=i.resolveDataElementOptions(e)).borderAlign&&(a=Math.max(a,o.borderWidth||0,o.hoverBorderWidth||0));return a}},{key:"getMaxOffset",value:function(t){for(var e=0,n=0,r=t.length;n<r;++n){var i=this.resolveDataElementOptions(n);e=Math.max(e,i.offset||0,i.hoverOffset||0)}return e}},{key:"_getRingWeightOffset",value:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}},{key:"_getRingWeight",value:function(t){return Math.max(ao(this.chart.data.datasets[t].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(ll);i(_l,"id","doughnut"),i(_l,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),i(_l,"descriptors",{_scriptable:function(t){return"spacing"!==t},_indexable:function(t){return"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}}),i(_l,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(t){var e=t.data;if(e.labels.length&&e.datasets.length){var n=t.legend.options.labels,r=n.pointStyle,i=n.color;return e.labels.map((function(e,n){var o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick:function(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});var xl=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,pi(fi(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.dataset,r=e.data,i=void 0===r?[]:r,o=e._dataset,a=this.chart._animationsDisabled,s=oa(e,i,a),l=s.start,u=s.count;this._drawStart=l,this._drawCount=u,aa(e)&&(l=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;var c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:c},t),this.updateElements(i,l,u,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,o=this._cachedMeta,a=o.iScale,s=o.vScale,l=o._stacked,u=o._dataset,c=this._getSharedOptions(e,r),h=c.sharedOptions,f=c.includeOptions,p=a.axis,d=s.axis,v=this.options,y=v.spanGaps,g=v.segment,m=No(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||"none"===r,x=e+n,b=t.length,w=e>0&&this.getParsed(e-1),k=0;k<b;++k){var E=t[k],S=_?E:{};if(k<e||k>=x)S.skip=!0;else{var T=this.getParsed(k),M=eo(T[d]),I=S[p]=a.getPixelForValue(T[p],k),C=S[d]=i||M?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,T,l):T[d],k);S.skip=isNaN(I)||isNaN(C)||M,S.stop=k>0&&Math.abs(T[p]-w[p])>m,g&&(S.parsed=T,S.raw=u.data[k]),f&&(S.options=h||this.resolveDataElementOptions(k,E.active?"active":r)),_||this.updateElement(E,k,S,r),w=T}}}},{key:"getMaxOverflow",value:function(){var t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;var i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}},{key:"draw",value:function(){var t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),pi(fi(n.prototype),"draw",this).call(this)}}]),n}(ll);i(xl,"id","line"),i(xl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),i(xl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var bl=function(t){vi(n,t);var e=yi(n);function n(t,r){var i;return(0,mi.Z)(this,n),(i=e.call(this,t,r)).innerRadius=void 0,i.outerRadius=void 0,i}return(0,_i.Z)(n,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ga(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}},{key:"parseObjectData",value:function(t,e,n,r){return hs.bind(this)(t,e,n,r)}},{key:"update",value:function(t){var e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}},{key:"getMinMax",value:function(){var t=this,e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((function(e,r){var i=t.getParsed(r).r;!isNaN(i)&&t.chart.getDataVisibility(r)&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i))})),n}},{key:"_updateRadius",value:function(){var t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}},{key:"updateElements",value:function(t,e,n,r){var i,o="reset"===r,a=this.chart,s=a.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,h=l.getIndexAngle(0)-.5*So,f=h,p=360/this.countVisibleElements();for(i=0;i<e;++i)f+=this._computeAngle(i,r,p);for(i=e;i<e+n;i++){var d=t[i],v=f,y=f+this._computeAngle(i,r,p),g=a.getDataVisibility(i)?l.getDistanceFromCenterForValue(this.getParsed(i).r):0;f=y,o&&(s.animateScale&&(g=0),s.animateRotate&&(v=y=h));var m={x:u,y:c,innerRadius:0,outerRadius:g,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(i,d.active?"active":r)};this.updateElement(d,i,m,r)}}},{key:"countVisibleElements",value:function(){var t=this,e=this._cachedMeta,n=0;return e.data.forEach((function(e,r){!isNaN(t.getParsed(r).r)&&t.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(t,e,n){return this.chart.getDataVisibility(t)?Bo(this.resolveDataElementOptions(t,e).angle||n):0}}]),n}(ll);i(bl,"id","polarArea"),i(bl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),i(bl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(t){var e=t.data;if(e.labels.length&&e.datasets.length){var n=t.legend.options.labels,r=n.pointStyle,i=n.color;return e.labels.map((function(e,n){var o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick:function(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var wl=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n)}(_l);i(wl,"id","pie"),i(wl,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var kl=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}},{key:"parseObjectData",value:function(t,e,n,r){return hs.bind(this)(t,e,n,r)}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){var o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);var a={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(r,0,r.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i=this._cachedMeta.rScale,o="reset"===r,a=e;a<e+n;a++){var s=t[a],l=this.resolveDataElementOptions(a,s.active?"active":r),u=i.getPointPositionForValue(a,this.getParsed(a).r),c=o?i.xCenter:u.x,h=o?i.yCenter:u.y,f={x:c,y:h,angle:u.angle,skip:isNaN(c)||isNaN(h),options:l};this.updateElement(s,a,f,r)}}}]),n}(ll);i(kl,"id","radar"),i(kl,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),i(kl,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var El=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart.data.labels||[],r=e.xScale,i=e.yScale,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+s+")"}}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.data,r=void 0===n?[]:n,i=this.chart._animationsDisabled,o=oa(e,r,i),a=o.start,s=o.count;if(this._drawStart=a,this._drawCount=s,aa(e)&&(a=0,s=r.length),this.options.showLine){var l=e.dataset,u=e._dataset;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=r;var c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!i,options:c},t)}this.updateElements(r,a,s,t)}},{key:"addElements",value:function(){var t=this.options.showLine;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),pi(fi(n.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,o=this._cachedMeta,a=o.iScale,s=o.vScale,l=o._stacked,u=o._dataset,c=this.resolveDataElementOptions(e,r),h=this.getSharedOptions(c),f=this.includeOptions(r,h),p=a.axis,d=s.axis,v=this.options,y=v.spanGaps,g=v.segment,m=No(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||"none"===r,x=e>0&&this.getParsed(e-1),b=e;b<e+n;++b){var w=t[b],k=this.getParsed(b),E=_?w:{},S=eo(k[d]),T=E[p]=a.getPixelForValue(k[p],b),M=E[d]=i||S?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,k,l):k[d],b);E.skip=isNaN(T)||isNaN(M)||S,E.stop=b>0&&Math.abs(k[p]-x[p])>m,g&&(E.parsed=k,E.raw=u.data[b]),f&&(E.options=h||this.resolveDataElementOptions(b,w.active?"active":r)),_||this.updateElement(w,b,E,r),x=k}this.updateSharedOptions(h,r,c)}},{key:"getMaxOverflow",value:function(){var t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){for(var n=0,r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}var i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!e.length)return o;var a=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(o,a,s)/2}}]),n}(ll);i(El,"id","scatter"),i(El,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),i(El,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Sl=Object.freeze({__proto__:null,BarController:gl,BubbleController:ml,DoughnutController:_l,LineController:xl,PieController:wl,PolarAreaController:bl,RadarController:kl,ScatterController:El});function Tl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ml={_date:function(){function t(e){(0,mi.Z)(this,t),i(this,"options",void 0),this.options=e||{}}return(0,_i.Z)(t,[{key:"init",value:function(){}},{key:"formats",value:function(){return Tl()}},{key:"parse",value:function(){return Tl()}},{key:"format",value:function(){return Tl()}},{key:"add",value:function(){return Tl()}},{key:"diff",value:function(){return Tl()}},{key:"startOf",value:function(){return Tl()}},{key:"endOf",value:function(){return Tl()}}],[{key:"override",value:function(e){Object.assign(t.prototype,e)}}]),t}()};function Il(t,e,n,r){var i=t.controller,o=t.data,a=t._sorted,s=i._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){var l=s._reversePixels?Jo:Ko;if(!r)return l(o,e,n);if(i._sharedOptions){var u=o[0],c="function"===typeof u.getRange&&u.getRange(e);if(c){var h=l(o,e,n-c),f=l(o,e,n+c);return{lo:h.lo,hi:f.hi}}}}return{lo:0,hi:o.length-1}}function Cl(t,e,n,r,i){for(var o=t.getSortedVisibleDatasetMetas(),a=n[e],s=0,l=o.length;s<l;++s)for(var u=o[s],c=u.index,h=u.data,f=Il(o[s],e,a,i),p=f.lo,d=f.hi,v=p;v<=d;++v){var y=h[v];y.skip||r(y,c,v)}}function Pl(t,e,n,r,i){var o=[];if(!i&&!t.isPointInArea(e))return o;return Cl(t,n,e,(function(n,a,s){(i||La(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&o.push({element:n,datasetIndex:a,index:s})}),!0),o}function Al(t,e,n,r,i,o){var a=[],s=function(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){var i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n),l=Number.POSITIVE_INFINITY;return Cl(t,n,e,(function(n,u,c){var h=n.inRange(e.x,e.y,i);if(!r||h){var f=n.getCenterPoint(i);if(!!o||t.isPointInArea(f)||h){var p=s(e,f);p<l?(a=[{element:n,datasetIndex:u,index:c}],l=p):p===l&&a.push({element:n,datasetIndex:u,index:c})}}})),a}function Ll(t,e,n,r,i,o){return o||t.isPointInArea(e)?"r"!==n||r?Al(t,e,n,r,i,o):function(t,e,n,r){var i=[];return Cl(t,n,e,(function(t,n,o){var a=t.getProps(["startAngle","endAngle"],r),s=a.startAngle,l=a.endAngle;Wo(Vo(t,{x:e.x,y:e.y}).angle,s,l)&&i.push({element:t,datasetIndex:n,index:o})})),i}(t,e,n,i):[]}function Dl(t,e,n,r,i){var o=[],a="x"===n?"inXRange":"inYRange",s=!1;return Cl(t,n,e,(function(t,r,l){t[a](e[n],i)&&(o.push({element:t,datasetIndex:r,index:l}),s=s||t.inRange(e.x,e.y,i))})),r&&!s?[]:o}var Rl={evaluateInteractionItems:Cl,modes:{index:function(t,e,n,r){var i=Ts(e,t),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?Pl(t,i,o,r,a):Ll(t,i,o,!1,r,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((function(t){var e=s[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset:function(t,e,n,r){var i=Ts(e,t),o=n.axis||"xy",a=n.includeInvisible||!1,s=n.intersect?Pl(t,i,o,r,a):Ll(t,i,o,!1,r,a);if(s.length>0){var l=s[0].datasetIndex,u=t.getDatasetMeta(l).data;s=[];for(var c=0;c<u.length;++c)s.push({element:u[c],datasetIndex:l,index:c})}return s},point:function(t,e,n,r){return Pl(t,Ts(e,t),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(t,e,n,r){var i=Ts(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;return Ll(t,i,o,n.intersect,r,a)},x:function(t,e,n,r){return Dl(t,Ts(e,t),"x",n.intersect,r)},y:function(t,e,n,r){return Dl(t,Ts(e,t),"y",n.intersect,r)}}},Ol=["left","top","right","bottom"];function zl(t,e){return t.filter((function(t){return t.pos===e}))}function Nl(t,e){return t.filter((function(t){return-1===Ol.indexOf(t.pos)&&t.box.axis===e}))}function Fl(t,e){return t.sort((function(t,n){var r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Bl(t,e){var n,r,i,o=function(t){var e,n={},r=gi(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.stack,a=i.pos,s=i.stackWeight;if(o&&Ol.includes(a)){var l=n[o]||(n[o]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=s}}}catch(u){r.e(u)}finally{r.f()}return n}(t),a=e.vBoxMaxWidth,s=e.hBoxMaxHeight;for(n=0,r=t.length;n<r;++n){var l=(i=t[n]).box.fullSize,u=o[i.stack],c=u&&i.stackWeight/u.weight;i.horizontal?(i.width=c?c*a:l&&e.availableWidth,i.height=s):(i.width=a,i.height=c?c*s:l&&e.availableHeight)}return o}function jl(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ul(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Vl(t,e,n,r){var i=n.pos,o=n.box,a=t.maxPadding;if(!ro(i)){n.size&&(t[i]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?o.height:o.width),n.size=s.size/s.count,t[i]+=n.size}o.getPadding&&Ul(a,o.getPadding());var l=Math.max(0,e.outerWidth-jl(a,t,"left","right")),u=Math.max(0,e.outerHeight-jl(a,t,"top","bottom")),c=l!==t.w,h=u!==t.h;return t.w=l,t.h=u,n.horizontal?{same:c,other:h}:{same:h,other:c}}function Gl(t,e){var n=e.maxPadding;function r(t){var r={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function ql(t,e,n,r){var i,o,a,s,l,u,c=[];for(i=0,o=t.length,l=0;i<o;++i){(s=(a=t[i]).box).update(a.width||e.w,a.height||e.h,Gl(a.horizontal,e));var h=Vl(e,n,a,r),f=h.same,p=h.other;l|=f&&c.length,u=u||p,s.fullSize||c.push(a)}return l&&ql(c,e,n,r)||u}function Zl(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Wl(t,e,n,r){var i,o=n.padding,a=e.x,s=e.y,l=gi(t);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=u.box,h=r[u.stack]||{count:1,placed:0,weight:1},f=u.stackWeight/h.weight||1;if(u.horizontal){var p=e.w*f,d=h.size||c.height;wo(h.start)&&(s=h.start),c.fullSize?Zl(c,o.left,s,n.outerWidth-o.right-o.left,d):Zl(c,e.left+h.placed,s,p,d),h.start=s,h.placed+=p,s=c.bottom}else{var v=e.h*f,y=h.size||c.width;wo(h.start)&&(a=h.start),c.fullSize?Zl(c,a,o.top,y,n.outerHeight-o.bottom-o.top):Zl(c,a,e.top+h.placed,y,v),h.start=a,h.placed+=v,a=c.right}}}catch(g){l.e(g)}finally{l.f()}e.x=a,e.y=s}var Xl=function(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(t){e.draw(t)}}]},t.boxes.push(e)},Hl=function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},Yl=function(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},Kl=function(t,e,n,r){if(t){var i=Ha(t.options.layout.padding),o=Math.max(e-i.width,0),a=Math.max(n-i.height,0),s=function(t){var e=function(t){var e,n,r,i,o,a,s=[];for(e=0,n=(t||[]).length;e<n;++e){var l=r=t[e];i=l.position;var u=l.options;o=u.stack;var c=u.stackWeight;a=void 0===c?1:c,s.push({index:e,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a})}return s}(t),n=Fl(e.filter((function(t){return t.box.fullSize})),!0),r=Fl(zl(e,"left"),!0),i=Fl(zl(e,"right")),o=Fl(zl(e,"top"),!0),a=Fl(zl(e,"bottom")),s=Nl(e,"x"),l=Nl(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(a).concat(s),chartArea:zl(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(a).concat(s)}}(t.boxes),l=s.vertical,u=s.horizontal;uo(t.boxes,(function(t){"function"===typeof t.beforeLayout&&t.beforeLayout()}));var c=l.reduce((function(t,e){return e.box.options&&!1===e.box.options.display?t:t+1}),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),f=Object.assign({},i);Ul(f,Ha(r));var p=Object.assign({maxPadding:f,w:o,h:a,x:i.left,y:i.top},i),d=Bl(l.concat(u),h);ql(s.fullSize,p,h,d),ql(l,p,h,d),ql(u,p,h,d)&&ql(l,p,h,d),function(t){var e=t.maxPadding;function n(n){var r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(p),Wl(s.leftAndTop,p,h,d),p.x+=p.w,p.y+=p.h,Wl(s.rightAndBottom,p,h,d),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},uo(s.chartArea,(function(e){var n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}},Jl=function(){function t(){(0,mi.Z)(this,t)}return(0,_i.Z)(t,[{key:"acquireContext",value:function(t,e){}},{key:"releaseContext",value:function(t){return!1}},{key:"addEventListener",value:function(t,e,n){}},{key:"removeEventListener",value:function(t,e,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}},{key:"isAttached",value:function(t){return!0}},{key:"updateConfig",value:function(t){}}]),t}(),Ql=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"acquireContext",value:function(t){return t&&t.getContext&&t.getContext("2d")||null}},{key:"updateConfig",value:function(t){t.options.animation=!1}}]),n}(Jl),$l="$chartjs",tu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eu=function(t){return null===t||""===t};var nu=!!Ps&&{passive:!0};function ru(t,e,n){t.canvas.removeEventListener(e,n,nu)}function iu(t,e){var n,r=gi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i===e||i.contains(e))return!0}}catch(o){r.e(o)}finally{r.f()}}function ou(t,e,n){var r=t.canvas,i=new MutationObserver((function(t){var e,i=!1,o=gi(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;i=(i=i||iu(a.addedNodes,r))&&!iu(a.removedNodes,r)}}catch(s){o.e(s)}finally{o.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function au(t,e,n){var r=t.canvas,i=new MutationObserver((function(t){var e,i=!1,o=gi(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;i=(i=i||iu(a.removedNodes,r))&&!iu(a.addedNodes,r)}}catch(s){o.e(s)}finally{o.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}var su=new Map,lu=0;function uu(){var t=window.devicePixelRatio;t!==lu&&(lu=t,su.forEach((function(e,n){n.currentDevicePixelRatio!==t&&e()})))}function cu(t,e,n){var r=t.canvas,i=r&&xs(r);if(i){var o=na((function(t,e){var r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),a=new ResizeObserver((function(t){var e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||o(n,r)}));return a.observe(i),function(t,e){su.size||window.addEventListener("resize",uu),su.set(t,e)}(t,o),a}}function hu(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){su.delete(t),su.size||window.removeEventListener("resize",uu)}(t)}function fu(t,e,n){var r=t.canvas,i=na((function(e){null!==t.ctx&&n(function(t,e){var n=tu[t.type]||t.type,r=Ts(t,e),i=r.x,o=r.y;return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==o?o:null}}(e,t))}),t);return function(t,e,n){t.addEventListener(e,n,nu)}(r,e,i),i}var pu=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"acquireContext",value:function(t,e){var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){var n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[$l]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",eu(i)){var o=As(t,"width");void 0!==o&&(t.width=o)}if(eu(r))if(""===t.style.height)t.height=t.width/(e||2);else{var a=As(t,"height");void 0!==a&&(t.height=a)}}(t,e),n):null}},{key:"releaseContext",value:function(t){var e=t.canvas;if(!e[$l])return!1;var n=e[$l].initial;["height","width"].forEach((function(t){var r=n[t];eo(r)?e.removeAttribute(t):e.setAttribute(t,r)}));var r=n.style||{};return Object.keys(r).forEach((function(t){e.style[t]=r[t]})),e.width=e.width,delete e[$l],!0}},{key:"addEventListener",value:function(t,e,n){this.removeEventListener(t,e);var r=t.$proxies||(t.$proxies={}),i={attach:ou,detach:au,resize:cu}[e]||fu;r[e]=i(t,e,n)}},{key:"removeEventListener",value:function(t,e){var n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:hu,detach:hu,resize:hu}[e]||ru)(t,e,r),n[e]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(t,e,n,r){return Is(t,e,n,r)}},{key:"isAttached",value:function(t){var e=xs(t);return!(!e||!e.isConnected)}}]),n}(Jl);var du=function(){function t(){(0,mi.Z)(this,t),i(this,"x",void 0),i(this,"y",void 0),i(this,"active",!1),i(this,"options",void 0),i(this,"$animations",void 0)}return(0,_i.Z)(t,[{key:"tooltipPosition",value:function(t){var e=this.getProps(["x","y"],t);return{x:e.x,y:e.y}}},{key:"hasValue",value:function(){return No(this.x)&&No(this.y)}},{key:"getProps",value:function(t,e){var n=this,r=this.$animations;if(!e||!r)return this;var i={};return t.forEach((function(t){i[t]=r[t]&&r[t].active()?r[t]._to:n[t]})),i}}]),t}();function vu(t,e){var n=t.options.ticks,r=function(t){var e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(t){var e,n,r=[];for(e=0,n=t.length;e<n;e++)t[e].major&&r.push(e);return r}(e):[],a=o.length,s=o[0],l=o[a-1],u=[];if(a>i)return function(t,e,n,r){var i,o=0,a=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===a&&(e.push(t[i]),a=n[++o*r])}(e,u,o,a/i),u;var c=function(t,e,n){var r=function(t){var e,n,r=t.length;if(r<2)return!1;for(n=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==n)return!1;return n}(t),i=e.length/n;if(!r)return Math.max(i,1);for(var o=function(t){var e,n=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e===0&&(n.push(e),n.push(t/e));return r===(0|r)&&n.push(r),n.sort((function(t,e){return t-e})).pop(),n}(r),a=0,s=o.length-1;a<s;a++){var l=o[a];if(l>i)return l}return Math.max(i,1)}(o,e,i);if(a>0){var h,f,p=a>1?Math.round((l-s)/(a-1)):null;for(yu(e,u,c,eo(p)?0:s-p,s),h=0,f=a-1;h<f;h++)yu(e,u,c,o[h],o[h+1]);return yu(e,u,c,l,eo(p)?e.length:l+p),u}return yu(e,u,c),u}function yu(t,e,n,r,i){var o,a,s,l=ao(r,0),u=Math.min(ao(i,t.length),t.length),c=0;for(n=Math.ceil(n),i&&(n=(o=i-r)/Math.floor(o/n)),s=l;s<0;)c++,s=Math.round(l+c*n);for(a=Math.max(l,0);a<u;a++)a===s&&(e.push(t[a]),c++,s=Math.round(l+c*n))}i(du,"defaults",{}),i(du,"defaultRoutes",void 0);var gu=function(t,e,n){return"top"===e||"left"===e?t[e]+n:t[e]-n},mu=function(t,e){return Math.min(e||t,t)};function _u(t,e){for(var n=[],r=t.length/e,i=t.length,o=0;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function xu(t,e,n){var r,i=t.ticks.length,o=Math.min(e,i-1),a=t._startPixel,s=t._endPixel,l=1e-6,u=t.getPixelForTick(o);if(!(n&&(r=1===i?Math.max(u-a,s-u):0===e?(t.getPixelForTick(1)-u)/2:(u-t.getPixelForTick(o-1))/2,(u+=o<e?r:-r)<a-l||u>s+l)))return u}function bu(t){return t.drawTicks?t.tickLength:0}function wu(t,e){if(!t.display)return 0;var n=Ya(t.font,e),r=Ha(t.padding);return(no(t.text)?t.text.length:1)*n.lineHeight+r.height}function ku(t,e,n){var r=ra(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=function(t){return"left"===t?"right":"right"===t?"left":t}(r)),r}var Eu=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this)).id=t.id,r.type=t.type,r.options=void 0,r.ctx=t.ctx,r.chart=t.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return(0,_i.Z)(n,[{key:"init",value:function(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}},{key:"parse",value:function(t,e){return t}},{key:"getUserBounds",value:function(){var t=this._userMin,e=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return t=oo(t,Number.POSITIVE_INFINITY),e=oo(e,Number.NEGATIVE_INFINITY),n=oo(n,Number.POSITIVE_INFINITY),r=oo(r,Number.NEGATIVE_INFINITY),{min:oo(t,n),max:oo(e,r),minDefined:io(t),maxDefined:io(e)}}},{key:"getMinMax",value:function(t){var e,n=this.getUserBounds(),r=n.min,i=n.max,o=n.minDefined,a=n.maxDefined;if(o&&a)return{min:r,max:i};for(var s=this.getMatchingVisibleMetas(),l=0,u=s.length;l<u;++l)e=s[l].controller.getMinMax(this,t),o||(r=Math.min(r,e.min)),a||(i=Math.max(i,e.max));return{min:oo(r=a&&r>i?i:r,oo(i=o&&r>i?r:i,r)),max:oo(i,oo(r,i))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}},{key:"getLabelItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){lo(this.options.beforeUpdate,[this])}},{key:"update",value:function(t,e,n){var r=this.options,i=r.beginAtZero,o=r.grace,a=r.ticks,s=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){var r=t.min,i=t.max,o=so(e,(i-r)/2),a=function(t,e){return n&&0===t?0:t+e};return{min:a(r,-Math.abs(o)),max:a(i,o)}}(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var l=s<this.ticks.length;this._convertTicksToLabels(l?_u(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=vu(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){lo(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){lo(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){lo(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(t){this.chart.notifyPlugins(t,this.getContext()),lo(this.options[t],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){lo(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(t){var e,n,r,i=this.options.ticks;for(e=0,n=t.length;e<n;e++)(r=t[e]).label=lo(i.callback,[r.value,e,t],this)}},{key:"afterTickToLabelConversion",value:function(){lo(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){lo(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var t,e,n,r=this.options,i=r.ticks,o=mu(this.ticks.length,r.ticks.maxTicksLimit),a=i.minRotation||0,s=i.maxRotation,l=a;if(!this._isVisible()||!i.display||a>=s||o<=1||!this.isHorizontal())this.labelRotation=a;else{var u=this._getLabelSizes(),c=u.widest.width,h=u.highest.height,f=Xo(this.chart.width-c,0,this.maxWidth);c+6>(t=r.offset?this.maxWidth/o:f/(o-1))&&(t=f/(o-(r.offset?.5:1)),e=this.maxHeight-bu(r.grid)-i.padding-wu(r.title,this.chart.options.font),n=Math.sqrt(c*c+h*h),l=jo(Math.min(Math.asin(Xo((u.highest.height+6)/t,-1,1)),Math.asin(Xo(e/n,-1,1))-Math.asin(Xo(h/n,-1,1)))),l=Math.max(a,Math.min(s,l))),this.labelRotation=l}}},{key:"afterCalculateLabelRotation",value:function(){lo(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){lo(this.options.beforeFit,[this])}},{key:"fit",value:function(){var t={width:0,height:0},e=this.chart,n=this.options,r=n.ticks,i=n.title,o=n.grid,a=this._isVisible(),s=this.isHorizontal();if(a){var l=wu(i,e.options.font);if(s?(t.width=this.maxWidth,t.height=bu(o)+l):(t.height=this.maxHeight,t.width=bu(o)+l),r.display&&this.ticks.length){var u=this._getLabelSizes(),c=u.first,h=u.last,f=u.widest,p=u.highest,d=2*r.padding,v=Bo(this.labelRotation),y=Math.cos(v),g=Math.sin(v);if(s){var m=r.mirror?0:g*f.width+y*p.height;t.height=Math.min(this.maxHeight,t.height+m+d)}else{var _=r.mirror?0:y*f.width+g*p.height;t.width=Math.min(this.maxWidth,t.width+_+d)}this._calculatePadding(c,h,g,y)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(t,e,n,r){var i=this.options,o=i.ticks,a=o.align,s=o.padding,l=i.position,u=0!==this.labelRotation,c="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),p=0,d=0;u?c?(p=r*t.width,d=n*e.height):(p=n*t.height,d=r*e.width):"start"===a?d=e.width:"end"===a?p=t.width:"inner"!==a&&(p=t.width/2,d=e.width/2),this.paddingLeft=Math.max((p-h+s)*this.width/(this.width-h),0),this.paddingRight=Math.max((d-f+s)*this.width/(this.width-f),0)}else{var v=e.height/2,y=t.height/2;"start"===a?(v=0,y=t.height):"end"===a&&(v=e.height,y=0),this.paddingTop=v+s,this.paddingBottom=y+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){lo(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var t=this.options,e=t.axis,n=t.position;return"top"===n||"bottom"===n||"x"===e}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(t){var e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)eo(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var t=this._labelSizes;if(!t){var e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=_u(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}},{key:"_computeLabelSizes",value:function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d=this.ctx,v=this._longestTextCache,y=[],g=[],m=Math.floor(e/mu(e,n)),_=0,x=0;for(r=0;r<e;r+=m){if(a=t[r].label,s=this._resolveTickFontOptions(r),d.font=l=s.string,u=v[l]=v[l]||{data:{},gc:[]},c=s.lineHeight,h=f=0,eo(a)||no(a)){if(no(a))for(i=0,o=a.length;i<o;++i)eo(p=a[i])||no(p)||(h=Ta(d,u.data,u.gc,h,p),f+=c)}else h=Ta(d,u.data,u.gc,h,a),f=c;y.push(h),g.push(f),_=Math.max(h,_),x=Math.max(f,x)}!function(t,e){uo(t,(function(t){var n,r=t.gc,i=r.length/2;if(i>e){for(n=0;n<i;++n)delete t.data[r[n]];r.splice(0,i)}}))}(v,e);var b=y.indexOf(_),w=g.indexOf(x),k=function(t){return{width:y[t]||0,height:g[t]||0}};return{first:k(0),last:k(e-1),widest:k(b),highest:k(w),widths:y,heights:g}}},{key:"getLabelForValue",value:function(t){return t}},{key:"getPixelForValue",value:function(t,e){return NaN}},{key:"getValueForPixel",value:function(t){}},{key:"getPixelForTick",value:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}},{key:"getPixelForDecimal",value:function(t){this._reversePixels&&(t=1-t);var e=this._startPixel+t*this._length;return function(t){return Xo(t,-32768,32767)}(this._alignToPixels?Ia(this.chart,e,0):e)}},{key:"getDecimalForPixel",value:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var t=this.min,e=this.max;return t<0&&e<0?e:t>0&&e>0?t:0}},{key:"getContext",value:function(t){var e=this.ticks||[];if(t>=0&&t<e.length){var n=e[t];return n.$context||(n.$context=function(t,e,n){return Ja(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function(t,e){return Ja(t,{scale:e,type:"scale"})}(this.chart.getContext(),this))}},{key:"_tickSize",value:function(){var t=this.options.ticks,e=Bo(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,a=i?i.widest.width+o:0,s=i?i.highest.height+o:0;return this.isHorizontal()?s*n>a*r?a/n:s/r:s*r<a*n?s/n:a/r}},{key:"_isVisible",value:function(){var t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p=this.axis,d=this.chart,v=this.options,y=v.grid,g=v.position,m=v.border,_=y.offset,x=this.isHorizontal(),b=this.ticks.length+(_?1:0),w=bu(y),k=[],E=m.setContext(this.getContext()),S=E.display?E.width:0,T=S/2,M=function(t){return Ia(d,t,S)};if("top"===g)e=M(this.bottom),a=this.bottom-w,l=e-T,c=M(t.top)+T,f=t.bottom;else if("bottom"===g)e=M(this.top),c=t.top,f=M(t.bottom)-T,a=e+T,l=this.top+w;else if("left"===g)e=M(this.right),o=this.right-w,s=e-T,u=M(t.left)+T,h=t.right;else if("right"===g)e=M(this.left),u=t.left,h=M(t.right)-T,o=e+T,s=this.left+w;else if("x"===p){if("center"===g)e=M((t.top+t.bottom)/2+.5);else if(ro(g)){var I=Object.keys(g)[0],C=g[I];e=M(this.chart.scales[I].getPixelForValue(C))}c=t.top,f=t.bottom,l=(a=e+T)+w}else if("y"===p){if("center"===g)e=M((t.left+t.right)/2);else if(ro(g)){var P=Object.keys(g)[0],A=g[P];e=M(this.chart.scales[P].getPixelForValue(A))}s=(o=e-T)-w,u=t.left,h=t.right}var L=ao(v.ticks.maxTicksLimit,b),D=Math.max(1,Math.ceil(b/L));for(n=0;n<b;n+=D){var R=this.getContext(n),O=y.setContext(R),z=m.setContext(R),N=O.lineWidth,F=O.color,B=z.dash||[],j=z.dashOffset,U=O.tickWidth,V=O.tickColor,G=O.tickBorderDash||[],q=O.tickBorderDashOffset;void 0!==(r=xu(this,n,_))&&(i=Ia(d,r,N),x?o=s=u=h=i:a=l=c=f=i,k.push({tx1:o,ty1:a,tx2:s,ty2:l,x1:u,y1:c,x2:h,y2:f,width:N,color:F,borderDash:B,borderDashOffset:j,tickWidth:U,tickColor:V,tickBorderDash:G,tickBorderDashOffset:q}))}return this._ticksLength=b,this._borderValue=e,k}},{key:"_computeLabelItems",value:function(t){var e,n,r,i,o,a,s,l,u,c,h,f=this.axis,p=this.options,d=p.position,v=p.ticks,y=this.isHorizontal(),g=this.ticks,m=v.align,_=v.crossAlign,x=v.padding,b=v.mirror,w=bu(p.grid),k=w+x,E=b?-x:k,S=-Bo(this.labelRotation),T=[],M="middle";if("top"===d)o=this.bottom-E,a=this._getXAxisLabelAlignment();else if("bottom"===d)o=this.top+E,a=this._getXAxisLabelAlignment();else if("left"===d){var I=this._getYAxisLabelAlignment(w);a=I.textAlign,i=I.x}else if("right"===d){var C=this._getYAxisLabelAlignment(w);a=C.textAlign,i=C.x}else if("x"===f){if("center"===d)o=(t.top+t.bottom)/2+k;else if(ro(d)){var P=Object.keys(d)[0],A=d[P];o=this.chart.scales[P].getPixelForValue(A)+k}a=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===d)i=(t.left+t.right)/2-k;else if(ro(d)){var L=Object.keys(d)[0],D=d[L];i=this.chart.scales[L].getPixelForValue(D)}a=this._getYAxisLabelAlignment(w).textAlign}"y"===f&&("start"===m?M="top":"end"===m&&(M="bottom"));var R=this._getLabelSizes();for(e=0,n=g.length;e<n;++e){r=g[e].label;var O=v.setContext(this.getContext(e));s=this.getPixelForTick(e)+v.labelOffset,u=(l=this._resolveTickFontOptions(e)).lineHeight;var z=(c=no(r)?r.length:1)/2,N=O.color,F=O.textStrokeColor,B=O.textStrokeWidth,j=a;y?(i=s,"inner"===a&&(j=e===n-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),h="top"===d?"near"===_||0!==S?-c*u+u/2:"center"===_?-R.highest.height/2-z*u+u:-R.highest.height+u/2:"near"===_||0!==S?u/2:"center"===_?R.highest.height/2-z*u:R.highest.height-c*u,b&&(h*=-1),0===S||O.showLabelBackdrop||(i+=u/2*Math.sin(S))):(o=s,h=(1-c)*u/2);var U=void 0;if(O.showLabelBackdrop){var V=Ha(O.backdropPadding),G=R.heights[e],q=R.widths[e],Z=h-V.top,W=0-V.left;switch(M){case"middle":Z-=G/2;break;case"bottom":Z-=G}switch(a){case"center":W-=q/2;break;case"right":W-=q}U={left:W,top:Z,width:q+V.width,height:G+V.height,color:O.backdropColor}}T.push({label:r,font:l,textOffset:h,options:{rotation:S,color:N,strokeColor:F,strokeWidth:B,textAlign:j,textBaseline:M,translation:[i,o],backdrop:U}})}return T}},{key:"_getXAxisLabelAlignment",value:function(){var t=this.options,e=t.position,n=t.ticks;if(-Bo(this.labelRotation))return"top"===e?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(t){var e,n,r=this.options,i=r.position,o=r.ticks,a=o.crossAlign,s=o.mirror,l=o.padding,u=t+l,c=this._getLabelSizes().widest.width;return"left"===i?s?(n=this.right+l,"near"===a?e="left":"center"===a?(e="center",n+=c/2):(e="right",n+=c)):(n=this.right-u,"near"===a?e="right":"center"===a?(e="center",n-=c/2):(e="left",n=this.left)):"right"===i?s?(n=this.left+l,"near"===a?e="right":"center"===a?(e="center",n-=c/2):(e="left",n-=c)):(n=this.left+u,"near"===a?e="left":"center"===a?(e="center",n+=c/2):(e="right",n=this.right)):e="right",{textAlign:e,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}}},{key:"drawBackground",value:function(){var t=this.ctx,e=this.options.backgroundColor,n=this.left,r=this.top,i=this.width,o=this.height;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}},{key:"getLineWidthForValue",value:function(t){var e=this.options.grid;if(!this._isVisible()||!e.display)return 0;var n=this.ticks.findIndex((function(e){return e.value===t}));return n>=0?e.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(t){var e,n,r=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),a=function(t,e,n){n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(r.display)for(e=0,n=o.length;e<n;++e){var s=o[e];r.drawOnChartArea&&a({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&a({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var t=this.chart,e=this.ctx,n=this.options,r=n.border,i=n.grid,o=r.setContext(this.getContext()),a=r.display?o.width:0;if(a){var s,l,u,c,h=i.setContext(this.getContext(0)).lineWidth,f=this._borderValue;this.isHorizontal()?(s=Ia(t,this.left,a)-a/2,l=Ia(t,this.right,h)+h/2,u=c=f):(u=Ia(t,this.top,a)-a/2,c=Ia(t,this.bottom,h)+h/2,s=l=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(s,u),e.lineTo(l,c),e.stroke(),e.restore()}}},{key:"drawLabels",value:function(t){if(this.options.ticks.display){var e=this.ctx,n=this._computeLabelArea();n&&Da(e,n);var r,i=gi(this.getLabelItems(t));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.options,s=o.font;Ba(e,o.label,0,o.textOffset,s,a)}}catch(l){i.e(l)}finally{i.f()}n&&Ra(e)}}},{key:"drawTitle",value:function(){var t=this.ctx,e=this.options,n=e.position,r=e.title,i=e.reverse;if(r.display){var o=Ya(r.font),a=Ha(r.padding),s=r.align,l=o.lineHeight/2;"bottom"===n||"center"===n||ro(n)?(l+=a.bottom,no(r.text)&&(l+=o.lineHeight*(r.text.length-1))):l+=a.top;var u=function(t,e,n,r){var i,o,a,s=t.top,l=t.left,u=t.bottom,c=t.right,h=t.chart,f=h.chartArea,p=h.scales,d=0,v=u-s,y=c-l;if(t.isHorizontal()){if(o=ia(r,l,c),ro(n)){var g=Object.keys(n)[0],m=n[g];a=p[g].getPixelForValue(m)+v-e}else a="center"===n?(f.bottom+f.top)/2+v-e:gu(t,n,e);i=c-l}else{if(ro(n)){var _=Object.keys(n)[0],x=n[_];o=p[_].getPixelForValue(x)-y+e}else o="center"===n?(f.left+f.right)/2-y+e:gu(t,n,e);a=ia(r,u,s),d="left"===n?-Po:Po}return{titleX:o,titleY:a,maxWidth:i,rotation:d}}(this,l,n,s),c=u.titleX,h=u.titleY,f=u.maxWidth,p=u.rotation;Ba(t,r.text,0,0,o,{color:r.color,maxWidth:f,rotation:p,textAlign:ku(s,n,i),textBaseline:"middle",translation:[c,h]})}}},{key:"draw",value:function(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}},{key:"_layers",value:function(){var t=this,e=this.options,r=e.ticks&&e.ticks.z||0,i=ao(e.grid&&e.grid.z,-1),o=ao(e.border&&e.border.z,0);return this._isVisible()&&this.draw===n.prototype.draw?[{z:i,draw:function(e){t.drawBackground(),t.drawGrid(e),t.drawTitle()}},{z:o,draw:function(){t.drawBorder()}},{z:r,draw:function(e){t.drawLabels(e)}}]:[{z:r,draw:function(e){t.draw(e)}}]}},{key:"getMatchingVisibleMetas",value:function(t){var e,n,r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];for(e=0,n=r.length;e<n;++e){var a=r[e];a[i]!==this.id||t&&a.type!==t||o.push(a)}return o}},{key:"_resolveTickFontOptions",value:function(t){return Ya(this.options.ticks.setContext(this.getContext(t)).font)}},{key:"_maxDigits",value:function(){var t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}]),n}(du),Su=function(){function t(e,n,r){(0,mi.Z)(this,t),this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}return(0,_i.Z)(t,[{key:"isForType",value:function(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}},{key:"register",value:function(t){var e,n=Object.getPrototypeOf(t);(function(t){return"id"in t&&"defaults"in t})(n)&&(e=this.register(n));var r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){var r=vo(Object.create(null),[n?Sa.get(n):{},Sa.get(e),t.defaults]);Sa.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((function(n){var r=n.split("."),i=r.pop(),o=[t].concat(r).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");Sa.route(o,i,l,s)}))}(e,t.defaultRoutes);t.descriptors&&Sa.describe(e,t.descriptors)}(t,o,e),this.override&&Sa.override(t.id,t.overrides)),o}},{key:"get",value:function(t){return this.items[t]}},{key:"unregister",value:function(t){var e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in Sa[r]&&(delete Sa[r][n],this.override&&delete xa[n])}}]),t}();var Tu=function(){function t(){(0,mi.Z)(this,t),this.controllers=new Su(ll,"datasets",!0),this.elements=new Su(du,"elements"),this.plugins=new Su(Object,"plugins"),this.scales=new Su(Eu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return(0,_i.Z)(t,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}},{key:"remove",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}},{key:"addControllers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}},{key:"addElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}},{key:"addPlugins",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}},{key:"addScales",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}},{key:"getController",value:function(t){return this._get(t,this.controllers,"controller")}},{key:"getElement",value:function(t){return this._get(t,this.elements,"element")}},{key:"getPlugin",value:function(t){return this._get(t,this.plugins,"plugin")}},{key:"getScale",value:function(t){return this._get(t,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}},{key:"removeElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}},{key:"removePlugins",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}},{key:"removeScales",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}},{key:"_each",value:function(t,e,n){var r=this;Kr(e).forEach((function(e){var i=n||r._getRegistryForType(e);n||i.isForType(e)||i===r.plugins&&e.id?r._exec(t,i,e):uo(e,(function(e){var i=n||r._getRegistryForType(e);r._exec(t,i,e)}))}))}},{key:"_exec",value:function(t,e,n){var r=bo(t);lo(n["before"+r],[],n),e[t](n),lo(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(t){for(var e=0;e<this._typedRegistries.length;e++){var n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}},{key:"_get",value:function(t,e,n){var r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}]),t}(),Mu=new Tu,Iu=function(){function t(){(0,mi.Z)(this,t),this._init=[]}return(0,_i.Z)(t,[{key:"notify",value:function(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));var i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}},{key:"_notify",value:function(t,e,n,r){r=r||{};var i,o=gi(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.plugin;if(!1===lo(s[n],[e,r,a.options],s)&&r.cancelable)return!1}}catch(l){o.e(l)}finally{o.f()}return!0}},{key:"invalidate",value:function(){eo(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(t){if(this._cache)return this._cache;var e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}},{key:"_createDescriptors",value:function(t,e){var n=t&&t.config,r=ao(n.options&&n.options.plugins,{}),i=function(t){for(var e={},n=[],r=Object.keys(Mu.plugins.items),i=0;i<r.length;i++)n.push(Mu.getPlugin(r[i]));for(var o=t.plugins||[],a=0;a<o.length;a++){var s=o[a];-1===n.indexOf(s)&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,e,n,r){var i,o=e.plugins,a=e.localIds,s=[],l=t.getContext(),u=gi(o);try{for(u.s();!(i=u.n()).done;){var c=i.value,h=c.id,f=Cu(n[h],r);null!==f&&s.push({plugin:c,options:Pu(t.config,{plugin:c,local:a[h]},f,l)})}}catch(p){u.e(p)}finally{u.f()}return s}(t,i,r,e):[]}},{key:"_notifyStateChanges",value:function(t){var e=this._oldCache||[],n=this._cache,r=function(t,e){return t.filter((function(t){return!e.some((function(e){return t.plugin.id===e.plugin.id}))}))};this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}]),t}();function Cu(t,e){return e||!1!==t?!0===t?{}:t:null}function Pu(t,e,n,r){var i=e.plugin,o=e.local,a=t.pluginScopeKeys(i),s=t.getOptionScopes(n,a);return o&&i.defaults&&s.push(i.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Au(t,e){var n=Sa.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Lu(t){if("x"===t||"y"===t||"r"===t)return t}function Du(t){if(Lu(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i],s=a.axis||("top"===(l=a.position)||"bottom"===l?"x":"left"===l||"right"===l?"y":void 0)||t.length>1&&Lu(t[0].toLowerCase());if(s)return s}var l;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function Ru(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Ou(t,e){var n=xa[t.type]||{scales:{}},r=e.scales||{},i=Au(t.type,e),o=Object.create(null);return Object.keys(r).forEach((function(e){var a=r[e];if(!ro(a))return console.error("Invalid scale configuration for scale: ".concat(e));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=Du(e,a,function(t,e){if(e.data&&e.data.datasets){var n=e.data.datasets.filter((function(e){return e.xAxisID===t||e.yAxisID===t}));if(n.length)return Ru(t,"x",n[0])||Ru(t,"y",n[0])}return{}}(e,t),Sa.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(s,i),u=n.scales||{};o[e]=yo(Object.create(null),[{axis:s},a,u[s],u[l]])})),t.data.datasets.forEach((function(n){var i=n.type||t.type,a=n.indexAxis||Au(i,e),s=(xa[i]||{}).scales||{};Object.keys(s).forEach((function(t){var e=function(t,e){var n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),i=n[e+"AxisID"]||e;o[i]=o[i]||Object.create(null),yo(o[i],[{axis:e},r[i],s[t]])}))})),Object.keys(o).forEach((function(t){var e=o[t];yo(e,[Sa.scales[e.type],Sa.scale])})),o}function zu(t){var e=t.options||(t.options={});e.plugins=ao(e.plugins,{}),e.scales=Ou(t,e)}function Nu(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}var Fu=new Map,Bu=new Set;function ju(t,e){var n=Fu.get(t);return n||(n=e(),Fu.set(t,n),Bu.add(n)),n}var Uu=function(t,e,n){var r=xo(e,n);void 0!==r&&t.add(r)},Vu=function(){function t(e){(0,mi.Z)(this,t),this._config=function(t){return(t=t||{}).data=Nu(t.data),zu(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}return(0,_i.Z)(t,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(t){this._config.type=t}},{key:"data",get:function(){return this._config.data},set:function(t){this._config.data=Nu(t)}},{key:"options",get:function(){return this._config.options},set:function(t){this._config.options=t}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var t=this._config;this.clearCache(),zu(t)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(t){return ju(t,(function(){return[["datasets.".concat(t),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(t,e){return ju("".concat(t,".transition.").concat(e),(function(){return[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]}))}},{key:"datasetElementScopeKeys",value:function(t,e){return ju("".concat(t,"-").concat(e),(function(){return[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]}))}},{key:"pluginScopeKeys",value:function(t){var e=t.id,n=this.type;return ju("".concat(n,"-plugin-").concat(e),(function(){return[["plugins.".concat(e)].concat(Kr(t.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(t,e){var n=this._scopeCache,r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}},{key:"getOptionScopes",value:function(t,e,n){var r=this.options,i=this.type,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;var s=new Set;e.forEach((function(e){t&&(s.add(t),e.forEach((function(e){return Uu(s,t,e)}))),e.forEach((function(t){return Uu(s,r,t)})),e.forEach((function(t){return Uu(s,xa[i]||{},t)})),e.forEach((function(t){return Uu(s,Sa,t)})),e.forEach((function(t){return Uu(s,ba,t)}))}));var l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Bu.has(e)&&o.set(e,l),l}},{key:"chartOptionScopes",value:function(){var t=this.options,e=this.type;return[t,xa[e]||{},Sa.datasets[e]||{},{type:e},Sa,ba]}},{key:"resolveNamedOptions",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],i={$shared:!0},o=Gu(this._resolverCache,t,r),a=o.resolver,s=o.subPrefixes,l=a;(function(t,e){var n,r=ts(t),i=r.isScriptable,o=r.isIndexable,a=gi(e);try{for(a.s();!(n=a.n()).done;){var s=n.value,l=i(s),u=o(s),c=(u||l)&&t[s];if(l&&(ko(c)||qu(c))||u&&no(c))return!0}}catch(h){a.e(h)}finally{a.f()}return!1})(a,e)&&(i.$shared=!1,l=$a(a,n=ko(n)?n():n,this.createResolver(t,n,s)));var u,c=gi(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;i[h]=l[h]}}catch(f){c.e(f)}finally{c.f()}return i}},{key:"createResolver",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,i=Gu(this._resolverCache,t,n).resolver;return ro(e)?$a(i,e,void 0,r):i}}]),t}();function Gu(t,e,n){var r=t.get(e);r||(r=new Map,t.set(e,r));var i=n.join(),o=r.get(i);o||(o={resolver:Qa(e,n),subPrefixes:n.filter((function(t){return!t.toLowerCase().includes("hover")}))},r.set(i,o));return o}var qu=function(t){return ro(t)&&Object.getOwnPropertyNames(t).reduce((function(e,n){return e||ko(t[n])}),!1)};var Zu=["top","bottom","left","right","chartArea"];function Wu(t,e){return"top"===t||"bottom"===t||-1===Zu.indexOf(t)&&"x"===e}function Xu(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Hu(t){var e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),lo(n&&n.onComplete,[t],e)}function Yu(t){var e=t.chart,n=e.options.animation;lo(n&&n.onProgress,[t],e)}function Ku(t){return _s()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var Ju={},Qu=function(t){var e=Ku(t);return Object.values(Ju).filter((function(t){return t.canvas===e})).pop()};function $u(t,e,n){for(var r=0,i=Object.keys(t);r<i.length;r++){var o=i[r],a=+o;if(a>=e){var s=t[o];delete t[o],(n>0||a>e)&&(t[a+n]=s)}}}var tc=function(){function t(e,n){var r=this;(0,mi.Z)(this,t);var i=this.config=new Vu(n),o=Ku(e),a=Qu(o);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");var s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!_s()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ql:pu}(o)),this.platform.updateConfig(i);var l=this.platform.acquireContext(o,s.aspectRatio),u=l&&l.canvas,c=u&&u.height,h=u&&u.width;this.id=to(),this.ctx=l,this.canvas=u,this.width=h,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Iu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((function(t){return r.update(t)}),s.resizeDelay||0),this._dataChanges=[],Ju[this.id]=this,l&&u?(Ws.listen(this,"complete",Hu),Ws.listen(this,"progress",Yu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return(0,_i.Z)(t,[{key:"aspectRatio",get:function(){var t=this.options,e=t.aspectRatio,n=t.maintainAspectRatio,r=this.width,i=this.height,o=this._aspectRatio;return eo(e)?n&&o?o:i?r/i:null:e}},{key:"data",get:function(){return this.config.data},set:function(t){this.config.data=t}},{key:"options",get:function(){return this._options},set:function(t){this.config.options=t}},{key:"registry",get:function(){return Mu}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cs(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return Ca(this.canvas,this.ctx),this}},{key:"stop",value:function(){return Ws.stop(this),this}},{key:"resize",value:function(t,e){Ws.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}},{key:"_resize",value:function(t,e){var n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Cs(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),lo(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){uo(this.options.scales||{},(function(t,e){t.id=e}))}},{key:"buildOrUpdateScales",value:function(){var t=this,e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((function(t,e){return t[e]=!1,t}),{}),o=[];n&&(o=o.concat(Object.keys(n).map((function(t){var e=n[t],r=Du(t,e),i="r"===r,o="x"===r;return{options:e,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),uo(o,(function(n){var o=n.options,a=o.id,s=Du(a,o),l=ao(o.type,n.dtype);void 0!==o.position&&Wu(o.position,s)===Wu(n.dposition)||(o.position=n.dposition),i[a]=!0;var u=null;a in r&&r[a].type===l?u=r[a]:(u=new(Mu.getScale(l))({id:a,type:l,ctx:t.ctx,chart:t}),r[u.id]=u);u.init(o,e)})),uo(i,(function(t,e){t||delete r[e]})),uo(r,(function(e){Yl(t,e,e.options),Xl(t,e)}))}},{key:"_updateMetasets",value:function(){var t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((function(t,e){return t.index-e.index})),n>e){for(var r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Xu("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var t=this,e=this._metasets,n=this.data.datasets;e.length>n.length&&delete this._stacks,e.forEach((function(e,r){0===n.filter((function(t){return t===e._dataset})).length&&t._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var t,e,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=r.length;t<e;t++){var i=r[t],o=this.getDatasetMeta(t),a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(t),o=this.getDatasetMeta(t)),o.type=a,o.indexAxis=i.indexAxis||Au(a,this.options),o.order=i.order||0,o.index=t,o.label=""+i.label,o.visible=this.isDatasetVisible(t),o.controller)o.controller.updateIndex(t),o.controller.linkScales();else{var s=Mu.getController(a),l=Sa.datasets[a],u=l.datasetElementType,c=l.dataElementType;Object.assign(s,{dataElementType:Mu.getElement(c),datasetElementType:u&&Mu.getElement(u)}),o.controller=new s(this,t),n.push(o.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var t=this;uo(this.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(t){var e=this.config;e.update();var n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})){var i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var o=0,a=0,s=this.data.datasets.length;a<s;a++){var l=this.getDatasetMeta(a).controller,u=!r&&-1===i.indexOf(l);l.buildOrUpdateElements(u),o=Math.max(+l.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||uo(i,(function(t){t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Xu("z","_idx"));var c=this._active,h=this._lastEvent;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}}},{key:"_updateScales",value:function(){var t=this;uo(this.scales,(function(e){Hl(t,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Eo(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var t,e=this._hiddenIndices,n=gi(this._getUniformDataChanges()||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.method,o=r.start,a=r.count;$u(e,o,"_removeElements"===i?-a:a)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var t=this._dataChanges;if(t&&t.length){this._dataChanges=[];for(var e=this.data.datasets.length,n=function(e){return new Set(t.filter((function(t){return t[0]===e})).map((function(t,e){return e+","+t.splice(1).join(",")})))},r=n(0),i=1;i<e;i++)if(!Eo(r,n(i)))return;return Array.from(r).map((function(t){return t.split(",")})).map((function(t){return{method:t[1],start:+t[2],count:+t[3]}}))}}},{key:"_updateLayout",value:function(t){var e=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){Kl(this,this.width,this.height,t);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],uo(this.boxes,(function(t){var n;r&&"chartArea"===t.position||(t.configure&&t.configure(),(n=e._layers).push.apply(n,Kr(t._layers())))}),this),this._layers.forEach((function(t,e){t._idx=e})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(var e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(var r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,ko(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}},{key:"_updateDataset",value:function(t,e){var n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ws.has(this)?this.attached&&!Ws.running(this)&&Ws.start(this):(this.draw(),Hu({chart:this})))}},{key:"draw",value:function(){var t;if(this._resizeBeforeDraw){var e=this._resizeBeforeDraw,n=e.width,r=e.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(t){var e,n,r=this._sortedMetasets,i=[];for(e=0,n=r.length;e<n;++e){var o=r[e];t&&!o.visible||i.push(o)}return i}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var t=this.getSortedVisibleDatasetMetas(),e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(t){var e=this.ctx,n=t._clip,r=!n.disabled,i=function(t){var e=t.xScale,n=t.yScale;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&Da(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&Ra(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}},{key:"isPointInArea",value:function(t){return La(t,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(t,e,n,r){var i=Rl.modes[e];return"function"===typeof i?i(this,t,n,r):[]}},{key:"getDatasetMeta",value:function(t){var e=this.data.datasets[t],n=this._metasets,r=n.filter((function(t){return t&&t._dataset===e})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=Ja(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(t){var e=this.data.datasets[t];if(!e)return!1;var n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}},{key:"setDatasetVisibility",value:function(t,e){this.getDatasetMeta(t).hidden=!e}},{key:"toggleDataVisibility",value:function(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}},{key:"getDataVisibility",value:function(t){return!this._hiddenIndices[t]}},{key:"_updateVisibility",value:function(t,e,n){var r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);wo(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update((function(e){return e.datasetIndex===t?r:void 0})))}},{key:"hide",value:function(t,e){this._updateVisibility(t,e,!1)}},{key:"show",value:function(t,e){this._updateVisibility(t,e,!0)}},{key:"_destroyDatasetMeta",value:function(t){var e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}},{key:"_stop",value:function(){var t,e;for(this.stop(),Ws.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var t=this.canvas,e=this.ctx;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ca(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ju[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var t;return(t=this.canvas).toDataURL.apply(t,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var t=this,e=this._listeners,n=this.platform,r=function(e,n,r){e.offsetX=n,e.offsetY=r,t._eventHandler(e)};uo(this.options.events,(function(i){return function(r,i){n.addEventListener(t,r,i),e[r]=i}(i,r)}))}},{key:"bindResponsiveEvents",value:function(){var t=this;this._responsiveListeners||(this._responsiveListeners={});var e,n=this._responsiveListeners,r=this.platform,i=function(e,i){r.addEventListener(t,e,i),n[e]=i},o=function(e,i){n[e]&&(r.removeEventListener(t,e,i),delete n[e])},a=function(e,n){t.canvas&&t.resize(e,n)},s=function n(){o("attach",n),t.attached=!0,t.resize(),i("resize",a),i("detach",e)};e=function(){t.attached=!1,o("resize",a),t._stop(),t._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():e()}},{key:"unbindEvents",value:function(){var t=this;uo(this._listeners,(function(e,n){t.platform.removeEventListener(t,n,e)})),this._listeners={},uo(this._responsiveListeners,(function(e,n){t.platform.removeEventListener(t,n,e)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(t,e,n){var r,i,o,a=n?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+a+"DatasetHoverStyle"](),i=0,o=t.length;i<o;++i){var s=(r=t[i])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[a+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(t){var e=this,n=this._active||[],r=t.map((function(t){var n=t.datasetIndex,r=t.index,i=e.getDatasetMeta(n);if(!i)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:i.data[r],index:r}}));!co(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(t,e,n){return this._plugins.notify(this,t,e,n)}},{key:"isPluginEnabled",value:function(t){return 1===this._plugins._cache.filter((function(e){return e.plugin.id===t})).length}},{key:"_updateHoverStyles",value:function(t,e,n){var r=this.options.hover,i=function(t,e){return t.filter((function(t){return!e.some((function(e){return t.datasetIndex===e.datasetIndex&&t.index===e.index}))}))},o=i(e,t),a=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}},{key:"_eventHandler",value:function(t,e){var n=this,r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=function(e){return(e.options.events||n.options.events).includes(t.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,i)){var o=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(t,e,n){var r=this._active,i=void 0===r?[]:r,o=this.options,a=e,s=this._getActiveElements(t,i,n,a),l=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),u=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,l);n&&(this._lastEvent=null,lo(o.onHover,[t,s,this],this),l&&lo(o.onClick,[t,s,this],this));var c=!co(s,i);return(c||e)&&(this._active=s,this._updateHoverStyles(s,i,e)),this._lastEvent=u,c}},{key:"_getActiveElements",value:function(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;var i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}],[{key:"register",value:function(){Mu.add.apply(Mu,arguments),ec()}},{key:"unregister",value:function(){Mu.remove.apply(Mu,arguments),ec()}}]),t}();function ec(){return uo(tc.instances,(function(t){return t._plugins.invalidate()}))}function nc(t,e,n,r){var i=function(t){return Za(t,["outerStart","outerEnd","innerStart","innerEnd"])}(t.options.borderRadius),o=(n-e)/2,a=Math.min(o,r*e/2),s=function(t){var e=(n-Math.min(o,t))*r/2;return Xo(t,0,Math.min(o,e))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:Xo(i.innerStart,0,a),innerEnd:Xo(i.innerEnd,0,a)}}function rc(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ic(t,e,n,r,i,o){var a=e.x,s=e.y,l=e.startAngle,u=e.pixelMargin,c=e.innerRadius,h=Math.max(e.outerRadius+r+n-u,0),f=c>0?c+r+n+u:0,p=0,d=i-l;if(r){var v=((c>0?c-r:0)+(h>0?h-r:0))/2;p=(d-(0!==v?d*v/(v+r):d))/2}var y=(d-Math.max(.001,d*h-n/So)/h)/2,g=l+y+p,m=i-y-p,_=nc(e,f,h,m-g),x=_.outerStart,b=_.outerEnd,w=_.innerStart,k=_.innerEnd,E=h-x,S=h-b,T=g+x/E,M=m-b/S,I=f+w,C=f+k,P=g+w/I,A=m-k/C;if(t.beginPath(),o){var L=(T+M)/2;if(t.arc(a,s,h,T,L),t.arc(a,s,h,L,M),b>0){var D=rc(S,M,a,s);t.arc(D.x,D.y,b,M,m+Po)}var R=rc(C,m,a,s);if(t.lineTo(R.x,R.y),k>0){var O=rc(C,A,a,s);t.arc(O.x,O.y,k,m+Po,A+Math.PI)}var z=(m-k/f+(g+w/f))/2;if(t.arc(a,s,f,m-k/f,z,!0),t.arc(a,s,f,z,g+w/f,!0),w>0){var N=rc(I,P,a,s);t.arc(N.x,N.y,w,P+Math.PI,g-Po)}var F=rc(E,g,a,s);if(t.lineTo(F.x,F.y),x>0){var B=rc(E,T,a,s);t.arc(B.x,B.y,x,g-Po,T)}}else{t.moveTo(a,s);var j=Math.cos(T)*h+a,U=Math.sin(T)*h+s;t.lineTo(j,U);var V=Math.cos(M)*h+a,G=Math.sin(M)*h+s;t.lineTo(V,G)}t.closePath()}function oc(t,e,n,r,i){var o=e.fullCircles,a=e.startAngle,s=e.circumference,l=e.options,u=l.borderWidth,c=l.borderJoinStyle,h=l.borderDash,f=l.borderDashOffset,p="inner"===l.borderAlign;if(u){t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=2*u,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel");var d=e.endAngle;if(o){ic(t,e,n,r,d,i);for(var v=0;v<o;++v)t.stroke();isNaN(s)||(d=a+(s%To||To))}p&&function(t,e,n){var r=e.startAngle,i=e.pixelMargin,o=e.x,a=e.y,s=e.outerRadius,l=e.innerRadius,u=i/s;t.beginPath(),t.arc(o,a,s,r-u,n+u),l>i?(u=i/l,t.arc(o,a,l,n+u,r-u,!0)):t.arc(o,a,i,n+Po,r-Po),t.closePath(),t.clip()}(t,e,d),o||(ic(t,e,n,r,d,i),t.stroke())}}i(tc,"defaults",Sa),i(tc,"instances",Ju),i(tc,"overrides",xa),i(tc,"registry",Mu),i(tc,"version","4.3.0"),i(tc,"getChart",Qu);var ac=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),i(hi(r=e.call(this)),"circumference",void 0),i(hi(r),"endAngle",void 0),i(hi(r),"fullCircles",void 0),i(hi(r),"innerRadius",void 0),i(hi(r),"outerRadius",void 0),i(hi(r),"pixelMargin",void 0),i(hi(r),"startAngle",void 0),r.options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,t&&Object.assign(hi(r),t),r}return(0,_i.Z)(n,[{key:"inRange",value:function(t,e,n){var r=Vo(this.getProps(["x","y"],n),{x:t,y:e}),i=r.angle,o=r.distance,a=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=a.startAngle,l=a.endAngle,u=a.innerRadius,c=a.outerRadius,h=a.circumference,f=(this.options.spacing+this.options.borderWidth)/2,p=ao(h,l-s)>=To||Wo(i,s,l),d=Ho(o,u+f,c+f);return p&&d}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),n=e.x,r=e.y,i=e.startAngle,o=e.endAngle,a=e.innerRadius,s=e.outerRadius,l=this.options,u=l.offset,c=(i+o)/2,h=(a+s+l.spacing+u)/2;return{x:n+Math.cos(c)*h,y:r+Math.sin(c)*h}}},{key:"tooltipPosition",value:function(t){return this.getCenterPoint(t)}},{key:"draw",value:function(t){var e=this.options,n=this.circumference,r=(e.offset||0)/4,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>To?Math.floor(n/To):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){t.save();var a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);var s=r*(1-Math.sin(Math.min(So,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){var o=e.fullCircles,a=e.startAngle,s=e.circumference,l=e.endAngle;if(o){ic(t,e,n,r,l,i);for(var u=0;u<o;++u)t.fill();isNaN(s)||(l=a+(s%To||To))}ic(t,e,n,r,l,i),t.fill()}(t,this,s,i,o),oc(t,this,s,i,o),t.restore()}}}]),n}(du);function sc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=ao(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ao(n.borderDash,e.borderDash)),t.lineDashOffset=ao(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ao(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ao(n.borderWidth,e.borderWidth),t.strokeStyle=ao(n.borderColor,e.borderColor)}function lc(t,e,n){t.lineTo(n.x,n.y)}function uc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.length,i=n.start,o=void 0===i?0:i,a=n.end,s=void 0===a?r-1:a,l=e.start,u=e.end,c=Math.max(o,l),h=Math.min(s,u),f=o<l&&s<l||o>u&&s>u;return{count:r,start:c,loop:e.loop,ilen:h<c&&!f?r+h-c:h-c}}function cc(t,e,n,r){var i,o,a,s=e.points,l=e.options,u=uc(s,n,r),c=u.count,h=u.start,f=u.loop,p=u.ilen,d=function(t){return t.stepped?Oa:t.tension||"monotone"===t.cubicInterpolationMode?za:lc}(l),v=r||{},y=v.move,g=void 0===y||y,m=v.reverse;for(i=0;i<=p;++i)(o=s[(h+(m?p-i:i))%c]).skip||(g?(t.moveTo(o.x,o.y),g=!1):d(t,a,o,m,l.stepped),a=o);return f&&d(t,a,o=s[(h+(m?p:0))%c],m,l.stepped),!!f}function hc(t,e,n,r){var i,o,a,s,l,u,c=e.points,h=uc(c,n,r),f=h.count,p=h.start,d=h.ilen,v=r||{},y=v.move,g=void 0===y||y,m=v.reverse,_=0,x=0,b=function(t){return(p+(m?d-t:t))%f},w=function(){s!==l&&(t.lineTo(_,l),t.lineTo(_,s),t.lineTo(_,u))};for(g&&(o=c[b(0)],t.moveTo(o.x,o.y)),i=0;i<=d;++i)if(!(o=c[b(i)]).skip){var k=o.x,E=o.y,S=0|k;S===a?(E<s?s=E:E>l&&(l=E),_=(x*_+k)/++x):(w(),t.lineTo(k,E),a=S,x=0,s=l=E),u=E}w()}function fc(t){var e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?hc:cc}i(ac,"id","arc"),i(ac,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),i(ac,"defaultRoutes",{backgroundColor:"backgroundColor"}),i(ac,"descriptors",{_scriptable:!0,_indexable:function(t){return"borderDash"!==t}});var pc="function"===typeof Path2D;function dc(t,e,n,r){pc&&!e.options.segment?function(t,e,n,r){var i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),sc(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){var i,o=e.segments,a=e.options,s=fc(e),l=gi(o);try{for(l.s();!(i=l.n()).done;){var u=i.value;sc(t,a,u.style),t.beginPath(),s(t,e,u,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}}catch(c){l.e(c)}finally{l.f()}}(t,e,n,r)}var vc=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,t&&Object.assign(hi(r),t),r}return(0,_i.Z)(n,[{key:"updateControlPoints",value:function(t,e){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;ms(this._points,n,t,r,e),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(t,e){var n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];var o=!!t._loop,a=function(t,e,n,r){var i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return{start:i,end:o%=e}}(n,i,o,r),s=a.start,l=a.end;return Vs(t,!0===r?[{start:s,end:l,loop:o}]:function(t,e,n,r){var i,o=t.length,a=[],s=e,l=t[e];for(i=e+1;i<=n;++i){var u=t[i%o];u.skip||u.stop?l.skip||(r=!1,a.push({start:e%o,end:(i-1)%o,loop:r}),e=s=u.stop?i:null):(s=i,l.skip&&(e=i)),l=u}return null!==s&&a.push({start:e%o,end:s%o,loop:r}),a}(n,s,l<s?l+i:l,!!t._fullLoop&&0===s&&l===i-1),n,e)}(this,this.options.segment))}},{key:"first",value:function(){var t=this.segments,e=this.points;return t.length&&e[t[0].start]}},{key:"last",value:function(){var t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}},{key:"interpolate",value:function(t,e){var n=this.options,r=t[e],i=this.points,o=Us(this,{property:e,start:r,end:r});if(o.length){var a,s,l=[],u=function(t){return t.stepped?Ds:t.tension||"monotone"===t.cubicInterpolationMode?Rs:Ls}(n);for(a=0,s=o.length;a<s;++a){var c=o[a],h=c.start,f=c.end,p=i[h],d=i[f];if(p!==d){var v=u(p,d,Math.abs((r-p[e])/(d[e]-p[e])),n.stepped);v[e]=t[e],l.push(v)}else l.push(p)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(t,e,n){return fc(this)(t,this,e,n)}},{key:"path",value:function(t,e,n){var r=this.segments,i=fc(this),o=this._loop;e=e||0,n=n||this.points.length-e;var a,s=gi(r);try{for(s.s();!(a=s.n()).done;){o&=i(t,this,a.value,{start:e,end:e+n-1})}}catch(l){s.e(l)}finally{s.f()}return!!o}},{key:"draw",value:function(t,e,n,r){var i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),dc(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(du);function yc(t,e,n,r){var i=t.options,o=t.getProps([n],r)[n];return Math.abs(e-o)<i.radius+i.hitRadius}i(vc,"id","line"),i(vc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),i(vc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),i(vc,"descriptors",{_scriptable:!0,_indexable:function(t){return"borderDash"!==t&&"fill"!==t}});var gc=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),i(hi(r=e.call(this)),"parsed",void 0),i(hi(r),"skip",void 0),i(hi(r),"stop",void 0),r.options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,t&&Object.assign(hi(r),t),r}return(0,_i.Z)(n,[{key:"inRange",value:function(t,e,n){var r=this.options,i=this.getProps(["x","y"],n),o=i.x,a=i.y;return Math.pow(t-o,2)+Math.pow(e-a,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(t,e){return yc(this,t,"x",e)}},{key:"inYRange",value:function(t,e){return yc(this,t,"y",e)}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y"],t);return{x:e.x,y:e.y}}},{key:"size",value:function(t){var e=(t=t||this.options||{}).radius||0;return 2*((e=Math.max(e,e&&t.hoverRadius||0))+(e&&t.borderWidth||0))}},{key:"draw",value:function(t,e){var n=this.options;this.skip||n.radius<.1||!La(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Pa(t,n,this.x,this.y))}},{key:"getRange",value:function(){var t=this.options||{};return t.radius+t.hitRadius}}]),n}(du);function mc(t,e){var n,r,i,o,a,s=t.getProps(["x","y","base","width","height"],e),l=s.x,u=s.y,c=s.base,h=s.width,f=s.height;return t.horizontal?(a=f/2,n=Math.min(l,c),r=Math.max(l,c),i=u-a,o=u+a):(n=l-(a=h/2),r=l+a,i=Math.min(u,c),o=Math.max(u,c)),{left:n,top:i,right:r,bottom:o}}function _c(t,e,n,r){return t?0:Xo(e,n,r)}function xc(t){var e=mc(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){var r=t.options.borderWidth,i=t.borderSkipped,o=Wa(r);return{t:_c(i.top,o.top,0,n),r:_c(i.right,o.right,0,e),b:_c(i.bottom,o.bottom,0,n),l:_c(i.left,o.left,0,e)}}(t,n/2,r/2),o=function(t,e,n){var r=t.getProps(["enableBorderRadius"]).enableBorderRadius,i=t.options.borderRadius,o=Xa(i),a=Math.min(e,n),s=t.borderSkipped,l=r||ro(i);return{topLeft:_c(!l||s.top||s.left,o.topLeft,0,a),topRight:_c(!l||s.top||s.right,o.topRight,0,a),bottomLeft:_c(!l||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:_c(!l||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function bc(t,e,n,r){var i=null===e,o=null===n,a=t&&!(i&&o)&&mc(t,r);return a&&(i||Ho(e,a.left,a.right))&&(o||Ho(n,a.top,a.bottom))}function wc(t,e){t.rect(e.x,e.y,e.w,e.h)}function kc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+a,radius:t.radius}}i(gc,"id","point"),i(gc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),i(gc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ec=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,t&&Object.assign(hi(r),t),r}return(0,_i.Z)(n,[{key:"draw",value:function(t){var e,n=this.inflateAmount,r=this.options,i=r.borderColor,o=r.backgroundColor,a=xc(this),s=a.inner,l=a.outer,u=(e=l.radius).topLeft||e.topRight||e.bottomLeft||e.bottomRight?ja:wc;t.save(),l.w===s.w&&l.h===s.h||(t.beginPath(),u(t,kc(l,n,s)),t.clip(),u(t,kc(s,-n,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,kc(s,n)),t.fillStyle=o,t.fill(),t.restore()}},{key:"inRange",value:function(t,e,n){return bc(this,t,e,n)}},{key:"inXRange",value:function(t,e){return bc(this,t,null,e)}},{key:"inYRange",value:function(t,e){return bc(this,null,t,e)}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","base","horizontal"],t),n=e.x,r=e.y,i=e.base,o=e.horizontal;return{x:o?(n+i)/2:n,y:o?r:(r+i)/2}}},{key:"getRange",value:function(t){return"x"===t?this.width/2:this.height/2}}]),n}(du);i(Ec,"id","bar"),i(Ec,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),i(Ec,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Sc=Object.freeze({__proto__:null,ArcElement:ac,BarElement:Ec,LineElement:vc,PointElement:gc}),Tc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Mc=Tc.map((function(t){return t.replace("rgb(","rgba(").replace(")",", 0.5)")}));function Ic(t){return Tc[t%Tc.length]}function Cc(t){return Mc[t%Mc.length]}function Pc(t){var e=0;return function(n,r){var i=t.getDatasetMeta(r).controller;i instanceof _l?e=function(t,e){return t.backgroundColor=t.data.map((function(){return Ic(e++)})),e}(n,e):i instanceof bl?e=function(t,e){return t.backgroundColor=t.data.map((function(){return Cc(e++)})),e}(n,e):i&&(e=function(t,e){return t.borderColor=Ic(e),t.backgroundColor=Cc(e),++e}(n,e))}}function Ac(t){var e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Lc={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout:function(t,e,n){if(n.enabled){var r=t.config,i=r.data.datasets,o=r.options,a=o.elements;if(n.forceOverride||!(Ac(i)||(s=o,s&&(s.borderColor||s.backgroundColor))||a&&Ac(a))){var s,l=Pc(t);i.forEach(l)}}}};function Dc(t){if(t._decimated){var e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Rc(t){t.data.datasets.forEach((function(t){Dc(t)}))}var Oc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:function(t,e,n){if(n.enabled){var r=t.width;t.data.datasets.forEach((function(e,i){var o=e._data,s=e.indexAxis,l=t.getDatasetMeta(i),u=o||e.data;if("y"!==Ka([s,t.options.indexAxis])&&l.controller.supportsDecimation){var c=t.scales[l.xAxisID];if(("linear"===c.type||"time"===c.type)&&!t.options.parsing){var h=function(t,e){var n=e.length,r=0,i=t.iScale,o=i.getUserBounds(),a=o.min,s=o.max,l=o.minDefined,u=o.maxDefined;return l&&(r=Xo(Ko(e,i.axis,a).lo,0,n-1)),{start:r,count:u?Xo(Ko(e,i.axis,s).hi+1,r,n)-r:n-r}}(l,u),f=h.start,p=h.count;if(p<=(n.threshold||4*r))Dc(e);else{var d;switch(eo(o)&&(e._data=u,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,r,i){var o=i.samples||r;if(o>=n)return t.slice(e,e+n);var a,s,l,u,c,h=[],f=(n-2)/(o-2),p=0,d=e+n-1,v=e;for(h[p++]=t[v],a=0;a<o-2;a++){var y=0,g=0,m=void 0,_=Math.floor((a+1)*f)+1+e,x=Math.min(Math.floor((a+2)*f)+1,n)+e,b=x-_;for(m=_;m<x;m++)y+=t[m].x,g+=t[m].y;y/=b,g/=b;var w=Math.floor(a*f)+1+e,k=Math.min(Math.floor((a+1)*f)+1,n)+e,E=t[v],S=E.x,T=E.y;for(l=u=-1,m=w;m<k;m++)(u=.5*Math.abs((S-y)*(t[m].y-T)-(S-t[m].x)*(g-T)))>l&&(l=u,s=t[m],c=m);h[p++]=s,v=c}return h[p++]=t[d],h}(u,f,p,r,n);break;case"min-max":d=function(t,e,n,r){var i,o,s,l,u,c,h,f,p,d,v=0,y=0,g=[],m=e+n-1,_=t[e].x,x=t[m].x-_;for(i=e;i<e+n;++i){s=((o=t[i]).x-_)/x*r,l=o.y;var b=0|s;if(b===u)l<p?(p=l,c=i):l>d&&(d=l,h=i),v=(y*v+o.x)/++y;else{var w=i-1;if(!eo(c)&&!eo(h)){var k=Math.min(c,h),E=Math.max(c,h);k!==f&&k!==w&&g.push(a(a({},t[k]),{},{x:v})),E!==f&&E!==w&&g.push(a(a({},t[E]),{},{x:v}))}i>0&&w!==f&&g.push(t[w]),g.push(o),u=b,y=0,p=d=l,c=h=f=i}}return g}(u,f,p,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}e._decimated=d}}}}))}else Rc(t)},destroy:function(t){Rc(t)}};function zc(t,e,n,r){if(!r){var i=e[t],o=n[t];return"angle"===t&&(i=Zo(i),o=Zo(o)),{property:t,start:i,end:o}}}function Nc(t,e,n){for(;e>t;e--){var r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Fc(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Bc(t,e){var n=[],r=!1;return no(t)?(r=!0,n=t):n=function(t,e){var n=t||{},r=n.x,i=void 0===r?null:r,o=n.y,a=void 0===o?null:o,s=e.points,l=[];return e.segments.forEach((function(t){var e=t.start,n=t.end;n=Nc(e,n,s);var r=s[e],o=s[n];null!==a?(l.push({x:r.x,y:a}),l.push({x:o.x,y:a})):null!==i&&(l.push({x:i,y:r.y}),l.push({x:i,y:o.y}))})),l}(t,e),n.length?new vc({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function jc(t){return t&&!1!==t.fill}function Uc(t,e,n){var r,i=t[e].fill,o=[e];if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!io(i))return i;if(!(r=t[i]))return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function Vc(t,e,n){var r=function(t){var e=t.options,n=e.fill,r=ao(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(ro(r))return!isNaN(r.value)&&r;var i=parseFloat(r);return io(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Gc(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=qc(n[i],e,"x"),a=o.first,s=o.last,l=o.point;if(!(!l||a&&s))if(a)r.unshift(l);else if(t.push(l),!s)break}t.push.apply(t,r)}function qc(t,e,n){var r=t.interpolate(e,n);if(!r)return{};for(var i=r[n],o=t.segments,a=t.points,s=!1,l=!1,u=0;u<o.length;u++){var c=o[u],h=a[c.start][n],f=a[c.end][n];if(Ho(i,h,f)){s=i===h,l=i===f;break}}return{first:s,last:l,point:r}}var Zc=function(){function t(e){(0,mi.Z)(this,t),this.x=e.x,this.y=e.y,this.radius=e.radius}return(0,_i.Z)(t,[{key:"pathSegment",value:function(t,e,n){var r=this.x,i=this.y,o=this.radius;return e=e||{start:0,end:To},t.arc(r,i,o,e.end,e.start,!0),!n.bounds}},{key:"interpolate",value:function(t){var e=this.x,n=this.y,r=this.radius,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}]),t}();function Wc(t){var e=t.chart,n=t.fill,r=t.line;if(io(n))return function(t,e){var n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){var e=t.scale,n=t.index,r=t.line,i=[],o=r.segments,a=r.points,s=function(t,e){for(var n=[],r=t.getMatchingVisibleMetas("line"),i=0;i<r.length;i++){var o=r[i];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}(e,n);s.push(Bc({x:null,y:e.bottom},r));for(var l=0;l<o.length;l++)for(var u=o[l],c=u.start;c<=u.end;c++)Gc(i,a[c],s);return new vc({points:i,options:{}})}(t);if("shape"===n)return!0;var i=function(t){var e=t.scale||{};if(e.getPointPositionForValue)return function(t){var e=t.scale,n=t.fill,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,a=function(t,e,n){return"start"===t?n:"end"===t?e.options.reverse?e.min:e.max:ro(t)?t.value:e.getBaseValue()}(n,e,o),s=[];if(r.grid.circular){var l=e.getPointPositionForValue(0,o);return new Zc({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(var u=0;u<i;++u)s.push(e.getPointPositionForValue(u,a));return s}(t);return function(t){var e=t.scale,n=void 0===e?{}:e,r=t.fill,i=function(t,e){var n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:ro(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(r,n);if(io(i)){var o=n.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}(t)}(t);return i instanceof Zc?i:Bc(i,r)}function Xc(t,e,n){var r=Wc(e),i=e.line,o=e.scale,a=e.axis,s=i.options,l=s.fill,u=s.backgroundColor,c=l||{},h=c.above,f=void 0===h?u:h,p=c.below,d=void 0===p?u:p;r&&i.points.length&&(Da(t,n),function(t,e){var n=e.line,r=e.target,i=e.above,o=e.below,a=e.area,s=e.scale,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==i&&(Hc(t,r,a.top),Yc(t,{line:n,target:r,color:i,scale:s,property:l}),t.restore(),t.save(),Hc(t,r,a.bottom));Yc(t,{line:n,target:r,color:o,scale:s,property:l}),t.restore()}(t,{line:i,target:r,above:f,below:d,area:n,scale:o,axis:a}),Ra(t))}function Hc(t,e,n){var r=e.segments,i=e.points,o=!0,a=!1;t.beginPath();var s,l=gi(r);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.start,h=u.end,f=i[c],p=i[Nc(c,h,i)];o?(t.moveTo(f.x,f.y),o=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),(a=!!e.pathSegment(t,u,{move:a}))?t.closePath():t.lineTo(p.x,n)}}catch(d){l.e(d)}finally{l.f()}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Yc(t,e){var n,r=e.line,o=e.target,a=e.property,s=e.color,l=e.scale,u=function(t,e,n){var r,o=t.segments,a=t.points,s=e.points,l=[],u=gi(o);try{for(u.s();!(r=u.n()).done;){var c=r.value,h=c.start,f=c.end;f=Nc(h,f,a);var p=zc(n,a[h],a[f],c.loop);if(e.segments){var d,v=gi(Us(e,p));try{for(v.s();!(d=v.n()).done;){var y,g=d.value,m=zc(n,s[g.start],s[g.end],g.loop),_=gi(js(c,a,m));try{for(_.s();!(y=_.n()).done;){var x=y.value;l.push({source:x,target:g,start:i({},n,Fc(p,m,"start",Math.max)),end:i({},n,Fc(p,m,"end",Math.min))})}}catch(b){_.e(b)}finally{_.f()}}}catch(b){v.e(b)}finally{v.f()}}else l.push({source:c,target:p,start:a[h],end:a[f]})}}catch(b){u.e(b)}finally{u.f()}return l}(r,o,a),c=gi(u);try{for(c.s();!(n=c.n()).done;){var h=n.value,f=h.source,p=h.target,d=h.start,v=h.end,y=f.style,g=(void 0===y?{}:y).backgroundColor,m=void 0===g?s:g,_=!0!==o;t.save(),t.fillStyle=m,Kc(t,l,_&&zc(a,d,v)),t.beginPath();var x=!!r.pathSegment(t,f),b=void 0;if(_){x?t.closePath():Jc(t,o,v,a);var w=!!o.pathSegment(t,p,{move:x,reverse:!0});(b=x&&w)||Jc(t,o,d,a)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}catch(k){c.e(k)}finally{c.f()}}function Kc(t,e,n){var r=e.chart.chartArea,i=r.top,o=r.bottom,a=n||{},s=a.property,l=a.start,u=a.end;"x"===s&&(t.beginPath(),t.rect(l,i,u-l,o-i),t.clip())}function Jc(t,e,n,r){var i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Qc={id:"filler",afterDatasetsUpdate:function(t,e,n){var r,i,o,a,s=(t.data.datasets||[]).length,l=[];for(i=0;i<s;++i)a=null,(o=(r=t.getDatasetMeta(i)).dataset)&&o.options&&o instanceof vc&&(a={visible:t.isDatasetVisible(i),index:i,fill:Vc(o,i,s),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=a,l.push(a);for(i=0;i<s;++i)(a=l[i])&&!1!==a.fill&&(a.fill=Uc(l,i,n.propagate))},beforeDraw:function(t,e,n){for(var r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea,a=i.length-1;a>=0;--a){var s=i[a].$filler;s&&(s.line.updateControlPoints(o,s.axis),r&&s.fill&&Xc(t.ctx,s,o))}},beforeDatasetsDraw:function(t,e,n){if("beforeDatasetsDraw"===n.drawTime)for(var r=t.getSortedVisibleDatasetMetas(),i=r.length-1;i>=0;--i){var o=r[i].$filler;jc(o)&&Xc(t.ctx,o,t.chartArea)}},beforeDatasetDraw:function(t,e,n){var r=e.meta.$filler;jc(r)&&"beforeDatasetDraw"===n.drawTime&&Xc(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},$c=function(t,e){var n=t.boxHeight,r=void 0===n?e:n,i=t.boxWidth,o=void 0===i?e:i;return t.usePointStyle&&(r=Math.min(r,e),o=t.pointStyleWidth||Math.min(o,e)),{boxWidth:o,boxHeight:r,itemHeight:Math.max(e,r)}},th=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=t.chart,r.options=t.options,r.ctx=t.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,_i.Z)(n,[{key:"update",value:function(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var t=this,e=this.options.labels||{},n=lo(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),e.sort&&(n=n.sort((function(n,r){return e.sort(n,r,t.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var t=this.options,e=this.ctx;if(t.display){var n,r,i=t.labels,o=Ya(i.font),a=o.size,s=this._computeTitleHeight(),l=$c(i,a),u=l.boxWidth,c=l.itemHeight;e.font=o.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,a,u,c)+10):(r=this.maxHeight,n=this._fitCols(s,o,u,c)+10),this.width=Math.min(n,t.maxWidth||this.maxWidth),this.height=Math.min(r,t.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(t,e,n,r){var i=this.ctx,o=this.maxWidth,a=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,c=t;i.textAlign="left",i.textBaseline="middle";var h=-1,f=-u;return this.legendItems.forEach((function(t,p){var d=n+e/2+i.measureText(t.text).width;(0===p||l[l.length-1]+d+2*a>o)&&(c+=u,l[l.length-(p>0?0:1)]=0,f+=u,h++),s[p]={left:0,top:f,row:h,width:d,height:r},l[l.length-1]+=d+a})),c}},{key:"_fitCols",value:function(t,e,n,r){var i=this.ctx,o=this.maxHeight,a=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-t,c=a,h=0,f=0,p=0,d=0;return this.legendItems.forEach((function(t,o){var v=function(t,e,n,r,i){var o=function(t,e,n,r){var i=t.text;i&&"string"!==typeof i&&(i=i.reduce((function(t,e){return t.length>e.length?t:e})));return e+n.size/2+r.measureText(i).width}(r,t,e,n),a=function(t,e,n){var r=t;"string"!==typeof e.text&&(r=eh(e,n));return r}(i,r,e.lineHeight);return{itemWidth:o,itemHeight:a}}(n,e,i,t,r),y=v.itemWidth,g=v.itemHeight;o>0&&f+g+2*a>u&&(c+=h+a,l.push({width:h,height:f}),p+=h+a,d++,h=f=0),s[o]={left:p,top:f,col:d,width:y,height:g},h=Math.max(h,y),f+=g+a})),c+=h,l.push({width:h,height:f}),c}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var t=this._computeTitleHeight(),e=this.legendHitBoxes,n=this.options,r=n.align,i=n.labels.padding,o=Os(n.rtl,this.left,this.width);if(this.isHorizontal()){var a,s=0,l=ia(r,this.left+i,this.right-this.lineWidths[s]),u=gi(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;s!==c.row&&(s=c.row,l=ia(r,this.left+i,this.right-this.lineWidths[s])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}}catch(y){u.e(y)}finally{u.f()}}else{var h,f=0,p=ia(r,this.top+t+i,this.bottom-this.columnSizes[f].height),d=gi(e);try{for(d.s();!(h=d.n()).done;){var v=h.value;v.col!==f&&(f=v.col,p=ia(r,this.top+t+i,this.bottom-this.columnSizes[f].height)),v.top=p,v.left+=this.left+i,v.left=o.leftForLtr(o.x(v.left),v.width),p+=v.height+i}}catch(y){d.e(y)}finally{d.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var t=this.ctx;Da(t,this),this._draw(),Ra(t)}}},{key:"_draw",value:function(){var t,e=this,n=this.options,r=this.columnSizes,i=this.lineWidths,o=this.ctx,a=n.align,s=n.labels,l=Sa.color,u=Os(n.rtl,this.left,this.width),c=Ya(s.font),h=s.padding,f=c.size,p=f/2;this.drawTitle(),o.textAlign=u.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=c.string;var d=$c(s,f),v=d.boxWidth,y=d.boxHeight,g=d.itemHeight,m=this.isHorizontal(),_=this._computeTitleHeight();t=m?{x:ia(a,this.left+h,this.right-i[0]),y:this.top+h+_,line:0}:{x:this.left+h,y:ia(a,this.top+_+h,this.bottom-r[0].height),line:0},zs(this.ctx,n.textDirection);var x=g+h;this.legendItems.forEach((function(d,b){o.strokeStyle=d.fontColor,o.fillStyle=d.fontColor;var w=o.measureText(d.text).width,k=u.textAlign(d.textAlign||(d.textAlign=s.textAlign)),E=v+p+w,S=t.x,T=t.y;if(u.setWidth(e.width),m?b>0&&S+E+h>e.right&&(T=t.y+=x,t.line++,S=t.x=ia(a,e.left+h,e.right-i[t.line])):b>0&&T+x>e.bottom&&(S=t.x=S+r[t.line].width+h,t.line++,T=t.y=ia(a,e.top+_+h,e.bottom-r[t.line].height)),function(t,e,n){if(!(isNaN(v)||v<=0||isNaN(y)||y<0)){o.save();var r=ao(n.lineWidth,1);if(o.fillStyle=ao(n.fillStyle,l),o.lineCap=ao(n.lineCap,"butt"),o.lineDashOffset=ao(n.lineDashOffset,0),o.lineJoin=ao(n.lineJoin,"miter"),o.lineWidth=r,o.strokeStyle=ao(n.strokeStyle,l),o.setLineDash(ao(n.lineDash,[])),s.usePointStyle){var i={radius:y*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},a=u.xPlus(t,v/2);Aa(o,i,a,e+p,s.pointStyleWidth&&v)}else{var c=e+Math.max((f-y)/2,0),h=u.leftForLtr(t,v),d=Xa(n.borderRadius);o.beginPath(),Object.values(d).some((function(t){return 0!==t}))?ja(o,{x:h,y:c,w:v,h:y,radius:d}):o.rect(h,c,v,y),o.fill(),0!==r&&o.stroke()}o.restore()}}(u.x(S),T,d),S=function(t,e,n,r){return t===(r?"left":"right")?n:"center"===t?(e+n)/2:e}(k,S+v+p,m?S+E:e.right,n.rtl),function(t,e,n){Ba(o,n.text,t,e+g/2,c,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})}(u.x(S),T,d),m)t.x+=E+h;else if("string"!==typeof d.text){var M=c.lineHeight;t.y+=eh(d,M)}else t.y+=x})),Ns(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var t=this.options,e=t.title,n=Ya(e.font),r=Ha(e.padding);if(e.display){var i,o=Os(t.rtl,this.left,this.width),a=this.ctx,s=e.position,l=n.size/2,u=r.top+l,c=this.left,h=this.width;if(this.isHorizontal())h=Math.max.apply(Math,Kr(this.lineWidths)),i=this.top+u,c=ia(t.align,c,this.right-h);else{var f=this.columnSizes.reduce((function(t,e){return Math.max(t,e.height)}),0);i=u+ia(t.align,this.top,this.bottom-f-t.labels.padding-this._computeTitleHeight())}var p=ia(s,c,c+h);a.textAlign=o.textAlign(ra(s)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=n.string,Ba(a,e.text,p,i,n)}}},{key:"_computeTitleHeight",value:function(){var t=this.options.title,e=Ya(t.font),n=Ha(t.padding);return t.display?e.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(t,e){var n,r,i;if(Ho(t,this.left,this.right)&&Ho(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(Ho(t,(r=i[n]).left,r.left+r.width)&&Ho(e,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(t){var e=this.options;if(function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e)){var n,r,i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){var o=this._hoveredItem,a=(r=i,null!==(n=o)&&null!==r&&n.datasetIndex===r.datasetIndex&&n.index===r.index);o&&!a&&lo(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!a&&lo(e.onHover,[t,i,this],this)}else i&&lo(e.onClick,[t,i,this],this)}}}]),n}(du);function eh(t,e){return e*(t.text?t.text.length+.5:0)}var nh={id:"legend",_element:th,start:function(t,e,n){var r=t.legend=new th({ctx:t.ctx,options:n,chart:t});Yl(t,r,n),Xl(t,r)},stop:function(t){Hl(t,t.legend),delete t.legend},beforeUpdate:function(t,e,n){var r=t.legend;Yl(t,r,n),r.options=n},afterUpdate:function(t){var e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent:function(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(t,e,n){var r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(t){return t.chart.options.color},boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.legend.options.labels,r=n.usePointStyle,i=n.pointStyle,o=n.textAlign,a=n.color,s=n.useBorderRadius,l=n.borderRadius;return t._getSortedDatasetMetas().map((function(t){var n=t.controller.getStyle(r?0:void 0),u=Ha(n.borderWidth);return{text:e[t.index].label,fillStyle:n.backgroundColor,fontColor:a,hidden:!t.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:n.borderColor,pointStyle:i||n.pointStyle,rotation:n.rotation,textAlign:o||n.textAlign,borderRadius:s&&(l||n.borderRadius),datasetIndex:t.index}}),this)}},title:{color:function(t){return t.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(t){return!t.startsWith("on")},labels:{_scriptable:function(t){return!["generateLabels","filter","sort"].includes(t)}}}},rh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this)).chart=t.chart,r.options=t.options,r.ctx=t.ctx,r._padding=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,_i.Z)(n,[{key:"update",value:function(t,e){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=t,this.height=this.bottom=e;var r=no(n.text)?n.text.length:1;this._padding=Ha(n.padding);var i=r*Ya(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var t=this.options.position;return"top"===t||"bottom"===t}},{key:"_drawArgs",value:function(t){var e,n,r,i=this.top,o=this.left,a=this.bottom,s=this.right,l=this.options,u=l.align,c=0;return this.isHorizontal()?(n=ia(u,o,s),r=i+t,e=s-o):("left"===l.position?(n=o+t,r=ia(u,a,i),c=-.5*So):(n=s-t,r=ia(u,i,a),c=.5*So),e=a-i),{titleX:n,titleY:r,maxWidth:e,rotation:c}}},{key:"draw",value:function(){var t=this.ctx,e=this.options;if(e.display){var n=Ya(e.font),r=n.lineHeight/2+this._padding.top,i=this._drawArgs(r),o=i.titleX,a=i.titleY,s=i.maxWidth,l=i.rotation;Ba(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:l,textAlign:ra(e.align),textBaseline:"middle",translation:[o,a]})}}}]),n}(du);var ih={id:"title",_element:rh,start:function(t,e,n){!function(t,e){var n=new rh({ctx:t.ctx,options:e,chart:t});Yl(t,n,e),Xl(t,n),t.titleBlock=n}(t,n)},stop:function(t){var e=t.titleBlock;Hl(t,e),delete t.titleBlock},beforeUpdate:function(t,e,n){var r=t.titleBlock;Yl(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},oh=new WeakMap,ah={id:"subtitle",start:function(t,e,n){var r=new rh({ctx:t.ctx,options:n,chart:t});Yl(t,r,n),Xl(t,r),oh.set(t,r)},stop:function(t){Hl(t,oh.get(t)),oh.delete(t)},beforeUpdate:function(t,e,n){var r=oh.get(t);Yl(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},sh={average:function(t){if(!t.length)return!1;var e,n,r=0,i=0,o=0;for(e=0,n=t.length;e<n;++e){var a=t[e].element;if(a&&a.hasValue()){var s=a.tooltipPosition();r+=s.x,i+=s.y,++o}}return{x:r/o,y:i/o}},nearest:function(t,e){if(!t.length)return!1;var n,r,i,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){var l=t[n].element;if(l&&l.hasValue()){var u=Go(e,l.getCenterPoint());u<s&&(s=u,i=l)}}if(i){var c=i.tooltipPosition();o=c.x,a=c.y}return{x:o,y:a}}};function lh(t,e){return e&&(no(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function uh(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ch(t,e){var n=e.element,r=e.datasetIndex,i=e.index,o=t.getDatasetMeta(r).controller,a=o.getLabelAndValue(i),s=a.label,l=a.value;return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:l,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function hh(t,e){var n=t.chart.ctx,r=t.body,i=t.footer,o=t.title,a=e.boxWidth,s=e.boxHeight,l=Ya(e.bodyFont),u=Ya(e.titleFont),c=Ya(e.footerFont),h=o.length,f=i.length,p=r.length,d=Ha(e.padding),v=d.height,y=0,g=r.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);(g+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g)&&(v+=p*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(g-p)*l.lineHeight+(g-1)*e.bodySpacing);f&&(v+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);var m=0,_=function(t){y=Math.max(y,n.measureText(t).width+m)};return n.save(),n.font=u.string,uo(t.title,_),n.font=l.string,uo(t.beforeBody.concat(t.afterBody),_),m=e.displayColors?a+2+e.boxPadding:0,uo(r,(function(t){uo(t.before,_),uo(t.lines,_),uo(t.after,_)})),m=0,n.font=c.string,uo(t.footer,_),n.restore(),{width:y+=d.width,height:v}}function fh(t,e,n,r){var i=n.x,o=n.width,a=t.width,s=t.chartArea,l=s.left,u=s.right,c="center";return"center"===r?c=i<=(l+u)/2?"left":"right":i<=o/2?c="left":i>=a-o/2&&(c="right"),function(t,e,n,r){var i=r.x,o=r.width,a=n.caretSize+n.caretPadding;return"left"===t&&i+o+a>e.width||"right"===t&&i-o-a<0||void 0}(c,t,e,n)&&(c="center"),c}function ph(t,e,n){var r=n.yAlign||e.yAlign||function(t,e){var n=e.y,r=e.height;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||fh(t,e,n,r),yAlign:r}}function dh(t,e,n,r){var i=t.caretSize,o=t.caretPadding,a=t.cornerRadius,s=n.xAlign,l=n.yAlign,u=i+o,c=Xa(a),h=c.topLeft,f=c.topRight,p=c.bottomLeft,d=c.bottomRight,v=function(t,e){var n=t.x,r=t.width;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,s),y=function(t,e,n){var r=t.y,i=t.height;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,u);return"center"===l?"left"===s?v+=u:"right"===s&&(v-=u):"left"===s?v-=Math.max(h,p)+i:"right"===s&&(v+=Math.max(f,d)+i),{x:Xo(v,0,r.width-e.width),y:Xo(y,0,r.height-e.height)}}function vh(t,e,n){var r=Ha(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function yh(t){return lh([],uh(t))}function gh(t,e){var n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}var mh={beforeTitle:$i,title:function(t){if(t.length>0){var e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:$i,beforeBody:$i,beforeLabel:$i,label:function(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;var e=t.dataset.label||"";e&&(e+=": ");var n=t.formattedValue;return eo(n)||(e+=n),e},labelColor:function(t){var e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(t){var e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:$i,afterBody:$i,beforeFooter:$i,footer:$i,afterFooter:$i};function _h(t,e,n,r){var i=t[e].call(n,r);return"undefined"===typeof i?mh[e].call(n,r):i}var xh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=t.chart,r.options=t.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return(0,_i.Z)(n,[{key:"initialize",value:function(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var t=this._cachedAnimations;if(t)return t;var e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Ks(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}},{key:"getContext",value:function(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Ja(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}},{key:"getTitle",value:function(t,e){var n=e.callbacks,r=_h(n,"beforeTitle",this,t),i=_h(n,"title",this,t),o=_h(n,"afterTitle",this,t),a=[];return a=lh(a,uh(r)),a=lh(a,uh(i)),a=lh(a,uh(o))}},{key:"getBeforeBody",value:function(t,e){return yh(_h(e.callbacks,"beforeBody",this,t))}},{key:"getBody",value:function(t,e){var n=this,r=e.callbacks,i=[];return uo(t,(function(t){var e={before:[],lines:[],after:[]},o=gh(r,t);lh(e.before,uh(_h(o,"beforeLabel",n,t))),lh(e.lines,_h(o,"label",n,t)),lh(e.after,uh(_h(o,"afterLabel",n,t))),i.push(e)})),i}},{key:"getAfterBody",value:function(t,e){return yh(_h(e.callbacks,"afterBody",this,t))}},{key:"getFooter",value:function(t,e){var n=e.callbacks,r=_h(n,"beforeFooter",this,t),i=_h(n,"footer",this,t),o=_h(n,"afterFooter",this,t),a=[];return a=lh(a,uh(r)),a=lh(a,uh(i)),a=lh(a,uh(o))}},{key:"_createItems",value:function(t){var e,n,r=this,i=this._active,o=this.chart.data,a=[],s=[],l=[],u=[];for(e=0,n=i.length;e<n;++e)u.push(ch(this.chart,i[e]));return t.filter&&(u=u.filter((function(e,n,r){return t.filter(e,n,r,o)}))),t.itemSort&&(u=u.sort((function(e,n){return t.itemSort(e,n,o)}))),uo(u,(function(e){var n=gh(t.callbacks,e);a.push(_h(n,"labelColor",r,e)),s.push(_h(n,"labelPointStyle",r,e)),l.push(_h(n,"labelTextColor",r,e))})),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=l,this.dataPoints=u,u}},{key:"update",value:function(t,e){var n,r=this.options.setContext(this.getContext()),i=this._active,o=[];if(i.length){var a=sh[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);var s=this._size=hh(this,r),l=Object.assign({},a,s),u=ph(this.chart,r,l),c=dh(r,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:c.x,y:c.y,width:s.width,height:s.height,caretX:a.x,caretY:a.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}},{key:"drawCaret",value:function(t,e,n,r){var i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}},{key:"getCaretPosition",value:function(t,e,n){var r,i,o,a,s,l,u=this.xAlign,c=this.yAlign,h=n.caretSize,f=Xa(n.cornerRadius),p=f.topLeft,d=f.topRight,v=f.bottomLeft,y=f.bottomRight,g=t.x,m=t.y,_=e.width,x=e.height;return"center"===c?(s=m+x/2,"left"===u?(i=(r=g)-h,a=s+h,l=s-h):(i=(r=g+_)+h,a=s-h,l=s+h),o=r):(i="left"===u?g+Math.max(p,v)+h:"right"===u?g+_-Math.max(d,y)-h:this.caretX,"top"===c?(s=(a=m)-h,r=i-h,o=i+h):(s=(a=m+x)+h,r=i+h,o=i-h),l=a),{x1:r,x2:i,x3:o,y1:a,y2:s,y3:l}}},{key:"drawTitle",value:function(t,e,n){var r,i,o,a=this.title,s=a.length;if(s){var l=Os(n.rtl,this.x,this.width);for(t.x=vh(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",r=Ya(n.titleFont),i=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,o=0;o<s;++o)e.fillText(a[o],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i,o+1===s&&(t.y+=n.titleMarginBottom-i)}}},{key:"_drawColorBox",value:function(t,e,n,r,i){var o=this.labelColors[n],a=this.labelPointStyles[n],s=i.boxHeight,l=i.boxWidth,u=Ya(i.bodyFont),c=vh(this,"left",i),h=r.x(c),f=s<u.lineHeight?(u.lineHeight-s)/2:0,p=e.y+f;if(i.usePointStyle){var d={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=r.leftForLtr(h,l)+l/2,y=p+s/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Pa(t,d,v,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Pa(t,d,v,y)}else{t.lineWidth=ro(o.borderWidth)?Math.max.apply(Math,Kr(Object.values(o.borderWidth))):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;var g=r.leftForLtr(h,l),m=r.leftForLtr(r.xPlus(h,1),l-2),_=Xa(o.borderRadius);Object.values(_).some((function(t){return 0!==t}))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,ja(t,{x:g,y:p,w:l,h:s,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ja(t,{x:m,y:p+1,w:l-2,h:s-2,radius:_}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,l,s),t.strokeRect(g,p,l,s),t.fillStyle=o.backgroundColor,t.fillRect(m,p+1,l-2,s-2))}t.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(t,e,n){var r,i,o,a,s,l,u,c=this.body,h=n.bodySpacing,f=n.bodyAlign,p=n.displayColors,d=n.boxHeight,v=n.boxWidth,y=n.boxPadding,g=Ya(n.bodyFont),m=g.lineHeight,_=0,x=Os(n.rtl,this.x,this.width),b=function(n){e.fillText(n,x.x(t.x+_),t.y+m/2),t.y+=m+h},w=x.textAlign(f);for(e.textAlign=f,e.textBaseline="middle",e.font=g.string,t.x=vh(this,w,n),e.fillStyle=n.bodyColor,uo(this.beforeBody,b),_=p&&"right"!==w?"center"===f?v/2+y:v+2+y:0,a=0,l=c.length;a<l;++a){for(r=c[a],i=this.labelTextColors[a],e.fillStyle=i,uo(r.before,b),o=r.lines,p&&o.length&&(this._drawColorBox(e,t,a,x,n),m=Math.max(g.lineHeight,d)),s=0,u=o.length;s<u;++s)b(o[s]),m=g.lineHeight;uo(r.after,b)}_=0,m=g.lineHeight,uo(this.afterBody,b),t.y-=h}},{key:"drawFooter",value:function(t,e,n){var r,i,o=this.footer,a=o.length;if(a){var s=Os(n.rtl,this.x,this.width);for(t.x=vh(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",r=Ya(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,i=0;i<a;++i)e.fillText(o[i],s.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(t,e,n,r){var i=this.xAlign,o=this.yAlign,a=t.x,s=t.y,l=n.width,u=n.height,c=Xa(r.cornerRadius),h=c.topLeft,f=c.topRight,p=c.bottomLeft,d=c.bottomRight;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+h,s),"top"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+l-f,s),e.quadraticCurveTo(a+l,s,a+l,s+f),"center"===o&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(a+l,s+u-d),e.quadraticCurveTo(a+l,s+u,a+l-d,s+u),"bottom"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+p,s+u),e.quadraticCurveTo(a,s+u,a,s+u-p),"center"===o&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(a,s+h),e.quadraticCurveTo(a,s,a+h,s),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}},{key:"_updateAnimationTarget",value:function(t){var e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){var o=sh[t.position].call(this,this._active,this._eventPosition);if(!o)return;var a=this._size=hh(this,t),s=Object.assign({},o,this._size),l=ph(e,t,s),u=dh(t,s,l,e);r._to===u.x&&i._to===u.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(t){var e=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(e);var r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var o=Ha(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),zs(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Ns(t,e.textDirection),t.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(t,e){var n=this,r=this._active,i=t.map((function(t){var e=t.datasetIndex,r=t.index,i=n.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[r],index:r}})),o=!co(r,i),a=this._positionChanged(i,e);(o||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,n),a=this._positionChanged(o,t),s=e||!co(o,i)||a;return s&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}},{key:"_getActiveElements",value:function(t,e,n,r){var i=this.options;if("mouseout"===t.type)return[];if(!r)return e;var o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}},{key:"_positionChanged",value:function(t,e){var n=this.caretX,r=this.caretY,i=this.options,o=sh[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}]),n}(du);i(xh,"positioners",sh);var bh={id:"tooltip",_element:xh,positioners:sh,afterInit:function(t,e,n){n&&(t.tooltip=new xh({chart:t,options:n}))},beforeUpdate:function(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset:function(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw:function(t){var e=t.tooltip;if(e&&e._willRender()){var n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",a(a({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(t,e){if(t.tooltip){var n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(t,e){return e.bodyFont.size},boxWidth:function(t,e){return e.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(t){return"filter"!==t&&"itemSort"!==t&&"external"!==t},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wh=Object.freeze({__proto__:null,Colors:Lc,Decimation:Oc,Filler:Qc,Legend:nh,SubTitle:ah,Title:ih,Tooltip:bh});function kh(t,e,n,r){var i=t.indexOf(e);return-1===i?function(t,e,n,r){return"string"===typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n}(t,e,n,r):i!==t.lastIndexOf(e)?n:i}function Eh(t){var e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var Sh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return(0,_i.Z)(n,[{key:"init",value:function(t){var e=this._addedLabels;if(e.length){var r,i=this.getLabels(),o=gi(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.index,l=a.label;i[s]===l&&i.splice(s,1)}}catch(u){o.e(u)}finally{o.f()}this._addedLabels=[]}pi(fi(n.prototype),"init",this).call(this,t)}},{key:"parse",value:function(t,e){if(eo(t))return null;var n=this.getLabels();return function(t,e){return null===t?null:Xo(Math.round(t),0,e)}(e=isFinite(e)&&n[e]===t?e:kh(n,t,ao(e,t),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var t=this.getUserBounds(),e=t.minDefined,n=t.maxDefined,r=this.getMinMax(!0),i=r.min,o=r.max;"ticks"===this.options.bounds&&(e||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}},{key:"buildTicks",value:function(){var t=this.min,e=this.max,n=this.options.offset,r=[],i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var o=t;o<=e;o++)r.push({value:o});return r}},{key:"getLabelForValue",value:function(t){return Eh.call(this,t)}},{key:"configure",value:function(){pi(fi(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}},{key:"getValueForPixel",value:function(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(Eu);function Th(t,e){var n,r,i,o,a=[],s=t.bounds,l=t.step,u=t.min,c=t.max,h=t.precision,f=t.count,p=t.maxTicks,d=t.maxDigits,v=t.includeBounds,y=l||1,g=p-1,m=e.min,_=e.max,x=!eo(u),b=!eo(c),w=!eo(f),k=(_-m)/(d+1),E=zo((_-m)/g/y)*y;if(E<1e-14&&!x&&!b)return[{value:m},{value:_}];(o=Math.ceil(_/E)-Math.floor(m/E))>g&&(E=zo(o*E/g/y)*y),eo(h)||(n=Math.pow(10,h),E=Math.ceil(E*n)/n),"ticks"===s?(r=Math.floor(m/E)*E,i=Math.ceil(_/E)*E):(r=m,i=_),x&&b&&l&&function(t,e){var n=Math.round(t);return n-e<=t&&n+e>=t}((c-u)/l,E/1e3)?(E=(c-u)/(o=Math.round(Math.min((c-u)/E,p))),r=u,i=c):w?E=((i=b?c:i)-(r=x?u:r))/(o=f-1):o=Oo(o=(i-r)/E,Math.round(o),E/1e3)?Math.round(o):Math.ceil(o);var S=Math.max(Uo(E),Uo(r));n=Math.pow(10,eo(h)?S:h),r=Math.round(r*n)/n,i=Math.round(i*n)/n;var T=0;for(x&&(v&&r!==u?(a.push({value:u}),r<u&&T++,Oo(Math.round((r+T*E)*n)/n,u,Mh(u,k,t))&&T++):r<u&&T++);T<o;++T){var M=Math.round((r+T*E)*n)/n;if(b&&M>c)break;a.push({value:M})}return b&&v&&i!==c?a.length&&Oo(a[a.length-1].value,c,Mh(c,k,t))?a[a.length-1].value=c:a.push({value:c}):b&&i!==c||a.push({value:i}),a}function Mh(t,e,n){var r=n.horizontal,i=Bo(n.minRotation),o=(r?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}i(Sh,"id","category"),i(Sh,"defaults",{ticks:{callback:Eh}});var Ih=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return(0,_i.Z)(n,[{key:"parse",value:function(t,e){return eo(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}},{key:"handleTickRangeOptions",value:function(){var t=this.options.beginAtZero,e=this.getUserBounds(),n=e.minDefined,r=e.maxDefined,i=this.min,o=this.max,a=function(t){return i=n?i:t},s=function(t){return o=r?o:t};if(t){var l=Ro(i),u=Ro(o);l<0&&u<0?s(0):l>0&&u>0&&a(0)}if(i===o){var c=0===o?1:Math.abs(.05*o);s(o+c),t||a(i-c)}this.min=i,this.max=o}},{key:"getTickLimit",value:function(){var t,e=this.options.ticks,n=e.maxTicksLimit,r=e.stepSize;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var t=this.options,e=t.ticks,n=this.getTickLimit(),r=Th({maxTicks:n=Math.max(2,n),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Fo(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var t=this.ticks,e=this.min,r=this.max;if(pi(fi(n.prototype),"configure",this).call(this),this.options.offset&&t.length){var i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}},{key:"getLabelForValue",value:function(t){return ga(t,this.chart.options.locale,this.options.ticks.format)}}]),n}(Eu),Ch=function(t){vi(n,t);var e=yi(n);function n(){return(0,mi.Z)(this,n),e.apply(this,arguments)}return(0,_i.Z)(n,[{key:"determineDataLimits",value:function(){var t=this.getMinMax(!0),e=t.min,n=t.max;this.min=io(e)?e:0,this.max=io(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var t=this.isHorizontal(),e=t?this.width:this.height,n=Bo(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}},{key:"getPixelForValue",value:function(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}]),n}(Ih);i(Ch,"id","linear"),i(Ch,"defaults",{ticks:{callback:_a.formatters.numeric}});var Ph=function(t){return Math.floor(Do(t))},Ah=function(t,e){return Math.pow(10,Ph(t)+e)};function Lh(t){return 1===t/Math.pow(10,Ph(t))}function Dh(t,e,n){var r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Rh(t,e){var n=e.min,r=e.max;n=oo(t.min,n);for(var i=[],o=Ph(n),a=function(t,e){for(var n=Ph(e-t);Dh(t,e,n)>10;)n++;for(;Dh(t,e,n)<10;)n--;return Math.min(n,Ph(t))}(n,r),s=a<0?Math.pow(10,Math.abs(a)):1,l=Math.pow(10,a),u=o>a?Math.pow(10,o):0,c=Math.round((n-u)*s)/s,h=Math.floor((n-u)/l/10)*l*10,f=Math.floor((c-h)/Math.pow(10,a)),p=oo(t.min,Math.round((u+h+f*Math.pow(10,a))*s)/s);p<r;)i.push({value:p,major:Lh(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(f=2,s=++a>=0?1:s),p=Math.round((u+h+f*Math.pow(10,a))*s)/s;var d=oo(t.max,p);return i.push({value:d,major:Lh(d),significand:f}),i}var Oh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return(0,_i.Z)(n,[{key:"parse",value:function(t,e){var n=Ih.prototype.parse.apply(this,[t,e]);if(0!==n)return io(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var t=this.getMinMax(!0),e=t.min,n=t.max;this.min=io(e)?Math.max(0,e):null,this.max=io(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!io(this._userMin)&&(this.min=e===Ah(this.min,0)?Ah(this.min,-1):Ah(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var t=this.getUserBounds(),e=t.minDefined,n=t.maxDefined,r=this.min,i=this.max,o=function(t){return r=e?r:t},a=function(t){return i=n?i:t};r===i&&(r<=0?(o(1),a(10)):(o(Ah(r,-1)),a(Ah(i,1)))),r<=0&&o(Ah(i,-1)),i<=0&&a(Ah(r,1)),this.min=r,this.max=i}},{key:"buildTicks",value:function(){var t=this.options,e=Rh({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Fo(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}},{key:"getLabelForValue",value:function(t){return void 0===t?"0":ga(t,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var t=this.min;pi(fi(n.prototype),"configure",this).call(this),this._startValue=Do(t),this._valueRange=Do(this.max)-Do(t)}},{key:"getPixelForValue",value:function(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Do(t)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(t){var e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}]),n}(Eu);function zh(t){var e=t.ticks;if(e.display&&t.display){var n=Ha(e.backdropPadding);return ao(e.font&&e.font.size,Sa.font.size)+n.height}return 0}function Nh(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Fh(t){for(var e,n,r,i={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},o=Object.assign({},i),a=[],s=[],l=t._pointLabels.length,u=t.options.pointLabels,c=u.centerPointLabels?So/l:0,h=0;h<l;h++){var f=u.setContext(t.getPointLabelContext(h));s[h]=f.padding;var p=t.getPointPosition(h,t.drawingArea+s[h],c),d=Ya(f.font),v=(e=t.ctx,n=d,r=no(r=t._pointLabels[h])?r:[r],{w:Ma(e,n.string,r),h:r.length*n.lineHeight});a[h]=v;var y=Zo(t.getIndexAngle(h)+c),g=Math.round(jo(y));Bh(o,i,y,Nh(g,p.x,v.w,0,180),Nh(g,p.y,v.h,90,270))}t.setCenterPoint(i.l-o.l,o.r-i.r,i.t-o.t,o.b-i.b),t._pointLabelItems=function(t,e,n){for(var r,i=[],o=t._pointLabels.length,a=t.options,s=a.pointLabels,l=s.centerPointLabels,u=s.display,c={extra:zh(a)/2,additionalAngle:l?So/o:0},h=0;h<o;h++){c.padding=n[h],c.size=e[h];var f=jh(t,h,c);i.push(f),"auto"===u&&(f.visible=Uh(f,r),f.visible&&(r=f))}return i}(t,a,s)}function Bh(t,e,n,r,i){var o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n)),s=0,l=0;r.start<e.l?(s=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-s)):r.end>e.r&&(s=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),i.start<e.t?(l=(e.t-i.start)/a,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function jh(t,e,n){var r=t.drawingArea,i=n.extra,o=n.additionalAngle,a=n.padding,s=n.size,l=t.getPointPosition(e,r+i+a,o),u=Math.round(jo(Zo(l.angle+Po))),c=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,s.h,u),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(u),f=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,s.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:f,top:c,right:f+s.w,bottom:c+s.h}}function Uh(t,e){if(!e)return!0;var n=t.left,r=t.top,i=t.right,o=t.bottom;return!(La({x:n,y:r},e)||La({x:n,y:o},e)||La({x:i,y:r},e)||La({x:i,y:o},e))}function Vh(t,e,n){var r=n.left,i=n.top,o=n.right,a=n.bottom,s=e.backdropColor;if(!eo(s)){var l=Xa(e.borderRadius),u=Ha(e.backdropPadding);t.fillStyle=s;var c=r-u.left,h=i-u.top,f=o-r+u.width,p=a-i+u.height;Object.values(l).some((function(t){return 0!==t}))?(t.beginPath(),ja(t,{x:c,y:h,w:f,h:p,radius:l}),t.fill()):t.fillRect(c,h,f,p)}}function Gh(t,e,n,r){var i=t.ctx;if(n)i.arc(t.xCenter,t.yCenter,e,0,To);else{var o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(var a=1;a<r;a++)o=t.getPointPosition(a,e),i.lineTo(o.x,o.y)}}i(Oh,"id","logarithmic"),i(Oh,"defaults",{ticks:{callback:_a.formatters.logarithmic,major:{enabled:!0}}});var qh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return(0,_i.Z)(n,[{key:"setDimensions",value:function(){var t=this._padding=Ha(zh(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}},{key:"determineDataLimits",value:function(){var t=this.getMinMax(!1),e=t.min,n=t.max;this.min=io(e)&&!isNaN(e)?e:0,this.max=io(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/zh(this.options))}},{key:"generateTickLabels",value:function(t){var e=this;Ih.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((function(t,n){var r=lo(e.options.pointLabels.callback,[t,n],e);return r||0===r?r:""})).filter((function(t,n){return e.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var t=this.options;t.display&&t.pointLabels.display?Fh(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}},{key:"getIndexAngle",value:function(t){return Zo(t*(To/(this._pointLabels.length||1))+Bo(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(t){if(eo(t))return NaN;var e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}},{key:"getValueForDistanceFromCenter",value:function(t){if(eo(t))return NaN;var e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}},{key:"getPointLabelContext",value:function(t){var e=this._pointLabels||[];if(t>=0&&t<e.length){var n=e[t];return function(t,e,n){return Ja(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}},{key:"getPointPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(t)-Po+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}},{key:"getBasePosition",value:function(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(t){var e=this._pointLabelItems[t];return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}},{key:"drawBackground",value:function(){var t=this.options,e=t.backgroundColor,n=t.grid.circular;if(e){var r=this.ctx;r.save(),r.beginPath(),Gh(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var t,e,n,r=this,i=this.ctx,o=this.options,a=o.angleLines,s=o.grid,l=o.border,u=this._pointLabels.length;if(o.pointLabels.display&&function(t,e){for(var n=t.ctx,r=t.options.pointLabels,i=e-1;i>=0;i--){var o=t._pointLabelItems[i];if(o.visible){var a=r.setContext(t.getPointLabelContext(i));Vh(n,a,o);var s=Ya(a.font),l=o.x,u=o.y,c=o.textAlign;Ba(n,t._pointLabels[i],l,u+s.lineHeight/2,s,{color:a.color,textAlign:c,textBaseline:"middle"})}}}(this,u),s.display&&this.ticks.forEach((function(t,n){if(0!==n){e=r.getDistanceFromCenterForValue(t.value);var i=r.getContext(n),o=s.setContext(i),a=l.setContext(i);!function(t,e,n,r,i){var o=t.ctx,a=e.circular,s=e.color,l=e.lineWidth;!a&&!r||!s||!l||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=l,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),Gh(t,n,a,r),o.closePath(),o.stroke(),o.restore())}(r,o,e,u,a)}})),a.display){for(i.save(),t=u-1;t>=0;t--){var c=a.setContext(this.getPointLabelContext(t)),h=c.color,f=c.lineWidth;f&&h&&(i.lineWidth=f,i.strokeStyle=h,i.setLineDash(c.borderDash),i.lineDashOffset=c.borderDashOffset,e=this.getDistanceFromCenterForValue(o.ticks.reverse?this.min:this.max),n=this.getPointPosition(t,e),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(n.x,n.y),i.stroke())}i.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var t=this,e=this.ctx,n=this.options,r=n.ticks;if(r.display){var i,o,a=this.getIndexAngle(0);e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((function(a,s){if(0!==s||n.reverse){var l=r.setContext(t.getContext(s)),u=Ya(l.font);if(i=t.getDistanceFromCenterForValue(t.ticks[s].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;var c=Ha(l.backdropPadding);e.fillRect(-o/2-c.left,-i-u.size/2-c.top,o+c.width,u.size+c.height)}Ba(e,a.label,0,-i,u,{color:l.color})}})),e.restore()}}},{key:"drawTitle",value:function(){}}]),n}(Ih);i(qh,"id","radialLinear"),i(qh,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_a.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(t){return t},padding:5,centerPointLabels:!1}}),i(qh,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),i(qh,"descriptors",{angleLines:{_fallback:"grid"}});var Zh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wh=Object.keys(Zh);function Xh(t,e){return t-e}function Hh(t,e){if(eo(e))return null;var n=t._adapter,r=t._parseOpts,i=r.parser,o=r.round,a=r.isoWeekday,s=e;return"function"===typeof i&&(s=i(s)),io(s)||(s="string"===typeof i?n.parse(s,i):n.parse(s)),null===s?null:(o&&(s="week"!==o||!No(a)&&!0!==a?n.startOf(s,o):n.startOf(s,"isoWeek",a)),+s)}function Yh(t,e,n,r){for(var i=Wh.length,o=Wh.indexOf(t);o<i-1;++o){var a=Zh[Wh[o]],s=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(s*a.size))<=r)return Wh[o]}return Wh[i-1]}function Kh(t,e,n){if(n){if(n.length){var r=Yo(n,e),i=r.lo,o=r.hi;t[n[i]>=e?n[i]:n[o]]=!0}}else t[e]=!0}function Jh(t,e,n){var r,i,o=[],a={},s=e.length;for(r=0;r<s;++r)a[i=e[r]]=r,o.push({value:i,major:!1});return 0!==s&&n?function(t,e,n,r){var i,o,a=t._adapter,s=+a.startOf(e[0].value,r),l=e[e.length-1].value;for(i=s;i<=l;i=+a.add(i,1,r))(o=n[i])>=0&&(e[o].major=!0);return e}(t,o,a,n):o}var Qh=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return(0,_i.Z)(n,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.time||(t.time={}),i=this._adapter=new Ml._date(t.adapters.date);i.init(e),yo(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},pi(fi(n.prototype),"init",this).call(this,t),this._normalized=e.normalized}},{key:"parse",value:function(t,e){return void 0===t?null:Hh(this,t)}},{key:"beforeLayout",value:function(){pi(fi(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var t=this.options,e=this._adapter,n=t.time.unit||"day",r=this.getUserBounds(),i=r.min,o=r.max,a=r.minDefined,s=r.maxDefined;function l(t){a||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(o=Math.max(o,t.max))}a&&s||(l(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||l(this.getMinMax(!1))),i=io(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),o=io(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}},{key:"_getLabelBounds",value:function(){var t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}},{key:"buildTicks",value:function(){var t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var i=this.min,o=function(t,e,n){for(var r=0,i=t.length;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Yh(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(var o=Wh.length-1;o>=Wh.indexOf(n);o--){var a=Wh[o];if(Zh[a].common&&t._adapter.diff(i,r,a)>=e-1)return a}return Wh[n?Wh.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(var e=Wh.indexOf(t)+1,n=Wh.length;e<n;++e)if(Zh[Wh[e]].common)return Wh[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),Jh(this,o,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(t){return+t.value})))}},{key:"initOffsets",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),r=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),i=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);var o=n.length<3?.5:.25;r=Xo(r,0,o),i=Xo(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}},{key:"_generate",value:function(){var t,e,n=this._adapter,r=this.min,i=this.max,o=this.options,a=o.time,s=a.unit||Yh(a.minUnit,r,i,this._getLabelCapacity(r)),l=ao(o.ticks.stepSize,1),u="week"===s&&a.isoWeekday,c=No(u)||!0===u,h={},f=r;if(c&&(f=+n.startOf(f,"isoWeek",u)),f=+n.startOf(f,c?"day":s),n.diff(i,r,s)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+s);var p="data"===o.ticks.source&&this.getDataTimestamps();for(t=f,e=0;t<i;t=+n.add(t,l,s),e++)Kh(h,t,p);return t!==i&&"ticks"!==o.bounds&&1!==e||Kh(h,t,p),Object.keys(h).sort((function(t,e){return t-e})).map((function(t){return+t}))}},{key:"getLabelForValue",value:function(t){var e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}},{key:"format",value:function(t,e){var n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}},{key:"_tickFormatFunction",value:function(t,e,n,r){var i=this.options,o=i.ticks.callback;if(o)return lo(o,[t,e,n],this);var a=i.time.displayFormats,s=this._unit,l=this._majorUnit,u=s&&a[s],c=l&&a[l],h=n[e],f=l&&c&&h&&h.major;return this._adapter.format(t,r||(f?c:u))}},{key:"generateTickLabels",value:function(t){var e,n,r;for(e=0,n=t.length;e<n;++e)(r=t[e]).label=this._tickFormatFunction(r.value,e,t)}},{key:"getDecimalForValue",value:function(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(t){var e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}},{key:"getValueForPixel",value:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,r=Bo(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*o,h:n*o+a*i}}},{key:"_getLabelCapacity",value:function(t){var e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Jh(this,[t],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}},{key:"getDataTimestamps",value:function(){var t,e,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var t,e,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(t=0,e=r.length;t<e;++t)n.push(Hh(this,r[t]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(t){return ta(t.sort(Xh))}}]),n}(Eu);function $h(t,e,n){var r,i,o,a,s=0,l=t.length-1;if(n){if(e>=t[s].pos&&e<=t[l].pos){var u=Ko(t,"pos",e);s=u.lo,l=u.hi}var c=t[s];r=c.pos,o=c.time;var h=t[l];i=h.pos,a=h.time}else{if(e>=t[s].time&&e<=t[l].time){var f=Ko(t,"time",e);s=f.lo,l=f.hi}var p=t[s];r=p.time,o=p.pos;var d=t[l];i=d.time,a=d.pos}var v=i-r;return v?o+(a-o)*(e-r)/v:o}i(Qh,"id","time"),i(Qh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var tf=function(t){vi(n,t);var e=yi(n);function n(t){var r;return(0,mi.Z)(this,n),(r=e.call(this,t))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return(0,_i.Z)(n,[{key:"initOffsets",value:function(){var t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=$h(e,this.min),this._tableRange=$h(e,this.max)-this._minPos,pi(fi(n.prototype),"initOffsets",this).call(this,t)}},{key:"buildLookupTable",value:function(t){var e,n,r,i,o,a=this.min,s=this.max,l=[],u=[];for(e=0,n=t.length;e<n;++e)(i=t[e])>=a&&i<=s&&l.push(i);if(l.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(e=0,n=l.length;e<n;++e)o=l[e+1],r=l[e-1],i=l[e],Math.round((o+r)/2)!==i&&u.push({time:i,pos:e/(n-1)});return u}},{key:"_getTimestampsForTable",value:function(){var t=this._cache.all||[];if(t.length)return t;var e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t}},{key:"getDecimalForValue",value:function(t){return($h(this._table,t)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return $h(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(Qh);i(tf,"id","timeseries"),i(tf,"defaults",Qh.defaults);var ef=[Sl,Sc,wh,Object.freeze({__proto__:null,CategoryScale:Sh,LinearScale:Ch,LogarithmicScale:Oh,RadialLinearScale:qh,TimeScale:Qh,TimeSeriesScale:tf})],nf=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],rf="label";function of(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function af(t,e){t.labels=e}function sf(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf,r=[];t.datasets=e.map((function(e){var i=t.datasets.find((function(t){return t[n]===e[n]}));return i&&e.data&&!r.includes(i)?(r.push(i),Object.assign(i,e),i):a({},e)}))}function lf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rf,n={labels:[],datasets:[]};return af(n,t.labels),sf(n,t.datasets,e),n}function uf(e,n){var r=e.height,i=void 0===r?150:r,o=e.width,s=void 0===o?300:o,l=e.redraw,u=void 0!==l&&l,c=e.datasetIdKey,h=e.type,f=e.data,p=e.options,d=e.plugins,v=void 0===d?[]:d,y=e.fallbackContent,g=e.updateMode,m=ci(e,nf),_=(0,t.useRef)(null),x=(0,t.useRef)(),b=function(){_.current&&(x.current=new tc(_.current,{type:h,data:lf(f,c),options:p&&a({},p),plugins:v}),of(n,x.current))},w=function(){of(n,null),x.current&&(x.current.destroy(),x.current=null)};return(0,t.useEffect)((function(){!u&&x.current&&p&&function(t,e){var n=t.options;n&&e&&Object.assign(n,e)}(x.current,p)}),[u,p]),(0,t.useEffect)((function(){!u&&x.current&&af(x.current.config.data,f.labels)}),[u,f.labels]),(0,t.useEffect)((function(){!u&&x.current&&f.datasets&&sf(x.current.config.data,f.datasets,c)}),[u,f.datasets]),(0,t.useEffect)((function(){x.current&&(u?(w(),setTimeout(b)):x.current.update(g))}),[u,p,f.labels,f.datasets,g]),(0,t.useEffect)((function(){x.current&&(w(),setTimeout(b))}),[h]),(0,t.useEffect)((function(){return b(),function(){return w()}}),[]),t.createElement("canvas",Object.assign({ref:_,role:"img",height:i,width:s},m),y)}var cf=(0,t.forwardRef)(uf);function hf(e,n){return tc.register(n),(0,t.forwardRef)((function(n,r){return t.createElement(cf,Object.assign({},n,{ref:r,type:e}))}))}var ff=hf("bar",gl);tc.register.apply(tc,Kr(ef));var pf=function(e){var n=e.map,r=e.hashMap,i=e.busynessHashMap,o=e.originalBusynessHashMap,a=e.colours,s=e.highlightEventImpact,l=e.Zone_ID,u=e.resetColours,c=ri(),h=c.useOriginal,f=c.setUseOriginal,d=c.showChart,v=c.setShowChart,y=c.isSplitView,g=c.setSplitView,m=ri().updateLayerColours,_=p((0,t.useState)(null),2),x=_[0],b=_[1],w=p((0,t.useState)(null),2),k=w[0],E=w[1],S=p((0,t.useState)(!0),2),T=S[0],M=S[1],I=p((0,t.useState)([]),2),C=I[0],P=I[1];(0,t.useEffect)((function(){var t=function(){if(!r)return{labels:[],dataValues:[]};var t,e=Object.entries(r);T?(e.sort((function(t,e){return e[1]-t[1]})),t=e.slice(0,5)):(e.sort((function(t,e){return t[1]-e[1]})),t=e.slice(0,5));var n=Object.fromEntries(t);return{labels:n?Object.keys(n):[],dataValues:n?Object.values(n):[]}}(),e=t.labels,n=t.dataValues;P(e);var i=function(t,e){return{data:{labels:t,datasets:[{label:"Busyness",barThickness:24,data:e,backgroundColor:function(t){var e=t.chart;return e.ctx,e.chartArea?t.dataIndex>=0?T?A(e):L(e):"white":null},borderWidth:1,borderRadius:2}]},options:{maintainAspectRatio:!1,responsive:!0,legend:{display:!1},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(){}}}},indexAxis:"y",scales:{y:{beginAtZero:!0,ticks:{color:"#fefefe"}},x:{ticks:{color:"#fefefe"}}}}}}(e,n);E(i)}),[T,r]);var A=function(t){var e=t.ctx,n=t.chartArea,r=n.left,i=n.right,o=e.createLinearGradient(r,0,i,0);return o.addColorStop(0,a[1]),o.addColorStop(1,a[2]),o},L=function(t){var e=t.ctx,n=t.chartArea,r=n.left,i=n.right,o=e.createLinearGradient(r,0,i,0);return o.addColorStop(0,a[0]),o.addColorStop(1,a[1]),o};return(0,$r.jsxs)("div",{className:"parent-chart-container",children:[d&&(0,$r.jsxs)("div",{className:"floating-info-box-chart-container",children:[x&&(0,$r.jsx)(ff,{data:x.data,options:x.options}),(0,$r.jsx)("button",{className:"floating-infobox-close-toggle-button",onClick:function(){v(!d),M(!T),u()},children:"X"})]}),(0,$r.jsxs)("div",{className:"floating-infobox-box-button-container",children:[(0,$r.jsx)("button",{className:"floating-infobox-box-toggle-button",onClick:function(){s(l,C),b(k),v(!0),M(!T)},children:T?"Highlight most impacted zones":"Highlight least impacted zones"}),(0,$r.jsx)("button",{className:"floating-infobox-box-toggle-button",onClick:function(){f(!h),m(n.current,!h,o,i),u(),v(!1),M(!T)},children:h?"Show with Impact":"Show Baseline"}),(0,$r.jsx)("button",{className:"floating-infobox-box-toggle-button",onClick:function(){return g(!y)},children:y?"Show Original":"Show Splitview"})]})]})};var df=function(e){var n=e.map,r=e.visualiseEventImpact,i=e.highlightEventImpact,o=e.originalBusynessHashMap,a=e.busynessHashMap,s=e.hashMapOfDifference,l=e.colours,u=e.resetColours,c=ri(),h=c.showInfoBox,f=c.showChartData,d=c.showNeighborhoodInfoBox,v=c.neighbourhoodEvents,y=c.colourPairs,g=c.colourPairIndex,m=ri(),_=m.zoneID,x=m.setZoneID,b=m.eventName,w=m.setEventName,k=m.zone,E=m.setZone,S=m.useOriginal,T=(m.setUseOriginal,p((0,t.useState)(null),2)),M=T[0],I=T[1],C=p((0,t.useState)(null),2),P=C[0],A=C[1];(0,t.useEffect)((function(){v&&v.length>0&&(x(v[0].Zone_ID),w(v[0].Event_Name),E(v[0].Zone_Name))}),[v]),(0,t.useEffect)((function(){var t=Kt().domain([0,.4,.8]).range(y[g]),e=S?o[_]:a[_],n=t(e);A(n),I(e<.29?"Not Very Busy":e>=.29&&e<.4?"Relatively Busy":e>=.4&&e<.7?"Busy":"Extremely Busy")}),[y,g,a,o,_]);var L=v?v.map((function(t,e){return(0,$r.jsx)(ui,{item:t,visualiseEventImpact:r},e)})):null;return(h||d)&&(0,$r.jsxs)("div",{className:"floating-info-box",children:[(0,$r.jsx)("h1",{className:"floating-info-box-zone-header",children:f?b:k}),(0,$r.jsxs)("h3",{className:"floating-info-box-zone-busyness-sub-header",children:[" ",k," is ",(0,$r.jsx)("span",{style:{color:P},children:M})]}),h?f?(0,$r.jsx)(pf,{map:n,hashMap:s,busynessHashMap:a,originalBusynessHashMap:o,colours:l,highlightEventImpact:i,zoneID:_,resetColours:u}):L:null,d&&(0,$r.jsx)("p",{children:"There are no events happening in this neighbourhood."})]})},vf=function(t){var e=t.colours.join(", ");return(0,$r.jsxs)("div",{className:"floating-map-legend-container",children:[(0,$r.jsx)("p",{className:"floating-map-legend-container-header-text",children:"Busyness Index"}),(0,$r.jsxs)("div",{className:"colour-scale-legend",children:[(0,$r.jsx)("div",{className:"gradient",style:{background:"linear-gradient(to right, ".concat(e,")")}}),(0,$r.jsxs)("div",{className:"ticks-container",children:[(0,$r.jsx)("p",{className:"tick-label",children:"Not Busy"}),(0,$r.jsx)("p",{className:"tick-label",children:"Very Busy"})]})]})]})},yf=t.createContext(null);function gf(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function mf(t,e){var n=e.viewState||e,r=!1;if("longitude"in n&&"latitude"in n){var i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){var o=t.zoom;t.zoom=n.zoom,r=r||o!==t.zoom}if("bearing"in n){var a=t.bearing;t.bearing=n.bearing,r=r||a!==t.bearing}if("pitch"in n){var s=t.pitch;t.pitch=n.pitch,r=r||s!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}var _f=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xf(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;var e,n={},r=gi(t.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]=i}}catch(s){r.e(s)}finally{r.f()}var o=t.layers.map((function(t){var e=null;"interactive"in t&&delete(e=Object.assign({},t)).interactive;var r=n[t.ref];if(r){delete(e=e||Object.assign({},t)).ref;var i,o=gi(_f);try{for(o.s();!(i=o.n()).done;){var a=i.value;a in r&&(e[a]=r[a])}}catch(s){o.e(s)}finally{o.f()}}return e||t}));return a(a({},t),{},{layers:o})}function bf(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!bf(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var o=0,a=r;o<a.length;o++){var s=a[o];if(!e.hasOwnProperty(s))return!1;if(!bf(t[s],e[s]))return!1}return!0}return!1}var wf={version:8,sources:{},layers:[]},kf={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Ef={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Sf={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Tf=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Mf=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],If=function(){function t(e,n,r){var i=this;(0,mi.Z)(this,t),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(t){var e=i.props[Sf[t.type]];e?e(t):"error"===t.type&&console.error(t.error)},this._onPointerEvent=function(t){"mousemove"!==t.type&&"mouseout"!==t.type||i._updateHover(t);var e=i.props[kf[t.type]];e&&(i.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type&&(t.features=i._hoveredFeatures||i._queryRenderedFeatures(t.point)),e(t),delete t.features)},this._onCameraEvent=function(t){if(!i._internalUpdate){var e=i.props[Ef[t.type]];e&&e(t)}t.type in i._deferredEvents&&(i._deferredEvents[t.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}return(0,_i.Z)(t,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(t){var e=this.props;this.props=t;var n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);var r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(t){var e=this,n=this.props,r=n.mapStyle,i=void 0===r?wf:r,o=a(a(a({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||Cf()||null,container:t,style:xf(i)}),s=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){var l=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=l,n.gl}}var u=new this._MapClass(o);s.padding&&u.setPadding(s.padding),n.cursor&&(u.getCanvas().style.cursor=n.cursor),this._createShadowTransform(u);var c=u._render;u._render=function(t){e._inRender=!0,c.call(u,t),e._inRender=!1};var h=u._renderTaskQueue.run;u._renderTaskQueue.run=function(t){h.call(u._renderTaskQueue,t),e._onBeforeRepaint()},u.on("render",(function(){return e._onAfterRepaint()}));var f=u.fire;for(var p in u.fire=this._fireEvent.bind(this,f),u.on("resize",(function(){e._renderTransform.resize(u.transform.width,u.transform.height)})),u.on("styledata",(function(){return e._updateStyleComponents(e.props,{})})),u.on("sourcedata",(function(){return e._updateStyleComponents(e.props,{})})),kf)u.on(p,this._onPointerEvent);for(var d in Ef)u.on(d,this._onCameraEvent);for(var v in Sf)u.on(v,this._onEvent);this._map=u}},{key:"recycle",value:function(){var e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),t.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"_createShadowTransform",value:function(t){var e=function(t){var e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}},{key:"_updateSize",value:function(t){var e=t.viewState;if(e){var n=this._map;if(e.width!==n.transform.width||e.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(t,e){if(this._internalUpdate)return!1;var n=this._map,r=this._renderTransform,i=r.zoom,o=r.pitch,s=r.bearing,l=n.isMoving();l&&(r.cameraElevationReference="sea");var u=mf(r,a(a({},gf(n.transform)),t));if(l&&(r.cameraElevationReference="ground"),u&&e){var c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=i!==r.zoom),c.rotate||(c.rotate=s!==r.bearing),c.pitch||(c.pitch=o!==r.pitch)}return l||mf(n.transform,t),u}},{key:"_updateSettings",value:function(t,e){for(var n=this._map,r=!1,i=0,o=Tf;i<o.length;i++){var a=o[i];if(a in t&&!bf(t[a],e[a])){r=!0;var s=n["set".concat(a[0].toUpperCase()).concat(a.slice(1))];null===s||void 0===s||s.call(n,t[a])}}return r}},{key:"_updateStyle",value:function(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){var n=t.mapStyle,r=void 0===n?wf:n,i=t.styleDiffing,o={diff:void 0===i||i};return"localIdeographFontFamily"in t&&(o.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(xf(r),o),!0}return!1}},{key:"_updateStyleComponents",value:function(t,e){var n=this._map,r=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!bf(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!bf(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!bf(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}},{key:"_updateHandlers",value:function(t,e){for(var n,r,i=this._map,o=!1,a=0,s=Mf;a<s.length;a++){var l=s[a],u=null===(n=t[l])||void 0===n||n;bf(u,null===(r=e[l])||void 0===r||r)||(o=!0,u?i[l].enable(u):i[l].disable())}return o}},{key:"_queryRenderedFeatures",value:function(t){var e=this._map,n=this.props.interactiveLayerIds,r=void 0===n?[]:n;try{return e.queryRenderedFeatures(t,{layers:r.filter(e.getLayer.bind(e))})}catch(i){return[]}}},{key:"_updateHover",value:function(t){var e,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var r=t.type,i=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0,o=this._queryRenderedFeatures(t.point),a=o.length>0;!a&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=o,a&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=r}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(t,e,n){var r=this._map,i=r.transform,o="string"===typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in Ef&&("object"===typeof e&&(e.viewState=gf(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}},{key:"_onBeforeRepaint",value:function(){var t=this,e=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;var r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=function(){t._map.transform=r}}}],[{key:"reuse",value:function(e,n){var r=t.savedMaps.pop();if(!r)return null;var i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);i._container=n;var s=i._resizeObserver;s&&(s.disconnect(),s.observe(n)),r.setProps(a(a({},e),{},{styleDiffing:!1})),i.resize();var l=e.initialViewState;return l&&(l.bounds?i.fitBounds(l.bounds,a(a({},l.fitBoundsOptions),{},{duration:0})):r._updateViewState(l,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(function(){return i.fire("load")})),i._update(),r}}]),t}();function Cf(){var t=null;if("undefined"!==typeof location){var e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(n){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(r){}return t}If.savedMaps=[];var Pf=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Af(t){if(!t)return null;var e,n=t.map,r={getMap:function(){return n},getCenter:function(){return t.transform.center},getZoom:function(){return t.transform.zoom},getBearing:function(){return t.transform.bearing},getPitch:function(){return t.transform.pitch},getPadding:function(){return t.transform.padding},getBounds:function(){return t.transform.getBounds()},project:function(e){var r=n.transform;n.transform=t.transform;var i=n.project(e);return n.transform=r,i},unproject:function(e){var r=n.transform;n.transform=t.transform;var i=n.unproject(e);return n.transform=r,i},queryTerrainElevation:function(e,r){var i=n.transform;n.transform=t.transform;var o=n.queryTerrainElevation(e,r);return n.transform=i,o}},i=gi(function(t){var e=new Set,n=t;for(;n;){var r,i=gi(Object.getOwnPropertyNames(n));try{for(i.s();!(r=i.n()).done;){var o=r.value;"_"!==o[0]&&"function"===typeof t[o]&&"fire"!==o&&"setEventedParent"!==o&&e.add(o)}}catch(a){i.e(a)}finally{i.f()}n=Object.getPrototypeOf(n)}return Array.from(e)}(n));try{for(i.s();!(e=i.n()).done;){var o=e.value;o in r||Pf.includes(o)||(r[o]=n[o].bind(n))}}catch(a){i.e(a)}finally{i.f()}return r}var Lf="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,Df=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var Rf=t.createContext(null);function Of(e,n,r){var i=(0,t.useContext)(yf),o=p((0,t.useState)(null),2),s=o[0],l=o[1],u=(0,t.useRef)(),c=(0,t.useRef)({mapLib:null,map:null}).current;(0,t.useEffect)((function(){var t,n=e.mapLib,o=!0;return Promise.resolve(n||r).then((function(n){if(o){if(!n)throw new Error("Invalid mapLib");var r="Map"in n?n:n.default;if(!r.Map)throw new Error("Invalid mapLib");if(function(t,e){var n,r=gi(Df);try{for(r.s();!(n=r.n()).done;){var i=n.value;i in e&&(t[i]=e[i])}}catch(s){r.e(s)}finally{r.f()}var o=e.RTLTextPlugin,a=void 0===o?"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js":o;a&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(a,(function(t){t&&console.error(t)}),!1)}(r,e),r.supported&&!r.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(t=If.reuse(e,u.current)),t||(t=new If(r.Map,e,u.current)),c.map=Af(t),c.mapLib=r,l(t),null===i||void 0===i||i.onMapMount(c.map,e.id)}})).catch((function(t){var n=e.onError;n?n({type:"error",target:null,originalEvent:null,error:t}):console.error(t)})),function(){o=!1,t&&(null===i||void 0===i||i.onMapUnmount(e.id),e.reuseMaps?t.recycle():t.destroy())}}),[]),Lf((function(){s&&s.setProps(e)})),(0,t.useImperativeHandle)(n,(function(){return c.map}),[s]);var h=(0,t.useMemo)((function(){return a({position:"relative",width:"100%",height:"100%"},e.style)}),[e.style]);return t.createElement("div",{id:e.id,ref:u,style:h},s&&t.createElement(Rf.Provider,{value:c},t.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}var zf=n(4164),Nf=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ff(t,e){if(t&&e){var n=t.style;for(var r in e){var i=e[r];Number.isFinite(i)&&!Nf.test(r)?n[r]="".concat(i,"px"):n[r]=i}}}(0,t.memo)((0,t.forwardRef)((function(e,n){var r=(0,t.useContext)(Rf),i=r.map,o=r.mapLib,s=(0,t.useRef)({props:e});s.current.props=e;var l=(0,t.useMemo)((function(){var n=!1;t.Children.forEach(e.children,(function(t){t&&(n=!0)}));var r=a(a({},e),{},{element:n?document.createElement("div"):null}),i=new o.Marker(r);return i.setLngLat([e.longitude,e.latitude]),i.getElement().addEventListener("click",(function(t){var e,n;null===(n=(e=s.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:i,originalEvent:t})})),i.on("dragstart",(function(t){var e,n,r=t;r.lngLat=l.getLngLat(),null===(n=(e=s.current.props).onDragStart)||void 0===n||n.call(e,r)})),i.on("drag",(function(t){var e,n,r=t;r.lngLat=l.getLngLat(),null===(n=(e=s.current.props).onDrag)||void 0===n||n.call(e,r)})),i.on("dragend",(function(t){var e,n,r=t;r.lngLat=l.getLngLat(),null===(n=(e=s.current.props).onDragEnd)||void 0===n||n.call(e,r)})),i}),[]);(0,t.useEffect)((function(){return l.addTo(i.getMap()),function(){l.remove()}}),[]);var u=e.longitude,c=e.latitude,h=e.offset,f=e.style,p=e.draggable,d=void 0!==p&&p,v=e.popup,y=void 0===v?null:v,g=e.rotation,m=void 0===g?0:g,_=e.rotationAlignment,x=void 0===_?"auto":_,b=e.pitchAlignment,w=void 0===b?"auto":b;return(0,t.useEffect)((function(){Ff(l.getElement(),f)}),[f]),(0,t.useImperativeHandle)(n,(function(){return l}),[]),l.getLngLat().lng===u&&l.getLngLat().lat===c||l.setLngLat([u,c]),h&&!function(t,e){var n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}(l.getOffset(),h)&&l.setOffset(h),l.isDraggable()!==d&&l.setDraggable(d),l.getRotation()!==m&&l.setRotation(m),l.getRotationAlignment()!==x&&l.setRotationAlignment(x),l.getPitchAlignment()!==w&&l.setPitchAlignment(w),l.getPopup()!==y&&l.setPopup(y),(0,zf.createPortal)(e.children,l.getElement())})));function Bf(t){return new Set(t?t.trim().split(/\s+/):[])}(0,t.memo)((0,t.forwardRef)((function(e,n){var r=(0,t.useContext)(Rf),i=r.map,o=r.mapLib,s=(0,t.useMemo)((function(){return document.createElement("div")}),[]),l=(0,t.useRef)({props:e});l.current.props=e;var u=(0,t.useMemo)((function(){var t=a({},e),n=new o.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once("open",(function(t){var e,n;null===(n=(e=l.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,t.useEffect)((function(){var t=function(t){var e,n;null===(n=(e=l.current.props).onClose)||void 0===n||n.call(e,t)};return u.on("close",t),u.setDOMContent(s).addTo(i.getMap()),function(){u.off("close",t),u.isOpen()&&u.remove()}}),[]),(0,t.useEffect)((function(){Ff(u.getElement(),e.style)}),[e.style]),(0,t.useImperativeHandle)(n,(function(){return u}),[]),u.isOpen()&&(u.getLngLat().lng===e.longitude&&u.getLngLat().lat===e.latitude||u.setLngLat([e.longitude,e.latitude]),e.offset&&!bf(u.options.offset,e.offset)&&u.setOffset(e.offset),u.options.anchor===e.anchor&&u.options.maxWidth===e.maxWidth||(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){var c,h=Bf(u.options.className),f=Bf(e.className),p=gi(h);try{for(p.s();!(c=p.n()).done;){var d=c.value;f.has(d)||u.removeClassName(d)}}catch(m){p.e(m)}finally{p.f()}var v,y=gi(f);try{for(y.s();!(v=y.n()).done;){var g=v.value;h.has(g)||u.addClassName(g)}}catch(m){y.e(m)}finally{y.f()}u.options.className=e.className}return(0,zf.createPortal)(e.children,s)})));var jf=function(e,n,r,i){var o=(0,t.useContext)(Rf),a=(0,t.useMemo)((function(){return e(o)}),[]);return(0,t.useEffect)((function(){var t=i||r||n,e="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,l=o.map;return l.hasControl(a)||(l.addControl(a,null===t||void 0===t?void 0:t.position),e&&e(o)),function(){s&&s(o),l.hasControl(a)&&l.removeControl(a)}}),[]),a};(0,t.memo)((function(e){var n=jf((function(t){return new t.mapLib.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((function(){Ff(n._container,e.style)}),[e.style]),null}));(0,t.memo)((function(e){var n=jf((function(t){return new t.mapLib.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((function(){Ff(n._controlContainer,e.style)}),[e.style]),null}));(0,t.memo)((0,t.forwardRef)((function(e,n){var r=(0,t.useRef)({props:e}),i=jf((function(t){var n=new t.mapLib.GeolocateControl(e),i=n._setupUI;return n._setupUI=function(t){n._container.hasChildNodes()||i(t)},n.on("geolocate",(function(t){var e,n;null===(n=(e=r.current.props).onGeolocate)||void 0===n||n.call(e,t)})),n.on("error",(function(t){var e,n;null===(n=(e=r.current.props).onError)||void 0===n||n.call(e,t)})),n.on("outofmaxbounds",(function(t){var e,n;null===(n=(e=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(e,t)})),n.on("trackuserlocationstart",(function(t){var e,n;null===(n=(e=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(e,t)})),n.on("trackuserlocationend",(function(t){var e,n;null===(n=(e=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(e,t)})),n}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(function(){return i}),[]),(0,t.useEffect)((function(){Ff(i._container,e.style)}),[e.style]),null})));(0,t.memo)((function(e){var n=jf((function(t){return new t.mapLib.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((function(){Ff(n._container,e.style)}),[e.style]),null}));(0,t.memo)((function(e){var n=jf((function(t){return new t.mapLib.ScaleControl(e)}),{position:e.position}),r=(0,t.useRef)(e),i=r.current;r.current=e;var o=e.style;return void 0!==e.maxWidth&&e.maxWidth!==i.maxWidth&&(n.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==i.unit&&n.setUnit(e.unit),(0,t.useEffect)((function(){Ff(n._container,o)}),[o]),null}));var Uf=Promise.resolve().then(n.t.bind(n,5483,23)),Vf=t.forwardRef((function(t,e){return Of(t,e,Uf)}));var Gf=function(t){var e=t.isSplitView,n=t.setSplitView;return(0,$r.jsxs)("div",{className:"split-view-controller",children:[(0,$r.jsx)("h3",{children:"Side by Side"}),(0,$r.jsx)("button",{className:"floating-infobox-box-toggle-button",onClick:function(){return n(!e)},children:e?"Show Original":"Show Splitview"})]})},qf={position:"absolute",width:"50%",height:"100vh"},Zf={position:"absolute",left:"50%",width:"50%",height:"100vh"};var Wf=function(e){var n=e.originalBusynessHashMap,r=e.busynessHashMap,i=e.initialiseMouseMapEvents,o=ri(),s=o.MAPBOX_ACCESS_TOKEN,l=o.isSplitView,u=o.setSplitView,c=o.renderNeighbourhoods,h=ri().updateLayerColours,f=(0,t.useRef)(),d=(0,t.useRef)(),v=p((0,t.useState)({longitude:-73.9857,latitude:40.7484,zoom:12,pitch:30}),2),y=v[0],g=v[1],m=p((0,t.useState)("side-by-side"),2),_=m[0],x=(m[1],p((0,t.useState)("left"),2)),b=x[0],w=x[1],k=(0,t.useCallback)((function(){return w("left")}),[]),E=(0,t.useCallback)((function(){return w("right")}),[]),S=(0,t.useCallback)((function(t){return g(t.viewState)}),[]),T="undefined"===typeof window?100:window.innerWidth,M=(0,t.useMemo)((function(){return{left:"split-screen"===_?T/1:0,top:0,right:0,bottom:0}}),[T,_]),I=(0,t.useMemo)((function(){return{right:"split-screen"===_?T/1:0,top:0,left:0,bottom:0}}),[T,_]),C=(0,t.useCallback)((function(t){var e=t.target;f.current=e,console.log("r",e),c(e),h(e,!0,n,r),i(e)}),[c,i]),P=(0,t.useCallback)((function(t){var e=t.target;d.current=e,console.log("r",e),c(e),h(e,!1,n,r),i(e)}),[c,i]);return(0,$r.jsx)($r.Fragment,{children:(0,$r.jsxs)("div",{style:{position:"relative",height:"100vh"},children:[(0,$r.jsx)(Vf,a(a({id:"left-map"},y),{},{padding:M,onMoveStart:k,onMove:"left"===b?S:void 0,style:qf,mapStyle:"mapbox://styles/mapbox/dark-v11",mapboxAccessToken:s,onLoad:function(t){return C(t)}})),(0,$r.jsx)(Vf,a(a({id:"right-map"},y),{},{padding:I,onMoveStart:E,onMove:"right"===b?S:void 0,style:Zf,mapStyle:"mapbox://styles/mapbox/dark-v11",mapboxAccessToken:s,onLoad:function(t){return P(t)}})),(0,$r.jsx)(Gf,{isSplitView:l,setSplitView:u})]})})};v().workerClass=n(9437).Z;var Xf=function(){var e=ri(),n=e.MAPBOX_ACCESS_TOKEN,r=e.BASE_API_URL,i=ri(),o=i.add3DBuildings,s=i.renderNeighbourhoods,u=i.updateLayerColours,h=i.renderEvents,f=i.showAllMarkers,d=(i.setEventName,ri()),y=d.neighbourhoods,g=d.prunedEvents,m=ri(),_=m.colourPairIndex,x=m.setColourPairIndex,b=m.colourPairs,w=m.setNeighbourhoodEvents,k=m.eventsMap,E=m.setZone,S=m.setError,T=m.isSplitView,M=ri(),I=M.setShowInfoBox,C=M.setShowNeighborhoodInfoBox,P=M.setShowChart,A=M.setShowChartData,L=M.setZoneID,D=ri(),R=D.originalLat,O=D.originalLng,z=D.zoom,N=D.pitch,F=p((0,t.useState)(null),2),B=F[0],j=F[1],U=p((0,t.useState)(null),2),V=U[0],G=U[1],q=p((0,t.useState)(null),2),Z=(q[0],q[1],p((0,t.useState)(null),2)),W=Z[0],X=Z[1],H=(0,t.useRef)(null),Y=(0,t.useRef)(null),K=(0,t.useRef)(null),J=(0,t.useRef)(!1),Q=(0,t.useRef)(0),$=function(){return u(Y.current,!1,V,rt)},tt=function(){y.features.forEach((function(t){Y.current.setPaintProperty(t.id,"fill-opacity",0)}))},et=function(t){var e=Kt().domain([0,.4,.8]).range(b[t]);if(Y.current&&rt){var n=Y.current.getStyle();y.features.forEach((function(t){if(n.layers.some((function(e){return e.id===t.id}))){var r=rt[t.id];if(void 0!==r){var i=e(r);Y.current.setPaintProperty(t.id,"fill-color",i)}else console.warn("Current layer does not have a score")}else console.warn("Layer with ID ".concat(t.id," doesn't exist"))}))}},nt=function(t){var e=Kt().domain([0,.4,.8]).range(b[_]);y.features.forEach((function(n){t.on("mousemove",n.id,(function(r){if(!J.current){t.getCanvas().style.cursor="pointer",t.setPaintProperty(n.id,"fill-opacity",.9),t.setPaintProperty(n.id+"-line","line-width",4);var i=t.queryRenderedFeatures(r.point,{layers:[n.id]});if(i.length>0){if(!K.current){var o=10,a={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-10],"bottom-left":[5,-5],"bottom-right":[-5,-5],left:[o,-0],right:[-10,-0]};K.current=new(v().Popup)({offset:a,closeButton:!1,closeOnClick:!1})}var s,l=i[0].properties.zone,u=e(n.busyness_score);s=n.busyness_score<.29?"Not Very Busy":n.busyness_score>=.29&&n.busyness_score<.4?"Relatively Busy":n.busyness_score>=.4&&n.busyness_score<.7?"Busy":"Extremely Busy",K.current.setLngLat(r.lngLat).setHTML("".concat(l,': <span style="color: ').concat(u,'">').concat(s," - ").concat(Math.floor(100*n.busyness_score),"</span>")).addTo(t)}}})),t.on("mouseleave",n.id,(function(){J.current||(t.getCanvas().style.cursor="",t.setPaintProperty(n.id,"fill-opacity",.6),t.setPaintProperty(n.id+"-line","line-width",0),K.current&&(K.current.remove(),K.current=null))})),t.on("click",(function(e){var n;null===(n=K.current)||void 0===n||n.remove();var r=t.queryRenderedFeatures(e.point);if(r.length>0&&void 0!==r[0].id){J.current=!0,tt();var i=p(r,1)[0],o=Jt(i.geometry),a=p(fe(o).geometry.coordinates,2),s=a[0],l=a[1];t.flyTo({center:[s,l],zoom:15,essential:!0}),t.setPaintProperty(i.id,"fill-opacity",0);var u=i.properties.zone;L(i.id);var c=k[i.id]||g.filter((function(t){return t.Zone_ID===i.id}));w(c),c.length>0?I(!0):C(!0),E(u)}}))}))},rt=(0,t.useMemo)((function(){return B?B.reduce((function(t,e){return t[e.location_id]=e.busyness_score,t}),{}):{}}),[B]);return(0,t.useEffect)((function(){var t=function(){var e=c(l().mark((function e(){var n,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toISOString().slice(0,10),e.prev=1,e.next=4,fetch("".concat(r,"/baseline/").concat(n));case 4:if((i=e.sent).ok){e.next=7;break}throw new Error("Network response was not ok");case 7:return e.next=9,i.json();case 9:o=e.sent,console.log(o),j(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),Q.current<3?(Q.current++,setTimeout((function(){t()}),1e4)):S("Failed to fetch scores after three attempts");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();t()}),[]),(0,t.useEffect)((function(){!V&&Object.keys(rt).length>0&&G(a({},rt))}),[rt,V]),(0,t.useEffect)((function(){!function(){if(rt&&V){var t={};for(var e in rt)V.hasOwnProperty(e)?t[e]=rt[e]-V[e]:t[e]=rt[e];X(t)}}()}),[rt]),(0,t.useEffect)((function(){!Y.current&&B&&(v().accessToken=n,Y.current=new(v().Map)({container:H.current,style:"mapbox://styles/mapbox/dark-v11",center:[O,R],zoom:z,pitch:N}),Y.current.on("load",(function(){Y.current.flyTo({zoom:12,essential:!0,center:[O,R]}),s(Y.current),o(Y.current),h(Y.current),nt(Y.current),setTimeout((function(){u(Y.current,!1,V,rt)}),800)})),Y.current.on("moveend",(function(){!0===J.current&&Y.current.getZoom()})))}),[B]),(0,t.useEffect)((function(){return Y.current&&(Y.current.isStyleLoaded()?u(Y.current,!1,V,rt):Y.current.on("style.load",$)),function(){Y.current&&Y.current.off("style.load",$)}}),[B]),(0,$r.jsx)("div",{children:(0,$r.jsx)("div",{ref:H,style:{width:"100%",height:"100vh"},children:T?(0,$r.jsx)(Wf,{originalBusynessHashMap:V,busynessHashMap:rt,initialiseMouseMapEvents:nt}):(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsx)(li,{}),(0,$r.jsx)(ii,{map:Y,disableColours:tt,isNeighbourhoodClickedRef:J,changeColourScheme:function(){x((function(t){var e=(t+1)%b.length;return et(e),e}))},enableColours:function(){I(!1),C(!1),A(!1),P(!1),w([]),f(Y.current),u(Y.current,!0,V,rt),J.current=!1,y.features.forEach((function(t){Y.current.setPaintProperty(t.id,"fill-opacity",.6),Y.current.setPaintProperty(t.id+"-line","line-width",0)})),Y.current.flyTo({zoom:12,essential:!0,center:[O,R]})}}),(0,$r.jsx)(df,{map:Y,visualiseEventImpact:function(t){w([]),J.current=!1,y.features.forEach((function(t){Y.current.setPaintProperty(t.id,"fill-opacity",.6),Y.current.setPaintProperty(t.id+"-line","line-width",0)})),Y.current.flyTo({zoom:12,essential:!0,center:[O,R]}),setTimeout((function(){!function(t){var e=(new Date).toISOString().slice(0,10);console.log("this is the EID being passed in",t),fetch("".concat(r,"/predict/").concat(e,"/").concat(t)).then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(t){return j(t)})).catch((function(t){console.error("Issue with fetch request for prediction:",t),S(t)}))}(t)}),900)},highlightEventImpact:function(t,e){J.current=!0,y.features.forEach((function(n){var r=e.includes(n.id)?.7:.1,i=e.includes(n.id)?1:0;if(Y.current.setPaintProperty(n.id,"fill-opacity",r),Y.current.setPaintProperty(n.id+"-line","line-width",i),console.log(n),n.id==t){var o=!1;setInterval((function(){o=!o,Y.current.setPaintProperty(t,"fill-opacity",o?.9:.3)}),500)}e.includes(n.id)&&(Y.current.off("mousemove",n.id),Y.current.off("mouseleave",n.id),Y.current.on("mousemove",n.id,(function(t){Y.current.getCanvas().style.cursor="pointer",Y.current.setPaintProperty(n.id,"fill-opacity",.9),Y.current.setPaintProperty(n.id+"-line","line-width",4);var e=Y.current.queryRenderedFeatures(t.point,{layers:[n.id]});if(e.length>0){if(!K.current){var r=10,i={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-10],"bottom-left":[5,-5],"bottom-right":[-5,-5],left:[r,-0],right:[-10,-0]};K.current=new(v().Popup)({offset:i,closeButton:!1,closeOnClick:!1})}var o=e[0].properties.zone;K.current.setLngLat(t.lngLat).setHTML("".concat(o,", ").concat(n.id)).addTo(Y.current)}})),Y.current.on("mouseleave",n.id,(function(){e.includes(n.id)&&(Y.current.getCanvas().style.cursor="",Y.current.setPaintProperty(n.id,"fill-opacity",r),Y.current.setPaintProperty(n.id+"-line","line-width",i)),K.current&&(K.current.remove(),K.current=null)})))})),Y.current.setPaintProperty(t,"fill-opacity",.7),Y.current.setPaintProperty(t+"-line","line-width",4)},resetColours:function(){y.features.forEach((function(t){Y.current.setPaintProperty(t.id,"fill-opacity",.6),Y.current.setPaintProperty(t.id+"-line","line-width",0)})),J.current=!1},originalBusynessHashMap:V,busynessHashMap:rt,hashMapOfDifference:W,colours:b[_]}),(0,$r.jsx)(vf,{colours:b[_]})]})})})};var Hf=function(){var e=ri(),n=e.MAPBOX_ACCESS_TOKEN,r=e.BASE_API_URL,i=ri(),o=i.add3DBuildings,s=i.renderNeighbourhoods,u=i.updateLayerColours,h=i.renderEvents,f=i.neighbourhoods,d=i.prunedEvents,y=i.layerIds,g=ri(),m=g.colourPairIndex,_=g.setColourPairIndex,x=(g.neighbourhoodEvents,g.setNeighbourhoodEvents),b=g.eventsMap,w=(g.setEventsMap,g.zone,g.setZone),k=(g.error,g.setError),E=g.isSplitView,S=(g.setSplitView,ri()),T=(S.showInfoBox,S.setShowInfoBox),M=(S.showNeighborhoodInfoBox,S.setShowNeighborhoodInfoBox),I=(S.showChart,S.setShowChart),C=(S.showChartData,S.setShowChartData),P=ri(),A=P.originalLat,L=P.originalLng,D=P.zoom,R=P.pitch,O=p((0,t.useState)(null),2),z=O[0],N=O[1],F=p((0,t.useState)(null),2),B=F[0],j=F[1],U=p((0,t.useState)(null),2),V=U[0],G=U[1],q=(0,t.useRef)(null),Z=(0,t.useRef)(null),W=(0,t.useRef)(null),X=(0,t.useRef)(!1),H=(0,t.useRef)(0),Y=function(){return u(Z.current,!1,B,$)},K=[["#008000","#FFBF00","#FF0000"],["#FFD700","#9ACD32","#008000"],["#FF69B4","#C71585","#800080"],["#00BFFF","#1E90FF","#4169E1"],["#32CD32","#228B22","#006400"],["#CD5C5C","#B22222","#8B0000"],["#A9A9A9","#696969","#2F4F4F"],["#BA55D3","#9932CC","#8B008B"],["#4169E1","#0000CD","#191970"]],J=function(){f.features.forEach((function(t){Z.current.setPaintProperty(t.id,"fill-opacity",0)}))},Q=function(t){var e=Kt().domain([0,.5,1]).range(K[t]);if(Z.current&&$){var n=Z.current.getStyle();y.forEach((function(t){if(n.layers.some((function(e){return e.id===t}))){var r=$[t];if(void 0!==r){var i=e(r);Z.current.setPaintProperty(t,"fill-color",i)}else console.warn("Current layer does not have a score")}else console.warn("Layer with ID ".concat(t," doesn't exist"))}))}},$=(0,t.useMemo)((function(){return z?z.reduce((function(t,e){return t[e.location_id]=e.busyness_score,t}),{}):{}}),[z]);return(0,t.useEffect)((function(){var t=function(){var e=c(l().mark((function e(){var n,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toISOString().slice(0,10),e.prev=1,e.next=4,fetch("".concat(r,"/baseline/").concat(n));case 4:if((i=e.sent).ok){e.next=7;break}throw new Error("Network response was not ok");case 7:return e.next=9,i.json();case 9:o=e.sent,N(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),H.current<3?(H.current++,setTimeout((function(){t()}),1e4)):k("Failed to fetch scores after three attempts");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();t()}),[]),(0,t.useEffect)((function(){!B&&Object.keys($).length>0&&j(a({},$))}),[$,B]),(0,t.useEffect)((function(){!function(){if($&&B){var t={};for(var e in $)B.hasOwnProperty(e)?t[e]=$[e]-B[e]:t[e]=$[e];G(t)}}()}),[$]),(0,t.useEffect)((function(){!Z.current&&z&&(v().accessToken=n,Z.current=new(v().Map)({container:q.current,style:"mapbox://styles/mapbox/dark-v11",center:[L,A],zoom:D,pitch:R}),Z.current.on("load",(function(){Z.current.flyTo({zoom:12,essential:!0,center:[L,A]}),s(Z.current),o(Z.current),h(Z.current),y.forEach((function(t){var e=t+"-line";Z.current.on("mousemove",t,(function(n){if(!X.current){Z.current.getCanvas().style.cursor="pointer",Z.current.setPaintProperty(t,"fill-opacity",.9),Z.current.setPaintProperty(e,"line-width",4);var r=Z.current.queryRenderedFeatures(n.point,{layers:[t]});if(r.length>0){if(!W.current){var i={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-10],"bottom-left":[5,-5],"bottom-right":[-5,-5],left:[10,-0],right:[-10,-0]};W.current=new(v().Popup)({offset:i,closeButton:!1,closeOnClick:!1})}var o=r[0].properties.zone;W.current.setLngLat(n.lngLat).setHTML("".concat(o,", ").concat(t)).addTo(Z.current)}}})),Z.current.on("mouseleave",t,(function(){X.current||(Z.current.getCanvas().style.cursor="",Z.current.setPaintProperty(t,"fill-opacity",.6),Z.current.setPaintProperty(e,"line-width",0),W.current&&(W.current.remove(),W.current=null))})),Z.current.on("click",(function(t){var e;null===(e=W.current)||void 0===e||e.remove();var n=Z.current.queryRenderedFeatures(t.point);if(n.length>0&&void 0!==n[0].id){X.current=!0,J();var r=p(n,1)[0],i=Jt(r.geometry),o=p(fe(i).geometry.coordinates,2),a=o[0],s=o[1];Z.current.flyTo({center:[a,s],zoom:15,essential:!0}),Z.current.setPaintProperty(r.id,"fill-opacity",0);var l=r.properties.zone,u=b[r.id]||d.filter((function(t){return t.Zone_ID===r.id}));x(u),u.length>0?T(!0):M(!0),w(l)}}))})),setTimeout((function(){u(Z.current,!1,B,$)}),800)})),Z.current.on("moveend",(function(){!0===X.current&&Z.current.getZoom()})))}),[z]),(0,t.useEffect)((function(){return Z.current&&(Z.current.isStyleLoaded()?u(Z.current,!1,B,$):Z.current.on("style.load",Y)),function(){Z.current&&Z.current.off("style.load",Y)}}),[z]),(0,$r.jsx)("div",{children:(0,$r.jsx)("div",{ref:q,style:{width:"100%",height:"100vh"},children:E?(0,$r.jsx)(Wf,{}):(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsx)(li,{}),(0,$r.jsx)(ii,{map:Z,disableColours:J,isNeighbourhoodClickedRef:X,changeColourScheme:function(){_((function(t){var e=(t+1)%K.length;return Q(e),e}))},enableColours:function(){T(!1),M(!1),C(!1),I(!1),x([]),u((Z.current,$)),X.current=!1,f.features.forEach((function(t){Z.current.setPaintProperty(t.id,"fill-opacity",.6),Z.current.setPaintProperty(t.id+"-line","line-width",0)})),Z.current.flyTo({zoom:12,essential:!0,center:[L,A]})}}),(0,$r.jsx)(df,{map:Z,visualiseEventImpact:function(){x([]),X.current=!1,f.features.forEach((function(t){Z.current.setPaintProperty(t.id,"fill-opacity",.6),Z.current.setPaintProperty(t.id+"-line","line-width",0)})),Z.current.flyTo({zoom:12,essential:!0,center:[L,A]}),setTimeout((function(){!function(){var t=(new Date).toISOString().slice(0,10);fetch("".concat(r,"/predict/").concat(t)).then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(t){return N(t)})).catch((function(t){console.error("Issue with fetch request for prediction:",t)}))}()}),600)},highlightEventImpact:function(t,e){X.current=!0,y.forEach((function(t){var n=e.includes(t)?.7:.1,r=e.includes(t)?1:0;Z.current.setPaintProperty(t,"fill-opacity",n),Z.current.setPaintProperty(t+"-line","line-width",r),e.includes(t)&&(Z.current.off("mousemove",t),Z.current.off("mouseleave",t),Z.current.on("mousemove",t,(function(e){Z.current.getCanvas().style.cursor="pointer",Z.current.setPaintProperty(t,"fill-opacity",.9),Z.current.setPaintProperty(t+"-line","line-width",4);var n=Z.current.queryRenderedFeatures(e.point,{layers:[t]});if(n.length>0){if(!W.current){var r=10,i={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-10],"bottom-left":[5,-5],"bottom-right":[-5,-5],left:[r,-0],right:[-10,-0]};W.current=new(v().Popup)({offset:i,closeButton:!1,closeOnClick:!1})}var o=n[0].properties.zone;W.current.setLngLat(e.lngLat).setHTML("".concat(o,", ").concat(t)).addTo(Z.current)}})),Z.current.on("mouseleave",t,(function(){e.includes(t)&&(Z.current.getCanvas().style.cursor="",Z.current.setPaintProperty(t,"fill-opacity",n),Z.current.setPaintProperty(t+"-line","line-width",r)),W.current&&(W.current.remove(),W.current=null)})))})),Z.current.setPaintProperty(t,"fill-opacity",.7),Z.current.setPaintProperty(t+"-line","line-width",4)},resetColours:function(){f.features.forEach((function(t){Z.current.setPaintProperty(t.id,"fill-opacity",.6),Z.current.setPaintProperty(t.id+"-line","line-width",0)})),X.current=!1},originalBusynessHashMap:B,busynessHashMap:$,hashMapOfDifference:V,colours:K[m]}),(0,$r.jsx)(vf,{colours:K[m]})]})})})};var Yf=function(){return(0,$r.jsx)(ni,{children:(0,$r.jsx)("div",{className:"App",children:"undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?(0,$r.jsx)(Hf,{}):(0,$r.jsx)(Xf,{})})})};e.createRoot(document.getElementById("root")).render((0,$r.jsx)(t.StrictMode,{children:(0,$r.jsx)(Yf,{})}))}()}();
//# sourceMappingURL=main.e0aa3fc9.js.map